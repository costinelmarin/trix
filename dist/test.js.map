{"version":3,"file":"test.js","sources":["../src/trix/config/attachments.js","../src/trix/config/block_attributes.js","../src/trix/config/browser.js","../src/trix/config/css.js","../src/trix/config/lang.js","../src/trix/config/file_size_formatting.js","../src/trix/constants.js","../src/trix/core/helpers/extend.js","../src/trix/core/helpers/dom.js","../src/trix/config/input.js","../src/trix/config/key_names.js","../src/trix/config/text_attributes.js","../src/trix/config/toolbar.js","../src/trix/config/undo_interval.js","../src/trix/config.js","../src/trix/core/basic_object.js","../src/trix/core/utilities/utf16_string.js","../src/trix/core/object.js","../src/trix/core/helpers/arrays.js","../src/trix/core/helpers/bidi.js","../src/trix/core/helpers/config.js","../src/trix/core/helpers/custom_elements.js","../src/trix/core/helpers/events.js","../src/trix/core/helpers/functions.js","../src/trix/core/helpers/objects.js","../src/trix/core/helpers/ranges.js","../src/trix/observers/selection_change_observer.js","../src/trix/core/helpers/strings.js","../src/trix/core/collections/hash.js","../src/trix/core/utilities/operation.js","../src/trix/operations/image_preload_operation.js","../src/trix/models/attachment.js","../src/trix/models/managed_attachment.js","../src/trix/models/attachment_manager.js","../src/trix/models/piece.js","../src/trix/models/attachment_piece.js","../src/trix/models/string_piece.js","../src/trix/models/splittable_list.js","../src/trix/models/text.js","../src/trix/models/block.js","../src/trix/core/collections/object_map.js","../src/trix/models/document.js","../src/trix/models/html_sanitizer.js","../src/trix/models/html_parser.js","../src/trix/models/line_break_insertion.js","../src/trix/models/composition.js","../src/trix/models/undo_manager.js","../src/trix/filters/attachment_gallery_filter.js","../src/trix/models/editor.js","../src/trix/models/location_mapper.js","../src/trix/models/point_mapper.js","../src/trix/models/selection_manager.js","../src/trix/models.js","../src/trix/global.js","../src/trix/core/collections/object_group.js","../src/trix/core/collections/element_store.js","../src/trix/views/object_view.js","../src/trix/views/attachment_view.js","../src/trix/views/previewable_attachment_view.js","../src/trix/views/piece_view.js","../src/trix/views/text_view.js","../src/trix/views/block_view.js","../src/trix/views/document_view.js","../src/trix/core/serialization.js","../src/trix/observers/mutation_observer.js","../src/trix/controllers/controller.js","../src/trix/operations/file_verification_operation.js","../src/trix/controllers/input_controller.js","../src/trix/controllers/level_0_input_controller.js","../src/trix/controllers/level_2_input_controller.js","../src/trix/controllers/attachment_editor_controller.js","../src/trix/controllers/composition_controller.js","../src/trix/controllers/toolbar_controller.js","../src/trix/controllers/editor_controller.js","../src/trix/elements/trix_toolbar_element.js","../src/trix/elements/trix_editor_element.js","../src/trix/core/helpers/global.js","../src/test/test_helpers/event_helpers.js","../src/test/test_helpers/assertions.js","../src/test/test_helpers/fixtures/editor_default_aria_label.js","../src/test/test_helpers/fixtures/editor_empty.js","../src/test/test_helpers/fixtures/editor_html.js","../src/test/test_helpers/fixtures/editor_in_table.js","../src/test/test_helpers/fixtures/editor_with_block_styles.js","../src/test/test_helpers/fixtures/editor_with_bold_styles.js","../src/test/test_helpers/fixtures/test_image_url.js","../src/test/test_helpers/fixtures/editor_with_image.js","../src/test/test_helpers/fixtures/editor_with_labels.js","../src/test/test_helpers/fixtures/editor_with_styled_content.js","../src/test/test_helpers/fixtures/editor_with_toolbar_and_input.js","../src/test/test_helpers/fixtures/editors_with_forms.js","../src/test/test_helpers/fixtures/fixtures.js","../src/test/test_helpers/test_helpers.js","../src/test/test_helpers/test_stubs.js","../src/test/test_helpers/functions.js","../node_modules/rangy/lib/rangy-core.js","../node_modules/rangy/lib/rangy-textrange.js","../src/test/test_helpers/selection_helpers.js","../src/test/test_helpers/input_helpers.js","../src/test/test_helpers/editor_helpers.js","../src/test/test_helpers/toolbar_helpers.js","../src/test/test_helper.js","../src/test/unit/attachment_test.js","../src/test/unit/block_test.js","../src/test/unit/composition_test.js","../src/test/unit/document_test.js","../src/test/unit/document_view_test.js","../src/test/unit/html_parser_test.js","../src/test/unit/location_mapper_test.js","../src/test/unit/mutation_observer_test.js","../src/test/unit/serialization_test.js","../src/test/unit/string_change_summary_test.js","../src/test/unit/text_test.js","../src/test/system/accessibility_test.js","../src/test/system/attachment_caption_test.js","../src/test/system/attachment_gallery_test.js","../src/test/system/attachment_test.js","../src/test/system/basic_input_test.js","../src/test/system/block_formatting_test.js","../src/test/system/caching_test.js","../src/test/system/canceled_input_test.js","../src/test/system/composition_input_test.js","../src/test/system/cursor_movement_test.js","../src/test/system/custom_element_test.js","../src/test/system/html_loading_test.js","../src/test/system/html_reparsing_test.js","../src/test/system/html_replacement_test.js","../src/test/system/installation_process_test.js","../src/test/system/level_2_input_test.js","../src/test/system/list_formatting_test.js","../src/test/system/mutation_input_test.js","../src/test/system/pasting_test.js","../src/test/system/text_formatting_test.js","../src/test/system/undo_test.js","../src/test/test.js"],"sourcesContent":["export const attachmentSelector = \"[data-trix-attachment]\"\n\nconst attachments = {\n  preview: {\n    presentation: \"gallery\",\n    caption: {\n      name: true,\n      size: true,\n    },\n  },\n  file: {\n    caption: {\n      size: true,\n    },\n  },\n}\nexport default attachments\n","const attributes = {\n  default: {\n    tagName: \"div\",\n    parse: false,\n  },\n  quote: {\n    tagName: \"blockquote\",\n    nestable: true,\n  },\n  heading1: {\n    tagName: \"h1\",\n    terminal: true,\n    breakOnReturn: true,\n    group: false,\n  },\n  code: {\n    tagName: \"pre\",\n    terminal: true,\n    text: {\n      plaintext: true,\n    },\n  },\n  bulletList: {\n    tagName: \"ul\",\n    parse: false,\n  },\n  bullet: {\n    tagName: \"li\",\n    listAttribute: \"bulletList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return (\n        tagName(element.parentNode) === attributes[this.listAttribute].tagName\n      );\n    },\n  },\n  numberList: {\n    tagName: \"ol\",\n    parse: false,\n  },\n  number: {\n    tagName: \"li\",\n    listAttribute: \"numberList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return (\n        tagName(element.parentNode) === attributes[this.listAttribute].tagName\n      );\n    },\n  },\n  attachmentGallery: {\n    tagName: \"div\",\n    exclusive: true,\n    terminal: true,\n    parse: false,\n    group: false,\n  },\n  alignLeft: {\n    tagName: \"align-left\",\n    nestable: false,\n    exclusive: true,\n  },\n  alignCenter: {\n    tagName: \"align-center\",\n    nestable: false,\n    exclusive: true,\n  },\n  alignRight: {\n    tagName: \"align-right\",\n    nestable: false,\n    exclusive: true,\n  },\n};\n\nconst tagName = (element) => element?.tagName?.toLowerCase();\n\nexport default attributes;\n","export default {\n  // Android emits composition events when moving the cursor through existing text\n  // Introduced in Chrome 65: https://bugs.chromium.org/p/chromium/issues/detail?id=764439#c9\n  composesExistingText: /Android.*Chrome/.test(navigator.userAgent),\n  // IE 11 activates resizing handles on editable elements that have \"layout\"\n  forcesObjectResizing: /Trident.*rv:11/.test(navigator.userAgent),\n  // https://www.w3.org/TR/input-events-1/ + https://www.w3.org/TR/input-events-2/\n  supportsInputEvents: (function() {\n    if (typeof InputEvent === \"undefined\") {\n      return false\n    }\n    for (const property of [ \"data\", \"getTargetRanges\", \"inputType\" ]) {\n      if (!(property in InputEvent.prototype)) {\n        return false\n      }\n    }\n    return true\n  })(),\n}\n","export default {\n  attachment: \"attachment\",\n  attachmentCaption: \"attachment__caption\",\n  attachmentCaptionEditor: \"attachment__caption-editor\",\n  attachmentMetadata: \"attachment__metadata\",\n  attachmentMetadataContainer: \"attachment__metadata-container\",\n  attachmentName: \"attachment__name\",\n  attachmentProgress: \"attachment__progress\",\n  attachmentSize: \"attachment__size\",\n  attachmentToolbar: \"attachment__toolbar\",\n  attachmentGallery: \"attachment-gallery\",\n}\n","export default {\n  attachFiles: \"Attach Files\",\n  bold: \"Bold\",\n  bullets: \"Bullets\",\n  byte: \"Byte\",\n  bytes: \"Bytes\",\n  captionPlaceholder: \"Add a caption…\",\n  code: \"Code\",\n  heading1: \"Heading\",\n  indent: \"Increase Level\",\n  italic: \"Italic\",\n  link: \"Link\",\n  numbers: \"Numbers\",\n  outdent: \"Decrease Level\",\n  quote: \"Quote\",\n  redo: \"Redo\",\n  remove: \"Remove\",\n  strike: \"Strikethrough\",\n  undo: \"Undo\",\n  unlink: \"Unlink\",\n  url: \"URL\",\n  urlPlaceholder: \"Enter a URL…\",\n  GB: \"GB\",\n  KB: \"KB\",\n  MB: \"MB\",\n  PB: \"PB\",\n  TB: \"TB\",\n}\n","/* eslint-disable\n    no-case-declarations,\n*/\nimport lang from \"trix/config/lang\"\n\nconst sizes = [ lang.bytes, lang.KB, lang.MB, lang.GB, lang.TB, lang.PB ]\n\nexport default {\n  prefix: \"IEC\",\n  precision: 2,\n\n  formatter(number) {\n    switch (number) {\n      case 0:\n        return `0 ${lang.bytes}`\n      case 1:\n        return `1 ${lang.byte}`\n      default:\n        let base\n\n        if (this.prefix === \"SI\") {\n          base = 1000\n        } else if (this.prefix === \"IEC\") {\n          base = 1024\n        }\n\n        const exp = Math.floor(Math.log(number) / Math.log(base))\n        const humanSize = number / Math.pow(base, exp)\n        const string = humanSize.toFixed(this.precision)\n        const withoutInsignificantZeros = string.replace(/0*$/, \"\").replace(/\\.$/, \"\")\n        return `${withoutInsignificantZeros} ${sizes[exp]}`\n    }\n  },\n}\n","export const ZERO_WIDTH_SPACE = \"\\uFEFF\"\nexport const NON_BREAKING_SPACE = \"\\u00A0\"\nexport const OBJECT_REPLACEMENT_CHARACTER = \"\\uFFFC\"\n","export const extend = function(properties) {\n  for (const key in properties) {\n    const value = properties[key]\n    this[key] = value\n  }\n  return this\n}\n","import blockAttributes from \"trix/config/block_attributes\"\nimport { ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport { extend } from \"./extend\"\nimport { attachmentSelector } from \"trix/config/attachments\"\n\nconst html = document.documentElement\nconst match = html.matches\n\nexport const handleEvent = function(eventName, { onElement, matchingSelector, withCallback, inPhase, preventDefault, times } = {}) {\n  const element = onElement ? onElement : html\n  const selector = matchingSelector\n  const useCapture = inPhase === \"capturing\"\n\n  const handler = function(event) {\n    if (times != null && --times === 0) {\n      handler.destroy()\n    }\n    const target = findClosestElementFromNode(event.target, { matchingSelector: selector })\n    if (target != null) {\n      withCallback?.call(target, event, target)\n      if (preventDefault) {\n        event.preventDefault()\n      }\n    }\n  }\n\n  handler.destroy = () => element.removeEventListener(eventName, handler, useCapture)\n\n  element.addEventListener(eventName, handler, useCapture)\n  return handler\n}\n\nexport const handleEventOnce = function(eventName, options = {}) {\n  options.times = 1\n  return handleEvent(eventName, options)\n}\n\nexport const triggerEvent = function(eventName, { onElement, bubbles, cancelable, attributes } = {}) {\n  const element = onElement != null ? onElement : html\n  bubbles = bubbles !== false\n  cancelable = cancelable !== false\n\n  const event = document.createEvent(\"Events\")\n  event.initEvent(eventName, bubbles, cancelable)\n  if (attributes != null) {\n    extend.call(event, attributes)\n  }\n  return element.dispatchEvent(event)\n}\n\nexport const elementMatchesSelector = function(element, selector) {\n  if (element?.nodeType === 1) {\n    return match.call(element, selector)\n  }\n}\n\nexport const findClosestElementFromNode = function(node, { matchingSelector, untilNode } = {}) {\n  while (node && node.nodeType !== Node.ELEMENT_NODE) {\n    node = node.parentNode\n  }\n  if (node == null) {\n    return\n  }\n\n  if (matchingSelector != null) {\n    if (node.closest && untilNode == null) {\n      return node.closest(matchingSelector)\n    } else {\n      while (node && node !== untilNode) {\n        if (elementMatchesSelector(node, matchingSelector)) {\n          return node\n        }\n        node = node.parentNode\n      }\n    }\n  } else {\n    return node\n  }\n}\n\nexport const findInnerElement = function(element) {\n  while (element?.firstElementChild) {\n    element = element.firstElementChild\n  }\n  return element\n}\n\nexport const innerElementIsActive = (element) =>\n  document.activeElement !== element && elementContainsNode(element, document.activeElement)\n\nexport const elementContainsNode = function(element, node) {\n  if (!element || !node) {\n    return\n  }\n  while (node) {\n    if (node === element) {\n      return true\n    }\n    node = node.parentNode\n  }\n}\n\nexport const findNodeFromContainerAndOffset = function(container, offset) {\n  if (!container) {\n    return\n  }\n  if (container.nodeType === Node.TEXT_NODE) {\n    return container\n  } else if (offset === 0) {\n    return container.firstChild != null ? container.firstChild : container\n  } else {\n    return container.childNodes.item(offset - 1)\n  }\n}\n\nexport const findElementFromContainerAndOffset = function(container, offset) {\n  const node = findNodeFromContainerAndOffset(container, offset)\n  return findClosestElementFromNode(node)\n}\n\nexport const findChildIndexOfNode = function(node) {\n  if (!node?.parentNode) {\n    return\n  }\n  let childIndex = 0\n  node = node.previousSibling\n  while (node) {\n    childIndex++\n    node = node.previousSibling\n  }\n  return childIndex\n}\n\nexport const removeNode = (node) => node?.parentNode?.removeChild(node)\n\nexport const walkTree = function(tree, { onlyNodesOfType, usingFilter, expandEntityReferences } = {}) {\n  const whatToShow = (() => {\n    switch (onlyNodesOfType) {\n      case \"element\":\n        return NodeFilter.SHOW_ELEMENT\n      case \"text\":\n        return NodeFilter.SHOW_TEXT\n      case \"comment\":\n        return NodeFilter.SHOW_COMMENT\n      default:\n        return NodeFilter.SHOW_ALL\n    }\n  })()\n\n  return document.createTreeWalker(\n    tree,\n    whatToShow,\n    usingFilter != null ? usingFilter : null,\n    expandEntityReferences === true\n  )\n}\n\nexport const tagName = (element) => element?.tagName?.toLowerCase()\n\nexport const makeElement = function(tag, options = {}) {\n  let key, value\n  if (typeof tag === \"object\") {\n    options = tag\n    tag = options.tagName\n  } else {\n    options = { attributes: options }\n  }\n\n  const element = document.createElement(tag)\n\n  if (options.editable != null) {\n    if (options.attributes == null) {\n      options.attributes = {}\n    }\n    options.attributes.contenteditable = options.editable\n  }\n\n  if (options.attributes) {\n    for (key in options.attributes) {\n      value = options.attributes[key]\n      element.setAttribute(key, value)\n    }\n  }\n\n  if (options.style) {\n    for (key in options.style) {\n      value = options.style[key]\n      element.style[key] = value\n    }\n  }\n\n  if (options.data) {\n    for (key in options.data) {\n      value = options.data[key]\n      element.dataset[key] = value\n    }\n  }\n\n  if (options.className) {\n    options.className.split(\" \").forEach((className) => {\n      element.classList.add(className)\n    })\n  }\n\n  if (options.textContent) {\n    element.textContent = options.textContent\n  }\n\n  if (options.childNodes) {\n    [].concat(options.childNodes).forEach((childNode) => {\n      element.appendChild(childNode)\n    })\n  }\n\n  return element\n}\n\nlet blockTagNames = undefined\n\nexport const getBlockTagNames = function() {\n  if (blockTagNames != null) {\n    return blockTagNames\n  }\n\n  blockTagNames = []\n  for (const key in blockAttributes) {\n    const attributes = blockAttributes[key]\n    if (attributes.tagName) {\n      blockTagNames.push(attributes.tagName)\n    }\n  }\n\n  return blockTagNames\n}\n\nexport const nodeIsBlockContainer = (node) => nodeIsBlockStartComment(node?.firstChild)\n\nexport const nodeProbablyIsBlockContainer = function(node) {\n  return getBlockTagNames().includes(tagName(node)) && !getBlockTagNames().includes(tagName(node.firstChild))\n}\n\nexport const nodeIsBlockStart = function(node, { strict } = { strict: true }) {\n  if (strict) {\n    return nodeIsBlockStartComment(node)\n  } else {\n    return (\n      nodeIsBlockStartComment(node) || !nodeIsBlockStartComment(node.firstChild) && nodeProbablyIsBlockContainer(node)\n    )\n  }\n}\n\nexport const nodeIsBlockStartComment = (node) => nodeIsCommentNode(node) && node?.data === \"block\"\n\nexport const nodeIsCommentNode = (node) => node?.nodeType === Node.COMMENT_NODE\n\nexport const nodeIsCursorTarget = function(node, { name } = {}) {\n  if (!node) {\n    return\n  }\n  if (nodeIsTextNode(node)) {\n    if (node.data === ZERO_WIDTH_SPACE) {\n      if (name) {\n        return node.parentNode.dataset.trixCursorTarget === name\n      } else {\n        return true\n      }\n    }\n  } else {\n    return nodeIsCursorTarget(node.firstChild)\n  }\n}\n\nexport const nodeIsAttachmentElement = (node) => elementMatchesSelector(node, attachmentSelector)\n\nexport const nodeIsEmptyTextNode = (node) => nodeIsTextNode(node) && node?.data === \"\"\n\nexport const nodeIsTextNode = (node) => node?.nodeType === Node.TEXT_NODE\n","import browser from \"trix/config/browser\"\nimport { makeElement, removeNode } from \"trix/core/helpers/dom\"\n\nconst input = {\n  level2Enabled: true,\n\n  getLevel() {\n    if (this.level2Enabled && browser.supportsInputEvents) {\n      return 2\n    } else {\n      return 0\n    }\n  },\n  pickFiles(callback) {\n    const input = makeElement(\"input\", { type: \"file\", multiple: true, hidden: true, id: this.fileInputId })\n\n    input.addEventListener(\"change\", () => {\n      callback(input.files)\n      removeNode(input)\n    })\n\n    removeNode(document.getElementById(this.fileInputId))\n    document.body.appendChild(input)\n    input.click()\n  }\n}\n\nexport default input\n","export default {\n  8: \"backspace\",\n  9: \"tab\",\n  13: \"return\",\n  27: \"escape\",\n  37: \"left\",\n  39: \"right\",\n  46: \"delete\",\n  68: \"d\",\n  72: \"h\",\n  79: \"o\",\n}\n","import { attachmentSelector } from \"trix/config/attachments\"\n\nexport default {\n  bold: {\n    tagName: \"strong\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontWeight === \"bold\" || style.fontWeight >= 600\n    },\n  },\n  italic: {\n    tagName: \"em\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontStyle === \"italic\"\n    },\n  },\n  href: {\n    groupTagName: \"a\",\n    parser(element) {\n      const matchingSelector = `a:not(${attachmentSelector})`\n      const link = element.closest(matchingSelector)\n      if (link) {\n        return link.getAttribute(\"href\")\n      }\n    },\n  },\n  strike: {\n    tagName: \"del\",\n    inheritable: true,\n  },\n  frozen: {\n    style: { backgroundColor: \"highlight\" },\n  },\n}\n","import lang from \"trix/config/lang\"\n\nexport default {\n  getDefaultHTML() {\n    return `<div class=\"trix-button-row\">\n      <span class=\"trix-button-group trix-button-group--text-tools\" data-trix-button-group=\"text-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bold\" data-trix-attribute=\"bold\" data-trix-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-italic\" data-trix-attribute=\"italic\" data-trix-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-strike\" data-trix-attribute=\"strike\" title=\"${lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-link\" data-trix-attribute=\"href\" data-trix-action=\"link\" data-trix-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\n      </span>\n\n      <span class=\"trix-button-group trix-button-group--block-tools\" data-trix-button-group=\"block-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-heading-1\" data-trix-attribute=\"heading1\" title=\"${lang.heading1}\" tabindex=\"-1\">${lang.heading1}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-quote\" data-trix-attribute=\"quote\" title=\"${lang.quote}\" tabindex=\"-1\">${lang.quote}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-code\" data-trix-attribute=\"code\" title=\"${lang.code}\" tabindex=\"-1\">${lang.code}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bullet-list\" data-trix-attribute=\"bullet\" title=\"${lang.bullets}\" tabindex=\"-1\">${lang.bullets}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-number-list\" data-trix-attribute=\"number\" title=\"${lang.numbers}\" tabindex=\"-1\">${lang.numbers}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-decrease-nesting-level\" data-trix-action=\"decreaseNestingLevel\" title=\"${lang.outdent}\" tabindex=\"-1\">${lang.outdent}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-increase-nesting-level\" data-trix-action=\"increaseNestingLevel\" title=\"${lang.indent}\" tabindex=\"-1\">${lang.indent}</button>\n      </span>\n\n      <span class=\"trix-button-group trix-button-group--file-tools\" data-trix-button-group=\"file-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-attach\" data-trix-action=\"attachFiles\" title=\"${lang.attachFiles}\" tabindex=\"-1\">${lang.attachFiles}</button>\n      </span>\n\n      <span class=\"trix-button-group-spacer\"></span>\n\n      <span class=\"trix-button-group trix-button-group--history-tools\" data-trix-button-group=\"history-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-undo\" data-trix-action=\"undo\" data-trix-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-redo\" data-trix-action=\"redo\" data-trix-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\n      </span>\n    </div>\n\n    <div class=\"trix-dialogs\" data-trix-dialogs>\n      <div class=\"trix-dialog trix-dialog--link\" data-trix-dialog=\"href\" data-trix-dialog-attribute=\"href\">\n        <div class=\"trix-dialog__link-fields\">\n          <input type=\"url\" name=\"href\" class=\"trix-input trix-input--dialog\" placeholder=\"${lang.urlPlaceholder}\" aria-label=\"${lang.url}\" required data-trix-input>\n          <div class=\"trix-button-group\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.link}\" data-trix-method=\"setAttribute\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.unlink}\" data-trix-method=\"removeAttribute\">\n          </div>\n        </div>\n      </div>\n    </div>`\n  },\n}\n","const undoInterval = 5000\nexport default undoInterval\n","import attachments from \"trix/config/attachments\"\nimport blockAttributes from \"trix/config/block_attributes\"\nimport browser from \"trix/config/browser\"\nimport css from \"trix/config/css\"\nimport fileSize from \"trix/config/file_size_formatting\"\nimport input from \"trix/config/input\"\nimport keyNames from \"trix/config/key_names\"\nimport lang from \"trix/config/lang\"\nimport textAttributes from \"trix/config/text_attributes\"\nimport toolbar from \"trix/config/toolbar\"\nimport undoInterval from \"trix/config/undo_interval\"\n\nconst config = {\n  attachments,\n  blockAttributes,\n  browser,\n  css,\n  fileSize,\n  input,\n  keyNames,\n  lang,\n  textAttributes,\n  toolbar,\n  undoInterval,\n}\n\nexport default config\n","export default class BasicObject {\n  static proxyMethod(expression) {\n    const { name, toMethod, toProperty, optional } = parseProxyMethodExpression(expression)\n\n    this.prototype[name] = function() {\n      let subject\n      let object\n\n      if (toMethod) {\n        if (optional) {\n          object = this[toMethod]?.()\n        } else {\n          object = this[toMethod]()\n        }\n      } else if (toProperty) {\n        object = this[toProperty]\n      }\n\n      if (optional) {\n        subject = object?.[name]\n        if (subject) {\n          return apply.call(subject, object, arguments)\n        }\n      } else {\n        subject = object[name]\n        return apply.call(subject, object, arguments)\n      }\n    }\n  }\n}\n\nconst parseProxyMethodExpression = function(expression) {\n  const match = expression.match(proxyMethodExpressionPattern)\n  if (!match) {\n    throw new Error(`can't parse @proxyMethod expression: ${expression}`)\n  }\n\n  const args = { name: match[4] }\n\n  if (match[2] != null) {\n    args.toMethod = match[1]\n  } else {\n    args.toProperty = match[1]\n  }\n\n  if (match[3] != null) {\n    args.optional = true\n  }\n\n  return args\n}\n\nconst { apply } = Function.prototype\n\nconst proxyMethodExpressionPattern = new RegExp(\"\\\n^\\\n(.+?)\\\n(\\\\(\\\\))?\\\n(\\\\?)?\\\n\\\\.\\\n(.+?)\\\n$\\\n\")\n","import BasicObject from \"trix/core/basic_object\"\n\nexport default class UTF16String extends BasicObject {\n  static box(value = \"\") {\n    if (value instanceof this) {\n      return value\n    } else {\n      return this.fromUCS2String(value?.toString())\n    }\n  }\n\n  static fromUCS2String(ucs2String) {\n    return new this(ucs2String, ucs2decode(ucs2String))\n  }\n\n  static fromCodepoints(codepoints) {\n    return new this(ucs2encode(codepoints), codepoints)\n  }\n\n  constructor(ucs2String, codepoints) {\n    super(...arguments)\n    this.ucs2String = ucs2String\n    this.codepoints = codepoints\n    this.length = this.codepoints.length\n    this.ucs2Length = this.ucs2String.length\n  }\n\n  offsetToUCS2Offset(offset) {\n    return ucs2encode(this.codepoints.slice(0, Math.max(0, offset))).length\n  }\n\n  offsetFromUCS2Offset(ucs2Offset) {\n    return ucs2decode(this.ucs2String.slice(0, Math.max(0, ucs2Offset))).length\n  }\n\n  slice() {\n    return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))\n  }\n\n  charAt(offset) {\n    return this.slice(offset, offset + 1)\n  }\n\n  isEqualTo(value) {\n    return this.constructor.box(value).ucs2String === this.ucs2String\n  }\n\n  toJSON() {\n    return this.ucs2String\n  }\n\n  getCacheKey() {\n    return this.ucs2String\n  }\n\n  toString() {\n    return this.ucs2String\n  }\n}\n\nconst hasArrayFrom = Array.from?.(\"\\ud83d\\udc7c\").length === 1\nconst hasStringCodePointAt = \" \".codePointAt?.(0) != null\nconst hasStringFromCodePoint = String.fromCodePoint?.(32, 128124) === \" \\ud83d\\udc7c\"\n\n// UCS-2 conversion helpers ported from Mathias Bynens' Punycode.js:\n// https://github.com/bestiejs/punycode.js#punycodeucs2\n\nlet ucs2decode, ucs2encode\n\n// Creates an array containing the numeric code points of each Unicode\n// character in the string. While JavaScript uses UCS-2 internally,\n// this function will convert a pair of surrogate halves (each of which\n// UCS-2 exposes as separate characters) into a single code point,\n// matching UTF-16.\nif (hasArrayFrom && hasStringCodePointAt) {\n  ucs2decode = (string) => Array.from(string).map((char) => char.codePointAt(0))\n} else {\n  ucs2decode = function(string) {\n    const output = []\n    let counter = 0\n    const { length } = string\n\n    while (counter < length) {\n      let value = string.charCodeAt(counter++)\n      if (0xd800 <= value && value <= 0xdbff && counter < length) {\n        // high surrogate, and there is a next character\n        const extra = string.charCodeAt(counter++)\n        if ((extra & 0xfc00) === 0xdc00) {\n          // low surrogate\n          value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000\n        } else {\n          // unmatched surrogate; only append this code unit, in case the\n          // next code unit is the high surrogate of a surrogate pair\n          counter--\n        }\n      }\n      output.push(value)\n    }\n\n    return output\n  }\n}\n\n// Creates a string based on an array of numeric code points.\nif (hasStringFromCodePoint) {\n  ucs2encode = (array) => String.fromCodePoint(...Array.from(array || []))\n} else {\n  ucs2encode = function(array) {\n    const characters = (() => {\n      const result = []\n\n      Array.from(array).forEach((value) => {\n        let output = \"\"\n        if (value > 0xffff) {\n          value -= 0x10000\n          output += String.fromCharCode(value >>> 10 & 0x3ff | 0xd800)\n          value = 0xdc00 | value & 0x3ff\n        }\n        result.push(output + String.fromCharCode(value))\n      })\n\n      return result\n    })()\n\n    return characters.join(\"\")\n  }\n}\n","import BasicObject from \"trix/core/basic_object\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\n\nlet id = 0\n\nexport default class TrixObject extends BasicObject {\n  static fromJSONString(jsonString) {\n    return this.fromJSON(JSON.parse(jsonString))\n  }\n\n  constructor() {\n    super(...arguments)\n    this.id = ++id\n  }\n\n  hasSameConstructorAs(object) {\n    return this.constructor === object?.constructor\n  }\n\n  isEqualTo(object) {\n    return this === object\n  }\n\n  inspect() {\n    const parts = []\n    const contents = this.contentsForInspection() || {}\n\n    for (const key in contents) {\n      const value = contents[key]\n      parts.push(`${key}=${value}`)\n    }\n\n    return `#<${this.constructor.name}:${this.id}${parts.length ? ` ${parts.join(\", \")}` : \"\"}>`\n  }\n\n  contentsForInspection() {}\n\n  toJSONString() {\n    return JSON.stringify(this)\n  }\n\n  toUTF16String() {\n    return UTF16String.box(this)\n  }\n\n  getCacheKey() {\n    return this.id.toString()\n  }\n}\n","/* eslint-disable\n    id-length,\n*/\nexport const arraysAreEqual = function(a = [], b = []) {\n  if (a.length !== b.length) {\n    return false\n  }\n  for (let index = 0; index < a.length; index++) {\n    const value = a[index]\n    if (value !== b[index]) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const arrayStartsWith = (a = [], b = []) => arraysAreEqual(a.slice(0, b.length), b)\n\nexport const spliceArray = function(array, ...args) {\n  const result = array.slice(0)\n  result.splice(...args)\n  return result\n}\n\nexport const summarizeArrayChange = function(oldArray = [], newArray = []) {\n  const added = []\n  const removed = []\n\n  const existingValues = new Set()\n\n  oldArray.forEach((value) => {\n    existingValues.add(value)\n  })\n\n  const currentValues = new Set()\n\n  newArray.forEach((value) => {\n    currentValues.add(value)\n    if (!existingValues.has(value)) {\n      added.push(value)\n    }\n  })\n\n  oldArray.forEach((value) => {\n    if (!currentValues.has(value)) {\n      removed.push(value)\n    }\n  })\n\n  return { added, removed }\n}\n","import { makeElement } from \"trix/core/helpers/dom\"\n\n// https://github.com/mathiasbynens/unicode-2.1.8/blob/master/Bidi_Class/Right_To_Left/regex.js\nconst RTL_PATTERN =\n  /[\\u05BE\\u05C0\\u05C3\\u05D0-\\u05EA\\u05F0-\\u05F4\\u061B\\u061F\\u0621-\\u063A\\u0640-\\u064A\\u066D\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D5\\u06E5\\u06E6\\u200F\\u202B\\u202E\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE72\\uFE74\\uFE76-\\uFEFC]/\n\nexport const getDirection = (function() {\n  const input = makeElement(\"input\", { dir: \"auto\", name: \"x\", dirName: \"x.dir\" })\n  const form = makeElement(\"form\")\n  form.appendChild(input)\n\n  const supportsDirName = (function() {\n    try {\n      return new FormData(form).has(input.dirName)\n    } catch (error) {\n      return false\n    }\n  })()\n\n  const supportsDirSelector = (function() {\n    try {\n      return input.matches(\":dir(ltr),:dir(rtl)\")\n    } catch (error) {\n      return false\n    }\n  })()\n\n  if (supportsDirName) {\n    return function(string) {\n      input.value = string\n      return new FormData(form).get(input.dirName)\n    }\n  } else if (supportsDirSelector) {\n    return function(string) {\n      input.value = string\n      if (input.matches(\":dir(rtl)\")) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  } else {\n    return function(string) {\n      const char = string.trim().charAt(0)\n      if (RTL_PATTERN.test(char)) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  }\n})()\n","import config from \"trix/config\"\n\nlet allAttributeNames = null\nlet blockAttributeNames = null\nlet textAttributeNames = null\nlet listAttributeNames = null\n\nexport const getAllAttributeNames = () => {\n  if (!allAttributeNames) {\n    allAttributeNames = getTextAttributeNames().concat(getBlockAttributeNames())\n  }\n  return allAttributeNames\n}\n\nexport const getBlockConfig = (attributeName) => config.blockAttributes[attributeName]\n\nexport const getBlockAttributeNames = () => {\n  if (!blockAttributeNames) {\n    blockAttributeNames = Object.keys(config.blockAttributes)\n  }\n  return blockAttributeNames\n}\n\nexport const getTextConfig = (attributeName) => config.textAttributes[attributeName]\n\nexport const getTextAttributeNames = () => {\n  if (!textAttributeNames) {\n    textAttributeNames = Object.keys(config.textAttributes)\n  }\n  return textAttributeNames\n}\n\nexport const getListAttributeNames = () => {\n  if (!listAttributeNames) {\n    listAttributeNames = []\n    for (const key in config.blockAttributes) {\n      const { listAttribute } = config.blockAttributes[key]\n      if (listAttribute != null) {\n        listAttributeNames.push(listAttribute)\n      }\n    }\n  }\n  return listAttributeNames\n}\n","/* eslint-disable\n*/\nexport const installDefaultCSSForTagName = function(tagName, defaultCSS) {\n  const styleElement = insertStyleElementForTagName(tagName)\n  styleElement.textContent = defaultCSS.replace(/%t/g, tagName)\n}\n\nconst insertStyleElementForTagName = function(tagName) {\n  const element = document.createElement(\"style\")\n  element.setAttribute(\"type\", \"text/css\")\n  element.setAttribute(\"data-tag-name\", tagName.toLowerCase())\n  const nonce = getCSPNonce()\n  if (nonce) {\n    element.setAttribute(\"nonce\", nonce)\n  }\n  document.head.insertBefore(element, document.head.firstChild)\n  return element\n}\n\nconst getCSPNonce = function() {\n  const element = getMetaElement(\"trix-csp-nonce\") || getMetaElement(\"csp-nonce\")\n  if (element) {\n    return element.getAttribute(\"content\")\n  }\n}\n\nconst getMetaElement = (name) => document.head.querySelector(`meta[name=${name}]`)\n","const testTransferData = { \"application/x-trix-feature-detection\": \"test\" }\n\nexport const dataTransferIsPlainText = function(dataTransfer) {\n  const text = dataTransfer.getData(\"text/plain\")\n  const html = dataTransfer.getData(\"text/html\")\n\n  if (text && html) {\n    const { body } = new DOMParser().parseFromString(html, \"text/html\")\n    if (body.textContent === text) {\n      return !body.querySelector(\"*\")\n    }\n  } else {\n    return text?.length\n  }\n}\n\nexport const dataTransferIsWritable = function(dataTransfer) {\n  if (!dataTransfer?.setData) return false\n\n  for (const key in testTransferData) {\n    const value = testTransferData[key]\n\n    try {\n      dataTransfer.setData(key, value)\n      if (!dataTransfer.getData(key) === value) return false\n    } catch (error) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const keyEventIsKeyboardCommand = (function() {\n  if (/Mac|^iP/.test(navigator.platform)) {\n    return (event) => event.metaKey\n  } else {\n    return (event) => event.ctrlKey\n  }\n})()\n","export const defer = (fn) => setTimeout(fn, 1)\n","/* eslint-disable\n    id-length,\n*/\nexport const copyObject = function(object = {}) {\n  const result = {}\n  for (const key in object) {\n    const value = object[key]\n    result[key] = value\n  }\n  return result\n}\n\nexport const objectsAreEqual = function(a = {}, b = {}) {\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return false\n  }\n  for (const key in a) {\n    const value = a[key]\n    if (value !== b[key]) {\n      return false\n    }\n  }\n  return true\n}\n","import { copyObject, objectsAreEqual } from \"trix/core/helpers/objects\"\n\nexport const normalizeRange = function(range) {\n  if (range == null) return\n\n  if (!Array.isArray(range)) {\n    range = [ range, range ]\n  }\n  return [ copyValue(range[0]), copyValue(range[1] != null ? range[1] : range[0]) ]\n}\n\nexport const rangeIsCollapsed = function(range) {\n  if (range == null) return\n\n  const [ start, end ] = normalizeRange(range)\n  return rangeValuesAreEqual(start, end)\n}\n\nexport const rangesAreEqual = function(leftRange, rightRange) {\n  if (leftRange == null || rightRange == null) return\n\n  const [ leftStart, leftEnd ] = normalizeRange(leftRange)\n  const [ rightStart, rightEnd ] = normalizeRange(rightRange)\n  return rangeValuesAreEqual(leftStart, rightStart) && rangeValuesAreEqual(leftEnd, rightEnd)\n}\n\nconst copyValue = function(value) {\n  if (typeof value === \"number\") {\n    return value\n  } else {\n    return copyObject(value)\n  }\n}\n\nconst rangeValuesAreEqual = function(left, right) {\n  if (typeof left === \"number\") {\n    return left === right\n  } else {\n    return objectsAreEqual(left, right)\n  }\n}\n","/* eslint-disable\n    id-length,\n*/\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class SelectionChangeObserver extends BasicObject {\n  constructor() {\n    super(...arguments)\n    this.update = this.update.bind(this)\n    this.run = this.run.bind(this)\n    this.selectionManagers = []\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      if (\"onselectionchange\" in document) {\n        return document.addEventListener(\"selectionchange\", this.update, true)\n      } else {\n        return this.run()\n      }\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      return document.removeEventListener(\"selectionchange\", this.update, true)\n    }\n  }\n\n  registerSelectionManager(selectionManager) {\n    if (!this.selectionManagers.includes(selectionManager)) {\n      this.selectionManagers.push(selectionManager)\n      return this.start()\n    }\n  }\n\n  unregisterSelectionManager(selectionManager) {\n    this.selectionManagers = this.selectionManagers.filter((s) => s !== selectionManager)\n    if (this.selectionManagers.length === 0) {\n      return this.stop()\n    }\n  }\n\n  notifySelectionManagersOfSelectionChange() {\n    return this.selectionManagers.map((selectionManager) => selectionManager.selectionDidChange())\n  }\n\n  update() {\n    const domRange = getDOMRange()\n    if (!domRangesAreEqual(domRange, this.domRange)) {\n      this.domRange = domRange\n      return this.notifySelectionManagersOfSelectionChange()\n    }\n  }\n\n  reset() {\n    this.domRange = null\n    return this.update()\n  }\n\n  // Private\n\n  run() {\n    if (this.started) {\n      this.update()\n      return requestAnimationFrame(this.run)\n    }\n  }\n}\n\nconst domRangesAreEqual = (left, right) =>\n  left?.startContainer === right?.startContainer &&\n  left?.startOffset === right?.startOffset &&\n  left?.endContainer === right?.endContainer &&\n  left?.endOffset === right?.endOffset\n\nexport const selectionChangeObserver = new SelectionChangeObserver()\n\nexport const getDOMSelection = function() {\n  const selection = window.getSelection()\n  if (selection.rangeCount > 0) {\n    return selection\n  }\n}\n\nexport const getDOMRange = function() {\n  const domRange = getDOMSelection()?.getRangeAt(0)\n  if (domRange) {\n    if (!domRangeIsPrivate(domRange)) {\n      return domRange\n    }\n  }\n}\n\nexport const setDOMRange = function(domRange) {\n  const selection = window.getSelection()\n  selection.removeAllRanges()\n  selection.addRange(domRange)\n  return selectionChangeObserver.update()\n}\n\n// In Firefox, clicking certain <input> elements changes the selection to a\n// private element used to draw its UI. Attempting to access properties of those\n// elements throws an error.\n// https://bugzilla.mozilla.org/show_bug.cgi?id=208427\nconst domRangeIsPrivate = (domRange) => nodeIsPrivate(domRange.startContainer) || nodeIsPrivate(domRange.endContainer)\n\nconst nodeIsPrivate = (node) => !Object.getPrototypeOf(node)\n","/* eslint-disable\n    id-length,\n    no-useless-escape,\n*/\nimport { NON_BREAKING_SPACE, ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\n\nexport const normalizeSpaces = (string) =>\n  string.replace(new RegExp(`${ZERO_WIDTH_SPACE}`, \"g\"), \"\").replace(new RegExp(`${NON_BREAKING_SPACE}`, \"g\"), \" \")\n\nexport const normalizeNewlines = (string) => string.replace(/\\r\\n/g, \"\\n\")\n\nexport const breakableWhitespacePattern = new RegExp(`[^\\\\S${NON_BREAKING_SPACE}]`)\n\nexport const squishBreakableWhitespace = (string) =>\n  string\n    // Replace all breakable whitespace characters with a space\n    .replace(new RegExp(`${breakableWhitespacePattern.source}`, \"g\"), \" \")\n    // Replace two or more spaces with a single space\n    .replace(/\\ {2,}/g, \" \")\n\nexport const summarizeStringChange = function(oldString, newString) {\n  let added, removed\n  oldString = UTF16String.box(oldString)\n  newString = UTF16String.box(newString)\n\n  if (newString.length < oldString.length) {\n    [ removed, added ] = utf16StringDifferences(oldString, newString)\n  } else {\n    [ added, removed ] = utf16StringDifferences(newString, oldString)\n  }\n\n  return { added, removed }\n}\n\nconst utf16StringDifferences = function(a, b) {\n  if (a.isEqualTo(b)) {\n    return [ \"\", \"\" ]\n  }\n\n  const diffA = utf16StringDifference(a, b)\n  const { length } = diffA.utf16String\n\n  let diffB\n\n  if (length) {\n    const { offset } = diffA\n    const codepoints = a.codepoints.slice(0, offset).concat(a.codepoints.slice(offset + length))\n    diffB = utf16StringDifference(b, UTF16String.fromCodepoints(codepoints))\n  } else {\n    diffB = utf16StringDifference(b, a)\n  }\n\n  return [ diffA.utf16String.toString(), diffB.utf16String.toString() ]\n}\n\nconst utf16StringDifference = function(a, b) {\n  let leftIndex = 0\n  let rightIndexA = a.length\n  let rightIndexB = b.length\n\n  while (leftIndex < rightIndexA && a.charAt(leftIndex).isEqualTo(b.charAt(leftIndex))) {\n    leftIndex++\n  }\n\n  while (rightIndexA > leftIndex + 1 && a.charAt(rightIndexA - 1).isEqualTo(b.charAt(rightIndexB - 1))) {\n    rightIndexA--\n    rightIndexB--\n  }\n\n  return {\n    utf16String: a.slice(leftIndex, rightIndexA),\n    offset: leftIndex,\n  }\n}\n","import TrixObject from \"trix/core/object\" // Don't override window.Object\nimport { arraysAreEqual } from \"trix/core/helpers\"\n\nexport default class Hash extends TrixObject {\n  static fromCommonAttributesOfObjects(objects = []) {\n    if (!objects.length) {\n      return new this()\n    }\n    let hash = box(objects[0])\n    let keys = hash.getKeys()\n\n    objects.slice(1).forEach((object) => {\n      keys = hash.getKeysCommonToHash(box(object))\n      hash = hash.slice(keys)\n    })\n\n    return hash\n  }\n\n  static box(values) {\n    return box(values)\n  }\n\n  constructor(values = {}) {\n    super(...arguments)\n    this.values = copy(values)\n  }\n\n  add(key, value) {\n    return this.merge(object(key, value))\n  }\n\n  remove(key) {\n    return new Hash(copy(this.values, key))\n  }\n\n  get(key) {\n    return this.values[key]\n  }\n\n  has(key) {\n    return key in this.values\n  }\n\n  merge(values) {\n    return new Hash(merge(this.values, unbox(values)))\n  }\n\n  slice(keys) {\n    const values = {}\n\n    keys.forEach((key) => {\n      if (this.has(key)) {\n        values[key] = this.values[key]\n      }\n    })\n\n    return new Hash(values)\n  }\n\n  getKeys() {\n    return Object.keys(this.values)\n  }\n\n  getKeysCommonToHash(hash) {\n    hash = box(hash)\n    return this.getKeys().filter((key) => this.values[key] === hash.values[key])\n  }\n\n  isEqualTo(values) {\n    return arraysAreEqual(this.toArray(), box(values).toArray())\n  }\n\n  isEmpty() {\n    return this.getKeys().length === 0\n  }\n\n  toArray() {\n    if (!this.array) {\n      const result = []\n      for (const key in this.values) {\n        const value = this.values[key]\n        result.push(result.push(key, value))\n      }\n      this.array = result.slice(0)\n    }\n\n    return this.array\n  }\n\n  toObject() {\n    return copy(this.values)\n  }\n\n  toJSON() {\n    return this.toObject()\n  }\n\n  contentsForInspection() {\n    return { values: JSON.stringify(this.values) }\n  }\n}\n\nconst object = function(key, value) {\n  const result = {}\n  result[key] = value\n  return result\n}\n\nconst merge = function(object, values) {\n  const result = copy(object)\n  for (const key in values) {\n    const value = values[key]\n    result[key] = value\n  }\n  return result\n}\n\nconst copy = function(object, keyToRemove) {\n  const result = {}\n  const sortedKeys = Object.keys(object).sort()\n\n  sortedKeys.forEach((key) => {\n    if (key !== keyToRemove) {\n      result[key] = object[key]\n    }\n  })\n\n  return result\n}\n\nconst box = function(object) {\n  if (object instanceof Hash) {\n    return object\n  } else {\n    return new Hash(object)\n  }\n}\n\nconst unbox = function(object) {\n  if (object instanceof Hash) {\n    return object.values\n  } else {\n    return object\n  }\n}\n","import BasicObject from \"trix/core/basic_object\"\n\nexport default class Operation extends BasicObject {\n  isPerforming() {\n    return this.performing === true\n  }\n\n  hasPerformed() {\n    return this.performed === true\n  }\n\n  hasSucceeded() {\n    return this.performed && this.succeeded\n  }\n\n  hasFailed() {\n    return this.performed && !this.succeeded\n  }\n\n  getPromise() {\n    if (!this.promise) {\n      this.promise = new Promise((resolve, reject) => {\n        this.performing = true\n        return this.perform((succeeded, result) => {\n          this.succeeded = succeeded\n          this.performing = false\n          this.performed = true\n\n          if (this.succeeded) {\n            resolve(result)\n          } else {\n            reject(result)\n          }\n        })\n      })\n    }\n\n    return this.promise\n  }\n\n  perform(callback) {\n    return callback(false)\n  }\n\n  release() {\n    this.promise?.cancel?.()\n    this.promise = null\n    this.performing = null\n    this.performed = null\n    this.succeeded = null\n  }\n}\n\nOperation.proxyMethod(\"getPromise().then\")\nOperation.proxyMethod(\"getPromise().catch\")\n","import Operation from \"trix/core/utilities/operation\"\n\nexport default class ImagePreloadOperation extends Operation {\n  constructor(url) {\n    super(...arguments)\n    this.url = url\n  }\n\n  perform(callback) {\n    const image = new Image()\n\n    image.onload = () => {\n      image.width = this.width = image.naturalWidth\n      image.height = this.height = image.naturalHeight\n      return callback(true, image)\n    }\n\n    image.onerror = () => callback(false)\n\n    image.src = this.url\n  }\n}\n","import config from \"trix/config\"\nimport TrixObject from \"trix/core/object\" // Don't override window.Object\nimport Hash from \"trix/core/collections/hash\"\nimport ImagePreloadOperation from \"trix/operations/image_preload_operation\"\n\nexport default class Attachment extends TrixObject {\n  static previewablePattern = /^image(\\/(gif|png|jpe?g)|$)/\n\n  static attachmentForFile(file) {\n    const attributes = this.attributesForFile(file)\n    const attachment = new this(attributes)\n    attachment.setFile(file)\n    return attachment\n  }\n\n  static attributesForFile(file) {\n    return new Hash({\n      filename: file.name,\n      filesize: file.size,\n      contentType: file.type,\n    })\n  }\n\n  static fromJSON(attachmentJSON) {\n    return new this(attachmentJSON)\n  }\n\n  constructor(attributes = {}) {\n    super(attributes)\n    this.releaseFile = this.releaseFile.bind(this)\n    this.attributes = Hash.box(attributes)\n    this.didChangeAttributes()\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute)\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute)\n  }\n\n  getAttributes() {\n    return this.attributes.toObject()\n  }\n\n  setAttributes(attributes = {}) {\n    const newAttributes = this.attributes.merge(attributes)\n    if (!this.attributes.isEqualTo(newAttributes)) {\n      this.attributes = newAttributes\n      this.didChangeAttributes()\n      this.previewDelegate?.attachmentDidChangeAttributes?.(this)\n      return this.delegate?.attachmentDidChangeAttributes?.(this)\n    }\n  }\n\n  didChangeAttributes() {\n    if (this.isPreviewable()) {\n      return this.preloadURL()\n    }\n  }\n\n  isPending() {\n    return this.file != null && !(this.getURL() || this.getHref())\n  }\n\n  isPreviewable() {\n    if (this.attributes.has(\"previewable\")) {\n      return this.attributes.get(\"previewable\")\n    } else {\n      return Attachment.previewablePattern.test(this.getContentType())\n    }\n  }\n\n  getType() {\n    if (this.hasContent()) {\n      return \"content\"\n    } else if (this.isPreviewable()) {\n      return \"preview\"\n    } else {\n      return \"file\"\n    }\n  }\n\n  getURL() {\n    return this.attributes.get(\"url\")\n  }\n\n  getHref() {\n    return this.attributes.get(\"href\")\n  }\n\n  getFilename() {\n    return this.attributes.get(\"filename\") || \"\"\n  }\n\n  getFilesize() {\n    return this.attributes.get(\"filesize\")\n  }\n\n  getFormattedFilesize() {\n    const filesize = this.attributes.get(\"filesize\")\n    if (typeof filesize === \"number\") {\n      return config.fileSize.formatter(filesize)\n    } else {\n      return \"\"\n    }\n  }\n\n  getExtension() {\n    return this.getFilename()\n      .match(/\\.(\\w+)$/)?.[1]\n      .toLowerCase()\n  }\n\n  getContentType() {\n    return this.attributes.get(\"contentType\")\n  }\n\n  hasContent() {\n    return this.attributes.has(\"content\")\n  }\n\n  getContent() {\n    return this.attributes.get(\"content\")\n  }\n\n  getWidth() {\n    return this.attributes.get(\"width\")\n  }\n\n  getHeight() {\n    return this.attributes.get(\"height\")\n  }\n\n  getFile() {\n    return this.file\n  }\n\n  setFile(file) {\n    this.file = file\n    if (this.isPreviewable()) {\n      return this.preloadFile()\n    }\n  }\n\n  releaseFile() {\n    this.releasePreloadedFile()\n    this.file = null\n  }\n\n  getUploadProgress() {\n    return this.uploadProgress != null ? this.uploadProgress : 0\n  }\n\n  setUploadProgress(value) {\n    if (this.uploadProgress !== value) {\n      this.uploadProgress = value\n      return this.uploadProgressDelegate?.attachmentDidChangeUploadProgress?.(this)\n    }\n  }\n\n  toJSON() {\n    return this.getAttributes()\n  }\n\n  getCacheKey() {\n    return [ super.getCacheKey(...arguments), this.attributes.getCacheKey(), this.getPreviewURL() ].join(\"/\")\n  }\n\n  // Previewable\n\n  getPreviewURL() {\n    return this.previewURL || this.preloadingURL\n  }\n\n  setPreviewURL(url) {\n    if (url !== this.getPreviewURL()) {\n      this.previewURL = url\n      this.previewDelegate?.attachmentDidChangeAttributes?.(this)\n      return this.delegate?.attachmentDidChangePreviewURL?.(this)\n    }\n  }\n\n  preloadURL() {\n    return this.preload(this.getURL(), this.releaseFile)\n  }\n\n  preloadFile() {\n    if (this.file) {\n      this.fileObjectURL = URL.createObjectURL(this.file)\n      return this.preload(this.fileObjectURL)\n    }\n  }\n\n  releasePreloadedFile() {\n    if (this.fileObjectURL) {\n      URL.revokeObjectURL(this.fileObjectURL)\n      this.fileObjectURL = null\n    }\n  }\n\n  preload(url, callback) {\n    if (url && url !== this.getPreviewURL()) {\n      this.preloadingURL = url\n      const operation = new ImagePreloadOperation(url)\n      return operation\n        .then(({ width, height }) => {\n          if (!this.getWidth() || !this.getHeight()) {\n            this.setAttributes({ width, height })\n          }\n          this.preloadingURL = null\n          this.setPreviewURL(url)\n          return callback?.()\n        })\n        .catch(() => {\n          this.preloadingURL = null\n          return callback?.()\n        })\n    }\n  }\n}\n","import \"trix/models/attachment\"\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class ManagedAttachment extends BasicObject {\n  constructor(attachmentManager, attachment) {\n    super(...arguments)\n    this.attachmentManager = attachmentManager\n    this.attachment = attachment\n    this.id = this.attachment.id\n    this.file = this.attachment.file\n  }\n\n  remove() {\n    return this.attachmentManager.requestRemovalOfAttachment(this.attachment)\n  }\n}\n\nManagedAttachment.proxyMethod(\"attachment.getAttribute\")\nManagedAttachment.proxyMethod(\"attachment.hasAttribute\")\nManagedAttachment.proxyMethod(\"attachment.setAttribute\")\nManagedAttachment.proxyMethod(\"attachment.getAttributes\")\nManagedAttachment.proxyMethod(\"attachment.setAttributes\")\nManagedAttachment.proxyMethod(\"attachment.isPending\")\nManagedAttachment.proxyMethod(\"attachment.isPreviewable\")\nManagedAttachment.proxyMethod(\"attachment.getURL\")\nManagedAttachment.proxyMethod(\"attachment.getHref\")\nManagedAttachment.proxyMethod(\"attachment.getFilename\")\nManagedAttachment.proxyMethod(\"attachment.getFilesize\")\nManagedAttachment.proxyMethod(\"attachment.getFormattedFilesize\")\nManagedAttachment.proxyMethod(\"attachment.getExtension\")\nManagedAttachment.proxyMethod(\"attachment.getContentType\")\nManagedAttachment.proxyMethod(\"attachment.getFile\")\nManagedAttachment.proxyMethod(\"attachment.setFile\")\nManagedAttachment.proxyMethod(\"attachment.releaseFile\")\nManagedAttachment.proxyMethod(\"attachment.getUploadProgress\")\nManagedAttachment.proxyMethod(\"attachment.setUploadProgress\")\n\n","import ManagedAttachment from \"trix/models/managed_attachment\"\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class AttachmentManager extends BasicObject {\n  constructor(attachments = []) {\n    super(...arguments)\n    this.managedAttachments = {}\n    Array.from(attachments).forEach((attachment) => {\n      this.manageAttachment(attachment)\n    })\n  }\n\n  getAttachments() {\n    const result = []\n    for (const id in this.managedAttachments) {\n      const attachment = this.managedAttachments[id]\n      result.push(attachment)\n    }\n    return result\n  }\n\n  manageAttachment(attachment) {\n    if (!this.managedAttachments[attachment.id]) {\n      this.managedAttachments[attachment.id] = new ManagedAttachment(this, attachment)\n    }\n    return this.managedAttachments[attachment.id]\n  }\n\n  attachmentIsManaged(attachment) {\n    return attachment.id in this.managedAttachments\n  }\n\n  requestRemovalOfAttachment(attachment) {\n    if (this.attachmentIsManaged(attachment)) {\n      return this.delegate?.attachmentManagerDidRequestRemovalOfAttachment?.(attachment)\n    }\n  }\n\n  unmanageAttachment(attachment) {\n    const managedAttachment = this.managedAttachments[attachment.id]\n    delete this.managedAttachments[attachment.id]\n    return managedAttachment\n  }\n}\n","import TrixObject from \"trix/core/object\" // Don't override window.Object\nimport Hash from \"trix/core/collections/hash\"\n\nexport default class Piece extends TrixObject {\n  static types = {}\n\n  static registerType(type, constructor) {\n    constructor.type = type\n    this.types[type] = constructor\n  }\n\n  static fromJSON(pieceJSON) {\n    const constructor = this.types[pieceJSON.type]\n    if (constructor) {\n      return constructor.fromJSON(pieceJSON)\n    }\n  }\n\n  constructor(value, attributes = {}) {\n    super(...arguments)\n    this.attributes = Hash.box(attributes)\n  }\n\n  copyWithAttributes(attributes) {\n    return new this.constructor(this.getValue(), attributes)\n  }\n\n  copyWithAdditionalAttributes(attributes) {\n    return this.copyWithAttributes(this.attributes.merge(attributes))\n  }\n\n  copyWithoutAttribute(attribute) {\n    return this.copyWithAttributes(this.attributes.remove(attribute))\n  }\n\n  copy() {\n    return this.copyWithAttributes(this.attributes)\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute)\n  }\n\n  getAttributesHash() {\n    return this.attributes\n  }\n\n  getAttributes() {\n    return this.attributes.toObject()\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute)\n  }\n\n  hasSameStringValueAsPiece(piece) {\n    return piece && this.toString() === piece.toString()\n  }\n\n  hasSameAttributesAsPiece(piece) {\n    return piece && (this.attributes === piece.attributes || this.attributes.isEqualTo(piece.attributes))\n  }\n\n  isBlockBreak() {\n    return false\n  }\n\n  isEqualTo(piece) {\n    return (\n      super.isEqualTo(...arguments) ||\n      this.hasSameConstructorAs(piece) &&\n        this.hasSameStringValueAsPiece(piece) &&\n        this.hasSameAttributesAsPiece(piece)\n    )\n  }\n\n  isEmpty() {\n    return this.length === 0\n  }\n\n  isSerializable() {\n    return true\n  }\n\n  toJSON() {\n    return {\n      type: this.constructor.type,\n      attributes: this.getAttributes(),\n    }\n  }\n\n  contentsForInspection() {\n    return {\n      type: this.constructor.type,\n      attributes: this.attributes.inspect(),\n    }\n  }\n\n  // Grouping\n\n  canBeGrouped() {\n    return this.hasAttribute(\"href\")\n  }\n\n  canBeGroupedWith(piece) {\n    return this.getAttribute(\"href\") === piece.getAttribute(\"href\")\n  }\n\n  // Splittable\n\n  getLength() {\n    return this.length\n  }\n\n  canBeConsolidatedWith(piece) {\n    return false\n  }\n}\n","import { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nimport Attachment from \"trix/models/attachment\"\nimport Piece from \"trix/models/piece\"\n\nexport default class AttachmentPiece extends Piece {\n  static permittedAttributes = [ \"caption\", \"presentation\" ]\n\n  static fromJSON(pieceJSON) {\n    return new this(Attachment.fromJSON(pieceJSON.attachment), pieceJSON.attributes)\n  }\n\n  constructor(attachment) {\n    super(...arguments)\n    this.attachment = attachment\n    this.length = 1\n    this.ensureAttachmentExclusivelyHasAttribute(\"href\")\n    if (!this.attachment.hasContent()) {\n      this.removeProhibitedAttributes()\n    }\n  }\n\n  ensureAttachmentExclusivelyHasAttribute(attribute) {\n    if (this.hasAttribute(attribute)) {\n      if (!this.attachment.hasAttribute(attribute)) {\n        this.attachment.setAttributes(this.attributes.slice(attribute))\n      }\n      this.attributes = this.attributes.remove(attribute)\n    }\n  }\n\n  removeProhibitedAttributes() {\n    const attributes = this.attributes.slice(AttachmentPiece.permittedAttributes)\n    if (!attributes.isEqualTo(this.attributes)) {\n      this.attributes = attributes\n    }\n  }\n\n  getValue() {\n    return this.attachment\n  }\n\n  isSerializable() {\n    return !this.attachment.isPending()\n  }\n\n  getCaption() {\n    return this.attributes.get(\"caption\") || \"\"\n  }\n\n  isEqualTo(piece) {\n    return super.isEqualTo(piece) && this.attachment.id === piece?.attachment?.id\n  }\n\n  toString() {\n    return OBJECT_REPLACEMENT_CHARACTER\n  }\n\n  toJSON() {\n    const json = super.toJSON(...arguments)\n    json.attachment = this.attachment\n    return json\n  }\n\n  getCacheKey() {\n    return [ super.getCacheKey(...arguments), this.attachment.getCacheKey() ].join(\"/\")\n  }\n\n  toConsole() {\n    return JSON.stringify(this.toString())\n  }\n}\n\nPiece.registerType(\"attachment\", AttachmentPiece)\n","import Piece from \"trix/models/piece\"\n\nimport { normalizeNewlines } from \"trix/core/helpers\"\n\nexport default class StringPiece extends Piece {\n  static fromJSON(pieceJSON) {\n    return new this(pieceJSON.string, pieceJSON.attributes)\n  }\n\n  constructor(string) {\n    super(...arguments)\n    this.string = normalizeNewlines(string)\n    this.length = this.string.length\n  }\n\n  getValue() {\n    return this.string\n  }\n\n  toString() {\n    return this.string.toString()\n  }\n\n  isBlockBreak() {\n    return this.toString() === \"\\n\" && this.getAttribute(\"blockBreak\") === true\n  }\n\n  toJSON() {\n    const result = super.toJSON(...arguments)\n    result.string = this.string\n    return result\n  }\n\n  // Splittable\n\n  canBeConsolidatedWith(piece) {\n    return piece && this.hasSameConstructorAs(piece) && this.hasSameAttributesAsPiece(piece)\n  }\n\n  consolidateWith(piece) {\n    return new this.constructor(this.toString() + piece.toString(), this.attributes)\n  }\n\n  splitAtOffset(offset) {\n    let left, right\n    if (offset === 0) {\n      left = null\n      right = this\n    } else if (offset === this.length) {\n      left = this\n      right = null\n    } else {\n      left = new this.constructor(this.string.slice(0, offset), this.attributes)\n      right = new this.constructor(this.string.slice(offset), this.attributes)\n    }\n    return [ left, right ]\n  }\n\n  toConsole() {\n    let { string } = this\n    if (string.length > 15) {\n      string = string.slice(0, 14) + \"…\"\n    }\n    return JSON.stringify(string.toString())\n  }\n}\n\nPiece.registerType(\"string\", StringPiece)\n","/* eslint-disable\n    prefer-const,\n*/\nimport TrixObject from \"trix/core/object\" // Don't override window.Object\n\nimport { spliceArray } from \"trix/core/helpers\"\n\nexport default class SplittableList extends TrixObject {\n  static box(objects) {\n    if (objects instanceof this) {\n      return objects\n    } else {\n      return new this(objects)\n    }\n  }\n\n  constructor(objects = []) {\n    super(...arguments)\n    this.objects = objects.slice(0)\n    this.length = this.objects.length\n  }\n\n  indexOf(object) {\n    return this.objects.indexOf(object)\n  }\n\n  splice(...args) {\n    return new this.constructor(spliceArray(this.objects, ...args))\n  }\n\n  eachObject(callback) {\n    return this.objects.map((object, index) => callback(object, index))\n  }\n\n  insertObjectAtIndex(object, index) {\n    return this.splice(index, 0, object)\n  }\n\n  insertSplittableListAtIndex(splittableList, index) {\n    return this.splice(index, 0, ...splittableList.objects)\n  }\n\n  insertSplittableListAtPosition(splittableList, position) {\n    const [ objects, index ] = this.splitObjectAtPosition(position)\n    return new this.constructor(objects).insertSplittableListAtIndex(splittableList, index)\n  }\n\n  editObjectAtIndex(index, callback) {\n    return this.replaceObjectAtIndex(callback(this.objects[index]), index)\n  }\n\n  replaceObjectAtIndex(object, index) {\n    return this.splice(index, 1, object)\n  }\n\n  removeObjectAtIndex(index) {\n    return this.splice(index, 1)\n  }\n\n  getObjectAtIndex(index) {\n    return this.objects[index]\n  }\n\n  getSplittableListInRange(range) {\n    const [ objects, leftIndex, rightIndex ] = this.splitObjectsAtRange(range)\n    return new this.constructor(objects.slice(leftIndex, rightIndex + 1))\n  }\n\n  selectSplittableList(test) {\n    const objects = this.objects.filter((object) => test(object))\n    return new this.constructor(objects)\n  }\n\n  removeObjectsInRange(range) {\n    const [ objects, leftIndex, rightIndex ] = this.splitObjectsAtRange(range)\n    return new this.constructor(objects).splice(leftIndex, rightIndex - leftIndex + 1)\n  }\n\n  transformObjectsInRange(range, transform) {\n    const [ objects, leftIndex, rightIndex ] = this.splitObjectsAtRange(range)\n    const transformedObjects = objects.map((object, index) =>\n      leftIndex <= index && index <= rightIndex ? transform(object) : object\n    )\n    return new this.constructor(transformedObjects)\n  }\n\n  splitObjectsAtRange(range) {\n    let rightOuterIndex\n    let [ objects, leftInnerIndex, offset ] = this.splitObjectAtPosition(startOfRange(range))\n    ;[ objects, rightOuterIndex ] = new this.constructor(objects).splitObjectAtPosition(endOfRange(range) + offset)\n\n    return [ objects, leftInnerIndex, rightOuterIndex - 1 ]\n  }\n\n  getObjectAtPosition(position) {\n    const { index } = this.findIndexAndOffsetAtPosition(position)\n    return this.objects[index]\n  }\n\n  splitObjectAtPosition(position) {\n    let splitIndex, splitOffset\n    const { index, offset } = this.findIndexAndOffsetAtPosition(position)\n    const objects = this.objects.slice(0)\n    if (index != null) {\n      if (offset === 0) {\n        splitIndex = index\n        splitOffset = 0\n      } else {\n        const object = this.getObjectAtIndex(index)\n        const [ leftObject, rightObject ] = object.splitAtOffset(offset)\n        objects.splice(index, 1, leftObject, rightObject)\n        splitIndex = index + 1\n        splitOffset = leftObject.getLength() - offset\n      }\n    } else {\n      splitIndex = objects.length\n      splitOffset = 0\n    }\n\n    return [ objects, splitIndex, splitOffset ]\n  }\n\n  consolidate() {\n    const objects = []\n    let pendingObject = this.objects[0]\n\n    this.objects.slice(1).forEach((object) => {\n      if (pendingObject.canBeConsolidatedWith?.(object)) {\n        pendingObject = pendingObject.consolidateWith(object)\n      } else {\n        objects.push(pendingObject)\n        pendingObject = object\n      }\n    })\n\n    if (pendingObject) {\n      objects.push(pendingObject)\n    }\n\n    return new this.constructor(objects)\n  }\n\n  consolidateFromIndexToIndex(startIndex, endIndex) {\n    const objects = this.objects.slice(0)\n    const objectsInRange = objects.slice(startIndex, endIndex + 1)\n    const consolidatedInRange = new this.constructor(objectsInRange).consolidate().toArray()\n    return this.splice(startIndex, objectsInRange.length, ...consolidatedInRange)\n  }\n\n  findIndexAndOffsetAtPosition(position) {\n    let index\n    let currentPosition = 0\n    for (index = 0; index < this.objects.length; index++) {\n      const object = this.objects[index]\n      const nextPosition = currentPosition + object.getLength()\n      if (currentPosition <= position && position < nextPosition) {\n        return { index, offset: position - currentPosition }\n      }\n      currentPosition = nextPosition\n    }\n    return { index: null, offset: null }\n  }\n\n  findPositionAtIndexAndOffset(index, offset) {\n    let position = 0\n    for (let currentIndex = 0; currentIndex < this.objects.length; currentIndex++) {\n      const object = this.objects[currentIndex]\n      if (currentIndex < index) {\n        position += object.getLength()\n      } else if (currentIndex === index) {\n        position += offset\n        break\n      }\n    }\n    return position\n  }\n\n  getEndPosition() {\n    if (this.endPosition == null) {\n      this.endPosition = 0\n      this.objects.forEach((object) => this.endPosition += object.getLength())\n    }\n\n    return this.endPosition\n  }\n\n  toString() {\n    return this.objects.join(\"\")\n  }\n\n  toArray() {\n    return this.objects.slice(0)\n  }\n\n  toJSON() {\n    return this.toArray()\n  }\n\n  isEqualTo(splittableList) {\n    return super.isEqualTo(...arguments) || objectArraysAreEqual(this.objects, splittableList?.objects)\n  }\n\n  contentsForInspection() {\n    return {\n      objects: `[${this.objects.map((object) => object.inspect()).join(\", \")}]`,\n    }\n  }\n}\n\nconst objectArraysAreEqual = function(left, right = []) {\n  if (left.length !== right.length) {\n    return false\n  }\n  let result = true\n  for (let index = 0; index < left.length; index++) {\n    const object = left[index]\n    if (result && !object.isEqualTo(right[index])) {\n      result = false\n    }\n  }\n  return result\n}\n\nconst startOfRange = (range) => range[0]\n\nconst endOfRange = (range) => range[1]\n","import TrixObject from \"trix/core/object\" // Don't override window.Object\n\nimport { getDirection } from \"trix/core/helpers\"\n\nimport Piece from \"trix/models/piece\"\nimport AttachmentPiece from \"trix/models/attachment_piece\"\nimport StringPiece from \"trix/models/string_piece\"\nimport SplittableList from \"trix/models/splittable_list\"\n\nimport Hash from \"trix/core/collections/hash\"\n\nexport default class Text extends TrixObject {\n  static textForAttachmentWithAttributes(attachment, attributes) {\n    const piece = new AttachmentPiece(attachment, attributes)\n    return new this([ piece ])\n  }\n\n  static textForStringWithAttributes(string, attributes) {\n    const piece = new StringPiece(string, attributes)\n    return new this([ piece ])\n  }\n\n  static fromJSON(textJSON) {\n    const pieces = Array.from(textJSON).map((pieceJSON) => Piece.fromJSON(pieceJSON))\n    return new this(pieces)\n  }\n\n  constructor(pieces = []) {\n    super(...arguments)\n    const notEmpty = pieces.filter((piece) => !piece.isEmpty())\n    this.pieceList = new SplittableList(notEmpty)\n  }\n\n  copy() {\n    return this.copyWithPieceList(this.pieceList)\n  }\n\n  copyWithPieceList(pieceList) {\n    return new this.constructor(pieceList.consolidate().toArray())\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const pieces = this.getPieces().map((piece) => objectMap.find(piece) || piece)\n    return new this.constructor(pieces)\n  }\n\n  appendText(text) {\n    return this.insertTextAtPosition(text, this.getLength())\n  }\n\n  insertTextAtPosition(text, position) {\n    return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(text.pieceList, position))\n  }\n\n  removeTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.removeObjectsInRange(range))\n  }\n\n  replaceTextAtRange(text, range) {\n    return this.removeTextAtRange(range).insertTextAtPosition(text, range[0])\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    if (range[0] <= position && position <= range[1]) return\n    const text = this.getTextAtRange(range)\n    const length = text.getLength()\n    if (range[0] < position) {\n      position -= length\n    }\n    return this.removeTextAtRange(range).insertTextAtPosition(text, position)\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    const attributes = {}\n    attributes[attribute] = value\n    return this.addAttributesAtRange(attributes, range)\n  }\n\n  addAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(\n      this.pieceList.transformObjectsInRange(range, (piece) => piece.copyWithAdditionalAttributes(attributes))\n    )\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    return this.copyWithPieceList(\n      this.pieceList.transformObjectsInRange(range, (piece) => piece.copyWithoutAttribute(attribute))\n    )\n  }\n\n  setAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(\n      this.pieceList.transformObjectsInRange(range, (piece) => piece.copyWithAttributes(attributes))\n    )\n  }\n\n  getAttributesAtPosition(position) {\n    return this.pieceList.getObjectAtPosition(position)?.getAttributes() || {}\n  }\n\n  getCommonAttributes() {\n    const objects = Array.from(this.pieceList.toArray()).map((piece) => piece.getAttributes())\n    return Hash.fromCommonAttributesOfObjects(objects).toObject()\n  }\n\n  getCommonAttributesAtRange(range) {\n    return this.getTextAtRange(range).getCommonAttributes() || {}\n  }\n\n  getExpandedRangeForAttributeAtOffset(attributeName, offset) {\n    let right\n    let left = right = offset\n    const length = this.getLength()\n\n    while (left > 0 && this.getCommonAttributesAtRange([ left - 1, right ])[attributeName]) {\n      left--\n    }\n    while (right < length && this.getCommonAttributesAtRange([ offset, right + 1 ])[attributeName]) {\n      right++\n    }\n\n    return [ left, right ]\n  }\n\n  getTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.getSplittableListInRange(range))\n  }\n\n  getStringAtRange(range) {\n    return this.pieceList.getSplittableListInRange(range).toString()\n  }\n\n  getStringAtPosition(position) {\n    return this.getStringAtRange([ position, position + 1 ])\n  }\n\n  startsWithString(string) {\n    return this.getStringAtRange([ 0, string.length ]) === string\n  }\n\n  endsWithString(string) {\n    const length = this.getLength()\n    return this.getStringAtRange([ length - string.length, length ]) === string\n  }\n\n  getAttachmentPieces() {\n    return this.pieceList.toArray().filter((piece) => !!piece.attachment)\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map((piece) => piece.attachment)\n  }\n\n  getAttachmentAndPositionById(attachmentId) {\n    let position = 0\n    for (const piece of this.pieceList.toArray()) {\n      if (piece.attachment?.id === attachmentId) {\n        return { attachment: piece.attachment, position }\n      }\n      position += piece.length\n    }\n    return { attachment: null, position: null }\n  }\n\n  getAttachmentById(attachmentId) {\n    const { attachment } = this.getAttachmentAndPositionById(attachmentId)\n    return attachment\n  }\n\n  getRangeOfAttachment(attachment) {\n    const attachmentAndPosition = this.getAttachmentAndPositionById(attachment.id)\n    const position = attachmentAndPosition.position\n    attachment = attachmentAndPosition.attachment\n    if (attachment) {\n      return [ position, position + 1 ]\n    }\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    if (range) {\n      return this.addAttributesAtRange(attributes, range)\n    } else {\n      return this\n    }\n  }\n\n  getLength() {\n    return this.pieceList.getEndPosition()\n  }\n\n  isEmpty() {\n    return this.getLength() === 0\n  }\n\n  isEqualTo(text) {\n    return super.isEqualTo(text) || text?.pieceList?.isEqualTo(this.pieceList)\n  }\n\n  isBlockBreak() {\n    return this.getLength() === 1 && this.pieceList.getObjectAtIndex(0).isBlockBreak()\n  }\n\n  eachPiece(callback) {\n    return this.pieceList.eachObject(callback)\n  }\n\n  getPieces() {\n    return this.pieceList.toArray()\n  }\n\n  getPieceAtPosition(position) {\n    return this.pieceList.getObjectAtPosition(position)\n  }\n\n  contentsForInspection() {\n    return { pieceList: this.pieceList.inspect() }\n  }\n\n  toSerializableText() {\n    const pieceList = this.pieceList.selectSplittableList((piece) => piece.isSerializable())\n    return this.copyWithPieceList(pieceList)\n  }\n\n  toString() {\n    return this.pieceList.toString()\n  }\n\n  toJSON() {\n    return this.pieceList.toJSON()\n  }\n\n  toConsole() {\n    return JSON.stringify(this.pieceList.toArray().map((piece) => JSON.parse(piece.toConsole())))\n  }\n\n  // BIDI\n\n  getDirection() {\n    return getDirection(this.toString())\n  }\n\n  isRTL() {\n    return this.getDirection() === \"rtl\"\n  }\n}\n","import TrixObject from \"trix/core/object\" // Don't override window.Object\nimport Text from \"trix/models/text\"\n\nimport {\n  arraysAreEqual,\n  getBlockConfig,\n  getListAttributeNames,\n  spliceArray,\n} from \"trix/core/helpers\"\n\nexport default class Block extends TrixObject {\n  static fromJSON(blockJSON) {\n    const text = Text.fromJSON(blockJSON.text)\n    return new this(text, blockJSON.attributes)\n  }\n\n  constructor(text, attributes) {\n    super(...arguments)\n    this.text = applyBlockBreakToText(text || new Text())\n    this.attributes = attributes || []\n  }\n\n  isEmpty() {\n    return this.text.isBlockBreak()\n  }\n\n  isEqualTo(block) {\n    if (super.isEqualTo(block)) return true\n\n    return this.text.isEqualTo(block?.text) && arraysAreEqual(this.attributes, block?.attributes)\n  }\n\n  copyWithText(text) {\n    return new Block(text, this.attributes)\n  }\n\n  copyWithoutText() {\n    return this.copyWithText(null)\n  }\n\n  copyWithAttributes(attributes) {\n    return new Block(this.text, attributes)\n  }\n\n  copyWithoutAttributes() {\n    return this.copyWithAttributes(null)\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const mappedText = objectMap.find(this.text)\n    if (mappedText) {\n      return this.copyWithText(mappedText)\n    } else {\n      return this.copyWithText(this.text.copyUsingObjectMap(objectMap))\n    }\n  }\n\n  addAttribute(attribute) {\n    const attributes = this.attributes.concat(expandAttribute(attribute))\n    return this.copyWithAttributes(attributes)\n  }\n\n  removeAttribute(attribute) {\n    const { listAttribute } = getBlockConfig(attribute)\n    const attributes = removeLastValue(removeLastValue(this.attributes, attribute), listAttribute)\n    return this.copyWithAttributes(attributes)\n  }\n\n  removeLastAttribute() {\n    return this.removeAttribute(this.getLastAttribute())\n  }\n\n  getLastAttribute() {\n    return getLastElement(this.attributes)\n  }\n\n  getAttributes() {\n    return this.attributes.slice(0)\n  }\n\n  getAttributeLevel() {\n    return this.attributes.length\n  }\n\n  getAttributeAtLevel(level) {\n    return this.attributes[level - 1]\n  }\n\n  hasAttribute(attributeName) {\n    return this.attributes.includes(attributeName)\n  }\n\n  hasAttributes() {\n    return this.getAttributeLevel() > 0\n  }\n\n  getLastNestableAttribute() {\n    return getLastElement(this.getNestableAttributes())\n  }\n\n  getNestableAttributes() {\n    return this.attributes.filter((attribute) => getBlockConfig(attribute).nestable)\n  }\n\n  getNestingLevel() {\n    return this.getNestableAttributes().length\n  }\n\n  decreaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute()\n    if (attribute) {\n      return this.removeAttribute(attribute)\n    } else {\n      return this\n    }\n  }\n\n  increaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute()\n    if (attribute) {\n      const index = this.attributes.lastIndexOf(attribute)\n      const attributes = spliceArray(this.attributes, index + 1, 0, ...expandAttribute(attribute))\n      return this.copyWithAttributes(attributes)\n    } else {\n      return this\n    }\n  }\n\n  getListItemAttributes() {\n    return this.attributes.filter((attribute) => getBlockConfig(attribute).listAttribute)\n  }\n\n  isListItem() {\n    return getBlockConfig(this.getLastAttribute())?.listAttribute\n  }\n\n  isTerminalBlock() {\n    return getBlockConfig(this.getLastAttribute())?.terminal\n  }\n\n  breaksOnReturn() {\n    return getBlockConfig(this.getLastAttribute())?.breakOnReturn\n  }\n\n  findLineBreakInDirectionFromPosition(direction, position) {\n    const string = this.toString()\n    let result\n    switch (direction) {\n      case \"forward\":\n        result = string.indexOf(\"\\n\", position)\n        break\n      case \"backward\":\n        result = string.slice(0, position).lastIndexOf(\"\\n\")\n    }\n\n    if (result !== -1) {\n      return result\n    }\n  }\n\n  contentsForInspection() {\n    return {\n      text: this.text.inspect(),\n      attributes: this.attributes,\n    }\n  }\n\n  toString() {\n    return this.text.toString()\n  }\n\n  toJSON() {\n    return {\n      text: this.text,\n      attributes: this.attributes,\n    }\n  }\n\n  // BIDI\n\n  getDirection() {\n    return this.text.getDirection()\n  }\n\n  isRTL() {\n    return this.text.isRTL()\n  }\n\n  // Splittable\n\n  getLength() {\n    return this.text.getLength()\n  }\n\n  canBeConsolidatedWith(block) {\n    return !this.hasAttributes() && !block.hasAttributes() && this.getDirection() === block.getDirection()\n  }\n\n  consolidateWith(block) {\n    const newlineText = Text.textForStringWithAttributes(\"\\n\")\n    const text = this.getTextWithoutBlockBreak().appendText(newlineText)\n    return this.copyWithText(text.appendText(block.text))\n  }\n\n  splitAtOffset(offset) {\n    let left, right\n    if (offset === 0) {\n      left = null\n      right = this\n    } else if (offset === this.getLength()) {\n      left = this\n      right = null\n    } else {\n      left = this.copyWithText(this.text.getTextAtRange([ 0, offset ]))\n      right = this.copyWithText(this.text.getTextAtRange([ offset, this.getLength() ]))\n    }\n    return [ left, right ]\n  }\n\n  getBlockBreakPosition() {\n    return this.text.getLength() - 1\n  }\n\n  getTextWithoutBlockBreak() {\n    if (textEndsInBlockBreak(this.text)) {\n      return this.text.getTextAtRange([ 0, this.getBlockBreakPosition() ])\n    } else {\n      return this.text.copy()\n    }\n  }\n\n  // Grouping\n\n  canBeGrouped(depth) {\n    return this.attributes[depth]\n  }\n\n  canBeGroupedWith(otherBlock, depth) {\n    const otherAttributes = otherBlock.getAttributes()\n    const otherAttribute = otherAttributes[depth]\n    const attribute = this.attributes[depth]\n\n    return (\n      attribute === otherAttribute &&\n      !(getBlockConfig(attribute).group === false && !getListAttributeNames().includes(otherAttributes[depth + 1])) &&\n      (this.getDirection() === otherBlock.getDirection() || otherBlock.isEmpty())\n    )\n  }\n}\n\n// Block breaks\n\nconst applyBlockBreakToText = function(text) {\n  text = unmarkExistingInnerBlockBreaksInText(text)\n  text = addBlockBreakToText(text)\n  return text\n}\n\nconst unmarkExistingInnerBlockBreaksInText = function(text) {\n  let modified = false\n  const pieces = text.getPieces()\n\n  let innerPieces = pieces.slice(0, pieces.length - 1)\n  const lastPiece = pieces[pieces.length - 1]\n\n  if (!lastPiece) return text\n\n  innerPieces = innerPieces.map((piece) => {\n    if (piece.isBlockBreak()) {\n      modified = true\n      return unmarkBlockBreakPiece(piece)\n    } else {\n      return piece\n    }\n  })\n\n  if (modified) {\n    return new Text([ ...innerPieces, lastPiece ])\n  } else {\n    return text\n  }\n}\n\nconst blockBreakText = Text.textForStringWithAttributes(\"\\n\", { blockBreak: true })\n\nconst addBlockBreakToText = function(text) {\n  if (textEndsInBlockBreak(text)) {\n    return text\n  } else {\n    return text.appendText(blockBreakText)\n  }\n}\n\nconst textEndsInBlockBreak = function(text) {\n  const length = text.getLength()\n  if (length === 0) {\n    return false\n  }\n  const endText = text.getTextAtRange([ length - 1, length ])\n  return endText.isBlockBreak()\n}\n\nconst unmarkBlockBreakPiece = (piece) => piece.copyWithoutAttribute(\"blockBreak\")\n\n// Attributes\n\nconst expandAttribute = function(attribute) {\n  const { listAttribute } = getBlockConfig(attribute)\n  if (listAttribute) {\n    return [ listAttribute, attribute ]\n  } else {\n    return [ attribute ]\n  }\n}\n\n// Array helpers\n\nconst getLastElement = (array) => array.slice(-1)[0]\n\nconst removeLastValue = function(array, value) {\n  const index = array.lastIndexOf(value)\n  if (index === -1) {\n    return array\n  } else {\n    return spliceArray(array, index, 1)\n  }\n}\n","import BasicObject from \"trix/core/basic_object\"\n\nexport default class ObjectMap extends BasicObject {\n  constructor(objects = []) {\n    super(...arguments)\n    this.objects = {}\n\n    Array.from(objects).forEach((object) => {\n      const hash = JSON.stringify(object)\n      if (this.objects[hash] == null) {\n        this.objects[hash] = object\n      }\n    })\n  }\n\n  find(object) {\n    const hash = JSON.stringify(object)\n    return this.objects[hash]\n  }\n}\n","import config from \"trix/config\"\nimport TrixObject from \"trix/core/object\" // Don't override window.Object\n\nimport Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\nimport SplittableList from \"trix/models/splittable_list\"\nimport Hash from \"trix/core/collections/hash\"\nimport ObjectMap from \"trix/core/collections/object_map\"\n\nimport { arraysAreEqual, getBlockConfig, normalizeRange, rangeIsCollapsed } from \"trix/core/helpers\"\n\nexport default class Document extends TrixObject {\n  static fromJSON(documentJSON) {\n    const blocks = Array.from(documentJSON).map((blockJSON) => Block.fromJSON(blockJSON))\n    return new this(blocks)\n  }\n\n  static fromString(string, textAttributes) {\n    const text = Text.textForStringWithAttributes(string, textAttributes)\n    return new this([ new Block(text) ])\n  }\n\n  constructor(blocks = []) {\n    super(...arguments)\n    if (blocks.length === 0) {\n      blocks = [ new Block() ]\n    }\n    this.blockList = SplittableList.box(blocks)\n  }\n\n  isEmpty() {\n    const block = this.getBlockAtIndex(0)\n    return this.blockList.length === 1 && block.isEmpty() && !block.hasAttributes()\n  }\n\n  copy(options = {}) {\n    const blocks = options.consolidateBlocks ? this.blockList.consolidate().toArray() : this.blockList.toArray()\n\n    return new this.constructor(blocks)\n  }\n\n  copyUsingObjectsFromDocument(sourceDocument) {\n    const objectMap = new ObjectMap(sourceDocument.getObjects())\n    return this.copyUsingObjectMap(objectMap)\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const blocks = this.getBlocks().map((block) => {\n      const mappedBlock = objectMap.find(block)\n      return mappedBlock || block.copyUsingObjectMap(objectMap)\n    })\n    return new this.constructor(blocks)\n  }\n\n  copyWithBaseBlockAttributes(blockAttributes = []) {\n    const blocks = this.getBlocks().map((block) => {\n      const attributes = blockAttributes.concat(block.getAttributes())\n      return block.copyWithAttributes(attributes)\n    })\n\n    return new this.constructor(blocks)\n  }\n\n  replaceBlock(oldBlock, newBlock) {\n    const index = this.blockList.indexOf(oldBlock)\n    if (index === -1) {\n      return this\n    }\n    return new this.constructor(this.blockList.replaceObjectAtIndex(newBlock, index))\n  }\n\n  insertDocumentAtRange(document, range) {\n    const { blockList } = document\n    range = normalizeRange(range)\n    let [ position ] = range\n    const { index, offset } = this.locationFromPosition(position)\n\n    let result = this\n    const block = this.getBlockAtPosition(position)\n\n    if (rangeIsCollapsed(range) && block.isEmpty() && !block.hasAttributes()) {\n      result = new this.constructor(result.blockList.removeObjectAtIndex(index))\n    } else if (block.getBlockBreakPosition() === offset) {\n      position++\n    }\n\n    result = result.removeTextAtRange(range)\n    return new this.constructor(result.blockList.insertSplittableListAtPosition(blockList, position))\n  }\n\n  mergeDocumentAtRange(document, range) {\n    let formattedDocument, result\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    const startLocation = this.locationFromPosition(startPosition)\n    const blockAttributes = this.getBlockAtIndex(startLocation.index).getAttributes()\n    const baseBlockAttributes = document.getBaseBlockAttributes()\n    const trailingBlockAttributes = blockAttributes.slice(-baseBlockAttributes.length)\n\n    if (arraysAreEqual(baseBlockAttributes, trailingBlockAttributes)) {\n      const leadingBlockAttributes = blockAttributes.slice(0, -baseBlockAttributes.length)\n      formattedDocument = document.copyWithBaseBlockAttributes(leadingBlockAttributes)\n    } else {\n      formattedDocument = document.copy({ consolidateBlocks: true }).copyWithBaseBlockAttributes(blockAttributes)\n    }\n\n    const blockCount = formattedDocument.getBlockCount()\n    const firstBlock = formattedDocument.getBlockAtIndex(0)\n\n    if (arraysAreEqual(blockAttributes, firstBlock.getAttributes())) {\n      const firstText = firstBlock.getTextWithoutBlockBreak()\n      result = this.insertTextAtRange(firstText, range)\n\n      if (blockCount > 1) {\n        formattedDocument = new this.constructor(formattedDocument.getBlocks().slice(1))\n        const position = startPosition + firstText.getLength()\n        result = result.insertDocumentAtRange(formattedDocument, position)\n      }\n    } else {\n      result = this.insertDocumentAtRange(formattedDocument, range)\n    }\n\n    return result\n  }\n\n  insertTextAtRange(text, range) {\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    const { index, offset } = this.locationFromPosition(startPosition)\n\n    const document = this.removeTextAtRange(range)\n    return new this.constructor(\n      document.blockList.editObjectAtIndex(index, (block) =>\n        block.copyWithText(block.text.insertTextAtPosition(text, offset))\n      )\n    )\n  }\n\n  removeTextAtRange(range) {\n    let blocks\n    range = normalizeRange(range)\n    const [ leftPosition, rightPosition ] = range\n    if (rangeIsCollapsed(range)) {\n      return this\n    }\n    const [ leftLocation, rightLocation ] = Array.from(this.locationRangeFromRange(range))\n\n    const leftIndex = leftLocation.index\n    const leftOffset = leftLocation.offset\n    const leftBlock = this.getBlockAtIndex(leftIndex)\n\n    const rightIndex = rightLocation.index\n    const rightOffset = rightLocation.offset\n    const rightBlock = this.getBlockAtIndex(rightIndex)\n\n    const removeRightNewline =\n      rightPosition - leftPosition === 1 &&\n      leftBlock.getBlockBreakPosition() === leftOffset &&\n      rightBlock.getBlockBreakPosition() !== rightOffset &&\n      rightBlock.text.getStringAtPosition(rightOffset) === \"\\n\"\n\n    if (removeRightNewline) {\n      blocks = this.blockList.editObjectAtIndex(rightIndex, (block) =>\n        block.copyWithText(block.text.removeTextAtRange([ rightOffset, rightOffset + 1 ]))\n      )\n    } else {\n      let block\n      const leftText = leftBlock.text.getTextAtRange([ 0, leftOffset ])\n      const rightText = rightBlock.text.getTextAtRange([ rightOffset, rightBlock.getLength() ])\n      const text = leftText.appendText(rightText)\n\n      const removingLeftBlock = leftIndex !== rightIndex && leftOffset === 0\n      const useRightBlock = removingLeftBlock && leftBlock.getAttributeLevel() >= rightBlock.getAttributeLevel()\n\n      if (useRightBlock) {\n        block = rightBlock.copyWithText(text)\n      } else {\n        block = leftBlock.copyWithText(text)\n      }\n\n      const affectedBlockCount = rightIndex + 1 - leftIndex\n      blocks = this.blockList.splice(leftIndex, affectedBlockCount, block)\n    }\n\n    return new this.constructor(blocks)\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    let text\n    range = normalizeRange(range)\n    const [ startPosition, endPosition ] = range\n    if (startPosition <= position && position <= endPosition) {\n      return this\n    }\n\n    let document = this.getDocumentAtRange(range)\n    let result = this.removeTextAtRange(range)\n\n    const movingRightward = startPosition < position\n    if (movingRightward) {\n      position -= document.getLength()\n    }\n\n    const [ firstBlock, ...blocks ] = document.getBlocks()\n    if (blocks.length === 0) {\n      text = firstBlock.getTextWithoutBlockBreak()\n      if (movingRightward) {\n        position += 1\n      }\n    } else {\n      text = firstBlock.text\n    }\n\n    result = result.insertTextAtRange(text, position)\n    if (blocks.length === 0) {\n      return result\n    }\n\n    document = new this.constructor(blocks)\n    position += text.getLength()\n\n    return result.insertDocumentAtRange(document, position)\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    let { blockList } = this\n    this.eachBlockAtRange(\n      range,\n      (block, textRange, index) =>\n        blockList = blockList.editObjectAtIndex(index, function() {\n          if (getBlockConfig(attribute)) {\n            return block.addAttribute(attribute, value)\n          } else {\n            if (textRange[0] === textRange[1]) {\n              return block\n            } else {\n              return block.copyWithText(block.text.addAttributeAtRange(attribute, value, textRange))\n            }\n          }\n        })\n    )\n    return new this.constructor(blockList)\n  }\n\n  addAttribute(attribute, value) {\n    let { blockList } = this\n    this.eachBlock(\n      (block, index) => blockList = blockList.editObjectAtIndex(index, () => block.addAttribute(attribute, value))\n    )\n    return new this.constructor(blockList)\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      if (getBlockConfig(attribute)) {\n        blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(attribute))\n      } else if (textRange[0] !== textRange[1]) {\n        blockList = blockList.editObjectAtIndex(index, () =>\n          block.copyWithText(block.text.removeAttributeAtRange(attribute, textRange))\n        )\n      }\n    })\n    return new this.constructor(blockList)\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    const [ startPosition ] = Array.from(range)\n    const { index } = this.locationFromPosition(startPosition)\n    const text = this.getTextAtIndex(index)\n\n    return new this.constructor(\n      this.blockList.editObjectAtIndex(index, (block) =>\n        block.copyWithText(text.updateAttributesForAttachment(attributes, attachment))\n      )\n    )\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    return this.removeAttributeAtRange(attribute, range)\n  }\n\n  insertBlockBreakAtRange(range) {\n    let blocks\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    const { offset } = this.locationFromPosition(startPosition)\n\n    const document = this.removeTextAtRange(range)\n    if (offset === 0) {\n      blocks = [ new Block() ]\n    }\n    return new this.constructor(\n      document.blockList.insertSplittableListAtPosition(new SplittableList(blocks), startPosition)\n    )\n  }\n\n  applyBlockAttributeAtRange(attributeName, value, range) {\n    const expanded = this.expandRangeToLineBreaksAndSplitBlocks(range)\n    let document = expanded.document\n    range = expanded.range\n    const blockConfig = getBlockConfig(attributeName)\n\n    if (blockConfig.listAttribute) {\n      document = document.removeLastListAttributeAtRange(range, { exceptAttributeName: attributeName })\n      const converted = document.convertLineBreaksToBlockBreaksInRange(range)\n      document = converted.document\n      range = converted.range\n    } else if (blockConfig.exclusive) {\n      document = document.removeBlockAttributesAtRange(range)\n    } else if (blockConfig.terminal) {\n      document = document.removeLastTerminalAttributeAtRange(range)\n    } else {\n      document = document.consolidateBlocksAtRange(range)\n    }\n\n    return document.addAttributeAtRange(attributeName, value, range)\n  }\n\n  removeLastListAttributeAtRange(range, options = {}) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute()\n      if (!lastAttributeName) {\n        return\n      }\n      if (!getBlockConfig(lastAttributeName).listAttribute) {\n        return\n      }\n      if (lastAttributeName === options.exceptAttributeName) {\n        return\n      }\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName))\n    })\n    return new this.constructor(blockList)\n  }\n\n  removeLastTerminalAttributeAtRange(range) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute()\n      if (!lastAttributeName) {\n        return\n      }\n      if (!getBlockConfig(lastAttributeName).terminal) {\n        return\n      }\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName))\n    })\n    return new this.constructor(blockList)\n  }\n\n  removeBlockAttributesAtRange(range) {\n    let { blockList } = this\n    this.eachBlockAtRange(range, function(block, textRange, index) {\n      if (block.hasAttributes()) {\n        blockList = blockList.editObjectAtIndex(index, () => block.copyWithoutAttributes())\n      }\n    })\n    return new this.constructor(blockList)\n  }\n\n  expandRangeToLineBreaksAndSplitBlocks(range) {\n    let position\n    range = normalizeRange(range)\n    let [ startPosition, endPosition ] = range\n    const startLocation = this.locationFromPosition(startPosition)\n    const endLocation = this.locationFromPosition(endPosition)\n    let document = this\n\n    const startBlock = document.getBlockAtIndex(startLocation.index)\n    startLocation.offset = startBlock.findLineBreakInDirectionFromPosition(\"backward\", startLocation.offset)\n    if (startLocation.offset != null) {\n      position = document.positionFromLocation(startLocation)\n      document = document.insertBlockBreakAtRange([ position, position + 1 ])\n      endLocation.index += 1\n      endLocation.offset -= document.getBlockAtIndex(startLocation.index).getLength()\n      startLocation.index += 1\n    }\n    startLocation.offset = 0\n\n    if (endLocation.offset === 0 && endLocation.index > startLocation.index) {\n      endLocation.index -= 1\n      endLocation.offset = document.getBlockAtIndex(endLocation.index).getBlockBreakPosition()\n    } else {\n      const endBlock = document.getBlockAtIndex(endLocation.index)\n      if (endBlock.text.getStringAtRange([ endLocation.offset - 1, endLocation.offset ]) === \"\\n\") {\n        endLocation.offset -= 1\n      } else {\n        endLocation.offset = endBlock.findLineBreakInDirectionFromPosition(\"forward\", endLocation.offset)\n      }\n      if (endLocation.offset !== endBlock.getBlockBreakPosition()) {\n        position = document.positionFromLocation(endLocation)\n        document = document.insertBlockBreakAtRange([ position, position + 1 ])\n      }\n    }\n\n    startPosition = document.positionFromLocation(startLocation)\n    endPosition = document.positionFromLocation(endLocation)\n    range = normalizeRange([ startPosition, endPosition ])\n\n    return { document, range }\n  }\n\n  convertLineBreaksToBlockBreaksInRange(range) {\n    range = normalizeRange(range)\n    let [ position ] = range\n    const string = this.getStringAtRange(range).slice(0, -1)\n    let document = this\n\n    string.replace(/.*?\\n/g, function(match) {\n      position += match.length\n      document = document.insertBlockBreakAtRange([ position - 1, position ])\n    })\n\n    return { document, range }\n  }\n\n  consolidateBlocksAtRange(range) {\n    range = normalizeRange(range)\n    const [ startPosition, endPosition ] = range\n    const startIndex = this.locationFromPosition(startPosition).index\n    const endIndex = this.locationFromPosition(endPosition).index\n    return new this.constructor(this.blockList.consolidateFromIndexToIndex(startIndex, endIndex))\n  }\n\n  getDocumentAtRange(range) {\n    range = normalizeRange(range)\n    const blocks = this.blockList.getSplittableListInRange(range).toArray()\n    return new this.constructor(blocks)\n  }\n\n  getStringAtRange(range) {\n    let endIndex\n    const array = range = normalizeRange(range),\n      endPosition = array[array.length - 1]\n    if (endPosition !== this.getLength()) {\n      endIndex = -1\n    }\n    return this.getDocumentAtRange(range).toString().slice(0, endIndex)\n  }\n\n  getBlockAtIndex(index) {\n    return this.blockList.getObjectAtIndex(index)\n  }\n\n  getBlockAtPosition(position) {\n    const { index } = this.locationFromPosition(position)\n    return this.getBlockAtIndex(index)\n  }\n\n  getTextAtIndex(index) {\n    return this.getBlockAtIndex(index)?.text\n  }\n\n  getTextAtPosition(position) {\n    const { index } = this.locationFromPosition(position)\n    return this.getTextAtIndex(index)\n  }\n\n  getPieceAtPosition(position) {\n    const { index, offset } = this.locationFromPosition(position)\n    return this.getTextAtIndex(index).getPieceAtPosition(offset)\n  }\n\n  getCharacterAtPosition(position) {\n    const { index, offset } = this.locationFromPosition(position)\n    return this.getTextAtIndex(index).getStringAtRange([ offset, offset + 1 ])\n  }\n\n  getLength() {\n    return this.blockList.getEndPosition()\n  }\n\n  getBlocks() {\n    return this.blockList.toArray()\n  }\n\n  getBlockCount() {\n    return this.blockList.length\n  }\n\n  getEditCount() {\n    return this.editCount\n  }\n\n  eachBlock(callback) {\n    return this.blockList.eachObject(callback)\n  }\n\n  eachBlockAtRange(range, callback) {\n    let block, textRange\n    range = normalizeRange(range)\n    const [ startPosition, endPosition ] = range\n    const startLocation = this.locationFromPosition(startPosition)\n    const endLocation = this.locationFromPosition(endPosition)\n\n    if (startLocation.index === endLocation.index) {\n      block = this.getBlockAtIndex(startLocation.index)\n      textRange = [ startLocation.offset, endLocation.offset ]\n      return callback(block, textRange, startLocation.index)\n    } else {\n      for (let index = startLocation.index; index <= endLocation.index; index++) {\n        block = this.getBlockAtIndex(index)\n        if (block) {\n          switch (index) {\n            case startLocation.index:\n              textRange = [ startLocation.offset, block.text.getLength() ]\n              break\n            case endLocation.index:\n              textRange = [ 0, endLocation.offset ]\n              break\n            default:\n              textRange = [ 0, block.text.getLength() ]\n          }\n          callback(block, textRange, index)\n        }\n      }\n    }\n  }\n\n  getCommonAttributesAtRange(range) {\n    range = normalizeRange(range)\n    const [ startPosition ] = range\n    if (rangeIsCollapsed(range)) {\n      return this.getCommonAttributesAtPosition(startPosition)\n    } else {\n      const textAttributes = []\n      const blockAttributes = []\n\n      this.eachBlockAtRange(range, function(block, textRange) {\n        if (textRange[0] !== textRange[1]) {\n          textAttributes.push(block.text.getCommonAttributesAtRange(textRange))\n          return blockAttributes.push(attributesForBlock(block))\n        }\n      })\n\n      return Hash.fromCommonAttributesOfObjects(textAttributes)\n        .merge(Hash.fromCommonAttributesOfObjects(blockAttributes))\n        .toObject()\n    }\n  }\n\n  getCommonAttributesAtPosition(position) {\n    let key, value\n    const { index, offset } = this.locationFromPosition(position)\n    const block = this.getBlockAtIndex(index)\n    if (!block) {\n      return {}\n    }\n\n    const commonAttributes = attributesForBlock(block)\n    const attributes = block.text.getAttributesAtPosition(offset)\n    const attributesLeft = block.text.getAttributesAtPosition(offset - 1)\n    const inheritableAttributes = Object.keys(config.textAttributes).filter((key) => {\n      return config.textAttributes[key].inheritable\n    })\n\n    for (key in attributesLeft) {\n      value = attributesLeft[key]\n      if (value === attributes[key] || inheritableAttributes.includes(key)) {\n        commonAttributes[key] = value\n      }\n    }\n\n    return commonAttributes\n  }\n\n  getRangeOfCommonAttributeAtPosition(attributeName, position) {\n    const { index, offset } = this.locationFromPosition(position)\n    const text = this.getTextAtIndex(index)\n    const [ startOffset, endOffset ] = Array.from(text.getExpandedRangeForAttributeAtOffset(attributeName, offset))\n\n    const start = this.positionFromLocation({ index, offset: startOffset })\n    const end = this.positionFromLocation({ index, offset: endOffset })\n    return normalizeRange([ start, end ])\n  }\n\n  getBaseBlockAttributes() {\n    let baseBlockAttributes = this.getBlockAtIndex(0).getAttributes()\n\n    for (let blockIndex = 1; blockIndex < this.getBlockCount(); blockIndex++) {\n      const blockAttributes = this.getBlockAtIndex(blockIndex).getAttributes()\n      const lastAttributeIndex = Math.min(baseBlockAttributes.length, blockAttributes.length)\n\n      baseBlockAttributes = (() => {\n        const result = []\n        for (let index = 0; index < lastAttributeIndex; index++) {\n          if (blockAttributes[index] !== baseBlockAttributes[index]) {\n            break\n          }\n          result.push(blockAttributes[index])\n        }\n        return result\n      })()\n    }\n\n    return baseBlockAttributes\n  }\n\n  getAttachmentById(attachmentId) {\n    for (const attachment of this.getAttachments()) {\n      if (attachment.id === attachmentId) {\n        return attachment\n      }\n    }\n  }\n\n  getAttachmentPieces() {\n    let attachmentPieces = []\n    this.blockList.eachObject(({ text }) => attachmentPieces = attachmentPieces.concat(text.getAttachmentPieces()))\n    return attachmentPieces\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map((piece) => piece.attachment)\n  }\n\n  getRangeOfAttachment(attachment) {\n    let position = 0\n    const iterable = this.blockList.toArray()\n    for (let index = 0; index < iterable.length; index++) {\n      const { text } = iterable[index]\n      const textRange = text.getRangeOfAttachment(attachment)\n      if (textRange) {\n        return normalizeRange([ position + textRange[0], position + textRange[1] ])\n      }\n      position += text.getLength()\n    }\n  }\n\n  getLocationRangeOfAttachment(attachment) {\n    const range = this.getRangeOfAttachment(attachment)\n    return this.locationRangeFromRange(range)\n  }\n\n  getAttachmentPieceForAttachment(attachment) {\n    for (const piece of this.getAttachmentPieces()) {\n      if (piece.attachment === attachment) {\n        return piece\n      }\n    }\n  }\n\n  findRangesForBlockAttribute(attributeName) {\n    let position = 0\n    const ranges = []\n\n    this.getBlocks().forEach((block) => {\n      const length = block.getLength()\n      if (block.hasAttribute(attributeName)) {\n        ranges.push([ position, position + length ])\n      }\n      position += length\n    })\n\n    return ranges\n  }\n\n  findRangesForTextAttribute(attributeName, { withValue } = {}) {\n    let position = 0\n    let range = []\n    const ranges = []\n\n    const match = function(piece) {\n      if (withValue) {\n        return piece.getAttribute(attributeName) === withValue\n      } else {\n        return piece.hasAttribute(attributeName)\n      }\n    }\n\n    this.getPieces().forEach((piece) => {\n      const length = piece.getLength()\n      if (match(piece)) {\n        if (range[1] === position) {\n          range[1] = position + length\n        } else {\n          ranges.push(range = [ position, position + length ])\n        }\n      }\n      position += length\n    })\n\n    return ranges\n  }\n\n  locationFromPosition(position) {\n    const location = this.blockList.findIndexAndOffsetAtPosition(Math.max(0, position))\n    if (location.index != null) {\n      return location\n    } else {\n      const blocks = this.getBlocks()\n      return { index: blocks.length - 1, offset: blocks[blocks.length - 1].getLength() }\n    }\n  }\n\n  positionFromLocation(location) {\n    return this.blockList.findPositionAtIndexAndOffset(location.index, location.offset)\n  }\n\n  locationRangeFromPosition(position) {\n    return normalizeRange(this.locationFromPosition(position))\n  }\n\n  locationRangeFromRange(range) {\n    range = normalizeRange(range)\n    if (!range) return\n\n    const [ startPosition, endPosition ] = Array.from(range)\n    const startLocation = this.locationFromPosition(startPosition)\n    const endLocation = this.locationFromPosition(endPosition)\n    return normalizeRange([ startLocation, endLocation ])\n  }\n\n  rangeFromLocationRange(locationRange) {\n    let rightPosition\n    locationRange = normalizeRange(locationRange)\n    const leftPosition = this.positionFromLocation(locationRange[0])\n    if (!rangeIsCollapsed(locationRange)) {\n      rightPosition = this.positionFromLocation(locationRange[1])\n    }\n    return normalizeRange([ leftPosition, rightPosition ])\n  }\n\n  isEqualTo(document) {\n    return this.blockList.isEqualTo(document?.blockList)\n  }\n\n  getTexts() {\n    return this.getBlocks().map((block) => block.text)\n  }\n\n  getPieces() {\n    const pieces = []\n\n    Array.from(this.getTexts()).forEach((text) => {\n      pieces.push(...Array.from(text.getPieces() || []))\n    })\n\n    return pieces\n  }\n\n  getObjects() {\n    return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())\n  }\n\n  toSerializableDocument() {\n    const blocks = []\n    this.blockList.eachObject((block) => blocks.push(block.copyWithText(block.text.toSerializableText())))\n    return new this.constructor(blocks)\n  }\n\n  toString() {\n    return this.blockList.toString()\n  }\n\n  toJSON() {\n    return this.blockList.toJSON()\n  }\n\n  toConsole() {\n    return JSON.stringify(this.blockList.toArray()).map((block) => JSON.parse(block.text.toConsole()))\n  }\n}\n\nconst attributesForBlock = function(block) {\n  const attributes = {}\n  const attributeName = block.getLastAttribute()\n  if (attributeName) {\n    attributes[attributeName] = true\n  }\n  return attributes\n}\n","import BasicObject from \"trix/core/basic_object\"\n\nimport { nodeIsAttachmentElement, removeNode, tagName, walkTree } from \"trix/core/helpers\"\n\nconst DEFAULT_ALLOWED_ATTRIBUTES = \"style href src width height class\".split(\" \")\nconst DEFAULT_FORBIDDEN_PROTOCOLS = \"javascript:\".split(\" \")\nconst DEFAULT_FORBIDDEN_ELEMENTS = \"script iframe\".split(\" \")\n\nexport default class HTMLSanitizer extends BasicObject {\n  static sanitize(html, options) {\n    const sanitizer = new this(html, options)\n    sanitizer.sanitize()\n    return sanitizer\n  }\n\n  constructor(html, { allowedAttributes, forbiddenProtocols, forbiddenElements } = {}) {\n    super(...arguments)\n    this.allowedAttributes = allowedAttributes || DEFAULT_ALLOWED_ATTRIBUTES\n    this.forbiddenProtocols = forbiddenProtocols || DEFAULT_FORBIDDEN_PROTOCOLS\n    this.forbiddenElements = forbiddenElements || DEFAULT_FORBIDDEN_ELEMENTS\n    this.body = createBodyElementForHTML(html)\n  }\n\n  sanitize() {\n    this.sanitizeElements()\n    return this.normalizeListElementNesting()\n  }\n\n  getHTML() {\n    return this.body.innerHTML\n  }\n\n  getBody() {\n    return this.body\n  }\n\n  // Private\n\n  sanitizeElements() {\n    const walker = walkTree(this.body)\n    const nodesToRemove = []\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE:\n          if (this.elementIsRemovable(node)) {\n            nodesToRemove.push(node)\n          } else {\n            this.sanitizeElement(node)\n          }\n          break\n        case Node.COMMENT_NODE:\n          nodesToRemove.push(node)\n          break\n      }\n    }\n\n    nodesToRemove.forEach((node) => removeNode(node))\n\n    return this.body\n  }\n\n  sanitizeElement(element) {\n    if (element.hasAttribute(\"href\")) {\n      if (this.forbiddenProtocols.includes(element.protocol)) {\n        element.removeAttribute(\"href\")\n      }\n    }\n\n    Array.from(element.attributes).forEach(({ name }) => {\n      if (!this.allowedAttributes.includes(name) && name.indexOf(\"data-trix\") !== 0) {\n        element.removeAttribute(name)\n      }\n    })\n\n    return element\n  }\n\n  normalizeListElementNesting() {\n    Array.from(this.body.querySelectorAll(\"ul,ol\")).forEach((listElement) => {\n      const previousElement = listElement.previousElementSibling\n      if (previousElement) {\n        if (tagName(previousElement) === \"li\") {\n          previousElement.appendChild(listElement)\n        }\n      }\n    })\n\n    return this.body\n  }\n\n  elementIsRemovable(element) {\n    if (element?.nodeType !== Node.ELEMENT_NODE) return\n    return this.elementIsForbidden(element) || this.elementIsntSerializable(element)\n  }\n\n  elementIsForbidden(element) {\n    return this.forbiddenElements.includes(tagName(element))\n  }\n\n  elementIsntSerializable(element) {\n    return element.getAttribute(\"data-trix-serialize\") === \"false\" && !nodeIsAttachmentElement(element)\n  }\n}\n\nconst createBodyElementForHTML = function(html = \"\") {\n  // Remove everything after </html>\n  html = html.replace(/<\\/html[^>]*>[^]*$/i, \"</html>\")\n  const doc = document.implementation.createHTMLDocument(\"\")\n  doc.documentElement.innerHTML = html\n\n  Array.from(doc.head.querySelectorAll(\"style\")).forEach((element) => {\n    doc.body.appendChild(element)\n  })\n\n  return doc.body\n}\n","/* eslint-disable\n    no-case-declarations,\n    no-irregular-whitespace,\n*/\nimport config from \"trix/config\"\nimport BasicObject from \"trix/core/basic_object\"\nimport Document from \"trix/models/document\"\nimport HTMLSanitizer from \"trix/models/html_sanitizer\"\n\nimport {\n  arraysAreEqual,\n  breakableWhitespacePattern,\n  elementContainsNode,\n  findClosestElementFromNode,\n  getBlockTagNames,\n  makeElement,\n  nodeIsAttachmentElement,\n  normalizeSpaces,\n  removeNode,\n  squishBreakableWhitespace,\n  tagName,\n  walkTree,\n} from \"trix/core/helpers\"\n\nconst pieceForString = (string, attributes = {}) => {\n  const type = \"string\"\n  string = normalizeSpaces(string)\n  return { string, attributes, type }\n}\n\nconst pieceForAttachment = (attachment, attributes = {}) => {\n  const type = \"attachment\"\n  return { attachment, attributes, type }\n}\n\nconst blockForAttributes = (attributes = {}) => {\n  const text = []\n  return { text, attributes }\n}\n\nconst parseTrixDataAttribute = (element, name) => {\n  try {\n    return JSON.parse(element.getAttribute(`data-trix-${name}`))\n  } catch (error) {\n    return {}\n  }\n}\n\nconst getImageDimensions = (element) => {\n  const width = element.getAttribute(\"width\")\n  const height = element.getAttribute(\"height\")\n  const dimensions = {}\n  if (width) {\n    dimensions.width = parseInt(width, 10)\n  }\n  if (height) {\n    dimensions.height = parseInt(height, 10)\n  }\n  return dimensions\n}\n\nexport default class HTMLParser extends BasicObject {\n  static parse(html, options) {\n    const parser = new this(html, options)\n    parser.parse()\n    return parser\n  }\n\n  constructor(html, { referenceElement } = {}) {\n    super(...arguments)\n    this.html = html\n    this.referenceElement = referenceElement\n    this.blocks = []\n    this.blockElements = []\n    this.processedElements = []\n  }\n\n  getDocument() {\n    return Document.fromJSON(this.blocks)\n  }\n\n  // HTML parsing\n\n  parse() {\n    try {\n      this.createHiddenContainer()\n      const html = HTMLSanitizer.sanitize(this.html).getHTML()\n      this.containerElement.innerHTML = html\n      const walker = walkTree(this.containerElement, { usingFilter: nodeFilter })\n      while (walker.nextNode()) {\n        this.processNode(walker.currentNode)\n      }\n      return this.translateBlockElementMarginsToNewlines()\n    } finally {\n      this.removeHiddenContainer()\n    }\n  }\n\n  createHiddenContainer() {\n    if (this.referenceElement) {\n      this.containerElement = this.referenceElement.cloneNode(false)\n      this.containerElement.removeAttribute(\"id\")\n      this.containerElement.setAttribute(\"data-trix-internal\", \"\")\n      this.containerElement.style.display = \"none\"\n      return this.referenceElement.parentNode.insertBefore(this.containerElement, this.referenceElement.nextSibling)\n    } else {\n      this.containerElement = makeElement({ tagName: \"div\", style: { display: \"none\" } })\n      return document.body.appendChild(this.containerElement)\n    }\n  }\n\n  removeHiddenContainer() {\n    return removeNode(this.containerElement)\n  }\n\n  processNode(node) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        if (!this.isInsignificantTextNode(node)) {\n          this.appendBlockForTextNode(node)\n          return this.processTextNode(node)\n        }\n        break\n      case Node.ELEMENT_NODE:\n        this.appendBlockForElement(node)\n        return this.processElement(node)\n    }\n  }\n\n  appendBlockForTextNode(node) {\n    const element = node.parentNode\n    if (element === this.currentBlockElement && this.isBlockElement(node.previousSibling)) {\n      return this.appendStringWithAttributes(\"\\n\")\n    } else if (element === this.containerElement || this.isBlockElement(element)) {\n      const attributes = this.getBlockAttributes(element)\n      if (!arraysAreEqual(attributes, this.currentBlock?.attributes)) {\n        this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element)\n        this.currentBlockElement = element\n      }\n    }\n  }\n\n  appendBlockForElement(element) {\n    const elementIsBlockElement = this.isBlockElement(element)\n    const currentBlockContainsElement = elementContainsNode(this.currentBlockElement, element)\n\n    if (elementIsBlockElement && !this.isBlockElement(element.firstChild)) {\n      if (!this.isInsignificantTextNode(element.firstChild) || !this.isBlockElement(element.firstElementChild)) {\n        const attributes = this.getBlockAttributes(element)\n        if (element.firstChild) {\n          if (!(currentBlockContainsElement && arraysAreEqual(attributes, this.currentBlock.attributes))) {\n            this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element)\n            this.currentBlockElement = element\n          } else {\n            return this.appendStringWithAttributes(\"\\n\")\n          }\n        }\n      }\n    } else if (this.currentBlockElement && !currentBlockContainsElement && !elementIsBlockElement) {\n      const parentBlockElement = this.findParentBlockElement(element)\n      if (parentBlockElement) {\n        return this.appendBlockForElement(parentBlockElement)\n      } else {\n        this.currentBlock = this.appendEmptyBlock()\n        this.currentBlockElement = null\n      }\n    }\n  }\n\n  findParentBlockElement(element) {\n    let { parentElement } = element\n    while (parentElement && parentElement !== this.containerElement) {\n      if (this.isBlockElement(parentElement) && this.blockElements.includes(parentElement)) {\n        return parentElement\n      } else {\n        parentElement = parentElement.parentElement\n      }\n    }\n    return null\n  }\n\n  processTextNode(node) {\n    let string = node.data\n    if (!elementCanDisplayPreformattedText(node.parentNode)) {\n      string = squishBreakableWhitespace(string)\n      if (stringEndsWithWhitespace(node.previousSibling?.textContent)) {\n        string = leftTrimBreakableWhitespace(string)\n      }\n    }\n    return this.appendStringWithAttributes(string, this.getTextAttributes(node.parentNode))\n  }\n\n  processElement(element) {\n    let attributes\n    if (nodeIsAttachmentElement(element)) {\n      attributes = parseTrixDataAttribute(element, \"attachment\")\n      if (Object.keys(attributes).length) {\n        const textAttributes = this.getTextAttributes(element)\n        this.appendAttachmentWithAttributes(attributes, textAttributes)\n        // We have everything we need so avoid processing inner nodes\n        element.innerHTML = \"\"\n      }\n      return this.processedElements.push(element)\n    } else {\n      switch (tagName(element)) {\n        case \"br\":\n          if (!this.isExtraBR(element) && !this.isBlockElement(element.nextSibling)) {\n            this.appendStringWithAttributes(\"\\n\", this.getTextAttributes(element))\n          }\n          return this.processedElements.push(element)\n        case \"img\":\n          attributes = { url: element.getAttribute(\"src\"), contentType: \"image\" }\n          const object = getImageDimensions(element)\n          for (const key in object) {\n            const value = object[key]\n            attributes[key] = value\n          }\n          this.appendAttachmentWithAttributes(attributes, this.getTextAttributes(element))\n          return this.processedElements.push(element)\n        case \"tr\":\n          if (element.parentNode.firstChild !== element) {\n            return this.appendStringWithAttributes(\"\\n\")\n          }\n          break\n        case \"td\":\n          if (element.parentNode.firstChild !== element) {\n            return this.appendStringWithAttributes(\" | \")\n          }\n          break\n      }\n    }\n  }\n\n  // Document construction\n\n  appendBlockForAttributesWithElement(attributes, element) {\n    this.blockElements.push(element)\n    const block = blockForAttributes(attributes)\n    this.blocks.push(block)\n    return block\n  }\n\n  appendEmptyBlock() {\n    return this.appendBlockForAttributesWithElement([], null)\n  }\n\n  appendStringWithAttributes(string, attributes) {\n    return this.appendPiece(pieceForString(string, attributes))\n  }\n\n  appendAttachmentWithAttributes(attachment, attributes) {\n    return this.appendPiece(pieceForAttachment(attachment, attributes))\n  }\n\n  appendPiece(piece) {\n    if (this.blocks.length === 0) {\n      this.appendEmptyBlock()\n    }\n    return this.blocks[this.blocks.length - 1].text.push(piece)\n  }\n\n  appendStringToTextAtIndex(string, index) {\n    const { text } = this.blocks[index]\n    const piece = text[text.length - 1]\n\n    if (piece?.type === \"string\") {\n      piece.string += string\n    } else {\n      return text.push(pieceForString(string))\n    }\n  }\n\n  prependStringToTextAtIndex(string, index) {\n    const { text } = this.blocks[index]\n    const piece = text[0]\n\n    if (piece?.type === \"string\") {\n      piece.string = string + piece.string\n    } else {\n      return text.unshift(pieceForString(string))\n    }\n  }\n\n  // Attribute parsing\n\n  getTextAttributes(element) {\n    let value\n    const attributes = {}\n    for (const attribute in config.textAttributes) {\n      const configAttr = config.textAttributes[attribute]\n      if (\n        configAttr.tagName &&\n        findClosestElementFromNode(element, {\n          matchingSelector: configAttr.tagName,\n          untilNode: this.containerElement,\n        })\n      ) {\n        attributes[attribute] = true\n      } else if (configAttr.parser) {\n        value = configAttr.parser(element)\n        if (value) {\n          let attributeInheritedFromBlock = false\n          for (const blockElement of this.findBlockElementAncestors(element)) {\n            if (configAttr.parser(blockElement) === value) {\n              attributeInheritedFromBlock = true\n              break\n            }\n          }\n          if (!attributeInheritedFromBlock) {\n            attributes[attribute] = value\n          }\n        }\n      } else if (configAttr.styleProperty) {\n        value = element.style[configAttr.styleProperty]\n        if (value) {\n          attributes[attribute] = value\n        }\n      }\n    }\n\n    if (nodeIsAttachmentElement(element)) {\n      const object = parseTrixDataAttribute(element, \"attributes\")\n      for (const key in object) {\n        value = object[key]\n        attributes[key] = value\n      }\n    }\n\n    return attributes\n  }\n\n  getBlockAttributes(element) {\n    const attributes = []\n    while (element && element !== this.containerElement) {\n      for (const attribute in config.blockAttributes) {\n        const attrConfig = config.blockAttributes[attribute]\n        if (attrConfig.parse !== false) {\n          if (tagName(element) === attrConfig.tagName) {\n            if (attrConfig.test?.(element) || !attrConfig.test) {\n              attributes.push(attribute)\n              if (attrConfig.listAttribute) {\n                attributes.push(attrConfig.listAttribute)\n              }\n            }\n          }\n        }\n      }\n      element = element.parentNode\n    }\n    return attributes.reverse()\n  }\n\n  findBlockElementAncestors(element) {\n    const ancestors = []\n    while (element && element !== this.containerElement) {\n      const tag = tagName(element)\n      if (getBlockTagNames().includes(tag)) {\n        ancestors.push(element)\n      }\n      element = element.parentNode\n    }\n    return ancestors\n  }\n\n  // Element inspection\n\n  isBlockElement(element) {\n    if (element?.nodeType !== Node.ELEMENT_NODE) return\n    if (nodeIsAttachmentElement(element)) return\n    if (findClosestElementFromNode(element, { matchingSelector: \"td\", untilNode: this.containerElement })) return\n\n    return getBlockTagNames().includes(tagName(element)) ||\n      window.getComputedStyle(element).display === \"block\"\n  }\n\n  isInsignificantTextNode(node) {\n    if (node?.nodeType !== Node.TEXT_NODE) return\n    if (!stringIsAllBreakableWhitespace(node.data)) return\n    const { parentNode, previousSibling, nextSibling } = node\n    if (nodeEndsWithNonWhitespace(parentNode.previousSibling) && !this.isBlockElement(parentNode.previousSibling)) return\n    if (elementCanDisplayPreformattedText(parentNode)) return\n    return !previousSibling || this.isBlockElement(previousSibling) || !nextSibling || this.isBlockElement(nextSibling)\n  }\n\n  isExtraBR(element) {\n    return tagName(element) === \"br\" && this.isBlockElement(element.parentNode) && element.parentNode.lastChild === element\n  }\n\n  // Margin translation\n\n  translateBlockElementMarginsToNewlines() {\n    const defaultMargin = this.getMarginOfDefaultBlockElement()\n\n    for (let index = 0; index < this.blocks.length; index++) {\n      const margin = this.getMarginOfBlockElementAtIndex(index)\n      if (margin) {\n        if (margin.top > defaultMargin.top * 2) {\n          this.prependStringToTextAtIndex(\"\\n\", index)\n        }\n\n        if (margin.bottom > defaultMargin.bottom * 2) {\n          this.appendStringToTextAtIndex(\"\\n\", index)\n        }\n      }\n    }\n  }\n\n  getMarginOfBlockElementAtIndex(index) {\n    const element = this.blockElements[index]\n    if (element) {\n      if (element.textContent) {\n        if (!getBlockTagNames().includes(tagName(element)) && !this.processedElements.includes(element)) {\n          return getBlockElementMargin(element)\n        }\n      }\n    }\n  }\n\n  getMarginOfDefaultBlockElement() {\n    const element = makeElement(config.blockAttributes.default.tagName)\n    this.containerElement.appendChild(element)\n    return getBlockElementMargin(element)\n  }\n}\n\n// Helpers\n\nconst elementCanDisplayPreformattedText = function(element) {\n  const { whiteSpace } = window.getComputedStyle(element)\n  return [ \"pre\", \"pre-wrap\", \"pre-line\" ].includes(whiteSpace)\n}\n\nconst nodeEndsWithNonWhitespace = (node) => node && !stringEndsWithWhitespace(node.textContent)\n\nconst getBlockElementMargin = function(element) {\n  const style = window.getComputedStyle(element)\n  if (style.display === \"block\") {\n    return { top: parseInt(style.marginTop), bottom: parseInt(style.marginBottom) }\n  }\n}\n\nconst nodeFilter = function(node) {\n  if (tagName(node) === \"style\") {\n    return NodeFilter.FILTER_REJECT\n  } else {\n    return NodeFilter.FILTER_ACCEPT\n  }\n}\n\n// Whitespace\n\nconst leftTrimBreakableWhitespace = (string) => string.replace(new RegExp(`^${breakableWhitespacePattern.source}+`), \"\")\n\nconst stringIsAllBreakableWhitespace = (string) => new RegExp(`^${breakableWhitespacePattern.source}*$`).test(string)\n\nconst stringEndsWithWhitespace = (string) => /\\s$/.test(string)\n","export default class LineBreakInsertion {\n  constructor(composition) {\n    this.composition = composition\n    this.document = this.composition.document\n    const selectedRange = this.composition.getSelectedRange()\n    this.startPosition = selectedRange[0]\n    this.endPosition = selectedRange[1]\n\n    this.startLocation = this.document.locationFromPosition(this.startPosition)\n    this.endLocation = this.document.locationFromPosition(this.endPosition)\n\n    this.block = this.document.getBlockAtIndex(this.endLocation.index)\n    this.breaksOnReturn = this.block.breaksOnReturn()\n    this.previousCharacter = this.block.text.getStringAtPosition(this.endLocation.offset - 1)\n    this.nextCharacter = this.block.text.getStringAtPosition(this.endLocation.offset)\n  }\n\n  shouldInsertBlockBreak() {\n    if (this.block.hasAttributes() && this.block.isListItem() && !this.block.isEmpty()) {\n      return this.startLocation.offset !== 0\n    } else {\n      return this.breaksOnReturn && this.nextCharacter !== \"\\n\"\n    }\n  }\n\n  shouldBreakFormattedBlock() {\n    return (\n      this.block.hasAttributes() &&\n      !this.block.isListItem() &&\n      (this.breaksOnReturn && this.nextCharacter === \"\\n\" || this.previousCharacter === \"\\n\")\n    )\n  }\n\n  shouldDecreaseListLevel() {\n    return this.block.hasAttributes() && this.block.isListItem() && this.block.isEmpty()\n  }\n\n  shouldPrependListItem() {\n    return this.block.isListItem() && this.startLocation.offset === 0 && !this.block.isEmpty()\n  }\n\n  shouldRemoveLastBlockAttribute() {\n    return this.block.hasAttributes() && !this.block.isListItem() && this.block.isEmpty()\n  }\n}\n","import config from \"trix/config\"\nimport { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nimport BasicObject from \"trix/core/basic_object\"\nimport Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\nimport Attachment from \"trix/models/attachment\"\nimport Document from \"trix/models/document\"\nimport HTMLParser from \"trix/models/html_parser\"\nimport LineBreakInsertion from \"trix/models/line_break_insertion\"\n\nimport {\n  arrayStartsWith,\n  extend,\n  getAllAttributeNames,\n  getBlockConfig,\n  getTextConfig,\n  normalizeRange,\n  objectsAreEqual,\n  rangeIsCollapsed,\n  rangesAreEqual,\n  summarizeArrayChange,\n} from \"trix/core/helpers\"\n\nconst PLACEHOLDER = \" \"\n\nexport default class Composition extends BasicObject {\n  constructor() {\n    super(...arguments)\n    this.document = new Document()\n    this.attachments = []\n    this.currentAttributes = {}\n    this.revision = 0\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      this.document = document\n      this.refreshAttachments()\n      this.revision++\n      return this.delegate?.compositionDidChangeDocument?.(document)\n    }\n  }\n\n  // Snapshots\n\n  getSnapshot() {\n    return {\n      document: this.document,\n      selectedRange: this.getSelectedRange(),\n    }\n  }\n\n  loadSnapshot({ document, selectedRange }) {\n    this.delegate?.compositionWillLoadSnapshot?.()\n    this.setDocument(document != null ? document : new Document())\n    this.setSelection(selectedRange != null ? selectedRange : [ 0, 0 ])\n    return this.delegate?.compositionDidLoadSnapshot?.()\n  }\n\n  // Responder protocol\n\n  insertText(text, { updatePosition } = { updatePosition: true }) {\n    const selectedRange = this.getSelectedRange()\n    this.setDocument(this.document.insertTextAtRange(text, selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + text.getLength()\n\n    if (updatePosition) {\n      this.setSelection(endPosition)\n    }\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  insertBlock(block = new Block()) {\n    const document = new Document([ block ])\n    return this.insertDocument(document)\n  }\n\n  insertDocument(document = new Document()) {\n    const selectedRange = this.getSelectedRange()\n    this.setDocument(this.document.insertDocumentAtRange(document, selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + document.getLength()\n\n    this.setSelection(endPosition)\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  insertString(string, options) {\n    const attributes = this.getCurrentTextAttributes()\n    const text = Text.textForStringWithAttributes(string, attributes)\n    return this.insertText(text, options)\n  }\n\n  insertBlockBreak() {\n    const selectedRange = this.getSelectedRange()\n    this.setDocument(this.document.insertBlockBreakAtRange(selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + 1\n\n    this.setSelection(endPosition)\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  insertLineBreak() {\n    const insertion = new LineBreakInsertion(this)\n\n    if (insertion.shouldDecreaseListLevel()) {\n      this.decreaseListLevel()\n      return this.setSelection(insertion.startPosition)\n    } else if (insertion.shouldPrependListItem()) {\n      const document = new Document([ insertion.block.copyWithoutText() ])\n      return this.insertDocument(document)\n    } else if (insertion.shouldInsertBlockBreak()) {\n      return this.insertBlockBreak()\n    } else if (insertion.shouldRemoveLastBlockAttribute()) {\n      return this.removeLastBlockAttribute()\n    } else if (insertion.shouldBreakFormattedBlock()) {\n      return this.breakFormattedBlock(insertion)\n    } else {\n      return this.insertString(\"\\n\")\n    }\n  }\n\n  insertHTML(html) {\n    const document = HTMLParser.parse(html).getDocument()\n    const selectedRange = this.getSelectedRange()\n\n    this.setDocument(this.document.mergeDocumentAtRange(document, selectedRange))\n\n    const startPosition = selectedRange[0]\n    const endPosition = startPosition + document.getLength() - 1\n\n    this.setSelection(endPosition)\n    return this.notifyDelegateOfInsertionAtRange([ startPosition, endPosition ])\n  }\n\n  replaceHTML(html) {\n    const document = HTMLParser.parse(html).getDocument().copyUsingObjectsFromDocument(this.document)\n    const locationRange = this.getLocationRange({ strict: false })\n    const selectedRange = this.document.rangeFromLocationRange(locationRange)\n    this.setDocument(document)\n    return this.setSelection(selectedRange)\n  }\n\n  insertFile(file) {\n    return this.insertFiles([ file ])\n  }\n\n  insertFiles(files) {\n    const attachments = []\n\n    Array.from(files).forEach((file) => {\n      if (this.delegate?.compositionShouldAcceptFile(file)) {\n        const attachment = Attachment.attachmentForFile(file)\n        attachments.push(attachment)\n      }\n    })\n\n    return this.insertAttachments(attachments)\n  }\n\n  insertAttachment(attachment) {\n    return this.insertAttachments([ attachment ])\n  }\n\n  insertAttachments(attachments) {\n    let text = new Text()\n\n    Array.from(attachments).forEach((attachment) => {\n      const type = attachment.getType()\n      const presentation = config.attachments[type]?.presentation\n\n      const attributes = this.getCurrentTextAttributes()\n      if (presentation) {\n        attributes.presentation = presentation\n      }\n\n      const attachmentText = Text.textForAttachmentWithAttributes(attachment, attributes)\n      text = text.appendText(attachmentText)\n    })\n\n    return this.insertText(text)\n  }\n\n  shouldManageDeletingInDirection(direction) {\n    const locationRange = this.getLocationRange()\n    if (rangeIsCollapsed(locationRange)) {\n      if (direction === \"backward\" && locationRange[0].offset === 0) {\n        return true\n      }\n      if (this.shouldManageMovingCursorInDirection(direction)) {\n        return true\n      }\n    } else {\n      if (locationRange[0].index !== locationRange[1].index) {\n        return true\n      }\n    }\n    return false\n  }\n\n  deleteInDirection(direction, { length } = {}) {\n    let attachment, deletingIntoPreviousBlock, selectionSpansBlocks\n    const locationRange = this.getLocationRange()\n    let range = this.getSelectedRange()\n    const selectionIsCollapsed = rangeIsCollapsed(range)\n\n    if (selectionIsCollapsed) {\n      deletingIntoPreviousBlock = direction === \"backward\" && locationRange[0].offset === 0\n    } else {\n      selectionSpansBlocks = locationRange[0].index !== locationRange[1].index\n    }\n\n    if (deletingIntoPreviousBlock) {\n      if (this.canDecreaseBlockAttributeLevel()) {\n        const block = this.getBlock()\n\n        if (block.isListItem()) {\n          this.decreaseListLevel()\n        } else {\n          this.decreaseBlockAttributeLevel()\n        }\n\n        this.setSelection(range[0])\n        if (block.isEmpty()) {\n          return false\n        }\n      }\n    }\n\n    if (selectionIsCollapsed) {\n      range = this.getExpandedRangeInDirection(direction, { length })\n      if (direction === \"backward\") {\n        attachment = this.getAttachmentAtRange(range)\n      }\n    }\n\n    if (attachment) {\n      this.editAttachment(attachment)\n      return false\n    } else {\n      this.setDocument(this.document.removeTextAtRange(range))\n      this.setSelection(range[0])\n      if (deletingIntoPreviousBlock || selectionSpansBlocks) {\n        return false\n      }\n    }\n  }\n\n  moveTextFromRange(range) {\n    const [ position ] = Array.from(this.getSelectedRange())\n    this.setDocument(this.document.moveTextFromRangeToPosition(range, position))\n    return this.setSelection(position)\n  }\n\n  removeAttachment(attachment) {\n    const range = this.document.getRangeOfAttachment(attachment)\n    if (range) {\n      this.stopEditingAttachment()\n      this.setDocument(this.document.removeTextAtRange(range))\n      return this.setSelection(range[0])\n    }\n  }\n\n  removeLastBlockAttribute() {\n    const [ startPosition, endPosition ] = Array.from(this.getSelectedRange())\n    const block = this.document.getBlockAtPosition(endPosition)\n    this.removeCurrentAttribute(block.getLastAttribute())\n    return this.setSelection(startPosition)\n  }\n\n  insertPlaceholder() {\n    this.placeholderPosition = this.getPosition()\n    return this.insertString(PLACEHOLDER)\n  }\n\n  selectPlaceholder() {\n    if (this.placeholderPosition != null) {\n      this.setSelectedRange([ this.placeholderPosition, this.placeholderPosition + PLACEHOLDER.length ])\n      return this.getSelectedRange()\n    }\n  }\n\n  forgetPlaceholder() {\n    this.placeholderPosition = null\n  }\n\n  // Current attributes\n\n  hasCurrentAttribute(attributeName) {\n    const value = this.currentAttributes[attributeName]\n    return value != null && value !== false\n  }\n\n  toggleCurrentAttribute(attributeName) {\n    const value = !this.currentAttributes[attributeName]\n    if (value) {\n      return this.setCurrentAttribute(attributeName, value)\n    } else {\n      return this.removeCurrentAttribute(attributeName)\n    }\n  }\n\n  canSetCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      return this.canSetCurrentBlockAttribute(attributeName)\n    } else {\n      return this.canSetCurrentTextAttribute(attributeName)\n    }\n  }\n\n  canSetCurrentTextAttribute(attributeName) {\n    const document = this.getSelectedDocument()\n    if (!document) return\n    for (const attachment of Array.from(document.getAttachments())) {\n      if (!attachment.hasContent()) {\n        return false\n      }\n    }\n    return true\n  }\n\n  canSetCurrentBlockAttribute(attributeName) {\n    const block = this.getBlock()\n    if (!block) return\n    return !block.isTerminalBlock()\n  }\n\n  setCurrentAttribute(attributeName, value) {\n    if (getBlockConfig(attributeName)) {\n      return this.setBlockAttribute(attributeName, value)\n    } else {\n      this.setTextAttribute(attributeName, value)\n      this.currentAttributes[attributeName] = value\n      return this.notifyDelegateOfCurrentAttributesChange()\n    }\n  }\n\n  setTextAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange()\n    if (!selectedRange) return\n\n    const [ startPosition, endPosition ] = Array.from(selectedRange)\n    if (startPosition === endPosition) {\n      if (attributeName === \"href\") {\n        const text = Text.textForStringWithAttributes(value, { href: value })\n        return this.insertText(text)\n      }\n    } else {\n      return this.setDocument(this.document.addAttributeAtRange(attributeName, value, selectedRange))\n    }\n  }\n\n  setBlockAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange()\n    if (this.canSetCurrentAttribute(attributeName)) {\n      this.setDocument(this.document.applyBlockAttributeAtRange(attributeName, value, selectedRange))\n      return this.setSelection(selectedRange)\n    }\n  }\n\n  removeCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      this.removeBlockAttribute(attributeName)\n      return this.updateCurrentAttributes()\n    } else {\n      this.removeTextAttribute(attributeName)\n      delete this.currentAttributes[attributeName]\n      return this.notifyDelegateOfCurrentAttributesChange()\n    }\n  }\n\n  removeTextAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange()\n    if (!selectedRange) return\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange))\n  }\n\n  removeBlockAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange()\n    if (!selectedRange) return\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange))\n  }\n\n  canDecreaseNestingLevel() {\n    return this.getBlock()?.getNestingLevel() > 0\n  }\n\n  canIncreaseNestingLevel() {\n    const block = this.getBlock()\n    if (!block) return\n    if (getBlockConfig(block.getLastNestableAttribute())?.listAttribute) {\n      const previousBlock = this.getPreviousBlock()\n      if (previousBlock) {\n        return arrayStartsWith(previousBlock.getListItemAttributes(), block.getListItemAttributes())\n      }\n    } else {\n      return block.getNestingLevel() > 0\n    }\n  }\n\n  decreaseNestingLevel() {\n    const block = this.getBlock()\n    if (!block) return\n    return this.setDocument(this.document.replaceBlock(block, block.decreaseNestingLevel()))\n  }\n\n  increaseNestingLevel() {\n    const block = this.getBlock()\n    if (!block) return\n    return this.setDocument(this.document.replaceBlock(block, block.increaseNestingLevel()))\n  }\n\n  canDecreaseBlockAttributeLevel() {\n    return this.getBlock()?.getAttributeLevel() > 0\n  }\n\n  decreaseBlockAttributeLevel() {\n    const attribute = this.getBlock()?.getLastAttribute()\n    if (attribute) {\n      return this.removeCurrentAttribute(attribute)\n    }\n  }\n\n  decreaseListLevel() {\n    let [ startPosition ] = Array.from(this.getSelectedRange())\n    const { index } = this.document.locationFromPosition(startPosition)\n    let endIndex = index\n    const attributeLevel = this.getBlock().getAttributeLevel()\n\n    let block = this.document.getBlockAtIndex(endIndex + 1)\n    while (block) {\n      if (!block.isListItem() || block.getAttributeLevel() <= attributeLevel) {\n        break\n      }\n      endIndex++\n      block = this.document.getBlockAtIndex(endIndex + 1)\n    }\n\n    startPosition = this.document.positionFromLocation({ index, offset: 0 })\n    const endPosition = this.document.positionFromLocation({ index: endIndex, offset: 0 })\n    return this.setDocument(this.document.removeLastListAttributeAtRange([ startPosition, endPosition ]))\n  }\n\n  updateCurrentAttributes() {\n    const selectedRange = this.getSelectedRange({ ignoreLock: true })\n    if (selectedRange) {\n      const currentAttributes = this.document.getCommonAttributesAtRange(selectedRange)\n\n      Array.from(getAllAttributeNames()).forEach((attributeName) => {\n        if (!currentAttributes[attributeName]) {\n          if (!this.canSetCurrentAttribute(attributeName)) {\n            currentAttributes[attributeName] = false\n          }\n        }\n      })\n\n      if (!objectsAreEqual(currentAttributes, this.currentAttributes)) {\n        this.currentAttributes = currentAttributes\n        return this.notifyDelegateOfCurrentAttributesChange()\n      }\n    }\n  }\n\n  getCurrentAttributes() {\n    return extend.call({}, this.currentAttributes)\n  }\n\n  getCurrentTextAttributes() {\n    const attributes = {}\n    for (const key in this.currentAttributes) {\n      const value = this.currentAttributes[key]\n      if (value !== false) {\n        if (getTextConfig(key)) {\n          attributes[key] = value\n        }\n      }\n    }\n    return attributes\n  }\n\n  // Selection freezing\n\n  freezeSelection() {\n    return this.setCurrentAttribute(\"frozen\", true)\n  }\n\n  thawSelection() {\n    return this.removeCurrentAttribute(\"frozen\")\n  }\n\n  hasFrozenSelection() {\n    return this.hasCurrentAttribute(\"frozen\")\n  }\n\n  setSelection(selectedRange) {\n    const locationRange = this.document.locationRangeFromRange(selectedRange)\n    return this.delegate?.compositionDidRequestChangingSelectionToLocationRange(locationRange)\n  }\n\n  getSelectedRange() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      return this.document.rangeFromLocationRange(locationRange)\n    }\n  }\n\n  setSelectedRange(selectedRange) {\n    const locationRange = this.document.locationRangeFromRange(selectedRange)\n    return this.getSelectionManager().setLocationRange(locationRange)\n  }\n\n  getPosition() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      return this.document.positionFromLocation(locationRange[0])\n    }\n  }\n\n  getLocationRange(options) {\n    if (this.targetLocationRange) {\n      return this.targetLocationRange\n    } else {\n      return this.getSelectionManager().getLocationRange(options) || normalizeRange({ index: 0, offset: 0 })\n    }\n  }\n\n  withTargetLocationRange(locationRange, fn) {\n    let result\n    this.targetLocationRange = locationRange\n    try {\n      result = fn()\n    } finally {\n      this.targetLocationRange = null\n    }\n    return result\n  }\n\n  withTargetRange(range, fn) {\n    const locationRange = this.document.locationRangeFromRange(range)\n    return this.withTargetLocationRange(locationRange, fn)\n  }\n\n  withTargetDOMRange(domRange, fn) {\n    const locationRange = this.createLocationRangeFromDOMRange(domRange, { strict: false })\n    return this.withTargetLocationRange(locationRange, fn)\n  }\n\n  getExpandedRangeInDirection(direction, { length } = {}) {\n    let [ startPosition, endPosition ] = Array.from(this.getSelectedRange())\n    if (direction === \"backward\") {\n      if (length) {\n        startPosition -= length\n      } else {\n        startPosition = this.translateUTF16PositionFromOffset(startPosition, -1)\n      }\n    } else {\n      if (length) {\n        endPosition += length\n      } else {\n        endPosition = this.translateUTF16PositionFromOffset(endPosition, 1)\n      }\n    }\n    return normalizeRange([ startPosition, endPosition ])\n  }\n\n  shouldManageMovingCursorInDirection(direction) {\n    if (this.editingAttachment) {\n      return true\n    }\n    const range = this.getExpandedRangeInDirection(direction)\n    return this.getAttachmentAtRange(range) != null\n  }\n\n  moveCursorInDirection(direction) {\n    let canEditAttachment, range\n    if (this.editingAttachment) {\n      range = this.document.getRangeOfAttachment(this.editingAttachment)\n    } else {\n      const selectedRange = this.getSelectedRange()\n      range = this.getExpandedRangeInDirection(direction)\n      canEditAttachment = !rangesAreEqual(selectedRange, range)\n    }\n\n    if (direction === \"backward\") {\n      this.setSelectedRange(range[0])\n    } else {\n      this.setSelectedRange(range[1])\n    }\n\n    if (canEditAttachment) {\n      const attachment = this.getAttachmentAtRange(range)\n      if (attachment) {\n        return this.editAttachment(attachment)\n      }\n    }\n  }\n\n  expandSelectionInDirection(direction, { length } = {}) {\n    const range = this.getExpandedRangeInDirection(direction, { length })\n    return this.setSelectedRange(range)\n  }\n\n  expandSelectionForEditing() {\n    if (this.hasCurrentAttribute(\"href\")) {\n      return this.expandSelectionAroundCommonAttribute(\"href\")\n    }\n  }\n\n  expandSelectionAroundCommonAttribute(attributeName) {\n    const position = this.getPosition()\n    const range = this.document.getRangeOfCommonAttributeAtPosition(attributeName, position)\n    return this.setSelectedRange(range)\n  }\n\n  selectionContainsAttachments() {\n    return this.getSelectedAttachments()?.length > 0\n  }\n\n  selectionIsInCursorTarget() {\n    return this.editingAttachment || this.positionIsCursorTarget(this.getPosition())\n  }\n\n  positionIsCursorTarget(position) {\n    const location = this.document.locationFromPosition(position)\n    if (location) {\n      return this.locationIsCursorTarget(location)\n    }\n  }\n\n  positionIsBlockBreak(position) {\n    return this.document.getPieceAtPosition(position)?.isBlockBreak()\n  }\n\n  getSelectedDocument() {\n    const selectedRange = this.getSelectedRange()\n    if (selectedRange) {\n      return this.document.getDocumentAtRange(selectedRange)\n    }\n  }\n\n  getSelectedAttachments() {\n    return this.getSelectedDocument()?.getAttachments()\n  }\n\n  // Attachments\n\n  getAttachments() {\n    return this.attachments.slice(0)\n  }\n\n  refreshAttachments() {\n    const attachments = this.document.getAttachments()\n    const { added, removed } = summarizeArrayChange(this.attachments, attachments)\n    this.attachments = attachments\n\n    Array.from(removed).forEach((attachment) => {\n      attachment.delegate = null\n      this.delegate?.compositionDidRemoveAttachment?.(attachment)\n    })\n\n    return (() => {\n      const result = []\n\n      Array.from(added).forEach((attachment) => {\n        attachment.delegate = this\n        result.push(this.delegate?.compositionDidAddAttachment?.(attachment))\n      })\n\n      return result\n    })()\n  }\n\n  // Attachment delegate\n\n  attachmentDidChangeAttributes(attachment) {\n    this.revision++\n    return this.delegate?.compositionDidEditAttachment?.(attachment)\n  }\n\n  attachmentDidChangePreviewURL(attachment) {\n    this.revision++\n    return this.delegate?.compositionDidChangeAttachmentPreviewURL?.(attachment)\n  }\n\n  // Attachment editing\n\n  editAttachment(attachment, options) {\n    if (attachment === this.editingAttachment) return\n    this.stopEditingAttachment()\n    this.editingAttachment = attachment\n    return this.delegate?.compositionDidStartEditingAttachment?.(this.editingAttachment, options)\n  }\n\n  stopEditingAttachment() {\n    if (!this.editingAttachment) return\n    this.delegate?.compositionDidStopEditingAttachment?.(this.editingAttachment)\n    this.editingAttachment = null\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    return this.setDocument(this.document.updateAttributesForAttachment(attributes, attachment))\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    return this.setDocument(this.document.removeAttributeForAttachment(attribute, attachment))\n  }\n\n  // Private\n\n  breakFormattedBlock(insertion) {\n    let { document } = insertion\n    const { block } = insertion\n    let position = insertion.startPosition\n    let range = [ position - 1, position ]\n\n    if (block.getBlockBreakPosition() === insertion.startLocation.offset) {\n      if (block.breaksOnReturn() && insertion.nextCharacter === \"\\n\") {\n        position += 1\n      } else {\n        document = document.removeTextAtRange(range)\n      }\n      range = [ position, position ]\n    } else if (insertion.nextCharacter === \"\\n\") {\n      if (insertion.previousCharacter === \"\\n\") {\n        range = [ position - 1, position + 1 ]\n      } else {\n        range = [ position, position + 1 ]\n        position += 1\n      }\n    } else if (insertion.startLocation.offset - 1 !== 0) {\n      position += 1\n    }\n\n    const newDocument = new Document([ block.removeLastAttribute().copyWithoutText() ])\n    this.setDocument(document.insertDocumentAtRange(newDocument, range))\n    return this.setSelection(position)\n  }\n\n  getPreviousBlock() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      const { index } = locationRange[0]\n      if (index > 0) {\n        return this.document.getBlockAtIndex(index - 1)\n      }\n    }\n  }\n\n  getBlock() {\n    const locationRange = this.getLocationRange()\n    if (locationRange) {\n      return this.document.getBlockAtIndex(locationRange[0].index)\n    }\n  }\n\n  getAttachmentAtRange(range) {\n    const document = this.document.getDocumentAtRange(range)\n    if (document.toString() === `${OBJECT_REPLACEMENT_CHARACTER}\\n`) {\n      return document.getAttachments()[0]\n    }\n  }\n\n  notifyDelegateOfCurrentAttributesChange() {\n    return this.delegate?.compositionDidChangeCurrentAttributes?.(this.currentAttributes)\n  }\n\n  notifyDelegateOfInsertionAtRange(range) {\n    return this.delegate?.compositionDidPerformInsertionAtRange?.(range)\n  }\n\n  translateUTF16PositionFromOffset(position, offset) {\n    const utf16string = this.document.toUTF16String()\n    const utf16position = utf16string.offsetFromUCS2Offset(position)\n    return utf16string.offsetToUCS2Offset(utf16position + offset)\n  }\n}\n\nComposition.proxyMethod(\"getSelectionManager().getPointRange\")\nComposition.proxyMethod(\"getSelectionManager().setLocationRangeFromPointRange\")\nComposition.proxyMethod(\"getSelectionManager().createLocationRangeFromDOMRange\")\nComposition.proxyMethod(\"getSelectionManager().locationIsCursorTarget\")\nComposition.proxyMethod(\"getSelectionManager().selectionIsExpanded\")\nComposition.proxyMethod(\"delegate?.getSelectionManager\")\n","import BasicObject from \"trix/core/basic_object\"\n\nexport default class UndoManager extends BasicObject {\n  constructor(composition) {\n    super(...arguments)\n    this.composition = composition\n    this.undoEntries = []\n    this.redoEntries = []\n  }\n\n  recordUndoEntry(description, { context, consolidatable } = {}) {\n    const previousEntry = this.undoEntries.slice(-1)[0]\n\n    if (!consolidatable || !entryHasDescriptionAndContext(previousEntry, description, context)) {\n      const undoEntry = this.createEntry({ description, context })\n      this.undoEntries.push(undoEntry)\n      this.redoEntries = []\n    }\n  }\n\n  undo() {\n    const undoEntry = this.undoEntries.pop()\n    if (undoEntry) {\n      const redoEntry = this.createEntry(undoEntry)\n      this.redoEntries.push(redoEntry)\n      return this.composition.loadSnapshot(undoEntry.snapshot)\n    }\n  }\n\n  redo() {\n    const redoEntry = this.redoEntries.pop()\n    if (redoEntry) {\n      const undoEntry = this.createEntry(redoEntry)\n      this.undoEntries.push(undoEntry)\n      return this.composition.loadSnapshot(redoEntry.snapshot)\n    }\n  }\n\n  canUndo() {\n    return this.undoEntries.length > 0\n  }\n\n  canRedo() {\n    return this.redoEntries.length > 0\n  }\n\n  // Private\n\n  createEntry({ description, context } = {}) {\n    return {\n      description: description?.toString(),\n      context: JSON.stringify(context),\n      snapshot: this.composition.getSnapshot(),\n    }\n  }\n}\n\nconst entryHasDescriptionAndContext = (entry, description, context) =>\n  entry?.description === description?.toString() && entry?.context === JSON.stringify(context)\n","export const attachmentGalleryFilter = function(snapshot) {\n  const filter = new Filter(snapshot)\n  filter.perform()\n  return filter.getSnapshot()\n}\n\nconst BLOCK_ATTRIBUTE_NAME = \"attachmentGallery\"\nconst TEXT_ATTRIBUTE_NAME = \"presentation\"\nconst TEXT_ATTRIBUTE_VALUE = \"gallery\"\n\nclass Filter {\n  constructor(snapshot) {\n    this.document = snapshot.document\n    this.selectedRange = snapshot.selectedRange\n  }\n\n  perform() {\n    this.removeBlockAttribute()\n    return this.applyBlockAttribute()\n  }\n\n  getSnapshot() {\n    return { document: this.document, selectedRange: this.selectedRange }\n  }\n\n  // Private\n\n  removeBlockAttribute() {\n    return this.findRangesOfBlocks().map((range) => this.document = this.document.removeAttributeAtRange(BLOCK_ATTRIBUTE_NAME, range))\n  }\n\n  applyBlockAttribute() {\n    let offset = 0\n\n    this.findRangesOfPieces().forEach((range) => {\n      if (range[1] - range[0] > 1) {\n        range[0] += offset\n        range[1] += offset\n\n        if (this.document.getCharacterAtPosition(range[1]) !== \"\\n\") {\n          this.document = this.document.insertBlockBreakAtRange(range[1])\n          if (range[1] < this.selectedRange[1]) {\n            this.moveSelectedRangeForward()\n          }\n          range[1]++\n          offset++\n        }\n\n        if (range[0] !== 0) {\n          if (this.document.getCharacterAtPosition(range[0] - 1) !== \"\\n\") {\n            this.document = this.document.insertBlockBreakAtRange(range[0])\n            if (range[0] < this.selectedRange[0]) {\n              this.moveSelectedRangeForward()\n            }\n            range[0]++\n            offset++\n          }\n        }\n\n        this.document = this.document.applyBlockAttributeAtRange(BLOCK_ATTRIBUTE_NAME, true, range)\n      }\n    })\n  }\n\n  findRangesOfBlocks() {\n    return this.document.findRangesForBlockAttribute(BLOCK_ATTRIBUTE_NAME)\n  }\n\n  findRangesOfPieces() {\n    return this.document.findRangesForTextAttribute(TEXT_ATTRIBUTE_NAME, { withValue: TEXT_ATTRIBUTE_VALUE })\n  }\n\n  moveSelectedRangeForward() {\n    this.selectedRange[0] += 1\n    this.selectedRange[1] += 1\n  }\n}\n","import Document from \"trix/models/document\"\nimport HTMLParser from \"trix/models/html_parser\"\n\nimport UndoManager from \"trix/models/undo_manager\"\nimport { attachmentGalleryFilter } from \"trix/filters/attachment_gallery_filter\"\nconst DEFAULT_FILTERS = [ attachmentGalleryFilter ]\n\nexport default class Editor {\n  constructor(composition, selectionManager, element) {\n    this.insertFiles = this.insertFiles.bind(this)\n    this.composition = composition\n    this.selectionManager = selectionManager\n    this.element = element\n    this.undoManager = new UndoManager(this.composition)\n    this.filters = DEFAULT_FILTERS.slice(0)\n  }\n\n  loadDocument(document) {\n    return this.loadSnapshot({ document, selectedRange: [ 0, 0 ] })\n  }\n\n  loadHTML(html = \"\") {\n    const document = HTMLParser.parse(html, { referenceElement: this.element }).getDocument()\n    return this.loadDocument(document)\n  }\n\n  loadJSON({ document, selectedRange }) {\n    document = Document.fromJSON(document)\n    return this.loadSnapshot({ document, selectedRange })\n  }\n\n  loadSnapshot(snapshot) {\n    this.undoManager = new UndoManager(this.composition)\n    return this.composition.loadSnapshot(snapshot)\n  }\n\n  getDocument() {\n    return this.composition.document\n  }\n\n  getSelectedDocument() {\n    return this.composition.getSelectedDocument()\n  }\n\n  getSnapshot() {\n    return this.composition.getSnapshot()\n  }\n\n  toJSON() {\n    return this.getSnapshot()\n  }\n\n  // Document manipulation\n\n  deleteInDirection(direction) {\n    return this.composition.deleteInDirection(direction)\n  }\n\n  insertAttachment(attachment) {\n    return this.composition.insertAttachment(attachment)\n  }\n\n  insertAttachments(attachments) {\n    return this.composition.insertAttachments(attachments)\n  }\n\n  insertDocument(document) {\n    return this.composition.insertDocument(document)\n  }\n\n  insertFile(file) {\n    return this.composition.insertFile(file)\n  }\n\n  insertFiles(files) {\n    return this.composition.insertFiles(files)\n  }\n\n  insertHTML(html) {\n    return this.composition.insertHTML(html)\n  }\n\n  insertString(string) {\n    return this.composition.insertString(string)\n  }\n\n  insertText(text) {\n    return this.composition.insertText(text)\n  }\n\n  insertLineBreak() {\n    return this.composition.insertLineBreak()\n  }\n\n  // Selection\n\n  getSelectedRange() {\n    return this.composition.getSelectedRange()\n  }\n\n  getPosition() {\n    return this.composition.getPosition()\n  }\n\n  getClientRectAtPosition(position) {\n    const locationRange = this.getDocument().locationRangeFromRange([ position, position + 1 ])\n    return this.selectionManager.getClientRectAtLocationRange(locationRange)\n  }\n\n  expandSelectionInDirection(direction) {\n    return this.composition.expandSelectionInDirection(direction)\n  }\n\n  moveCursorInDirection(direction) {\n    return this.composition.moveCursorInDirection(direction)\n  }\n\n  setSelectedRange(selectedRange) {\n    return this.composition.setSelectedRange(selectedRange)\n  }\n\n  // Attributes\n\n  activateAttribute(name, value = true) {\n    return this.composition.setCurrentAttribute(name, value)\n  }\n\n  attributeIsActive(name) {\n    return this.composition.hasCurrentAttribute(name)\n  }\n\n  canActivateAttribute(name) {\n    return this.composition.canSetCurrentAttribute(name)\n  }\n\n  deactivateAttribute(name) {\n    return this.composition.removeCurrentAttribute(name)\n  }\n\n  // Nesting level\n\n  canDecreaseNestingLevel() {\n    return this.composition.canDecreaseNestingLevel()\n  }\n\n  canIncreaseNestingLevel() {\n    return this.composition.canIncreaseNestingLevel()\n  }\n\n  decreaseNestingLevel() {\n    if (this.canDecreaseNestingLevel()) {\n      return this.composition.decreaseNestingLevel()\n    }\n  }\n\n  increaseNestingLevel() {\n    if (this.canIncreaseNestingLevel()) {\n      return this.composition.increaseNestingLevel()\n    }\n  }\n\n  // Undo/redo\n\n  canRedo() {\n    return this.undoManager.canRedo()\n  }\n\n  canUndo() {\n    return this.undoManager.canUndo()\n  }\n\n  recordUndoEntry(description, { context, consolidatable } = {}) {\n    return this.undoManager.recordUndoEntry(description, { context, consolidatable })\n  }\n\n  redo() {\n    if (this.canRedo()) {\n      return this.undoManager.redo()\n    }\n  }\n\n  undo() {\n    if (this.canUndo()) {\n      return this.undoManager.undo()\n    }\n  }\n}\n","/* eslint-disable\n    no-var,\n    prefer-const,\n*/\nimport {\n  elementContainsNode,\n  findChildIndexOfNode,\n  nodeIsAttachmentElement,\n  nodeIsBlockContainer,\n  nodeIsBlockStart,\n  nodeIsBlockStartComment,\n  nodeIsCursorTarget,\n  nodeIsEmptyTextNode,\n  nodeIsTextNode,\n  tagName,\n  walkTree,\n} from \"trix/core/helpers\"\n\nexport default class LocationMapper {\n  constructor(element) {\n    this.element = element\n  }\n\n  findLocationFromContainerAndOffset(container, offset, { strict } = { strict: true }) {\n    let childIndex = 0\n    let foundBlock = false\n    const location = { index: 0, offset: 0 }\n    const attachmentElement = this.findAttachmentElementParentForNode(container)\n\n    if (attachmentElement) {\n      container = attachmentElement.parentNode\n      offset = findChildIndexOfNode(attachmentElement)\n    }\n\n    const walker = walkTree(this.element, { usingFilter: rejectAttachmentContents })\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode\n\n      if (node === container && nodeIsTextNode(container)) {\n        if (!nodeIsCursorTarget(node)) {\n          location.offset += offset\n        }\n        break\n      } else {\n        if (node.parentNode === container) {\n          if (childIndex++ === offset) {\n            break\n          }\n        } else if (!elementContainsNode(container, node)) {\n          if (childIndex > 0) {\n            break\n          }\n        }\n\n        if (nodeIsBlockStart(node, { strict })) {\n          if (foundBlock) {\n            location.index++\n          }\n          location.offset = 0\n          foundBlock = true\n        } else {\n          location.offset += nodeLength(node)\n        }\n      }\n    }\n\n    return location\n  }\n\n  findContainerAndOffsetFromLocation(location) {\n    let container, offset\n    if (location.index === 0 && location.offset === 0) {\n      container = this.element\n      offset = 0\n\n      while (container.firstChild) {\n        container = container.firstChild\n        if (nodeIsBlockContainer(container)) {\n          offset = 1\n          break\n        }\n      }\n\n      return [ container, offset ]\n    }\n\n    let [ node, nodeOffset ] = this.findNodeAndOffsetFromLocation(location)\n    if (!node) return\n\n    if (nodeIsTextNode(node)) {\n      if (nodeLength(node) === 0) {\n        container = node.parentNode.parentNode\n        offset = findChildIndexOfNode(node.parentNode)\n        if (nodeIsCursorTarget(node, { name: \"right\" })) {\n          offset++\n        }\n      } else {\n        container = node\n        offset = location.offset - nodeOffset\n      }\n    } else {\n      container = node.parentNode\n\n      if (!nodeIsBlockStart(node.previousSibling)) {\n        if (!nodeIsBlockContainer(container)) {\n          while (node === container.lastChild) {\n            node = container\n            container = container.parentNode\n            if (nodeIsBlockContainer(container)) {\n              break\n            }\n          }\n        }\n      }\n\n      offset = findChildIndexOfNode(node)\n      if (location.offset !== 0) {\n        offset++\n      }\n    }\n\n    return [ container, offset ]\n  }\n\n  findNodeAndOffsetFromLocation(location) {\n    let node, nodeOffset\n    let offset = 0\n\n    for (const currentNode of this.getSignificantNodesForIndex(location.index)) {\n      const length = nodeLength(currentNode)\n\n      if (location.offset <= offset + length) {\n        if (nodeIsTextNode(currentNode)) {\n          node = currentNode\n          nodeOffset = offset\n          if (location.offset === nodeOffset && nodeIsCursorTarget(node)) {\n            break\n          }\n        } else if (!node) {\n          node = currentNode\n          nodeOffset = offset\n        }\n      }\n\n      offset += length\n      if (offset > location.offset) {\n        break\n      }\n    }\n\n    return [ node, nodeOffset ]\n  }\n\n  // Private\n\n  findAttachmentElementParentForNode(node) {\n    while (node && node !== this.element) {\n      if (nodeIsAttachmentElement(node)) {\n        return node\n      }\n      node = node.parentNode\n    }\n  }\n\n  getSignificantNodesForIndex(index) {\n    const nodes = []\n    const walker = walkTree(this.element, { usingFilter: acceptSignificantNodes })\n    let recordingNodes = false\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode\n      if (nodeIsBlockStartComment(node)) {\n        var blockIndex\n        if (blockIndex != null) {\n          blockIndex++\n        } else {\n          blockIndex = 0\n        }\n\n        if (blockIndex === index) {\n          recordingNodes = true\n        } else if (recordingNodes) {\n          break\n        }\n      } else if (recordingNodes) {\n        nodes.push(node)\n      }\n    }\n\n    return nodes\n  }\n}\n\nconst nodeLength = function(node) {\n  if (node.nodeType === Node.TEXT_NODE) {\n    if (nodeIsCursorTarget(node)) {\n      return 0\n    } else {\n      const string = node.textContent\n      return string.length\n    }\n  } else if (tagName(node) === \"br\" || nodeIsAttachmentElement(node)) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nconst acceptSignificantNodes = function(node) {\n  if (rejectEmptyTextNodes(node) === NodeFilter.FILTER_ACCEPT) {\n    return rejectAttachmentContents(node)\n  } else {\n    return NodeFilter.FILTER_REJECT\n  }\n}\n\nconst rejectEmptyTextNodes = function(node) {\n  if (nodeIsEmptyTextNode(node)) {\n    return NodeFilter.FILTER_REJECT\n  } else {\n    return NodeFilter.FILTER_ACCEPT\n  }\n}\n\nconst rejectAttachmentContents = function(node) {\n  if (nodeIsAttachmentElement(node.parentNode)) {\n    return NodeFilter.FILTER_REJECT\n  } else {\n    return NodeFilter.FILTER_ACCEPT\n  }\n}\n","/* eslint-disable\n    id-length,\n    no-empty,\n*/\nimport { getDOMRange, setDOMRange } from \"trix/core/helpers\"\n\nexport default class PointMapper {\n  createDOMRangeFromPoint({ x, y }) {\n    let domRange\n    if (document.caretPositionFromPoint) {\n      const { offsetNode, offset } = document.caretPositionFromPoint(x, y)\n      domRange = document.createRange()\n      domRange.setStart(offsetNode, offset)\n      return domRange\n    } else if (document.caretRangeFromPoint) {\n      return document.caretRangeFromPoint(x, y)\n    } else if (document.body.createTextRange) {\n      const originalDOMRange = getDOMRange()\n      try {\n        // IE 11 throws \"Unspecified error\" when using moveToPoint\n        // during a drag-and-drop operation.\n        const textRange = document.body.createTextRange()\n        textRange.moveToPoint(x, y)\n        textRange.select()\n      } catch (error) {}\n      domRange = getDOMRange()\n      setDOMRange(originalDOMRange)\n      return domRange\n    }\n  }\n\n  getClientRectsForDOMRange(domRange) {\n    const array = Array.from(domRange.getClientRects())\n    const start = array[0]\n    const end = array[array.length - 1]\n\n    return [ start, end ]\n  }\n}\n","/* eslint-disable\n*/\nimport BasicObject from \"trix/core/basic_object\"\n\nimport LocationMapper from \"trix/models/location_mapper\"\nimport PointMapper from \"trix/models/point_mapper\"\n\nimport {\n  elementContainsNode,\n  getDOMRange,\n  getDOMSelection,\n  handleEvent,\n  innerElementIsActive,\n  nodeIsCursorTarget,\n  normalizeRange,\n  rangeIsCollapsed,\n  rangesAreEqual,\n  setDOMRange,\n} from \"trix/core/helpers\"\n\nexport default class SelectionManager extends BasicObject {\n  constructor(element) {\n    super(...arguments)\n    this.didMouseDown = this.didMouseDown.bind(this)\n    this.selectionDidChange = this.selectionDidChange.bind(this)\n    this.element = element\n    this.locationMapper = new LocationMapper(this.element)\n    this.pointMapper = new PointMapper()\n    this.lockCount = 0\n    handleEvent(\"mousedown\", { onElement: this.element, withCallback: this.didMouseDown })\n  }\n  getLocationRange(options = {}) {\n    if (options.strict === false) {\n      return this.createLocationRangeFromDOMRange(getDOMRange())\n    } else if (options.ignoreLock) {\n      return this.currentLocationRange\n    } else if (this.lockedLocationRange) {\n      return this.lockedLocationRange\n    } else {\n      return this.currentLocationRange\n    }\n  }\n\n  setLocationRange(locationRange) {\n    if (this.lockedLocationRange) return\n    locationRange = normalizeRange(locationRange)\n\n    const domRange = this.createDOMRangeFromLocationRange(locationRange)\n    if (domRange) {\n      setDOMRange(domRange)\n      this.updateCurrentLocationRange(locationRange)\n    }\n  }\n\n  setLocationRangeFromPointRange(pointRange) {\n    pointRange = normalizeRange(pointRange)\n    const startLocation = this.getLocationAtPoint(pointRange[0])\n    const endLocation = this.getLocationAtPoint(pointRange[1])\n    this.setLocationRange([ startLocation, endLocation ])\n  }\n\n  getClientRectAtLocationRange(locationRange) {\n    const domRange = this.createDOMRangeFromLocationRange(locationRange)\n    if (domRange) {\n      return this.getClientRectsForDOMRange(domRange)[1]\n    }\n  }\n\n  locationIsCursorTarget(location) {\n    const node = Array.from(this.findNodeAndOffsetFromLocation(location))[0]\n    return nodeIsCursorTarget(node)\n  }\n\n  lock() {\n    if (this.lockCount++ === 0) {\n      this.updateCurrentLocationRange()\n      this.lockedLocationRange = this.getLocationRange()\n    }\n  }\n\n  unlock() {\n    if (--this.lockCount === 0) {\n      const { lockedLocationRange } = this\n      this.lockedLocationRange = null\n      if (lockedLocationRange != null) {\n        return this.setLocationRange(lockedLocationRange)\n      }\n    }\n  }\n\n  clearSelection() {\n    return getDOMSelection()?.removeAllRanges()\n  }\n\n  selectionIsCollapsed() {\n    return getDOMRange()?.collapsed === true\n  }\n\n  selectionIsExpanded() {\n    return !this.selectionIsCollapsed()\n  }\n\n  createLocationRangeFromDOMRange(domRange, options) {\n    if (domRange == null || !this.domRangeWithinElement(domRange)) return\n\n    const start = this.findLocationFromContainerAndOffset(domRange.startContainer, domRange.startOffset, options)\n    if (!start) return\n\n    const end = domRange.collapsed\n      ? undefined\n      : this.findLocationFromContainerAndOffset(domRange.endContainer, domRange.endOffset, options)\n\n    return normalizeRange([ start, end ])\n  }\n\n  didMouseDown() {\n    return this.pauseTemporarily()\n  }\n\n  pauseTemporarily() {\n    let resumeHandlers\n    this.paused = true\n\n    const resume = () => {\n      this.paused = false\n      clearTimeout(resumeTimeout)\n\n      Array.from(resumeHandlers).forEach((handler) => {\n        handler.destroy()\n      })\n\n      if (elementContainsNode(document, this.element)) {\n        return this.selectionDidChange()\n      }\n    }\n\n    const resumeTimeout = setTimeout(resume, 200)\n\n    resumeHandlers = [ \"mousemove\", \"keydown\" ].map((eventName) =>\n      handleEvent(eventName, { onElement: document, withCallback: resume })\n    )\n  }\n\n  selectionDidChange() {\n    if (!this.paused && !innerElementIsActive(this.element)) {\n      return this.updateCurrentLocationRange()\n    }\n  }\n\n  updateCurrentLocationRange(locationRange) {\n    if (locationRange != null ? locationRange : locationRange = this.createLocationRangeFromDOMRange(getDOMRange())) {\n      if (!rangesAreEqual(locationRange, this.currentLocationRange)) {\n        this.currentLocationRange = locationRange\n        return this.delegate?.locationRangeDidChange?.(this.currentLocationRange.slice(0))\n      }\n    }\n  }\n\n  createDOMRangeFromLocationRange(locationRange) {\n    const rangeStart = this.findContainerAndOffsetFromLocation(locationRange[0])\n    const rangeEnd = rangeIsCollapsed(locationRange)\n      ? rangeStart\n      : this.findContainerAndOffsetFromLocation(locationRange[1]) || rangeStart\n\n    if (rangeStart != null && rangeEnd != null) {\n      const domRange = document.createRange()\n      domRange.setStart(...Array.from(rangeStart || []))\n      domRange.setEnd(...Array.from(rangeEnd || []))\n      return domRange\n    }\n  }\n\n  getLocationAtPoint(point) {\n    const domRange = this.createDOMRangeFromPoint(point)\n    if (domRange) {\n      return this.createLocationRangeFromDOMRange(domRange)?.[0]\n    }\n  }\n\n  domRangeWithinElement(domRange) {\n    if (domRange.collapsed) {\n      return elementContainsNode(this.element, domRange.startContainer)\n    } else {\n      return (\n        elementContainsNode(this.element, domRange.startContainer) &&\n        elementContainsNode(this.element, domRange.endContainer)\n      )\n    }\n  }\n}\n\nSelectionManager.proxyMethod(\"locationMapper.findLocationFromContainerAndOffset\")\nSelectionManager.proxyMethod(\"locationMapper.findContainerAndOffsetFromLocation\")\nSelectionManager.proxyMethod(\"locationMapper.findNodeAndOffsetFromLocation\")\nSelectionManager.proxyMethod(\"pointMapper.createDOMRangeFromPoint\")\nSelectionManager.proxyMethod(\"pointMapper.getClientRectsForDOMRange\")\n\n","import Attachment from \"./models/attachment\"\nimport AttachmentManager from \"./models/attachment_manager\"\nimport AttachmentPiece from \"./models/attachment_piece\"\nimport Block from \"./models/block\"\nimport Composition from \"./models/composition\"\nimport Cocument from \"./models/document\"\nimport Editor from \"./models/editor\"\nimport HTMLParser from \"./models/html_parser\"\nimport HTMLSanitizer from \"./models/html_sanitizer\"\nimport LineBreakInsertion from \"./models/line_break_insertion\"\nimport LocationMapper from \"./models/location_mapper\"\nimport ManagedAttachment from \"./models/managed_attachment\"\nimport Piece from \"./models/piece\"\nimport PointMapper from \"./models/point_mapper\"\nimport SelectionManager from \"./models/selection_manager\"\nimport SplittableList from \"./models/splittable_list\"\nimport StringPiece from \"./models/string_piece\"\nimport Text from \"./models/text\"\nimport UndoManager from \"./models/undo_manager\"\n\nexport default {\n  Attachment,\n  AttachmentManager,\n  AttachmentPiece,\n  Block,\n  Composition,\n  Cocument,\n  Editor,\n  HTMLParser,\n  HTMLSanitizer,\n  LineBreakInsertion,\n  LocationMapper,\n  ManagedAttachment,\n  Piece,\n  PointMapper,\n  SelectionManager,\n  SplittableList,\n  StringPiece,\n  Text,\n  UndoManager,\n}\n","import { version } from \"../../package.json\"\nimport config from \"trix/config\"\nimport models from \"trix/models\"\n\nconst Trix = {\n  VERSION: version,\n  config,\n}\n\nObject.assign(Trix, models)\n\nwindow.Trix = Trix\n\nexport default Trix\n","export default class ObjectGroup {\n  static groupObjects(ungroupedObjects = [], { depth, asTree } = {}) {\n    let group\n    if (asTree) {\n      if (depth == null) {\n        depth = 0\n      }\n    }\n    const objects = []\n\n    Array.from(ungroupedObjects).forEach((object) => {\n      if (group) {\n        if (object.canBeGrouped?.(depth) && group[group.length - 1].canBeGroupedWith?.(object, depth)) {\n          group.push(object)\n          return\n        } else {\n          objects.push(new this(group, { depth, asTree }))\n          group = null\n        }\n      }\n\n      if (object.canBeGrouped?.(depth)) {\n        group = [ object ]\n      } else {\n        objects.push(object)\n      }\n    })\n\n    if (group) {\n      objects.push(new this(group, { depth, asTree }))\n    }\n    return objects\n  }\n\n  constructor(objects = [], { depth, asTree }) {\n    this.objects = objects\n    if (asTree) {\n      this.depth = depth\n      this.objects = this.constructor.groupObjects(this.objects, { asTree, depth: this.depth + 1 })\n    }\n  }\n\n  getObjects() {\n    return this.objects\n  }\n\n  getDepth() {\n    return this.depth\n  }\n\n  getCacheKey() {\n    const keys = [ \"objectGroup\" ]\n    Array.from(this.getObjects()).forEach((object) => {\n      keys.push(object.getCacheKey())\n    })\n    return keys.join(\"/\")\n  }\n}\n","export default class ElementStore {\n  constructor(elements) {\n    this.reset(elements)\n  }\n\n  add(element) {\n    const key = getKey(element)\n    this.elements[key] = element\n  }\n\n  remove(element) {\n    const key = getKey(element)\n    const value = this.elements[key]\n    if (value) {\n      delete this.elements[key]\n      return value\n    }\n  }\n\n  reset(elements = []) {\n    this.elements = {}\n    Array.from(elements).forEach((element) => {\n      this.add(element)\n    })\n    return elements\n  }\n}\n\nconst getKey = (element) => element.dataset.trixStoreKey\n","import BasicObject from \"trix/core/basic_object\"\nimport ObjectGroup from \"trix/core/collections/object_group\"\n\nexport default class ObjectView extends BasicObject {\n  constructor(object, options = {}) {\n    super(...arguments)\n    this.object = object\n    this.options = options\n    this.childViews = []\n    this.rootView = this\n  }\n\n  getNodes() {\n    if (!this.nodes) { this.nodes = this.createNodes() }\n    return this.nodes.map((node) => node.cloneNode(true))\n  }\n\n  invalidate() {\n    this.nodes = null\n    this.childViews = []\n    return this.parentView?.invalidate()\n  }\n\n  invalidateViewForObject(object) {\n    return this.findViewForObject(object)?.invalidate()\n  }\n\n  findOrCreateCachedChildView(viewClass, object, options) {\n    let view = this.getCachedViewForObject(object)\n    if (view) {\n      this.recordChildView(view)\n    } else {\n      view = this.createChildView(...arguments)\n      this.cacheViewForObject(view, object)\n    }\n    return view\n  }\n\n  createChildView(viewClass, object, options = {}) {\n    if (object instanceof ObjectGroup) {\n      options.viewClass = viewClass\n      viewClass = ObjectGroupView\n    }\n\n    const view = new viewClass(object, options)\n    return this.recordChildView(view)\n  }\n\n  recordChildView(view) {\n    view.parentView = this\n    view.rootView = this.rootView\n    this.childViews.push(view)\n    return view\n  }\n\n  getAllChildViews() {\n    let views = []\n\n    this.childViews.forEach((childView) => {\n      views.push(childView)\n      views = views.concat(childView.getAllChildViews())\n    })\n\n    return views\n  }\n\n  findElement() {\n    return this.findElementForObject(this.object)\n  }\n\n  findElementForObject(object) {\n    const id = object?.id\n    if (id) {\n      return this.rootView.element.querySelector(`[data-trix-id='${id}']`)\n    }\n  }\n\n  findViewForObject(object) {\n    for (const view of this.getAllChildViews()) {\n      if (view.object === object) {\n        return view\n      }\n    }\n  }\n\n  getViewCache() {\n    if (this.rootView === this) {\n      if (this.isViewCachingEnabled()) {\n        if (!this.viewCache) { this.viewCache = {} }\n        return this.viewCache\n      }\n    } else {\n      return this.rootView.getViewCache()\n    }\n  }\n\n  isViewCachingEnabled() {\n    return this.shouldCacheViews !== false\n  }\n\n  enableViewCaching() {\n    this.shouldCacheViews = true\n  }\n\n  disableViewCaching() {\n    this.shouldCacheViews = false\n  }\n\n  getCachedViewForObject(object) {\n    return this.getViewCache()?.[object.getCacheKey()]\n  }\n\n  cacheViewForObject(view, object) {\n    const cache = this.getViewCache()\n    if (cache) {\n      cache[object.getCacheKey()] = view\n    }\n  }\n\n  garbageCollectCachedViews() {\n    const cache = this.getViewCache()\n    if (cache) {\n      const views = this.getAllChildViews().concat(this)\n      const objectKeys = views.map((view) => view.object.getCacheKey())\n      for (const key in cache) {\n        if (!objectKeys.includes(key)) {\n          delete cache[key]\n        }\n      }\n    }\n  }\n}\n\nexport class ObjectGroupView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.objectGroup = this.object\n    this.viewClass = this.options.viewClass\n    delete this.options.viewClass\n  }\n\n  getChildViews() {\n    if (!this.childViews.length) {\n      Array.from(this.objectGroup.getObjects()).forEach((object) => {\n        this.findOrCreateCachedChildView(this.viewClass, object, this.options)\n      })\n    }\n    return this.childViews\n  }\n\n  createNodes() {\n    const element = this.createContainerElement()\n\n    this.getChildViews().forEach((view) => {\n      Array.from(view.getNodes()).forEach((node) => {\n        element.appendChild(node)\n      })\n    })\n\n    return [ element ]\n  }\n\n  createContainerElement(depth = this.objectGroup.getDepth()) {\n    return this.getChildViews()[0].createContainerElement(depth)\n  }\n}\n","import config from \"trix/config\"\nimport { ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport { copyObject, makeElement } from \"trix/core/helpers\"\nimport ObjectView from \"trix/views/object_view\"\n\nconst { css } = config\n\nexport default class AttachmentView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.attachment = this.object\n    this.attachment.uploadProgressDelegate = this\n    this.attachmentPiece = this.options.piece\n  }\n\n  createContentNodes() {\n    return []\n  }\n\n  createNodes() {\n    let innerElement\n    const figure = innerElement = makeElement({\n      tagName: \"figure\",\n      className: this.getClassName(),\n      data: this.getData(),\n      editable: false,\n    })\n\n    const href = this.getHref()\n    if (href) {\n      innerElement = makeElement({ tagName: \"a\", editable: false, attributes: { href, tabindex: -1 } })\n      figure.appendChild(innerElement)\n    }\n\n    if (this.attachment.hasContent()) {\n      innerElement.innerHTML = this.attachment.getContent()\n    } else {\n      this.createContentNodes().forEach((node) => {\n        innerElement.appendChild(node)\n      })\n    }\n\n    innerElement.appendChild(this.createCaptionElement())\n\n    if (this.attachment.isPending()) {\n      this.progressElement = makeElement({\n        tagName: \"progress\",\n        attributes: {\n          class: css.attachmentProgress,\n          value: this.attachment.getUploadProgress(),\n          max: 100,\n        },\n        data: {\n          trixMutable: true,\n          trixStoreKey: [ \"progressElement\", this.attachment.id ].join(\"/\"),\n        },\n      })\n\n      figure.appendChild(this.progressElement)\n    }\n\n    return [ createCursorTarget(\"left\"), figure, createCursorTarget(\"right\") ]\n  }\n\n  createCaptionElement() {\n    const figcaption = makeElement({ tagName: \"figcaption\", className: css.attachmentCaption })\n    const caption = this.attachmentPiece.getCaption()\n    if (caption) {\n      figcaption.classList.add(`${css.attachmentCaption}--edited`)\n      figcaption.textContent = caption\n    } else {\n      let name, size\n      const captionConfig = this.getCaptionConfig()\n      if (captionConfig.name) {\n        name = this.attachment.getFilename()\n      }\n      if (captionConfig.size) {\n        size = this.attachment.getFormattedFilesize()\n      }\n\n      if (name) {\n        const nameElement = makeElement({ tagName: \"span\", className: css.attachmentName, textContent: name })\n        figcaption.appendChild(nameElement)\n      }\n\n      if (size) {\n        if (name) {\n          figcaption.appendChild(document.createTextNode(\" \"))\n        }\n        const sizeElement = makeElement({ tagName: \"span\", className: css.attachmentSize, textContent: size })\n        figcaption.appendChild(sizeElement)\n      }\n    }\n\n    return figcaption\n  }\n\n  getClassName() {\n    const names = [ css.attachment, `${css.attachment}--${this.attachment.getType()}` ]\n    const extension = this.attachment.getExtension()\n    if (extension) {\n      names.push(`${css.attachment}--${extension}`)\n    }\n    return names.join(\" \")\n  }\n\n  getData() {\n    const data = {\n      trixAttachment: JSON.stringify(this.attachment),\n      trixContentType: this.attachment.getContentType(),\n      trixId: this.attachment.id,\n    }\n\n    const { attributes } = this.attachmentPiece\n    if (!attributes.isEmpty()) {\n      data.trixAttributes = JSON.stringify(attributes)\n    }\n\n    if (this.attachment.isPending()) {\n      data.trixSerialize = false\n    }\n\n    return data\n  }\n\n  getHref() {\n    if (!htmlContainsTagName(this.attachment.getContent(), \"a\")) {\n      return this.attachment.getHref()\n    }\n  }\n\n  getCaptionConfig() {\n    const type = this.attachment.getType()\n    const captionConfig = copyObject(config.attachments[type]?.caption)\n    if (type === \"file\") {\n      captionConfig.name = true\n    }\n    return captionConfig\n  }\n\n  findProgressElement() {\n    return this.findElement()?.querySelector(\"progress\")\n  }\n\n  // Attachment delegate\n\n  attachmentDidChangeUploadProgress() {\n    const value = this.attachment.getUploadProgress()\n    const progressElement = this.findProgressElement()\n    if (progressElement) {\n      progressElement.value = value\n    }\n  }\n}\n\nconst createCursorTarget = (name) =>\n  makeElement({\n    tagName: \"span\",\n    textContent: ZERO_WIDTH_SPACE,\n    data: {\n      trixCursorTarget: name,\n      trixSerialize: false,\n    },\n  })\n\nconst htmlContainsTagName = function(html, tagName) {\n  const div = makeElement(\"div\")\n  div.innerHTML = html || \"\"\n  return div.querySelector(tagName)\n}\n","import config from \"trix/config\"\nimport { makeElement } from \"trix/core/helpers\"\n\nimport AttachmentView from \"trix/views/attachment_view\"\n\nexport default class PreviewableAttachmentView extends AttachmentView {\n  constructor() {\n    super(...arguments)\n    this.attachment.previewDelegate = this\n  }\n\n  createContentNodes() {\n    this.image = makeElement({\n      tagName: \"img\",\n      attributes: {\n        src: \"\",\n      },\n      data: {\n        trixMutable: true,\n      },\n    })\n\n    this.refresh(this.image)\n    return [ this.image ]\n  }\n\n  createCaptionElement() {\n    const figcaption = super.createCaptionElement(...arguments)\n    if (!figcaption.textContent) {\n      figcaption.setAttribute(\"data-trix-placeholder\", config.lang.captionPlaceholder)\n    }\n    return figcaption\n  }\n\n  refresh(image) {\n    if (!image) { image = this.findElement()?.querySelector(\"img\") }\n    if (image) {\n      return this.updateAttributesForImage(image)\n    }\n  }\n\n  updateAttributesForImage(image) {\n    const url = this.attachment.getURL()\n    const previewURL = this.attachment.getPreviewURL()\n    image.src = previewURL || url\n\n    if (previewURL === url) {\n      image.removeAttribute(\"data-trix-serialized-attributes\")\n    } else {\n      const serializedAttributes = JSON.stringify({ src: url })\n      image.setAttribute(\"data-trix-serialized-attributes\", serializedAttributes)\n    }\n\n    const width = this.attachment.getWidth()\n    const height = this.attachment.getHeight()\n\n    if (width != null) {\n      image.width = width\n    }\n    if (height != null) {\n      image.height = height\n    }\n\n    const storeKey = [ \"imageElement\", this.attachment.id, image.src, image.width, image.height ].join(\"/\")\n    image.dataset.trixStoreKey = storeKey\n  }\n\n  // Attachment delegate\n\n  attachmentDidChangeAttributes() {\n    this.refresh(this.image)\n    return this.refresh()\n  }\n}\n","/* eslint-disable\n    no-useless-escape,\n    no-var,\n*/\nimport { NON_BREAKING_SPACE } from \"trix/constants\"\n\nimport ObjectView from \"trix/views/object_view\"\nimport AttachmentView from \"trix/views/attachment_view\"\nimport PreviewableAttachmentView from \"trix/views/previewable_attachment_view\"\n\nimport { findInnerElement, getTextConfig, makeElement } from \"trix/core/helpers\"\n\nexport default class PieceView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.piece = this.object\n    this.attributes = this.piece.getAttributes()\n    this.textConfig = this.options.textConfig\n    this.context = this.options.context\n\n    if (this.piece.attachment) {\n      this.attachment = this.piece.attachment\n    } else {\n      this.string = this.piece.toString()\n    }\n  }\n\n  createNodes() {\n    let nodes = this.attachment ? this.createAttachmentNodes() : this.createStringNodes()\n    const element = this.createElement()\n    if (element) {\n      const innerElement = findInnerElement(element)\n      Array.from(nodes).forEach((node) => {\n        innerElement.appendChild(node)\n      })\n      nodes = [ element ]\n    }\n    return nodes\n  }\n\n  createAttachmentNodes() {\n    const constructor = this.attachment.isPreviewable() ? PreviewableAttachmentView : AttachmentView\n\n    const view = this.createChildView(constructor, this.piece.attachment, { piece: this.piece })\n    return view.getNodes()\n  }\n\n  createStringNodes() {\n    if (this.textConfig?.plaintext) {\n      return [ document.createTextNode(this.string) ]\n    } else {\n      const nodes = []\n      const iterable = this.string.split(\"\\n\")\n      for (let index = 0; index < iterable.length; index++) {\n        const substring = iterable[index]\n        if (index > 0) {\n          const element = makeElement(\"br\")\n          nodes.push(element)\n        }\n\n        if (substring.length) {\n          const node = document.createTextNode(this.preserveSpaces(substring))\n          nodes.push(node)\n        }\n      }\n      return nodes\n    }\n  }\n\n  createElement() {\n    let element, key, value\n    const styles = {}\n\n    for (key in this.attributes) {\n      value = this.attributes[key]\n      const config = getTextConfig(key)\n      if (config) {\n        if (config.tagName) {\n          var innerElement\n          const pendingElement = makeElement(config.tagName)\n\n          if (innerElement) {\n            innerElement.appendChild(pendingElement)\n            innerElement = pendingElement\n          } else {\n            element = innerElement = pendingElement\n          }\n        }\n\n        if (config.styleProperty) {\n          styles[config.styleProperty] = value\n        }\n\n        if (config.style) {\n          for (key in config.style) {\n            value = config.style[key]\n            styles[key] = value\n          }\n        }\n      }\n    }\n\n    if (Object.keys(styles).length) {\n      if (!element) { element = makeElement(\"span\") }\n      for (key in styles) {\n        value = styles[key]\n        element.style[key] = value\n      }\n    }\n    return element\n  }\n\n  createContainerElement() {\n    for (const key in this.attributes) {\n      const value = this.attributes[key]\n      const config = getTextConfig(key)\n      if (config) {\n        if (config.groupTagName) {\n          const attributes = {}\n          attributes[key] = value\n          return makeElement(config.groupTagName, attributes)\n        }\n      }\n    }\n  }\n\n  preserveSpaces(string) {\n    if (this.context.isLast) {\n      string = string.replace(/\\ $/, NON_BREAKING_SPACE)\n    }\n\n    string = string\n      .replace(/(\\S)\\ {3}(\\S)/g, `$1 ${NON_BREAKING_SPACE} $2`)\n      .replace(/\\ {2}/g, `${NON_BREAKING_SPACE} `)\n      .replace(/\\ {2}/g, ` ${NON_BREAKING_SPACE}`)\n\n    if (this.context.isFirst || this.context.followsWhitespace) {\n      string = string.replace(/^\\ /, NON_BREAKING_SPACE)\n    }\n\n    return string\n  }\n}\n","/* eslint-disable\n    no-var,\n*/\nimport ObjectView from \"trix/views/object_view\"\nimport ObjectGroup from \"trix/core/collections/object_group\"\nimport PieceView from \"trix/views/piece_view\"\n\nexport default class TextView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.text = this.object\n    this.textConfig = this.options.textConfig\n  }\n\n  createNodes() {\n    const nodes = []\n    const pieces = ObjectGroup.groupObjects(this.getPieces())\n    const lastIndex = pieces.length - 1\n\n    for (let index = 0; index < pieces.length; index++) {\n      const piece = pieces[index]\n      const context = {}\n      if (index === 0) {\n        context.isFirst = true\n      }\n      if (index === lastIndex) {\n        context.isLast = true\n      }\n      if (endsWithWhitespace(previousPiece)) {\n        context.followsWhitespace = true\n      }\n\n      const view = this.findOrCreateCachedChildView(PieceView, piece, { textConfig: this.textConfig, context })\n      nodes.push(...Array.from(view.getNodes() || []))\n\n      var previousPiece = piece\n    }\n    return nodes\n  }\n\n  getPieces() {\n    return Array.from(this.text.getPieces()).filter((piece) => !piece.hasAttribute(\"blockBreak\"))\n  }\n}\n\nconst endsWithWhitespace = (piece) => /\\s$/.test(piece?.toString())\n","import config from \"trix/config\"\nimport ObjectView from \"trix/views/object_view\"\nimport TextView from \"trix/views/text_view\"\n\nimport { getBlockConfig, makeElement } from \"trix/core/helpers\"\nconst { css } = config\n\nexport default class BlockView extends ObjectView {\n  constructor() {\n    super(...arguments)\n    this.block = this.object\n    this.attributes = this.block.getAttributes()\n  }\n\n  createNodes() {\n    const comment = document.createComment(\"block\")\n    const nodes = [ comment ]\n    if (this.block.isEmpty()) {\n      nodes.push(makeElement(\"br\"))\n    } else {\n      const textConfig = getBlockConfig(this.block.getLastAttribute())?.text\n      const textView = this.findOrCreateCachedChildView(TextView, this.block.text, { textConfig })\n      nodes.push(...Array.from(textView.getNodes() || []))\n      if (this.shouldAddExtraNewlineElement()) {\n        nodes.push(makeElement(\"br\"))\n      }\n    }\n\n    if (this.attributes.length) {\n      return nodes\n    } else {\n      let attributes\n      const { tagName } = config.blockAttributes.default\n      if (this.block.isRTL()) {\n        attributes = { dir: \"rtl\" }\n      }\n\n      const element = makeElement({ tagName, attributes })\n      nodes.forEach((node) => element.appendChild(node))\n      return [ element ]\n    }\n  }\n\n  createContainerElement(depth) {\n    let attributes, className\n    const attributeName = this.attributes[depth]\n\n    const { tagName } = getBlockConfig(attributeName)\n    if (depth === 0 && this.block.isRTL()) {\n      attributes = { dir: \"rtl\" }\n    }\n\n    if (attributeName === \"attachmentGallery\") {\n      const size = this.block.getBlockBreakPosition()\n      className = `${css.attachmentGallery} ${css.attachmentGallery}--${size}`\n    }\n\n    return makeElement({ tagName, className, attributes })\n  }\n\n  // A single <br> at the end of a block element has no visual representation\n  // so add an extra one.\n  shouldAddExtraNewlineElement() {\n    return /\\n\\n$/.test(this.block.toString())\n  }\n}\n","import { makeElement } from \"trix/core/helpers\"\n\nimport ElementStore from \"trix/core/collections/element_store\"\nimport ObjectGroup from \"trix/core/collections/object_group\"\nimport ObjectView from \"trix/views/object_view\"\nimport BlockView from \"trix/views/block_view\"\n\nimport { defer } from \"trix/core/helpers\"\n\nexport default class DocumentView extends ObjectView {\n  static render(document) {\n    const element = makeElement(\"div\")\n    const view = new this(document, { element })\n    view.render()\n    view.sync()\n    return element\n  }\n\n  constructor() {\n    super(...arguments)\n    this.element = this.options.element\n    this.elementStore = new ElementStore()\n    this.setDocument(this.object)\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      this.document = this.object = document\n    }\n  }\n\n  render() {\n    this.childViews = []\n\n    this.shadowElement = makeElement(\"div\")\n\n    if (!this.document.isEmpty()) {\n      const objects = ObjectGroup.groupObjects(this.document.getBlocks(), { asTree: true })\n\n      Array.from(objects).forEach((object) => {\n        const view = this.findOrCreateCachedChildView(BlockView, object)\n        Array.from(view.getNodes()).map((node) => this.shadowElement.appendChild(node))\n      })\n    }\n  }\n\n  isSynced() {\n    return elementsHaveEqualHTML(this.shadowElement, this.element)\n  }\n\n  sync() {\n    const fragment = this.createDocumentFragmentForSync()\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild)\n    }\n    this.element.appendChild(fragment)\n    return this.didSync()\n  }\n\n  // Private\n\n  didSync() {\n    this.elementStore.reset(findStoredElements(this.element))\n    return defer(() => this.garbageCollectCachedViews())\n  }\n\n  createDocumentFragmentForSync() {\n    const fragment = document.createDocumentFragment()\n\n    Array.from(this.shadowElement.childNodes).forEach((node) => {\n      fragment.appendChild(node.cloneNode(true))\n    })\n\n    Array.from(findStoredElements(fragment)).forEach((element) => {\n      const storedElement = this.elementStore.remove(element)\n      if (storedElement) {\n        element.parentNode.replaceChild(storedElement, element)\n      }\n    })\n\n    return fragment\n  }\n}\n\nconst findStoredElements = (element) => element.querySelectorAll(\"[data-trix-store-key]\")\n\nconst elementsHaveEqualHTML = (element, otherElement) =>\n  ignoreSpaces(element.innerHTML) === ignoreSpaces(otherElement.innerHTML)\n\nconst ignoreSpaces = (html) => html.replace(/&nbsp;/g, \" \")\n","/* eslint-disable\n    no-empty,\n*/\nimport { removeNode } from \"trix/core/helpers\"\n\nimport DocumentView from \"trix/views/document_view\"\nimport Document from \"trix/models/document\"\nimport HTMLParser from \"trix/models/html_parser\"\n\nconst unserializableElementSelector = \"[data-trix-serialize=false]\"\nconst unserializableAttributeNames = [\n  \"contenteditable\",\n  \"data-trix-id\",\n  \"data-trix-store-key\",\n  \"data-trix-mutable\",\n  \"data-trix-placeholder\",\n  \"tabindex\",\n]\nconst serializedAttributesAttribute = \"data-trix-serialized-attributes\"\nconst serializedAttributesSelector = `[${serializedAttributesAttribute}]`\n\nconst blockCommentPattern = new RegExp(\"<!--block-->\", \"g\")\n\nconst serializers = {\n  \"application/json\": function(serializable) {\n    let document\n    if (serializable instanceof Document) {\n      document = serializable\n    } else if (serializable instanceof HTMLElement) {\n      document = HTMLParser.parse(serializable.innerHTML).getDocument()\n    } else {\n      throw new Error(\"unserializable object\")\n    }\n\n    return document.toSerializableDocument().toJSONString()\n  },\n\n  \"text/html\": function(serializable) {\n    let element\n    if (serializable instanceof Document) {\n      element = DocumentView.render(serializable)\n    } else if (serializable instanceof HTMLElement) {\n      element = serializable.cloneNode(true)\n    } else {\n      throw new Error(\"unserializable object\")\n    }\n\n    // Remove unserializable elements\n    Array.from(element.querySelectorAll(unserializableElementSelector)).forEach((el) => {\n      removeNode(el)\n    })\n\n    // Remove unserializable attributes\n    unserializableAttributeNames.forEach((attribute) => {\n      Array.from(element.querySelectorAll(`[${attribute}]`)).forEach((el) => {\n        el.removeAttribute(attribute)\n      })\n    })\n\n    // Rewrite elements with serialized attribute overrides\n    Array.from(element.querySelectorAll(serializedAttributesSelector)).forEach((el) => {\n      try {\n        const attributes = JSON.parse(el.getAttribute(serializedAttributesAttribute))\n        el.removeAttribute(serializedAttributesAttribute)\n        for (const name in attributes) {\n          const value = attributes[name]\n          el.setAttribute(name, value)\n        }\n      } catch (error) {}\n    })\n\n    return element.innerHTML.replace(blockCommentPattern, \"\")\n  },\n}\n\nconst deserializers = {\n  \"application/json\": function(string) {\n    return Document.fromJSONString(string)\n  },\n\n  \"text/html\": function(string) {\n    return HTMLParser.parse(string).getDocument()\n  },\n}\n\nexport const serializeToContentType = function(serializable, contentType) {\n  const serializer = serializers[contentType]\n  if (serializer) {\n    return serializer(serializable)\n  } else {\n    throw new Error(`unknown content type: ${contentType}`)\n  }\n}\n\nexport const deserializeFromContentType = function(string, contentType) {\n  const deserializer = deserializers[contentType]\n  if (deserializer) {\n    return deserializer(string)\n  } else {\n    throw new Error(`unknown content type: ${contentType}`)\n  }\n}\n","import BasicObject from \"trix/core/basic_object\"\n\nimport {\n  findClosestElementFromNode,\n  nodeIsBlockStartComment,\n  nodeIsEmptyTextNode,\n  normalizeSpaces,\n  summarizeStringChange,\n  tagName,\n} from \"trix/core/helpers\"\n\nconst mutableAttributeName = \"data-trix-mutable\"\nconst mutableSelector = `[${mutableAttributeName}]`\n\nconst options = {\n  attributes: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true,\n}\n\nexport default class MutationObserver extends BasicObject {\n  constructor(element) {\n    super(element)\n    this.didMutate = this.didMutate.bind(this)\n    this.element = element\n    this.observer = new window.MutationObserver(this.didMutate)\n    this.start()\n  }\n\n  start() {\n    this.reset()\n    return this.observer.observe(this.element, options)\n  }\n\n  stop() {\n    return this.observer.disconnect()\n  }\n\n  didMutate(mutations) {\n    this.mutations.push(...Array.from(this.findSignificantMutations(mutations) || []))\n\n    if (this.mutations.length) {\n      this.delegate?.elementDidMutate?.(this.getMutationSummary())\n      return this.reset()\n    }\n  }\n\n  // Private\n\n  reset() {\n    this.mutations = []\n  }\n\n  findSignificantMutations(mutations) {\n    return mutations.filter((mutation) => {\n      return this.mutationIsSignificant(mutation)\n    })\n  }\n\n  mutationIsSignificant(mutation) {\n    if (this.nodeIsMutable(mutation.target)) {\n      return false\n    }\n    for (const node of Array.from(this.nodesModifiedByMutation(mutation))) {\n      if (this.nodeIsSignificant(node)) return true\n    }\n    return false\n  }\n\n  nodeIsSignificant(node) {\n    return node !== this.element && !this.nodeIsMutable(node) && !nodeIsEmptyTextNode(node)\n  }\n\n  nodeIsMutable(node) {\n    return findClosestElementFromNode(node, { matchingSelector: mutableSelector })\n  }\n\n  nodesModifiedByMutation(mutation) {\n    const nodes = []\n    switch (mutation.type) {\n      case \"attributes\":\n        if (mutation.attributeName !== mutableAttributeName) {\n          nodes.push(mutation.target)\n        }\n        break\n      case \"characterData\":\n        // Changes to text nodes should consider the parent element\n        nodes.push(mutation.target.parentNode)\n        nodes.push(mutation.target)\n        break\n      case \"childList\":\n        // Consider each added or removed node\n        nodes.push(...Array.from(mutation.addedNodes || []))\n        nodes.push(...Array.from(mutation.removedNodes || []))\n        break\n    }\n    return nodes\n  }\n\n  getMutationSummary() {\n    return this.getTextMutationSummary()\n  }\n\n  getTextMutationSummary() {\n    const { additions, deletions } = this.getTextChangesFromCharacterData()\n    const textChanges = this.getTextChangesFromChildList()\n\n    Array.from(textChanges.additions).forEach((addition) => {\n      if (!Array.from(additions).includes(addition)) {\n        additions.push(addition)\n      }\n    })\n\n    deletions.push(...Array.from(textChanges.deletions || []))\n\n    const summary = {}\n\n    const added = additions.join(\"\")\n    if (added) {\n      summary.textAdded = added\n    }\n\n    const deleted = deletions.join(\"\")\n    if (deleted) {\n      summary.textDeleted = deleted\n    }\n\n    return summary\n  }\n\n  getMutationsByType(type) {\n    return Array.from(this.mutations).filter((mutation) => mutation.type === type)\n  }\n\n  getTextChangesFromChildList() {\n    let textAdded, textRemoved\n    const addedNodes = []\n    const removedNodes = []\n\n    Array.from(this.getMutationsByType(\"childList\")).forEach((mutation) => {\n      addedNodes.push(...Array.from(mutation.addedNodes || []))\n      removedNodes.push(...Array.from(mutation.removedNodes || []))\n    })\n\n    const singleBlockCommentRemoved =\n      addedNodes.length === 0 && removedNodes.length === 1 && nodeIsBlockStartComment(removedNodes[0])\n\n    if (singleBlockCommentRemoved) {\n      textAdded = []\n      textRemoved = [ \"\\n\" ]\n    } else {\n      textAdded = getTextForNodes(addedNodes)\n      textRemoved = getTextForNodes(removedNodes)\n    }\n\n    const additions = textAdded.filter((text, index) => text !== textRemoved[index]).map(normalizeSpaces)\n    const deletions = textRemoved.filter((text, index) => text !== textAdded[index]).map(normalizeSpaces)\n\n    return { additions, deletions }\n  }\n\n  getTextChangesFromCharacterData() {\n    let added, removed\n    const characterMutations = this.getMutationsByType(\"characterData\")\n\n    if (characterMutations.length) {\n      const startMutation = characterMutations[0],\n        endMutation = characterMutations[characterMutations.length - 1]\n\n      const oldString = normalizeSpaces(startMutation.oldValue)\n      const newString = normalizeSpaces(endMutation.target.data)\n      const summarized = summarizeStringChange(oldString, newString)\n      added = summarized.added\n      removed = summarized.removed\n    }\n\n    return {\n      additions: added ? [ added ] : [],\n      deletions: removed ? [ removed ] : [],\n    }\n  }\n}\n\nconst getTextForNodes = function(nodes = []) {\n  const text = []\n  for (const node of Array.from(nodes)) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        text.push(node.data)\n        break\n      case Node.ELEMENT_NODE:\n        if (tagName(node) === \"br\") {\n          text.push(\"\\n\")\n        } else {\n          text.push(...Array.from(getTextForNodes(node.childNodes) || []))\n        }\n        break\n    }\n  }\n  return text\n}\n","import \"trix/views/object_view\"\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class Controller extends BasicObject {}\n","/* eslint-disable\n    no-empty,\n*/\nimport Operation from \"trix/core/utilities/operation\"\n\nexport default class FileVerificationOperation extends Operation {\n  constructor(file) {\n    super(...arguments)\n    this.file = file\n  }\n\n  perform(callback) {\n    const reader = new FileReader()\n\n    reader.onerror = () => callback(false)\n\n    reader.onload = () => {\n      reader.onerror = null\n      try {\n        reader.abort()\n      } catch (error) {}\n      return callback(true, this.file)\n    }\n\n    return reader.readAsArrayBuffer(this.file)\n  }\n}\n","import BasicObject from \"trix/core/basic_object\"\nimport MutationObserver from \"trix/observers/mutation_observer\"\nimport FileVerificationOperation from \"trix/operations/file_verification_operation\"\n\nimport { handleEvent, innerElementIsActive } from \"trix/core/helpers\"\n\nexport default class InputController extends BasicObject {\n\n  static events = {}\n\n  constructor(element) {\n    super(...arguments)\n    this.element = element\n    this.mutationObserver = new MutationObserver(this.element)\n    this.mutationObserver.delegate = this\n    for (const eventName in this.constructor.events) {\n      handleEvent(eventName, { onElement: this.element, withCallback: this.handlerFor(eventName) })\n    }\n  }\n\n  elementDidMutate(mutationSummary) {}\n\n  editorWillSyncDocumentView() {\n    return this.mutationObserver.stop()\n  }\n\n  editorDidSyncDocumentView() {\n    return this.mutationObserver.start()\n  }\n\n  requestRender() {\n    return this.delegate?.inputControllerDidRequestRender?.()\n  }\n\n  requestReparse() {\n    this.delegate?.inputControllerDidRequestReparse?.()\n    return this.requestRender()\n  }\n\n  attachFiles(files) {\n    const operations = Array.from(files).map((file) => new FileVerificationOperation(file))\n    return Promise.all(operations).then((files) => {\n      this.handleInput(function() {\n        this.delegate?.inputControllerWillAttachFiles()\n        this.responder?.insertFiles(files)\n        return this.requestRender()\n      })\n    })\n  }\n\n  // Private\n\n  handlerFor(eventName) {\n    return (event) => {\n      if (!event.defaultPrevented) {\n        this.handleInput(() => {\n          if (!innerElementIsActive(this.element)) {\n            this.eventName = eventName\n            this.constructor.events[eventName].call(this, event)\n          }\n        })\n      }\n    }\n  }\n\n  handleInput(callback) {\n    try {\n      this.delegate?.inputControllerWillHandleInput()\n      callback.call(this)\n    } finally {\n      this.delegate?.inputControllerDidHandleInput()\n    }\n  }\n\n  createLinkHTML(href, text) {\n    const link = document.createElement(\"a\")\n    link.href = href\n    link.textContent = text ? text : href\n    return link.outerHTML\n  }\n}\n\n","import config from \"trix/config\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\nimport BasicObject from \"trix/core/basic_object\"\nimport InputController from \"trix/controllers/input_controller\"\nimport DocumentView from \"trix/views/document_view\"\nimport Document from \"trix/models/document\"\n\nimport {\n  dataTransferIsPlainText,\n  dataTransferIsWritable,\n  keyEventIsKeyboardCommand,\n  makeElement,\n  objectsAreEqual,\n  removeNode,\n  squishBreakableWhitespace,\n} from \"trix/core/helpers\"\n\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nconst { browser, keyNames } = config\nlet pastedFileCount = 0\n\nexport default class Level0InputController extends InputController {\n\n  static events = {\n    keydown(event) {\n      if (!this.isComposing()) {\n        this.resetInputSummary()\n      }\n      this.inputSummary.didInput = true\n\n      const keyName = keyNames[event.keyCode]\n      if (keyName) {\n        let context = this.keys\n\n        ;[ \"ctrl\", \"alt\", \"shift\", \"meta\" ].forEach((modifier) => {\n          if (event[`${modifier}Key`]) {\n            if (modifier === \"ctrl\") {\n              modifier = \"control\"\n            }\n            context = context?.[modifier]\n          }\n        })\n\n        if (context?.[keyName] != null) {\n          this.setInputSummary({ keyName })\n          selectionChangeObserver.reset()\n          context[keyName].call(this, event)\n        }\n      }\n\n      if (keyEventIsKeyboardCommand(event)) {\n        const character = String.fromCharCode(event.keyCode).toLowerCase()\n        if (character) {\n          const keys = [ \"alt\", \"shift\" ].map((modifier) => {\n            if (event[`${modifier}Key`]) {\n              return modifier\n            }\n          }).filter(key => key)\n          keys.push(character)\n          if (this.delegate?.inputControllerDidReceiveKeyboardCommand(keys)) {\n            event.preventDefault()\n          }\n        }\n      }\n    },\n\n    keypress(event) {\n      if (this.inputSummary.eventName != null) return\n      if (event.metaKey) return\n      if (event.ctrlKey && !event.altKey) return\n\n      const string = stringFromKeyEvent(event)\n      if (string) {\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.insertString(string)\n        return this.setInputSummary({ textAdded: string, didDelete: this.selectionIsExpanded() })\n      }\n    },\n\n    textInput(event) {\n      // Handle autocapitalization\n      const { data } = event\n      const { textAdded } = this.inputSummary\n      if (textAdded && textAdded !== data && textAdded.toUpperCase() === data) {\n        const range = this.getSelectedRange()\n        this.setSelectedRange([ range[0], range[1] + textAdded.length ])\n        this.responder?.insertString(data)\n        this.setInputSummary({ textAdded: data })\n        return this.setSelectedRange(range)\n      }\n    },\n\n    dragenter(event) {\n      event.preventDefault()\n    },\n\n    dragstart(event) {\n      this.serializeSelectionToDataTransfer(event.dataTransfer)\n      this.draggedRange = this.getSelectedRange()\n      return this.delegate?.inputControllerDidStartDrag?.()\n    },\n\n    dragover(event) {\n      if (this.draggedRange || this.canAcceptDataTransfer(event.dataTransfer)) {\n        event.preventDefault()\n        const draggingPoint = { x: event.clientX, y: event.clientY }\n        if (!objectsAreEqual(draggingPoint, this.draggingPoint)) {\n          this.draggingPoint = draggingPoint\n          return this.delegate?.inputControllerDidReceiveDragOverPoint?.(this.draggingPoint)\n        }\n      }\n    },\n\n    dragend(event) {\n      this.delegate?.inputControllerDidCancelDrag?.()\n      this.draggedRange = null\n      this.draggingPoint = null\n    },\n\n    drop(event) {\n      event.preventDefault()\n      const files = event.dataTransfer?.files\n      const documentJSON = event.dataTransfer.getData(\"application/x-trix-document\")\n\n      const point = { x: event.clientX, y: event.clientY }\n      this.responder?.setLocationRangeFromPointRange(point)\n\n      if (files?.length) {\n        this.attachFiles(files)\n      } else if (this.draggedRange) {\n        this.delegate?.inputControllerWillMoveText()\n        this.responder?.moveTextFromRange(this.draggedRange)\n        this.draggedRange = null\n        this.requestRender()\n      } else if (documentJSON) {\n        const document = Document.fromJSONString(documentJSON)\n        this.responder?.insertDocument(document)\n        this.requestRender()\n      }\n\n      this.draggedRange = null\n      this.draggingPoint = null\n    },\n\n    cut(event) {\n      if (this.responder?.selectionIsExpanded()) {\n        if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n          event.preventDefault()\n        }\n\n        this.delegate?.inputControllerWillCutText()\n        this.deleteInDirection(\"backward\")\n        if (event.defaultPrevented) {\n          return this.requestRender()\n        }\n      }\n    },\n\n    copy(event) {\n      if (this.responder?.selectionIsExpanded()) {\n        if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n          event.preventDefault()\n        }\n      }\n    },\n\n    paste(event) {\n      const clipboard = event.clipboardData || event.testClipboardData\n      const paste = { clipboard }\n\n      if (!clipboard || pasteEventIsCrippledSafariHTMLPaste(event)) {\n        this.getPastedHTMLUsingHiddenElement((html) => {\n          paste.type = \"text/html\"\n          paste.html = html\n          this.delegate?.inputControllerWillPaste(paste)\n          this.responder?.insertHTML(paste.html)\n          this.requestRender()\n          return this.delegate?.inputControllerDidPaste(paste)\n        })\n        return\n      }\n\n      const href = clipboard.getData(\"URL\")\n      const html = clipboard.getData(\"text/html\")\n      const name = clipboard.getData(\"public.url-name\")\n\n      if (href) {\n        let string\n        paste.type = \"text/html\"\n        if (name) {\n          string = squishBreakableWhitespace(name).trim()\n        } else {\n          string = href\n        }\n        paste.html = this.createLinkHTML(href, string)\n        this.delegate?.inputControllerWillPaste(paste)\n        this.setInputSummary({ textAdded: string, didDelete: this.selectionIsExpanded() })\n        this.responder?.insertHTML(paste.html)\n        this.requestRender()\n        this.delegate?.inputControllerDidPaste(paste)\n      } else if (dataTransferIsPlainText(clipboard)) {\n        paste.type = \"text/plain\"\n        paste.string = clipboard.getData(\"text/plain\")\n        this.delegate?.inputControllerWillPaste(paste)\n        this.setInputSummary({ textAdded: paste.string, didDelete: this.selectionIsExpanded() })\n        this.responder?.insertString(paste.string)\n        this.requestRender()\n        this.delegate?.inputControllerDidPaste(paste)\n      } else if (html) {\n        paste.type = \"text/html\"\n        paste.html = html\n        this.delegate?.inputControllerWillPaste(paste)\n        this.responder?.insertHTML(paste.html)\n        this.requestRender()\n        this.delegate?.inputControllerDidPaste(paste)\n      } else if (Array.from(clipboard.types).includes(\"Files\")) {\n        const file = clipboard.items?.[0]?.getAsFile?.()\n        if (file) {\n          const extension = extensionForFile(file)\n          if (!file.name && extension) {\n            file.name = `pasted-file-${++pastedFileCount}.${extension}`\n          }\n          paste.type = \"File\"\n          paste.file = file\n          this.delegate?.inputControllerWillAttachFiles()\n          this.responder?.insertFile(paste.file)\n          this.requestRender()\n          this.delegate?.inputControllerDidPaste(paste)\n        }\n      }\n\n      event.preventDefault()\n    },\n\n    compositionstart(event) {\n      return this.getCompositionInput().start(event.data)\n    },\n\n    compositionupdate(event) {\n      return this.getCompositionInput().update(event.data)\n    },\n\n    compositionend(event) {\n      return this.getCompositionInput().end(event.data)\n    },\n\n    beforeinput(event) {\n      this.inputSummary.didInput = true\n    },\n\n    input(event) {\n      this.inputSummary.didInput = true\n      return event.stopPropagation()\n    },\n  }\n\n  static keys = {\n    backspace(event) {\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.deleteInDirection(\"backward\", event)\n    },\n\n    delete(event) {\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.deleteInDirection(\"forward\", event)\n    },\n\n    return(event) {\n      this.setInputSummary({ preferDocument: true })\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.responder?.insertLineBreak()\n    },\n\n    tab(event) {\n      if (this.responder?.canIncreaseNestingLevel()) {\n        this.responder?.increaseNestingLevel()\n        this.requestRender()\n        event.preventDefault()\n      }\n    },\n\n    left(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"backward\")\n      }\n    },\n\n    right(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"forward\")\n      }\n    },\n\n    control: {\n      d(event) {\n        this.delegate?.inputControllerWillPerformTyping()\n        return this.deleteInDirection(\"forward\", event)\n      },\n\n      h(event) {\n        this.delegate?.inputControllerWillPerformTyping()\n        return this.deleteInDirection(\"backward\", event)\n      },\n\n      o(event) {\n        event.preventDefault()\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.insertString(\"\\n\", { updatePosition: false })\n        return this.requestRender()\n      },\n    },\n\n    shift: {\n      return(event) {\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.insertString(\"\\n\")\n        this.requestRender()\n        event.preventDefault()\n      },\n\n      tab(event) {\n        if (this.responder?.canDecreaseNestingLevel()) {\n          this.responder?.decreaseNestingLevel()\n          this.requestRender()\n          event.preventDefault()\n        }\n      },\n\n      left(event) {\n        if (this.selectionIsInCursorTarget()) {\n          event.preventDefault()\n          return this.expandSelectionInDirection(\"backward\")\n        }\n      },\n\n      right(event) {\n        if (this.selectionIsInCursorTarget()) {\n          event.preventDefault()\n          return this.expandSelectionInDirection(\"forward\")\n        }\n      },\n    },\n\n    alt: {\n      backspace(event) {\n        this.setInputSummary({ preferDocument: false })\n        return this.delegate?.inputControllerWillPerformTyping()\n      },\n    },\n\n    meta: {\n      backspace(event) {\n        this.setInputSummary({ preferDocument: false })\n        return this.delegate?.inputControllerWillPerformTyping()\n      },\n    },\n  }\n\n  constructor() {\n    super(...arguments)\n    this.resetInputSummary()\n  }\n\n  setInputSummary(summary = {}) {\n    this.inputSummary.eventName = this.eventName\n    for (const key in summary) {\n      const value = summary[key]\n      this.inputSummary[key] = value\n    }\n    return this.inputSummary\n  }\n\n  resetInputSummary() {\n    this.inputSummary = {}\n  }\n\n  reset() {\n    this.resetInputSummary()\n    return selectionChangeObserver.reset()\n  }\n\n  // Mutation observer delegate\n\n  elementDidMutate(mutationSummary) {\n    if (this.isComposing()) {\n      return this.delegate?.inputControllerDidAllowUnhandledInput?.()\n    } else {\n      return this.handleInput(function() {\n        if (this.mutationIsSignificant(mutationSummary)) {\n          if (this.mutationIsExpected(mutationSummary)) {\n            this.requestRender()\n          } else {\n            this.requestReparse()\n          }\n        }\n        return this.reset()\n      })\n    }\n  }\n\n  mutationIsExpected({ textAdded, textDeleted }) {\n    if (this.inputSummary.preferDocument) {\n      return true\n    }\n\n    const mutationAdditionMatchesSummary =\n      textAdded != null ? textAdded === this.inputSummary.textAdded : !this.inputSummary.textAdded\n    const mutationDeletionMatchesSummary =\n      textDeleted != null ? this.inputSummary.didDelete : !this.inputSummary.didDelete\n\n    const unexpectedNewlineAddition = [ \"\\n\", \" \\n\" ].includes(textAdded) && !mutationAdditionMatchesSummary\n    const unexpectedNewlineDeletion = textDeleted === \"\\n\" && !mutationDeletionMatchesSummary\n    const singleUnexpectedNewline =\n      unexpectedNewlineAddition && !unexpectedNewlineDeletion ||\n      unexpectedNewlineDeletion && !unexpectedNewlineAddition\n\n    if (singleUnexpectedNewline) {\n      const range = this.getSelectedRange()\n      if (range) {\n        const offset = unexpectedNewlineAddition ? textAdded.replace(/\\n$/, \"\").length || -1 : textAdded?.length || 1\n        if (this.responder?.positionIsBlockBreak(range[1] + offset)) {\n          return true\n        }\n      }\n    }\n\n    return mutationAdditionMatchesSummary && mutationDeletionMatchesSummary\n  }\n\n  mutationIsSignificant(mutationSummary) {\n    const textChanged = Object.keys(mutationSummary).length > 0\n    const composedEmptyString = this.compositionInput?.getEndData() === \"\"\n    return textChanged || !composedEmptyString\n  }\n\n  // Private\n\n  getCompositionInput() {\n    if (this.isComposing()) {\n      return this.compositionInput\n    } else {\n      this.compositionInput = new CompositionInput(this)\n    }\n  }\n\n  isComposing() {\n    return this.compositionInput && !this.compositionInput.isEnded()\n  }\n\n  deleteInDirection(direction, event) {\n    if (this.responder?.deleteInDirection(direction) === false) {\n      if (event) {\n        event.preventDefault()\n        return this.requestRender()\n      }\n    } else {\n      return this.setInputSummary({ didDelete: true })\n    }\n  }\n\n  serializeSelectionToDataTransfer(dataTransfer) {\n    if (!dataTransferIsWritable(dataTransfer)) return\n    const document = this.responder?.getSelectedDocument().toSerializableDocument()\n\n    dataTransfer.setData(\"application/x-trix-document\", JSON.stringify(document))\n    dataTransfer.setData(\"text/html\", DocumentView.render(document).innerHTML)\n    dataTransfer.setData(\"text/plain\", document.toString().replace(/\\n$/, \"\"))\n    return true\n  }\n\n  canAcceptDataTransfer(dataTransfer) {\n    const types = {}\n    Array.from(dataTransfer?.types || []).forEach((type) => {\n      types[type] = true\n    })\n    return types.Files || types[\"application/x-trix-document\"] || types[\"text/html\"] || types[\"text/plain\"]\n  }\n\n  getPastedHTMLUsingHiddenElement(callback) {\n    const selectedRange = this.getSelectedRange()\n\n    const style = {\n      position: \"absolute\",\n      left: `${window.pageXOffset}px`,\n      top: `${window.pageYOffset}px`,\n      opacity: 0,\n    }\n\n    const element = makeElement({ style, tagName: \"div\", editable: true })\n    document.body.appendChild(element)\n    element.focus()\n\n    return requestAnimationFrame(() => {\n      const html = element.innerHTML\n      removeNode(element)\n      this.setSelectedRange(selectedRange)\n      return callback(html)\n    })\n  }\n}\n\nLevel0InputController.proxyMethod(\"responder?.getSelectedRange\")\nLevel0InputController.proxyMethod(\"responder?.setSelectedRange\")\nLevel0InputController.proxyMethod(\"responder?.expandSelectionInDirection\")\nLevel0InputController.proxyMethod(\"responder?.selectionIsInCursorTarget\")\nLevel0InputController.proxyMethod(\"responder?.selectionIsExpanded\")\n\nconst extensionForFile = (file) => file.type?.match(/\\/(\\w+)$/)?.[1]\n\nconst hasStringCodePointAt = !!\" \".codePointAt?.(0)\n\nconst stringFromKeyEvent = function(event) {\n  if (event.key && hasStringCodePointAt && event.key.codePointAt(0) === event.keyCode) {\n    return event.key\n  } else {\n    let code\n    if (event.which === null) {\n      code = event.keyCode\n    } else if (event.which !== 0 && event.charCode !== 0) {\n      code = event.charCode\n    }\n\n    if (code != null && keyNames[code] !== \"escape\") {\n      return UTF16String.fromCodepoints([ code ]).toString()\n    }\n  }\n}\n\nconst pasteEventIsCrippledSafariHTMLPaste = function(event) {\n  const paste = event.clipboardData\n  if (paste) {\n    if (paste.types.includes(\"text/html\")) {\n      // Answer is yes if there's any possibility of Paste and Match Style in Safari,\n      // which is nearly impossible to detect confidently: https://bugs.webkit.org/show_bug.cgi?id=174165\n      for (const type of paste.types) {\n        const hasPasteboardFlavor = /^CorePasteboardFlavorType/.test(type)\n        const hasReadableDynamicData = /^dyn\\./.test(type) && paste.getData(type)\n        const mightBePasteAndMatchStyle = hasPasteboardFlavor || hasReadableDynamicData\n        if (mightBePasteAndMatchStyle) {\n          return true\n        }\n      }\n      return false\n    } else {\n      const isExternalHTMLPaste = paste.types.includes(\"com.apple.webarchive\")\n      const isExternalRichTextPaste = paste.types.includes(\"com.apple.flat-rtfd\")\n      return isExternalHTMLPaste || isExternalRichTextPaste\n    }\n  }\n}\n\nclass CompositionInput extends BasicObject {\n  constructor(inputController) {\n    super(...arguments)\n    this.inputController = inputController\n    this.responder = this.inputController.responder\n    this.delegate = this.inputController.delegate\n    this.inputSummary = this.inputController.inputSummary\n    this.data = {}\n  }\n\n  start(data) {\n    this.data.start = data\n\n    if (this.isSignificant()) {\n      if (this.inputSummary.eventName === \"keypress\" && this.inputSummary.textAdded) {\n        this.responder?.deleteInDirection(\"left\")\n      }\n\n      if (!this.selectionIsExpanded()) {\n        this.insertPlaceholder()\n        this.requestRender()\n      }\n\n      this.range = this.responder?.getSelectedRange()\n    }\n  }\n\n  update(data) {\n    this.data.update = data\n\n    if (this.isSignificant()) {\n      const range = this.selectPlaceholder()\n      if (range) {\n        this.forgetPlaceholder()\n        this.range = range\n      }\n    }\n  }\n\n  end(data) {\n    this.data.end = data\n\n    if (this.isSignificant()) {\n      this.forgetPlaceholder()\n\n      if (this.canApplyToDocument()) {\n        this.setInputSummary({ preferDocument: true, didInput: false })\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.setSelectedRange(this.range)\n        this.responder?.insertString(this.data.end)\n        return this.responder?.setSelectedRange(this.range[0] + this.data.end.length)\n      } else if (this.data.start != null || this.data.update != null) {\n        this.requestReparse()\n        return this.inputController.reset()\n      }\n    } else {\n      return this.inputController.reset()\n    }\n  }\n\n  getEndData() {\n    return this.data.end\n  }\n\n  isEnded() {\n    return this.getEndData() != null\n  }\n\n  isSignificant() {\n    if (browser.composesExistingText) {\n      return this.inputSummary.didInput\n    } else {\n      return true\n    }\n  }\n\n  // Private\n\n  canApplyToDocument() {\n    return this.data.start?.length === 0 && this.data.end?.length > 0 && this.range\n  }\n}\n\nCompositionInput.proxyMethod(\"inputController.setInputSummary\")\nCompositionInput.proxyMethod(\"inputController.requestRender\")\nCompositionInput.proxyMethod(\"inputController.requestReparse\")\nCompositionInput.proxyMethod(\"responder?.selectionIsExpanded\")\nCompositionInput.proxyMethod(\"responder?.insertPlaceholder\")\nCompositionInput.proxyMethod(\"responder?.selectPlaceholder\")\nCompositionInput.proxyMethod(\"responder?.forgetPlaceholder\")\n","import { getAllAttributeNames, squishBreakableWhitespace } from \"trix/core/helpers\"\nimport InputController from \"trix/controllers/input_controller\"\n\nimport { dataTransferIsPlainText, keyEventIsKeyboardCommand, objectsAreEqual } from \"trix/core/helpers\"\n\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nexport default class Level2InputController extends InputController {\n  constructor(...args) {\n    super(...args)\n    this.render = this.render.bind(this)\n  }\n\n  static events = {\n    keydown(event) {\n      if (keyEventIsKeyboardCommand(event)) {\n        const command = keyboardCommandFromKeyEvent(event)\n        if (this.delegate?.inputControllerDidReceiveKeyboardCommand(command)) {\n          event.preventDefault()\n        }\n      } else {\n        let name = event.key\n        if (event.altKey) {\n          name += \"+Alt\"\n        }\n        if (event.shiftKey) {\n          name += \"+Shift\"\n        }\n        const handler = this.constructor.keys[name]\n        if (handler) {\n          return this.withEvent(event, handler)\n        }\n      }\n    },\n\n    // Handle paste event to work around beforeinput.insertFromPaste browser bugs.\n    // Safe to remove each condition once fixed upstream.\n    paste(event) {\n      // https://bugs.webkit.org/show_bug.cgi?id=194921\n      let paste\n      const href = event.clipboardData?.getData(\"URL\")\n      if (pasteEventHasFilesOnly(event)) {\n        event.preventDefault()\n        return this.attachFiles(event.clipboardData.files)\n\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=934448\n      } else if (pasteEventHasPlainTextOnly(event)) {\n        event.preventDefault()\n        paste = {\n          type: \"text/plain\",\n          string: event.clipboardData.getData(\"text/plain\"),\n        }\n        this.delegate?.inputControllerWillPaste(paste)\n        this.responder?.insertString(paste.string)\n        this.render()\n        return this.delegate?.inputControllerDidPaste(paste)\n\n        // https://bugs.webkit.org/show_bug.cgi?id=196702\n      } else if (href) {\n        event.preventDefault()\n        paste = {\n          type: \"text/html\",\n          html: this.createLinkHTML(href),\n        }\n        this.delegate?.inputControllerWillPaste(paste)\n        this.responder?.insertHTML(paste.html)\n        this.render()\n        return this.delegate?.inputControllerDidPaste(paste)\n      }\n    },\n\n    beforeinput(event) {\n      const handler = this.constructor.inputTypes[event.inputType]\n      if (handler) {\n        this.withEvent(event, handler)\n        return this.scheduleRender()\n      }\n    },\n\n    input(event) {\n      return selectionChangeObserver.reset()\n    },\n\n    dragstart(event) {\n      if (this.responder?.selectionContainsAttachments()) {\n        event.dataTransfer.setData(\"application/x-trix-dragging\", true)\n\n        this.dragging = {\n          range: this.responder?.getSelectedRange(),\n          point: pointFromEvent(event),\n        }\n      }\n    },\n\n    dragenter(event) {\n      if (dragEventHasFiles(event)) {\n        event.preventDefault()\n      }\n    },\n\n    dragover(event) {\n      if (this.dragging) {\n        event.preventDefault()\n        const point = pointFromEvent(event)\n        if (!objectsAreEqual(point, this.dragging.point)) {\n          this.dragging.point = point\n          return this.responder?.setLocationRangeFromPointRange(point)\n        }\n      } else if (dragEventHasFiles(event)) {\n        event.preventDefault()\n      }\n    },\n\n    drop(event) {\n      if (this.dragging) {\n        event.preventDefault()\n        this.delegate?.inputControllerWillMoveText()\n        this.responder?.moveTextFromRange(this.dragging.range)\n        this.dragging = null\n        return this.scheduleRender()\n      } else if (dragEventHasFiles(event)) {\n        event.preventDefault()\n        const point = pointFromEvent(event)\n        this.responder?.setLocationRangeFromPointRange(point)\n        return this.attachFiles(event.dataTransfer.files)\n      }\n    },\n\n    dragend() {\n      if (this.dragging) {\n        this.responder?.setSelectedRange(this.dragging.range)\n        this.dragging = null\n      }\n    },\n\n    compositionend(event) {\n      if (this.composing) {\n        this.composing = false\n        return this.scheduleRender()\n      }\n    },\n  }\n\n  static keys = {\n    ArrowLeft() {\n      if (this.responder?.shouldManageMovingCursorInDirection(\"backward\")) {\n        this.event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"backward\")\n      }\n    },\n\n    ArrowRight() {\n      if (this.responder?.shouldManageMovingCursorInDirection(\"forward\")) {\n        this.event.preventDefault()\n        return this.responder?.moveCursorInDirection(\"forward\")\n      }\n    },\n\n    Backspace() {\n      if (this.responder?.shouldManageDeletingInDirection(\"backward\")) {\n        this.event.preventDefault()\n        this.delegate?.inputControllerWillPerformTyping()\n        this.responder?.deleteInDirection(\"backward\")\n        return this.render()\n      }\n    },\n\n    Tab() {\n      if (this.responder?.canIncreaseNestingLevel()) {\n        this.event.preventDefault()\n        this.responder?.increaseNestingLevel()\n        return this.render()\n      }\n    },\n\n    \"Tab+Shift\"() {\n      if (this.responder?.canDecreaseNestingLevel()) {\n        this.event.preventDefault()\n        this.responder?.decreaseNestingLevel()\n        return this.render()\n      }\n    },\n  }\n\n  static inputTypes = {\n    deleteByComposition() {\n      return this.deleteInDirection(\"backward\", { recordUndoEntry: false })\n    },\n\n    deleteByCut() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteByDrag() {\n      this.event.preventDefault()\n      return this.withTargetDOMRange(function() {\n        this.deleteByDragRange = this.responder?.getSelectedRange()\n      })\n    },\n\n    deleteCompositionText() {\n      return this.deleteInDirection(\"backward\", { recordUndoEntry: false })\n    },\n\n    deleteContent() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteContentBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteContentForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteEntireSoftLine() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteHardLineBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteHardLineForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteSoftLineBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteSoftLineForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    deleteWordBackward() {\n      return this.deleteInDirection(\"backward\")\n    },\n\n    deleteWordForward() {\n      return this.deleteInDirection(\"forward\")\n    },\n\n    formatBackColor() {\n      return this.activateAttributeIfSupported(\"backgroundColor\", this.event.data)\n    },\n\n    formatBold() {\n      return this.toggleAttributeIfSupported(\"bold\")\n    },\n\n    formatFontColor() {\n      return this.activateAttributeIfSupported(\"color\", this.event.data)\n    },\n\n    formatFontName() {\n      return this.activateAttributeIfSupported(\"font\", this.event.data)\n    },\n\n    formatIndent() {\n      if (this.responder?.canIncreaseNestingLevel()) {\n        return this.withTargetDOMRange(function() {\n          return this.responder?.increaseNestingLevel()\n        })\n      }\n    },\n\n    formatItalic() {\n      return this.toggleAttributeIfSupported(\"italic\")\n    },\n\n    formatJustifyCenter() {\n      return this.toggleAttributeIfSupported(\"justifyCenter\")\n    },\n\n    formatJustifyFull() {\n      return this.toggleAttributeIfSupported(\"justifyFull\")\n    },\n\n    formatJustifyLeft() {\n      return this.toggleAttributeIfSupported(\"justifyLeft\")\n    },\n\n    formatJustifyRight() {\n      return this.toggleAttributeIfSupported(\"justifyRight\")\n    },\n\n    formatOutdent() {\n      if (this.responder?.canDecreaseNestingLevel()) {\n        return this.withTargetDOMRange(function() {\n          return this.responder?.decreaseNestingLevel()\n        })\n      }\n    },\n\n    formatRemove() {\n      this.withTargetDOMRange(function() {\n        for (const attributeName in this.responder?.getCurrentAttributes()) {\n          this.responder?.removeCurrentAttribute(attributeName)\n        }\n      })\n    },\n\n    formatSetBlockTextDirection() {\n      return this.activateAttributeIfSupported(\"blockDir\", this.event.data)\n    },\n\n    formatSetInlineTextDirection() {\n      return this.activateAttributeIfSupported(\"textDir\", this.event.data)\n    },\n\n    formatStrikeThrough() {\n      return this.toggleAttributeIfSupported(\"strike\")\n    },\n\n    formatSubscript() {\n      return this.toggleAttributeIfSupported(\"sub\")\n    },\n\n    formatSuperscript() {\n      return this.toggleAttributeIfSupported(\"sup\")\n    },\n\n    formatUnderline() {\n      return this.toggleAttributeIfSupported(\"underline\")\n    },\n\n    historyRedo() {\n      return this.delegate?.inputControllerWillPerformRedo()\n    },\n\n    historyUndo() {\n      return this.delegate?.inputControllerWillPerformUndo()\n    },\n\n    insertCompositionText() {\n      this.composing = true\n      return this.insertString(this.event.data)\n    },\n\n    insertFromComposition() {\n      this.composing = false\n      return this.insertString(this.event.data)\n    },\n\n    insertFromDrop() {\n      const range = this.deleteByDragRange\n      if (range) {\n        this.deleteByDragRange = null\n        this.delegate?.inputControllerWillMoveText()\n        return this.withTargetDOMRange(function() {\n          return this.responder?.moveTextFromRange(range)\n        })\n      }\n    },\n\n    insertFromPaste() {\n      const { dataTransfer } = this.event\n      const paste = { dataTransfer }\n      const href = dataTransfer.getData(\"URL\")\n      const html = dataTransfer.getData(\"text/html\")\n\n      if (href) {\n        let string\n        this.event.preventDefault()\n        paste.type = \"text/html\"\n        const name = dataTransfer.getData(\"public.url-name\")\n        if (name) {\n          string = squishBreakableWhitespace(name).trim()\n        } else {\n          string = href\n        }\n        paste.html = this.createLinkHTML(href, string)\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertHTML(paste.html)\n        })\n\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      } else if (dataTransferIsPlainText(dataTransfer)) {\n        paste.type = \"text/plain\"\n        paste.string = dataTransfer.getData(\"text/plain\")\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertString(paste.string)\n        })\n\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      } else if (html) {\n        this.event.preventDefault()\n        paste.type = \"text/html\"\n        paste.html = html\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertHTML(paste.html)\n        })\n\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      } else if (dataTransfer.files?.length) {\n        paste.type = \"File\"\n        paste.file = dataTransfer.files[0]\n        this.delegate?.inputControllerWillPaste(paste)\n        this.withTargetDOMRange(function() {\n          return this.responder?.insertFile(paste.file)\n        })\n\n        this.afterRender = () => {\n          return this.delegate?.inputControllerDidPaste(paste)\n        }\n      }\n    },\n\n    insertFromYank() {\n      return this.insertString(this.event.data)\n    },\n\n    insertLineBreak() {\n      return this.insertString(\"\\n\")\n    },\n\n    insertLink() {\n      return this.activateAttributeIfSupported(\"href\", this.event.data)\n    },\n\n    insertOrderedList() {\n      return this.toggleAttributeIfSupported(\"number\")\n    },\n\n    insertParagraph() {\n      this.delegate?.inputControllerWillPerformTyping()\n      return this.withTargetDOMRange(function() {\n        return this.responder?.insertLineBreak()\n      })\n    },\n\n    insertReplacementText() {\n      return this.insertString(this.event.dataTransfer.getData(\"text/plain\"), { updatePosition: false })\n    },\n\n    insertText() {\n      return this.insertString(this.event.data || this.event.dataTransfer?.getData(\"text/plain\"))\n    },\n\n    insertTranspose() {\n      return this.insertString(this.event.data)\n    },\n\n    insertUnorderedList() {\n      return this.toggleAttributeIfSupported(\"bullet\")\n    },\n  }\n\n  elementDidMutate() {\n    if (this.scheduledRender) {\n      if (this.composing) {\n        return this.delegate?.inputControllerDidAllowUnhandledInput?.()\n      }\n    } else {\n      return this.reparse()\n    }\n  }\n\n  scheduleRender() {\n    return this.scheduledRender ? this.scheduledRender : this.scheduledRender = requestAnimationFrame(this.render)\n  }\n\n  render() {\n    cancelAnimationFrame(this.scheduledRender)\n    this.scheduledRender = null\n    if (!this.composing) {\n      this.delegate?.render()\n    }\n    this.afterRender?.()\n    this.afterRender = null\n  }\n\n  reparse() {\n    return this.delegate?.reparse()\n  }\n\n  // Responder helpers\n\n  insertString(string = \"\", options) {\n    this.delegate?.inputControllerWillPerformTyping()\n    return this.withTargetDOMRange(function() {\n      return this.responder?.insertString(string, options)\n    })\n  }\n\n  toggleAttributeIfSupported(attributeName) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      this.delegate?.inputControllerWillPerformFormatting(attributeName)\n      return this.withTargetDOMRange(function() {\n        return this.responder?.toggleCurrentAttribute(attributeName)\n      })\n    }\n  }\n\n  activateAttributeIfSupported(attributeName, value) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      this.delegate?.inputControllerWillPerformFormatting(attributeName)\n      return this.withTargetDOMRange(function() {\n        return this.responder?.setCurrentAttribute(attributeName, value)\n      })\n    }\n  }\n\n  deleteInDirection(direction, { recordUndoEntry } = { recordUndoEntry: true }) {\n    if (recordUndoEntry) {\n      this.delegate?.inputControllerWillPerformTyping()\n    }\n    const perform = () => this.responder?.deleteInDirection(direction)\n    const domRange = this.getTargetDOMRange({ minLength: 2 })\n    if (domRange) {\n      return this.withTargetDOMRange(domRange, perform)\n    } else {\n      return perform()\n    }\n  }\n\n  // Selection helpers\n\n  withTargetDOMRange(domRange, fn) {\n    if (typeof domRange === \"function\") {\n      fn = domRange\n      domRange = this.getTargetDOMRange()\n    }\n    if (domRange) {\n      return this.responder?.withTargetDOMRange(domRange, fn.bind(this))\n    } else {\n      selectionChangeObserver.reset()\n      return fn.call(this)\n    }\n  }\n\n  getTargetDOMRange({ minLength } = { minLength: 0 }) {\n    const targetRanges = this.event.getTargetRanges?.()\n    if (targetRanges) {\n      if (targetRanges.length) {\n        const domRange = staticRangeToRange(targetRanges[0])\n        if (minLength === 0 || domRange.toString().length >= minLength) {\n          return domRange\n        }\n      }\n    }\n  }\n\n  withEvent(event, fn) {\n    let result\n    this.event = event\n    try {\n      result = fn.call(this)\n    } finally {\n      this.event = null\n    }\n    return result\n  }\n}\n\nconst staticRangeToRange = function(staticRange) {\n  const range = document.createRange()\n  range.setStart(staticRange.startContainer, staticRange.startOffset)\n  range.setEnd(staticRange.endContainer, staticRange.endOffset)\n  return range\n}\n\n// Event helpers\n\nconst dragEventHasFiles = (event) => Array.from(event.dataTransfer?.types || []).includes(\"Files\")\n\nconst pasteEventHasFilesOnly = function(event) {\n  const clipboard = event.clipboardData\n  if (clipboard) {\n    return clipboard.types.includes(\"Files\") && clipboard.types.length === 1 && clipboard.files.length >= 1\n  }\n}\n\nconst pasteEventHasPlainTextOnly = function(event) {\n  const clipboard = event.clipboardData\n  if (clipboard) {\n    return clipboard.types.includes(\"text/plain\") && clipboard.types.length === 1\n  }\n}\n\nconst keyboardCommandFromKeyEvent = function(event) {\n  const command = []\n  if (event.altKey) {\n    command.push(\"alt\")\n  }\n  if (event.shiftKey) {\n    command.push(\"shift\")\n  }\n  command.push(event.key)\n  return command\n}\n\nconst pointFromEvent = (event) => ({\n  x: event.clientX,\n  y: event.clientY,\n})\n","import { removeNode } from \"trix/core/helpers\"\n\nimport config from \"trix/config\"\nimport BasicObject from \"trix/core/basic_object\"\n\nimport { defer, handleEvent, makeElement, tagName } from \"trix/core/helpers\"\nconst { lang, css, keyNames } = config\n\nconst undoable = function(fn) {\n  return function() {\n    const commands = fn.apply(this, arguments)\n    commands.do()\n    if (!this.undos) {\n      this.undos = []\n    }\n    this.undos.push(commands.undo)\n  }\n}\n\nexport default class AttachmentEditorController extends BasicObject {\n  constructor(attachmentPiece, element, container, options = {}) {\n    super(...arguments)\n    this.didClickToolbar = this.didClickToolbar.bind(this)\n    this.didClickActionButton = this.didClickActionButton.bind(this)\n    this.didKeyDownCaption = this.didKeyDownCaption.bind(this)\n    this.didInputCaption = this.didInputCaption.bind(this)\n    this.didChangeCaption = this.didChangeCaption.bind(this)\n    this.didBlurCaption = this.didBlurCaption.bind(this)\n    this.attachmentPiece = attachmentPiece\n    this.element = element\n    this.container = container\n    this.options = options\n    this.attachment = this.attachmentPiece.attachment\n    if (tagName(this.element) === \"a\") {\n      this.element = this.element.firstChild\n    }\n    this.install()\n  }\n\n  install() {\n    this.makeElementMutable()\n    this.addToolbar()\n    if (this.attachment.isPreviewable()) {\n      this.installCaptionEditor()\n    }\n  }\n\n  uninstall() {\n    let undo = this.undos.pop()\n    this.savePendingCaption()\n    while (undo) {\n      undo()\n      undo = this.undos.pop()\n    }\n    this.delegate?.didUninstallAttachmentEditor(this)\n  }\n\n  // Private\n\n  savePendingCaption() {\n    if (this.pendingCaption) {\n      const caption = this.pendingCaption\n      this.pendingCaption = null\n      if (caption) {\n        this.delegate?.attachmentEditorDidRequestUpdatingAttributesForAttachment?.({ caption }, this.attachment)\n      } else {\n        this.delegate?.attachmentEditorDidRequestRemovingAttributeForAttachment?.(\"caption\", this.attachment)\n      }\n    }\n  }\n\n  // Installing and uninstalling\n\n  makeElementMutable = undoable(() => {\n    return {\n      do: () => {\n        this.element.dataset.trixMutable = true\n      },\n      undo: () => delete this.element.dataset.trixMutable,\n    }\n  })\n\n  addToolbar = undoable(() => {\n    // <div class=\"#{css.attachmentMetadataContainer}\" data-trix-mutable=\"true\">\n    //   <div class=\"trix-button-row\">\n    //     <span class=\"trix-button-group trix-button-group--actions\">\n    //       <button type=\"button\" class=\"trix-button trix-button--remove\" title=\"#{lang.remove}\" data-trix-action=\"remove\">#{lang.remove}</button>\n    //     </span>\n    //   </div>\n    // </div>\n    const element = makeElement({\n      tagName: \"div\",\n      className: css.attachmentToolbar,\n      data: { trixMutable: true },\n      childNodes: makeElement({\n        tagName: \"div\",\n        className: \"trix-button-row\",\n        childNodes: makeElement({\n          tagName: \"span\",\n          className: \"trix-button-group trix-button-group--actions\",\n          childNodes: makeElement({\n            tagName: \"button\",\n            className: \"trix-button trix-button--remove\",\n            textContent: lang.remove,\n            attributes: { title: lang.remove },\n            data: { trixAction: \"remove\" },\n          }),\n        }),\n      }),\n    })\n\n    if (this.attachment.isPreviewable()) {\n      // <div class=\"#{css.attachmentMetadataContainer}\">\n      //   <span class=\"#{css.attachmentMetadata}\">\n      //     <span class=\"#{css.attachmentName}\" title=\"#{name}\">#{name}</span>\n      //     <span class=\"#{css.attachmentSize}\">#{size}</span>\n      //   </span>\n      // </div>\n      element.appendChild(\n        makeElement({\n          tagName: \"div\",\n          className: css.attachmentMetadataContainer,\n          childNodes: makeElement({\n            tagName: \"span\",\n            className: css.attachmentMetadata,\n            childNodes: [\n              makeElement({\n                tagName: \"span\",\n                className: css.attachmentName,\n                textContent: this.attachment.getFilename(),\n                attributes: { title: this.attachment.getFilename() },\n              }),\n              makeElement({\n                tagName: \"span\",\n                className: css.attachmentSize,\n                textContent: this.attachment.getFormattedFilesize(),\n              }),\n            ],\n          }),\n        })\n      )\n    }\n\n    handleEvent(\"click\", { onElement: element, withCallback: this.didClickToolbar })\n    handleEvent(\"click\", {\n      onElement: element,\n      matchingSelector: \"[data-trix-action]\",\n      withCallback: this.didClickActionButton,\n    })\n\n    return {\n      do: () => this.element.appendChild(element),\n      undo: () => removeNode(element),\n    }\n  })\n\n  installCaptionEditor = undoable(() => {\n    const textarea = makeElement({\n      tagName: \"textarea\",\n      className: css.attachmentCaptionEditor,\n      attributes: { placeholder: lang.captionPlaceholder },\n      data: { trixMutable: true },\n    })\n    textarea.value = this.attachmentPiece.getCaption()\n\n    const textareaClone = textarea.cloneNode()\n    textareaClone.classList.add(\"trix-autoresize-clone\")\n    textareaClone.tabIndex = -1\n\n    const autoresize = function() {\n      textareaClone.value = textarea.value\n      textarea.style.height = textareaClone.scrollHeight + \"px\"\n    }\n\n    handleEvent(\"input\", { onElement: textarea, withCallback: autoresize })\n    handleEvent(\"input\", { onElement: textarea, withCallback: this.didInputCaption })\n    handleEvent(\"keydown\", { onElement: textarea, withCallback: this.didKeyDownCaption })\n    handleEvent(\"change\", { onElement: textarea, withCallback: this.didChangeCaption })\n    handleEvent(\"blur\", { onElement: textarea, withCallback: this.didBlurCaption })\n\n    const figcaption = this.element.querySelector(\"figcaption\")\n    const editingFigcaption = figcaption.cloneNode()\n\n    return {\n      do: () => {\n        figcaption.style.display = \"none\"\n        editingFigcaption.appendChild(textarea)\n        editingFigcaption.appendChild(textareaClone)\n        editingFigcaption.classList.add(`${css.attachmentCaption}--editing`)\n        figcaption.parentElement.insertBefore(editingFigcaption, figcaption)\n        autoresize()\n        if (this.options.editCaption) {\n          return defer(() => textarea.focus())\n        }\n      },\n      undo() {\n        removeNode(editingFigcaption)\n        figcaption.style.display = null\n      },\n    }\n  })\n\n  // Event handlers\n\n  didClickToolbar(event) {\n    event.preventDefault()\n    return event.stopPropagation()\n  }\n\n  didClickActionButton(event) {\n    const action = event.target.getAttribute(\"data-trix-action\")\n    switch (action) {\n      case \"remove\":\n        return this.delegate?.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)\n    }\n  }\n\n  didKeyDownCaption(event) {\n    if (keyNames[event.keyCode] === \"return\") {\n      event.preventDefault()\n      this.savePendingCaption()\n      return this.delegate?.attachmentEditorDidRequestDeselectingAttachment?.(this.attachment)\n    }\n  }\n\n  didInputCaption(event) {\n    this.pendingCaption = event.target.value.replace(/\\s/g, \" \").trim()\n  }\n\n  didChangeCaption(event) {\n    return this.savePendingCaption()\n  }\n\n  didBlurCaption(event) {\n    return this.savePendingCaption()\n  }\n}\n","import BasicObject from \"trix/core/basic_object\"\nimport DocumentView from \"trix/views/document_view\"\nimport AttachmentEditorController from \"trix/controllers/attachment_editor_controller\"\n\nimport { defer, findClosestElementFromNode, handleEvent, innerElementIsActive } from \"trix/core/helpers\"\nimport { attachmentSelector } from \"trix/config/attachments\"\n\nexport default class CompositionController extends BasicObject {\n  constructor(element, composition) {\n    super(...arguments)\n    this.didFocus = this.didFocus.bind(this)\n    this.didBlur = this.didBlur.bind(this)\n    this.didClickAttachment = this.didClickAttachment.bind(this)\n\n    this.element = element\n    this.composition = composition\n    this.documentView = new DocumentView(this.composition.document, { element: this.element })\n\n    handleEvent(\"focus\", { onElement: this.element, withCallback: this.didFocus })\n    handleEvent(\"blur\", { onElement: this.element, withCallback: this.didBlur })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"a[contenteditable=false]\",\n      preventDefault: true,\n    })\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attachmentSelector,\n      withCallback: this.didClickAttachment,\n    })\n    handleEvent(\"click\", { onElement: this.element, matchingSelector: `a${attachmentSelector}`, preventDefault: true })\n  }\n\n  didFocus(event) {\n    const perform = () => {\n      if (!this.focused) {\n        this.focused = true\n        return this.delegate?.compositionControllerDidFocus?.()\n      }\n    }\n\n    return this.blurPromise?.then(perform) || perform()\n  }\n\n  didBlur(event) {\n    this.blurPromise = new Promise((resolve) => {\n      return defer(() => {\n        if (!innerElementIsActive(this.element)) {\n          this.focused = null\n          this.delegate?.compositionControllerDidBlur?.()\n        }\n        this.blurPromise = null\n        return resolve()\n      })\n    })\n  }\n\n  didClickAttachment(event, target) {\n    const attachment = this.findAttachmentForElement(target)\n    const editCaption = !!findClosestElementFromNode(event.target, { matchingSelector: \"figcaption\" })\n    return this.delegate?.compositionControllerDidSelectAttachment?.(attachment, { editCaption })\n  }\n\n  getSerializableElement() {\n    if (this.isEditingAttachment()) {\n      return this.documentView.shadowElement\n    } else {\n      return this.element\n    }\n  }\n\n  render() {\n    if (this.revision !== this.composition.revision) {\n      this.documentView.setDocument(this.composition.document)\n      this.documentView.render()\n      this.revision = this.composition.revision\n    }\n\n    if (this.canSyncDocumentView() && !this.documentView.isSynced()) {\n      this.delegate?.compositionControllerWillSyncDocumentView?.()\n      this.documentView.sync()\n      this.delegate?.compositionControllerDidSyncDocumentView?.()\n    }\n\n    return this.delegate?.compositionControllerDidRender?.()\n  }\n\n  rerenderViewForObject(object) {\n    this.invalidateViewForObject(object)\n    return this.render()\n  }\n\n  invalidateViewForObject(object) {\n    return this.documentView.invalidateViewForObject(object)\n  }\n\n  isViewCachingEnabled() {\n    return this.documentView.isViewCachingEnabled()\n  }\n\n  enableViewCaching() {\n    return this.documentView.enableViewCaching()\n  }\n\n  disableViewCaching() {\n    return this.documentView.disableViewCaching()\n  }\n\n  refreshViewCache() {\n    return this.documentView.garbageCollectCachedViews()\n  }\n\n  // Attachment editor management\n\n  isEditingAttachment() {\n    return !!this.attachmentEditor\n  }\n\n  installAttachmentEditorForAttachment(attachment, options) {\n    if (this.attachmentEditor?.attachment === attachment) return\n    const element = this.documentView.findElementForObject(attachment)\n    if (!element) return\n\n    this.uninstallAttachmentEditor()\n    const attachmentPiece = this.composition.document.getAttachmentPieceForAttachment(attachment)\n    this.attachmentEditor = new AttachmentEditorController(attachmentPiece, element, this.element, options)\n    this.attachmentEditor.delegate = this\n  }\n\n  uninstallAttachmentEditor() {\n    return this.attachmentEditor?.uninstall()\n  }\n\n  // Attachment controller delegate\n\n  didUninstallAttachmentEditor() {\n    this.attachmentEditor = null\n    return this.render()\n  }\n\n  attachmentEditorDidRequestUpdatingAttributesForAttachment(attributes, attachment) {\n    this.delegate?.compositionControllerWillUpdateAttachment?.(attachment)\n    return this.composition.updateAttributesForAttachment(attributes, attachment)\n  }\n\n  attachmentEditorDidRequestRemovingAttributeForAttachment(attribute, attachment) {\n    this.delegate?.compositionControllerWillUpdateAttachment?.(attachment)\n    return this.composition.removeAttributeForAttachment(attribute, attachment)\n  }\n\n  attachmentEditorDidRequestRemovalOfAttachment(attachment) {\n    return this.delegate?.compositionControllerDidRequestRemovalOfAttachment?.(attachment)\n  }\n\n  attachmentEditorDidRequestDeselectingAttachment(attachment) {\n    return this.delegate?.compositionControllerDidRequestDeselectingAttachment?.(attachment)\n  }\n\n  // Private\n\n  canSyncDocumentView() {\n    return !this.isEditingAttachment()\n  }\n\n  findAttachmentForElement(element) {\n    return this.composition.document.getAttachmentById(parseInt(element.dataset.trixId, 10))\n  }\n}\n","import BasicObject from \"trix/core/basic_object\"\n\nimport { findClosestElementFromNode, handleEvent, triggerEvent } from \"trix/core/helpers\"\n\nconst attributeButtonSelector = \"[data-trix-attribute]\"\nconst actionButtonSelector = \"[data-trix-action]\"\nconst toolbarButtonSelector = `${attributeButtonSelector}, ${actionButtonSelector}`\nconst dialogSelector = \"[data-trix-dialog]\"\nconst activeDialogSelector = `${dialogSelector}[data-trix-active]`\nconst dialogButtonSelector = `${dialogSelector} [data-trix-method]`\nconst dialogInputSelector = `${dialogSelector} [data-trix-input]`\nconst getInputForDialog = (element, attributeName) => {\n  if (!attributeName) { attributeName = getAttributeName(element) }\n  return element.querySelector(`[data-trix-input][name='${attributeName}']`)\n}\nconst getActionName = (element) => element.getAttribute(\"data-trix-action\")\nconst getAttributeName = (element) => {\n  return element.getAttribute(\"data-trix-attribute\") || element.getAttribute(\"data-trix-dialog-attribute\")\n}\nconst getDialogName = (element) => element.getAttribute(\"data-trix-dialog\")\n\nexport default class ToolbarController extends BasicObject {\n  constructor(element) {\n    super(element)\n    this.didClickActionButton = this.didClickActionButton.bind(this)\n    this.didClickAttributeButton = this.didClickAttributeButton.bind(this)\n    this.didClickDialogButton = this.didClickDialogButton.bind(this)\n    this.didKeyDownDialogInput = this.didKeyDownDialogInput.bind(this)\n    this.element = element\n    this.attributes = {}\n    this.actions = {}\n    this.resetDialogInputs()\n\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: actionButtonSelector,\n      withCallback: this.didClickActionButton,\n    })\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attributeButtonSelector,\n      withCallback: this.didClickAttributeButton,\n    })\n    handleEvent(\"click\", { onElement: this.element, matchingSelector: toolbarButtonSelector, preventDefault: true })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: dialogButtonSelector,\n      withCallback: this.didClickDialogButton,\n    })\n    handleEvent(\"keydown\", {\n      onElement: this.element,\n      matchingSelector: dialogInputSelector,\n      withCallback: this.didKeyDownDialogInput,\n    })\n  }\n\n  // Event handlers\n\n  didClickActionButton(event, element) {\n    this.delegate?.toolbarDidClickButton()\n    event.preventDefault()\n    const actionName = getActionName(element)\n\n    if (this.getDialog(actionName)) {\n      return this.toggleDialog(actionName)\n    } else {\n      return this.delegate?.toolbarDidInvokeAction(actionName)\n    }\n  }\n\n  didClickAttributeButton(event, element) {\n    this.delegate?.toolbarDidClickButton()\n    event.preventDefault()\n    const attributeName = getAttributeName(element)\n\n    if (this.getDialog(attributeName)) {\n      this.toggleDialog(attributeName)\n    } else {\n      this.delegate?.toolbarDidToggleAttribute(attributeName)\n    }\n\n    return this.refreshAttributeButtons()\n  }\n\n  didClickDialogButton(event, element) {\n    const dialogElement = findClosestElementFromNode(element, { matchingSelector: dialogSelector })\n    const method = element.getAttribute(\"data-trix-method\")\n    return this[method].call(this, dialogElement)\n  }\n\n  didKeyDownDialogInput(event, element) {\n    if (event.keyCode === 13) {\n      // Enter key\n      event.preventDefault()\n      const attribute = element.getAttribute(\"name\")\n      const dialog = this.getDialog(attribute)\n      this.setAttribute(dialog)\n    }\n    if (event.keyCode === 27) {\n      // Escape key\n      event.preventDefault()\n      return this.hideDialog()\n    }\n  }\n\n  // Action buttons\n\n  updateActions(actions) {\n    this.actions = actions\n    return this.refreshActionButtons()\n  }\n\n  refreshActionButtons() {\n    return this.eachActionButton((element, actionName) => {\n      element.disabled = this.actions[actionName] === false\n    })\n  }\n\n  eachActionButton(callback) {\n    return Array.from(this.element.querySelectorAll(actionButtonSelector)).map((element) =>\n      callback(element, getActionName(element))\n    )\n  }\n\n  // Attribute buttons\n\n  updateAttributes(attributes) {\n    this.attributes = attributes\n    return this.refreshAttributeButtons()\n  }\n\n  refreshAttributeButtons() {\n    return this.eachAttributeButton((element, attributeName) => {\n      element.disabled = this.attributes[attributeName] === false\n      if (this.attributes[attributeName] || this.dialogIsVisible(attributeName)) {\n        element.setAttribute(\"data-trix-active\", \"\")\n        return element.classList.add(\"trix-active\")\n      } else {\n        element.removeAttribute(\"data-trix-active\")\n        return element.classList.remove(\"trix-active\")\n      }\n    })\n  }\n\n  eachAttributeButton(callback) {\n    return Array.from(this.element.querySelectorAll(attributeButtonSelector)).map((element) =>\n      callback(element, getAttributeName(element))\n    )\n  }\n\n  applyKeyboardCommand(keys) {\n    const keyString = JSON.stringify(keys.sort())\n    for (const button of Array.from(this.element.querySelectorAll(\"[data-trix-key]\"))) {\n      const buttonKeys = button.getAttribute(\"data-trix-key\").split(\"+\")\n      const buttonKeyString = JSON.stringify(buttonKeys.sort())\n      if (buttonKeyString === keyString) {\n        triggerEvent(\"mousedown\", { onElement: button })\n        return true\n      }\n    }\n    return false\n  }\n\n  // Dialogs\n\n  dialogIsVisible(dialogName) {\n    const element = this.getDialog(dialogName)\n    if (element) {\n      return element.hasAttribute(\"data-trix-active\")\n    }\n  }\n\n  toggleDialog(dialogName) {\n    if (this.dialogIsVisible(dialogName)) {\n      return this.hideDialog()\n    } else {\n      return this.showDialog(dialogName)\n    }\n  }\n\n  showDialog(dialogName) {\n    this.hideDialog()\n    this.delegate?.toolbarWillShowDialog()\n\n    const element = this.getDialog(dialogName)\n    element.setAttribute(\"data-trix-active\", \"\")\n    element.classList.add(\"trix-active\")\n\n    Array.from(element.querySelectorAll(\"input[disabled]\")).forEach((disabledInput) => {\n      disabledInput.removeAttribute(\"disabled\")\n    })\n\n    const attributeName = getAttributeName(element)\n    if (attributeName) {\n      const input = getInputForDialog(element, dialogName)\n      if (input) {\n        input.value = this.attributes[attributeName] || \"\"\n        input.select()\n      }\n    }\n\n    return this.delegate?.toolbarDidShowDialog(dialogName)\n  }\n\n  setAttribute(dialogElement) {\n    const attributeName = getAttributeName(dialogElement)\n    const input = getInputForDialog(dialogElement, attributeName)\n    if (input.willValidate && !input.checkValidity()) {\n      input.setAttribute(\"data-trix-validate\", \"\")\n      input.classList.add(\"trix-validate\")\n      return input.focus()\n    } else {\n      this.delegate?.toolbarDidUpdateAttribute(attributeName, input.value)\n      return this.hideDialog()\n    }\n  }\n\n  removeAttribute(dialogElement) {\n    const attributeName = getAttributeName(dialogElement)\n    this.delegate?.toolbarDidRemoveAttribute(attributeName)\n    return this.hideDialog()\n  }\n\n  hideDialog() {\n    const element = this.element.querySelector(activeDialogSelector)\n    if (element) {\n      element.removeAttribute(\"data-trix-active\")\n      element.classList.remove(\"trix-active\")\n      this.resetDialogInputs()\n      return this.delegate?.toolbarDidHideDialog(getDialogName(element))\n    }\n  }\n\n  resetDialogInputs() {\n    Array.from(this.element.querySelectorAll(dialogInputSelector)).forEach((input) => {\n      input.setAttribute(\"disabled\", \"disabled\")\n      input.removeAttribute(\"data-trix-validate\")\n      input.classList.remove(\"trix-validate\")\n    })\n  }\n\n  getDialog(dialogName) {\n    return this.element.querySelector(`[data-trix-dialog=${dialogName}]`)\n  }\n}\n","/* eslint-disable\n    id-length,\n*/\nimport config from \"trix/config\"\n\nimport { serializeToContentType } from \"trix/core/serialization\"\n\nimport Controller from \"trix/controllers/controller\"\nimport Level0InputController from \"trix/controllers/level_0_input_controller\"\nimport Level2InputController from \"trix/controllers/level_2_input_controller\"\nimport CompositionController from \"trix/controllers/composition_controller\"\nimport ToolbarController from \"trix/controllers/toolbar_controller\"\nimport Composition from \"trix/models/composition\"\nimport Editor from \"trix/models/editor\"\nimport AttachmentManager from \"trix/models/attachment_manager\"\nimport SelectionManager from \"trix/models/selection_manager\"\n\nimport { getBlockConfig, objectsAreEqual, rangeIsCollapsed, rangesAreEqual } from \"trix/core/helpers\"\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nconst snapshotsAreEqual = (a, b) => rangesAreEqual(a.selectedRange, b.selectedRange) && a.document.isEqualTo(b.document)\n\nexport default class EditorController extends Controller {\n  static actions = {\n    undo: {\n      test() {\n        return this.editor.canUndo()\n      },\n      perform() {\n        return this.editor.undo()\n      },\n    },\n    redo: {\n      test() {\n        return this.editor.canRedo()\n      },\n      perform() {\n        return this.editor.redo()\n      },\n    },\n    link: {\n      test() {\n        return this.editor.canActivateAttribute(\"href\")\n      },\n    },\n    increaseNestingLevel: {\n      test() {\n        return this.editor.canIncreaseNestingLevel()\n      },\n      perform() {\n        return this.editor.increaseNestingLevel() && this.render()\n      },\n    },\n    decreaseNestingLevel: {\n      test() {\n        return this.editor.canDecreaseNestingLevel()\n      },\n      perform() {\n        return this.editor.decreaseNestingLevel() && this.render()\n      },\n    },\n    attachFiles: {\n      test() {\n        return true\n      },\n      perform() {\n        return config.input.pickFiles(this.editor.insertFiles)\n      },\n    },\n  }\n\n  constructor({ editorElement, document, html }) {\n    super(...arguments)\n    this.editorElement = editorElement\n    this.selectionManager = new SelectionManager(this.editorElement)\n    this.selectionManager.delegate = this\n\n    this.composition = new Composition()\n    this.composition.delegate = this\n\n    this.attachmentManager = new AttachmentManager(this.composition.getAttachments())\n    this.attachmentManager.delegate = this\n\n    this.inputController =\n      config.input.getLevel() === 2\n        ? new Level2InputController(this.editorElement)\n        : new Level0InputController(this.editorElement)\n\n    this.inputController.delegate = this\n    this.inputController.responder = this.composition\n\n    this.compositionController = new CompositionController(this.editorElement, this.composition)\n    this.compositionController.delegate = this\n\n    this.toolbarController = new ToolbarController(this.editorElement.toolbarElement)\n    this.toolbarController.delegate = this\n\n    this.editor = new Editor(this.composition, this.selectionManager, this.editorElement)\n    if (document) {\n      this.editor.loadDocument(document)\n    } else {\n      this.editor.loadHTML(html)\n    }\n  }\n\n  registerSelectionManager() {\n    return selectionChangeObserver.registerSelectionManager(this.selectionManager)\n  }\n\n  unregisterSelectionManager() {\n    return selectionChangeObserver.unregisterSelectionManager(this.selectionManager)\n  }\n\n  render() {\n    return this.compositionController.render()\n  }\n\n  reparse() {\n    return this.composition.replaceHTML(this.editorElement.innerHTML)\n  }\n\n  // Composition delegate\n\n  compositionDidChangeDocument(document) {\n    this.notifyEditorElement(\"document-change\")\n    if (!this.handlingInput) {\n      return this.render()\n    }\n  }\n\n  compositionDidChangeCurrentAttributes(currentAttributes) {\n    this.currentAttributes = currentAttributes\n    this.toolbarController.updateAttributes(this.currentAttributes)\n    this.updateCurrentActions()\n    return this.notifyEditorElement(\"attributes-change\", { attributes: this.currentAttributes })\n  }\n\n  compositionDidPerformInsertionAtRange(range) {\n    if (this.pasting) {\n      this.pastedRange = range\n    }\n  }\n\n  compositionShouldAcceptFile(file) {\n    return this.notifyEditorElement(\"file-accept\", { file })\n  }\n\n  compositionDidAddAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment)\n    return this.notifyEditorElement(\"attachment-add\", { attachment: managedAttachment })\n  }\n\n  compositionDidEditAttachment(attachment) {\n    this.compositionController.rerenderViewForObject(attachment)\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment)\n    this.notifyEditorElement(\"attachment-edit\", { attachment: managedAttachment })\n    return this.notifyEditorElement(\"change\")\n  }\n\n  compositionDidChangeAttachmentPreviewURL(attachment) {\n    this.compositionController.invalidateViewForObject(attachment)\n    return this.notifyEditorElement(\"change\")\n  }\n\n  compositionDidRemoveAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.unmanageAttachment(attachment)\n    return this.notifyEditorElement(\"attachment-remove\", { attachment: managedAttachment })\n  }\n\n  compositionDidStartEditingAttachment(attachment, options) {\n    this.attachmentLocationRange = this.composition.document.getLocationRangeOfAttachment(attachment)\n    this.compositionController.installAttachmentEditorForAttachment(attachment, options)\n    return this.selectionManager.setLocationRange(this.attachmentLocationRange)\n  }\n\n  compositionDidStopEditingAttachment(attachment) {\n    this.compositionController.uninstallAttachmentEditor()\n    this.attachmentLocationRange = null\n  }\n\n  compositionDidRequestChangingSelectionToLocationRange(locationRange) {\n    if (this.loadingSnapshot && !this.isFocused()) return\n    this.requestedLocationRange = locationRange\n    this.compositionRevisionWhenLocationRangeRequested = this.composition.revision\n    if (!this.handlingInput) {\n      return this.render()\n    }\n  }\n\n  compositionWillLoadSnapshot() {\n    this.loadingSnapshot = true\n  }\n\n  compositionDidLoadSnapshot() {\n    this.compositionController.refreshViewCache()\n    this.render()\n    this.loadingSnapshot = false\n  }\n\n  getSelectionManager() {\n    return this.selectionManager\n  }\n\n  // Attachment manager delegate\n\n  attachmentManagerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment)\n  }\n\n  // Document controller delegate\n\n  compositionControllerWillSyncDocumentView() {\n    this.inputController.editorWillSyncDocumentView()\n    this.selectionManager.lock()\n    return this.selectionManager.clearSelection()\n  }\n\n  compositionControllerDidSyncDocumentView() {\n    this.inputController.editorDidSyncDocumentView()\n    this.selectionManager.unlock()\n    this.updateCurrentActions()\n    return this.notifyEditorElement(\"sync\")\n  }\n\n  compositionControllerDidRender() {\n    if (this.requestedLocationRange) {\n      if (this.compositionRevisionWhenLocationRangeRequested === this.composition.revision) {\n        this.selectionManager.setLocationRange(this.requestedLocationRange)\n      }\n      this.requestedLocationRange = null\n      this.compositionRevisionWhenLocationRangeRequested = null\n    }\n\n    if (this.renderedCompositionRevision !== this.composition.revision) {\n      this.runEditorFilters()\n      this.composition.updateCurrentAttributes()\n      this.notifyEditorElement(\"render\")\n    }\n\n    this.renderedCompositionRevision = this.composition.revision\n  }\n\n  compositionControllerDidFocus() {\n    if (this.isFocusedInvisibly()) {\n      this.setLocationRange({ index: 0, offset: 0 })\n    }\n    this.toolbarController.hideDialog()\n    return this.notifyEditorElement(\"focus\")\n  }\n\n  compositionControllerDidBlur() {\n    return this.notifyEditorElement(\"blur\")\n  }\n\n  compositionControllerDidSelectAttachment(attachment, options) {\n    this.toolbarController.hideDialog()\n    return this.composition.editAttachment(attachment, options)\n  }\n\n  compositionControllerDidRequestDeselectingAttachment(attachment) {\n    const locationRange = this.attachmentLocationRange || this.composition.document.getLocationRangeOfAttachment(attachment)\n    return this.selectionManager.setLocationRange(locationRange[1])\n  }\n\n  compositionControllerWillUpdateAttachment(attachment) {\n    return this.editor.recordUndoEntry(\"Edit Attachment\", { context: attachment.id, consolidatable: true })\n  }\n\n  compositionControllerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment)\n  }\n\n  // Input controller delegate\n\n  inputControllerWillHandleInput() {\n    this.handlingInput = true\n    this.requestedRender = false\n  }\n\n  inputControllerDidRequestRender() {\n    this.requestedRender = true\n  }\n\n  inputControllerDidHandleInput() {\n    this.handlingInput = false\n    if (this.requestedRender) {\n      this.requestedRender = false\n      return this.render()\n    }\n  }\n\n  inputControllerDidAllowUnhandledInput() {\n    return this.notifyEditorElement(\"change\")\n  }\n\n  inputControllerDidRequestReparse() {\n    return this.reparse()\n  }\n\n  inputControllerWillPerformTyping() {\n    return this.recordTypingUndoEntry()\n  }\n\n  inputControllerWillPerformFormatting(attributeName) {\n    return this.recordFormattingUndoEntry(attributeName)\n  }\n\n  inputControllerWillCutText() {\n    return this.editor.recordUndoEntry(\"Cut\")\n  }\n\n  inputControllerWillPaste(paste) {\n    this.editor.recordUndoEntry(\"Paste\")\n    this.pasting = true\n    return this.notifyEditorElement(\"before-paste\", { paste })\n  }\n\n  inputControllerDidPaste(paste) {\n    paste.range = this.pastedRange\n    this.pastedRange = null\n    this.pasting = null\n    return this.notifyEditorElement(\"paste\", { paste })\n  }\n\n  inputControllerWillMoveText() {\n    return this.editor.recordUndoEntry(\"Move\")\n  }\n\n  inputControllerWillAttachFiles() {\n    return this.editor.recordUndoEntry(\"Drop Files\")\n  }\n\n  inputControllerWillPerformUndo() {\n    return this.editor.undo()\n  }\n\n  inputControllerWillPerformRedo() {\n    return this.editor.redo()\n  }\n\n  inputControllerDidReceiveKeyboardCommand(keys) {\n    return this.toolbarController.applyKeyboardCommand(keys)\n  }\n\n  inputControllerDidStartDrag() {\n    this.locationRangeBeforeDrag = this.selectionManager.getLocationRange()\n  }\n\n  inputControllerDidReceiveDragOverPoint(point) {\n    return this.selectionManager.setLocationRangeFromPointRange(point)\n  }\n\n  inputControllerDidCancelDrag() {\n    this.selectionManager.setLocationRange(this.locationRangeBeforeDrag)\n    this.locationRangeBeforeDrag = null\n  }\n\n  // Selection manager delegate\n\n  locationRangeDidChange(locationRange) {\n    this.composition.updateCurrentAttributes()\n    this.updateCurrentActions()\n    if (this.attachmentLocationRange && !rangesAreEqual(this.attachmentLocationRange, locationRange)) {\n      this.composition.stopEditingAttachment()\n    }\n    return this.notifyEditorElement(\"selection-change\")\n  }\n\n  // Toolbar controller delegate\n\n  toolbarDidClickButton() {\n    if (!this.getLocationRange()) {\n      return this.setLocationRange({ index: 0, offset: 0 })\n    }\n  }\n\n  toolbarDidInvokeAction(actionName) {\n    return this.invokeAction(actionName)\n  }\n\n  toolbarDidToggleAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName)\n    this.composition.toggleCurrentAttribute(attributeName)\n    this.render()\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus()\n    }\n  }\n\n  toolbarDidUpdateAttribute(attributeName, value) {\n    this.recordFormattingUndoEntry(attributeName)\n    this.composition.setCurrentAttribute(attributeName, value)\n    this.render()\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus()\n    }\n  }\n\n  toolbarDidRemoveAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName)\n    this.composition.removeCurrentAttribute(attributeName)\n    this.render()\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus()\n    }\n  }\n\n  toolbarWillShowDialog(dialogElement) {\n    this.composition.expandSelectionForEditing()\n    return this.freezeSelection()\n  }\n\n  toolbarDidShowDialog(dialogName) {\n    return this.notifyEditorElement(\"toolbar-dialog-show\", { dialogName })\n  }\n\n  toolbarDidHideDialog(dialogName) {\n    this.thawSelection()\n    this.editorElement.focus()\n    return this.notifyEditorElement(\"toolbar-dialog-hide\", { dialogName })\n  }\n\n  // Selection\n\n  freezeSelection() {\n    if (!this.selectionFrozen) {\n      this.selectionManager.lock()\n      this.composition.freezeSelection()\n      this.selectionFrozen = true\n      return this.render()\n    }\n  }\n\n  thawSelection() {\n    if (this.selectionFrozen) {\n      this.composition.thawSelection()\n      this.selectionManager.unlock()\n      this.selectionFrozen = false\n      return this.render()\n    }\n  }\n\n  canInvokeAction(actionName) {\n    if (this.actionIsExternal(actionName)) {\n      return true\n    } else {\n      return !!this.actions[actionName]?.test?.call(this)\n    }\n  }\n\n  invokeAction(actionName) {\n    if (this.actionIsExternal(actionName)) {\n      return this.notifyEditorElement(\"action-invoke\", { actionName })\n    } else {\n      return this.actions[actionName]?.perform?.call(this)\n    }\n  }\n\n  actionIsExternal(actionName) {\n    return /^x-./.test(actionName)\n  }\n\n  getCurrentActions() {\n    const result = {}\n    for (const actionName in this.actions) {\n      result[actionName] = this.canInvokeAction(actionName)\n    }\n    return result\n  }\n\n  updateCurrentActions() {\n    const currentActions = this.getCurrentActions()\n    if (!objectsAreEqual(currentActions, this.currentActions)) {\n      this.currentActions = currentActions\n      this.toolbarController.updateActions(this.currentActions)\n      return this.notifyEditorElement(\"actions-change\", { actions: this.currentActions })\n    }\n  }\n\n  // Editor filters\n\n  runEditorFilters() {\n    let snapshot = this.composition.getSnapshot()\n\n    Array.from(this.editor.filters).forEach((filter) => {\n      const { document, selectedRange } = snapshot\n      snapshot = filter.call(this.editor, snapshot) || {}\n      if (!snapshot.document) {\n        snapshot.document = document\n      }\n      if (!snapshot.selectedRange) {\n        snapshot.selectedRange = selectedRange\n      }\n    })\n\n    if (!snapshotsAreEqual(snapshot, this.composition.getSnapshot())) {\n      return this.composition.loadSnapshot(snapshot)\n    }\n  }\n\n  // Private\n\n  updateInputElement() {\n    const element = this.compositionController.getSerializableElement()\n    const value = serializeToContentType(element, \"text/html\")\n    return this.editorElement.setInputElementValue(value)\n  }\n\n  notifyEditorElement(message, data) {\n    switch (message) {\n      case \"document-change\":\n        this.documentChangedSinceLastRender = true\n        break\n      case \"render\":\n        if (this.documentChangedSinceLastRender) {\n          this.documentChangedSinceLastRender = false\n          this.notifyEditorElement(\"change\")\n        }\n        break\n      case \"change\":\n      case \"attachment-add\":\n      case \"attachment-edit\":\n      case \"attachment-remove\":\n        this.updateInputElement()\n        break\n    }\n\n    return this.editorElement.notify(message, data)\n  }\n\n  removeAttachment(attachment) {\n    this.editor.recordUndoEntry(\"Delete Attachment\")\n    this.composition.removeAttachment(attachment)\n    return this.render()\n  }\n\n  recordFormattingUndoEntry(attributeName) {\n    const blockConfig = getBlockConfig(attributeName)\n    const locationRange = this.selectionManager.getLocationRange()\n    if (blockConfig || !rangeIsCollapsed(locationRange)) {\n      return this.editor.recordUndoEntry(\"Formatting\", { context: this.getUndoContext(), consolidatable: true })\n    }\n  }\n\n  recordTypingUndoEntry() {\n    return this.editor.recordUndoEntry(\"Typing\", {\n      context: this.getUndoContext(this.currentAttributes),\n      consolidatable: true,\n    })\n  }\n\n  getUndoContext(...context) {\n    return [ this.getLocationContext(), this.getTimeContext(), ...Array.from(context) ]\n  }\n\n  getLocationContext() {\n    const locationRange = this.selectionManager.getLocationRange()\n    if (rangeIsCollapsed(locationRange)) {\n      return locationRange[0].index\n    } else {\n      return locationRange\n    }\n  }\n\n  getTimeContext() {\n    if (config.undoInterval > 0) {\n      return Math.floor(new Date().getTime() / config.undoInterval)\n    } else {\n      return 0\n    }\n  }\n\n  isFocused() {\n    return this.editorElement === this.editorElement.ownerDocument?.activeElement\n  }\n\n  // Detect \"Cursor disappears sporadically\" Firefox bug.\n  // - https://bugzilla.mozilla.org/show_bug.cgi?id=226301\n  isFocusedInvisibly() {\n    return this.isFocused() && !this.getLocationRange()\n  }\n\n  get actions() {\n    return this.constructor.actions\n  }\n}\n\nEditorController.proxyMethod(\"getSelectionManager().setLocationRange\")\nEditorController.proxyMethod(\"getSelectionManager().getLocationRange\")\n","import config from \"trix/config\"\n\nimport { installDefaultCSSForTagName } from \"trix/core/helpers\"\n\ninstallDefaultCSSForTagName(\"trix-toolbar\", `\\\n%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}`)\n\nexport default class TrixToolbarElement extends HTMLElement {\n\n  // Element lifecycle\n\n  connectedCallback() {\n    if (this.innerHTML === \"\") {\n      this.innerHTML = config.toolbar.getDefaultHTML()\n    }\n  }\n}\n\nwindow.customElements.define(\"trix-toolbar\", TrixToolbarElement)\n","import config from \"trix/config\"\n\nimport {\n  findClosestElementFromNode,\n  handleEvent,\n  handleEventOnce,\n  installDefaultCSSForTagName,\n  makeElement,\n  triggerEvent,\n} from \"trix/core/helpers\"\n\nimport { attachmentSelector } from \"trix/config/attachments\"\nimport EditorController from \"trix/controllers/editor_controller\"\nimport \"trix/elements/trix_toolbar_element\"\n\nlet id = 0\n\n// Contenteditable support helpers\n\nconst autofocus = function(element) {\n  if (!document.querySelector(\":focus\")) {\n    if (element.hasAttribute(\"autofocus\") && document.querySelector(\"[autofocus]\") === element) {\n      return element.focus()\n    }\n  }\n}\n\nconst makeEditable = function(element) {\n  if (element.hasAttribute(\"contenteditable\")) {\n    return\n  }\n  element.setAttribute(\"contenteditable\", \"\")\n  return handleEventOnce(\"focus\", {\n    onElement: element,\n    withCallback() {\n      return configureContentEditable(element)\n    },\n  })\n}\n\nconst configureContentEditable = function(element) {\n  disableObjectResizing(element)\n  return setDefaultParagraphSeparator(element)\n}\n\nconst disableObjectResizing = function(element) {\n  if (document.queryCommandSupported?.(\"enableObjectResizing\")) {\n    document.execCommand(\"enableObjectResizing\", false, false)\n    return handleEvent(\"mscontrolselect\", { onElement: element, preventDefault: true })\n  }\n}\n\nconst setDefaultParagraphSeparator = function(element) {\n  if (document.queryCommandSupported?.(\"DefaultParagraphSeparator\")) {\n    const { tagName } = config.blockAttributes.default\n    if ([ \"div\", \"p\" ].includes(tagName)) {\n      return document.execCommand(\"DefaultParagraphSeparator\", false, tagName)\n    }\n  }\n}\n\n// Accessibility helpers\n\nconst addAccessibilityRole = function(element) {\n  if (element.hasAttribute(\"role\")) {\n    return\n  }\n  return element.setAttribute(\"role\", \"textbox\")\n}\n\nconst ensureAriaLabel = function(element) {\n  if (element.hasAttribute(\"aria-label\") || element.hasAttribute(\"aria-labelledby\")) {\n    return\n  }\n\n  const update = function() {\n    const texts = Array.from(element.labels).map((label) => {\n      if (!label.contains(element)) return label.textContent\n    }).filter(text => text)\n\n    const text = texts.join(\" \")\n    if (text) {\n      return element.setAttribute(\"aria-label\", text)\n    } else {\n      return element.removeAttribute(\"aria-label\")\n    }\n  }\n  update()\n  return handleEvent(\"focus\", { onElement: element, withCallback: update })\n}\n\n// Style\n\nconst cursorTargetStyles = (function() {\n  if (config.browser.forcesObjectResizing) {\n    return {\n      display: \"inline\",\n      width: \"auto\",\n    }\n  } else {\n    return {\n      display: \"inline-block\",\n      width: \"1px\",\n    }\n  }\n})()\n\ninstallDefaultCSSForTagName(\"trix-editor\", `\\\n%t {\n    display: block;\n}\n\n%t:empty:not(:focus)::before {\n    content: attr(placeholder);\n    color: graytext;\n    cursor: text;\n    pointer-events: none;\n    white-space: pre-line;\n}\n\n%t a[contenteditable=false] {\n    cursor: text;\n}\n\n%t img {\n    max-width: 100%;\n    height: auto;\n}\n\n%t ${attachmentSelector} figcaption textarea {\n    resize: none;\n}\n\n%t ${attachmentSelector} figcaption textarea.trix-autoresize-clone {\n    position: absolute;\n    left: -9999px;\n    max-height: 0px;\n}\n\n%t ${attachmentSelector} figcaption[data-trix-placeholder]:empty::before {\n    content: attr(data-trix-placeholder);\n    color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n    display: ${cursorTargetStyles.display} !important;\n    width: ${cursorTargetStyles.width} !important;\n    padding: 0 !important;\n    margin: 0 !important;\n    border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n    vertical-align: top !important;\n    margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n    vertical-align: bottom !important;\n    margin-right: -1px !important;\n}`)\n\nexport default class TrixEditorElement extends HTMLElement {\n\n  // Properties\n\n  get trixId() {\n    if (this.hasAttribute(\"trix-id\")) {\n      return this.getAttribute(\"trix-id\")\n    } else {\n      this.setAttribute(\"trix-id\", ++id)\n      return this.trixId\n    }\n  }\n\n  get labels() {\n    const labels = []\n    if (this.id && this.ownerDocument) {\n      labels.push(...Array.from(this.ownerDocument.querySelectorAll(`label[for='${this.id}']`) || []))\n    }\n\n    const label = findClosestElementFromNode(this, { matchingSelector: \"label\" })\n    if (label) {\n      if ([ this, null ].includes(label.control)) {\n        labels.push(label)\n      }\n    }\n\n    return labels\n  }\n\n  get toolbarElement() {\n    if (this.hasAttribute(\"toolbar\")) {\n      return this.ownerDocument?.getElementById(this.getAttribute(\"toolbar\"))\n    } else if (this.parentNode) {\n      const toolbarId = `trix-toolbar-${this.trixId}`\n      this.setAttribute(\"toolbar\", toolbarId)\n      const element = makeElement(\"trix-toolbar\", { id: toolbarId })\n      this.parentNode.insertBefore(element, this)\n      return element\n    } else {\n      return undefined\n    }\n  }\n\n  get form() {\n    return this.inputElement?.form\n  }\n\n  get inputElement() {\n    if (this.hasAttribute(\"input\")) {\n      return this.ownerDocument?.getElementById(this.getAttribute(\"input\"))\n    } else if (this.parentNode) {\n      const inputId = `trix-input-${this.trixId}`\n      this.setAttribute(\"input\", inputId)\n      const element = makeElement(\"input\", { type: \"hidden\", id: inputId })\n      this.parentNode.insertBefore(element, this.nextElementSibling)\n      return element\n    } else {\n      return undefined\n    }\n  }\n\n  get editor() {\n    return this.editorController?.editor\n  }\n\n  get name() {\n    return this.inputElement?.name\n  }\n\n  get value() {\n    return this.inputElement?.value\n  }\n\n  set value(defaultValue) {\n    this.defaultValue = defaultValue\n    this.editor?.loadHTML(this.defaultValue)\n  }\n\n  // Controller delegate methods\n\n  notify(message, data) {\n    if (this.editorController) {\n      return triggerEvent(`trix-${message}`, { onElement: this, attributes: data })\n    }\n  }\n\n  setInputElementValue(value) {\n    if (this.inputElement) {\n      this.inputElement.value = value\n    }\n  }\n\n  // Element lifecycle\n\n  connectedCallback() {\n    if (!this.hasAttribute(\"data-trix-internal\")) {\n      makeEditable(this)\n      addAccessibilityRole(this)\n      ensureAriaLabel(this)\n\n      if (!this.editorController) {\n        triggerEvent(\"trix-before-initialize\", { onElement: this })\n        this.editorController = new EditorController({\n          editorElement: this,\n          html: this.defaultValue = this.value,\n        })\n        requestAnimationFrame(() => triggerEvent(\"trix-initialize\", { onElement: this }))\n      }\n      this.editorController.registerSelectionManager()\n      this.registerResetListener()\n      this.registerClickListener()\n      autofocus(this)\n    }\n  }\n\n  disconnectedCallback() {\n    this.editorController?.unregisterSelectionManager()\n    this.unregisterResetListener()\n    return this.unregisterClickListener()\n  }\n\n  // Form support\n\n  registerResetListener() {\n    this.resetListener = this.resetBubbled.bind(this)\n    return window.addEventListener(\"reset\", this.resetListener, false)\n  }\n\n  unregisterResetListener() {\n    return window.removeEventListener(\"reset\", this.resetListener, false)\n  }\n\n  registerClickListener() {\n    this.clickListener = this.clickBubbled.bind(this)\n    return window.addEventListener(\"click\", this.clickListener, false)\n  }\n\n  unregisterClickListener() {\n    return window.removeEventListener(\"click\", this.clickListener, false)\n  }\n\n  resetBubbled(event) {\n    if (event.defaultPrevented) return\n    if (event.target !== this.form) return\n    return this.reset()\n  }\n\n  clickBubbled(event) {\n    if (event.defaultPrevented) return\n    if (this.contains(event.target)) return\n\n    const label = findClosestElementFromNode(event.target, { matchingSelector: \"label\" })\n    if (!label) return\n\n    if (!Array.from(this.labels).includes(label)) return\n\n    return this.focus()\n  }\n\n  reset() {\n    this.value = this.defaultValue\n  }\n}\n\nwindow.customElements.define(\"trix-editor\", TrixEditorElement)\n","// Explicitly require this file (not included in the main\n// Trix bundle) to install the following global helpers.\n\nthis.getEditorElement = () => document.querySelector(\"trix-editor\")\n\nthis.getToolbarElement = () => getEditorElement().toolbarElement\n\nthis.getEditorController = () => getEditorElement().editorController\n\nthis.getEditor = () => getEditorController().editor\n\nthis.getComposition = () => getEditorController().composition\n\nthis.getDocument = () => getComposition().document\n\nthis.getSelectionManager = () => getEditorController().selectionManager\n","export const createEvent = function (type, properties = {}) {\n  const event = document.createEvent(\"Events\")\n  event.initEvent(type, true, true)\n  for (const key in properties) {\n    const value = properties[key]\n    event[key] = value\n  }\n  return event\n}\n\nexport const triggerEvent = (element, type, properties) => element.dispatchEvent(createEvent(type, properties))\n","import DocumentView from \"trix/views/document_view\"\nimport { normalizeRange } from \"trix/core/helpers\"\n\nconst { assert } = QUnit\n\nassert.locationRange = function (start, end) {\n  const expectedLocationRange = normalizeRange([ start, end ])\n  const actualLocationRange = getEditorController().getLocationRange()\n  this.deepEqual(actualLocationRange, expectedLocationRange)\n}\n\nassert.selectedRange = function (range) {\n  const expectedRange = normalizeRange(range)\n  const actualRange = getEditor().getSelectedRange()\n  this.deepEqual(actualRange, expectedRange)\n}\n\nassert.textAttributes = function (range, attributes) {\n  const document = window.getDocument().getDocumentAtRange(range)\n  const blocks = document.getBlocks()\n  if (blocks.length !== 1) {\n    throw `range ${JSON.stringify(range)} spans more than one block`\n  }\n\n  const locationRange = window.getDocument().locationRangeFromRange(range)\n  const textIndex = locationRange[0].index\n  const textRange = [ locationRange[0].offset, locationRange[1].offset ]\n  const text = window.getDocument().getTextAtIndex(textIndex).getTextAtRange(textRange)\n  const pieces = text.getPieces()\n  if (pieces.length !== 1) {\n    throw `range ${JSON.stringify(range)} must only span one piece`\n  }\n\n  const piece = pieces[0]\n  this.deepEqual(piece.getAttributes(), attributes)\n}\n\nassert.blockAttributes = function (range, attributes) {\n  const document = window.getDocument().getDocumentAtRange(range)\n  const blocks = document.getBlocks()\n  if (blocks.length !== 1) {\n    throw `range ${JSON.stringify(range)} spans more than one block`\n  }\n\n  const block = blocks[0]\n  this.deepEqual(block.getAttributes(), attributes)\n}\n\nassert.documentHTMLEqual = function (trixDocument, html) {\n  this.equal(getHTML(trixDocument), html)\n}\n\nconst getHTML = (trixDocument) => DocumentView.render(trixDocument).innerHTML\n\nexport { assert, getHTML }\n","export default () =>\n  `<trix-editor id=\"editor-without-labels\"></trix-editor>\n\n  <label for=\"editor-with-aria-label\"><span>Label text</span></label>\n  <trix-editor id=\"editor-with-aria-label\" aria-label=\"ARIA Label text\"></trix-editor>\n\n  <span id=\"aria-labelledby-id\">ARIA Labelledby</span>\n  <label for=\"editor-with-aria-labelledby\"><span>Label text</span></label>\n  <trix-editor id=\"editor-with-aria-labelledby\" aria-labelledby=\"aria-labelledby-id\"></trix-editor>\n\n  <label for=\"editor-with-labels\"><span>Label 1</span></label>\n  <label for=\"editor-with-labels\"><span>Label 2</span></label>\n  <label for=\"editor-with-labels\"><span>Label 3</span></label>\n  <label>\n    <span>Label 4</span>\n    <trix-editor id=\"editor-with-labels\"></trix-editor>\n  </label>\n\n  <label id=\"modified-label\" for=\"editor-with-modified-label\">Original Value</label>\n  <trix-editor id=\"editor-with-modified-label\"></trix-editor>`\n","export default () => \"<trix-editor autofocus placeholder=\\\"Say hello...\\\"></trix-editor>\"\n","export default () =>\n  `<input id=\"my_input\" type=\"hidden\" value=\"&lt;div&gt;Hello world&lt;/div&gt;\">\n  <trix-editor input=\"my_input\" autofocus placeholder=\"Say hello...\"></trix-editor>`\n","export default () =>\n  `<table>\n    <tr>\n      <td>\n        <trix-editor></trix-editor>\n      </td>\n    </tr>\n  </table>`\n","export default () =>\n  `<style type=\"text/css\">\n    blockquote { font-style: italic; }\n    li { font-weight: bold; }\n  </style>\n\n  <trix-editor class=\"trix-content\"></trix-editor>`\n","export default () =>\n  `<style type=\"text/css\">\n    strong { font-weight: 500; }\n    span { font-weight: 600; }\n    article { font-weight: bold; }\n  </style>\n\n  <trix-editor class=\"trix-content\"></trix-editor>`\n","export const TEST_IMAGE_URL = \"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=\"\n","import { TEST_IMAGE_URL } from \"./test_image_url\"\n\nexport default () =>\n  `<trix-editor input=\"my_input\" autofocus placeholder=\"Say hello...\"></trix-editor>\n  <input id=\"my_input\" type=\"hidden\" value=\"ab&lt;img src=&quot;${TEST_IMAGE_URL}&quot; width=&quot;10&quot; height=&quot;10&quot;&gt;\">`\n","export default () =>\n  `<label id=\"label-1\" for=\"editor\"><span>Label 1</span></label>\n  <label id=\"label-2\">\n    Label 2\n    <trix-editor id=\"editor\"></trix-editor>\n  </label>\n  <label id=\"label-3\" for=\"editor\">Label 3</label>`\n","export default () =>\n  `<style type=\"text/css\">\n    .trix-content figure.attachment {\n      display: inline-block;\n    }\n  </style>\n\n  <trix-editor class=\"trix-content\"></trix-editor>`\n","export default () =>\n  `<ul id=\"my_editor\">\n    <li><trix-toolbar id=\"my_toolbar\"></trix-toolbar></li>\n    <li><trix-editor toolbar=\"my_toolbar\" input=\"my_input\" autofocus placeholder=\"Say hello...\"></trix-editor></li>\n    <li><input id=\"my_input\" type=\"hidden\" value=\"&lt;div&gt;Hello world&lt;/div&gt;\"></li>\n  </ul>`\n","export default () =>\n  `<form id=\"ancestor-form\">\n    <trix-editor id=\"editor-with-ancestor-form\"></trix-editor>\n  </form>\n\n  <form id=\"input-form\">\n    <input type=\"hidden\" id=\"hidden-input\">\n  </form>\n  <trix-editor id=\"editor-with-input-form\" input=\"hidden-input\"></trix-editor>\n\n  <trix-editor id=\"editor-with-no-form\"></trix-editor>`\n","import config from \"trix/config\"\nimport { ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport { makeElement } from \"trix/core/helpers\"\n\nimport Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\nimport Attachment from \"trix/models/attachment\"\nimport Document from \"trix/models/document\"\nimport StringPiece from \"trix/models/string_piece\"\n\nimport editorDefaultAriaLabel from \"./editor_default_aria_label\"\nimport editorEmpty from \"./editor_empty\"\nimport editorHtml from \"./editor_html\"\nimport editorInTable from \"./editor_in_table\"\nimport editorWithBlockStyles from \"./editor_with_block_styles\"\nimport editorWithBoldStyles from \"./editor_with_bold_styles\"\nimport editorWithImage from \"./editor_with_image\"\nimport editorWithLabels from \"./editor_with_labels\"\nimport editorWithStyledContent from \"./editor_with_styled_content\"\nimport editorWithToolbarAndInput from \"./editor_with_toolbar_and_input\"\nimport editorsWithForms from \"./editors_with_forms\"\nimport { TEST_IMAGE_URL } from \"./test_image_url\"\n\nexport const fixtureTemplates = {\n  \"editor_default_aria_label\": editorDefaultAriaLabel,\n  \"editor_empty\": editorEmpty,\n  \"editor_html\": editorHtml,\n  \"editor_in_table\": editorInTable,\n  \"editor_with_block_styles\": editorWithBlockStyles,\n  \"editor_with_bold_styles\": editorWithBoldStyles,\n  \"editor_with_image\": editorWithImage,\n  \"editor_with_labels\": editorWithLabels,\n  \"editor_with_styled_content\": editorWithStyledContent,\n  \"editor_with_toolbar_and_input\": editorWithToolbarAndInput,\n  \"editors_with_forms\": editorsWithForms,\n}\n\nexport { TEST_IMAGE_URL }\n\nconst { css } = config\n\nconst createDocument = function (...parts) {\n  const blocks = (() => {\n    const result = []\n\n    Array.from(parts).forEach((part) => {\n      const [ string, textAttributes, blockAttributes ] = Array.from(part)\n      const text = Text.textForStringWithAttributes(string, textAttributes)\n      result.push(new Block(text, blockAttributes))\n    })\n\n    return result\n  })()\n  return new Document(blocks)\n}\n\nexport const createCursorTarget = (name) =>\n  makeElement({\n    tagName: \"span\",\n    textContent: ZERO_WIDTH_SPACE,\n    data: {\n      trixCursorTarget: name,\n      trixSerialize: false,\n    },\n  })\n\nconst cursorTargetLeft = createCursorTarget(\"left\").outerHTML\nconst cursorTargetRight = createCursorTarget(\"right\").outerHTML\n\nconst blockComment = \"<!--block-->\"\n\nconst removeWhitespace = (string) => string.replace(/\\s/g, \"\")\n\nexport const fixtures = {\n  \"bold text\": {\n    document: createDocument([ \"abc\", { bold: true } ]),\n    html: `<div>${blockComment}<strong>abc</strong></div>`,\n    serializedHTML: \"<div><strong>abc</strong></div>\",\n  },\n\n  \"bold, italic text\": {\n    document: createDocument([ \"abc\", { bold: true, italic: true } ]),\n    html: `<div>${blockComment}<strong><em>abc</em></strong></div>`,\n  },\n\n  \"text with newline\": {\n    document: createDocument([ \"ab\\nc\" ]),\n    html: `<div>${blockComment}ab<br>c</div>`,\n  },\n\n  \"text with link\": {\n    document: createDocument([ \"abc\", { href: \"http://example.com\" } ]),\n    html: `<div>${blockComment}<a href=\"http://example.com\">abc</a></div>`,\n  },\n\n  \"text with link and formatting\": {\n    document: createDocument([ \"abc\", { italic: true, href: \"http://example.com\" } ]),\n    html: `<div>${blockComment}<a href=\"http://example.com\"><em>abc</em></a></div>`,\n  },\n\n  \"partially formatted link\": {\n    document: new Document([\n      new Block(\n        new Text([\n          new StringPiece(\"ab\", { href: \"http://example.com\" }),\n          new StringPiece(\"c\", { href: \"http://example.com\", italic: true }),\n        ])\n      ),\n    ]),\n    html: `<div>${blockComment}<a href=\"http://example.com\">ab<em>c</em></a></div>`,\n  },\n\n  \"spaces 1\": {\n    document: createDocument([ \" a\" ]),\n    html: `<div>${blockComment}&nbsp;a</div>`,\n  },\n\n  \"spaces 2\": {\n    document: createDocument([ \"  a\" ]),\n    html: `<div>${blockComment}&nbsp; a</div>`,\n  },\n\n  \"spaces 3\": {\n    document: createDocument([ \"   a\" ]),\n    html: `<div>${blockComment}&nbsp; &nbsp;a</div>`,\n  },\n\n  \"spaces 4\": {\n    document: createDocument([ \" a \" ]),\n    html: `<div>${blockComment}&nbsp;a&nbsp;</div>`,\n  },\n\n  \"spaces 5\": {\n    document: createDocument([ \"a  b\" ]),\n    html: `<div>${blockComment}a&nbsp; b</div>`,\n  },\n\n  \"spaces 6\": {\n    document: createDocument([ \"a   b\" ]),\n    html: `<div>${blockComment}a &nbsp; b</div>`,\n  },\n\n  \"spaces 7\": {\n    document: createDocument([ \"a    b\" ]),\n    html: `<div>${blockComment}a&nbsp; &nbsp; b</div>`,\n  },\n\n  \"spaces 8\": {\n    document: createDocument([ \"a b \" ]),\n    html: `<div>${blockComment}a b&nbsp;</div>`,\n  },\n\n  \"spaces 9\": {\n    document: createDocument([ \"a b c\" ]),\n    html: `<div>${blockComment}a b c</div>`,\n  },\n\n  \"spaces 10\": {\n    document: createDocument([ \"a \" ]),\n    html: `<div>${blockComment}a&nbsp;</div>`,\n  },\n\n  \"spaces 11\": {\n    document: createDocument([ \"a  \" ]),\n    html: `<div>${blockComment}a &nbsp;</div>`,\n  },\n\n  \"spaces and formatting\": {\n    document: new Document([\n      new Block(\n        new Text([\n          new StringPiece(\" a \"),\n          new StringPiece(\"b\", { href: \"http://b.com\" }),\n          new StringPiece(\" \"),\n          new StringPiece(\"c\", { bold: true }),\n          new StringPiece(\" d\"),\n          new StringPiece(\" e \", { italic: true }),\n          new StringPiece(\" f  \"),\n        ])\n      ),\n    ]),\n    html: `<div>${blockComment}&nbsp;a <a href=\"http://b.com\">b</a> <strong>c</strong> d<em> e </em>&nbsp;f &nbsp;</div>`,\n  },\n\n  \"quote formatted block\": {\n    document: createDocument([ \"abc\", {}, [ \"quote\" ] ]),\n    html: `<blockquote>${blockComment}abc</blockquote>`,\n  },\n\n  \"code formatted block\": {\n    document: createDocument([ \"123\", {}, [ \"code\" ] ]),\n    html: `<pre>${blockComment}123</pre>`,\n  },\n\n  \"code with newline\": {\n    document: createDocument([ \"12\\n3\", {}, [ \"code\" ] ]),\n    html: `<pre>${blockComment}12\\n3</pre>`,\n  },\n\n  \"multiple blocks with block comments in their text\": {\n    document: createDocument([ `a${blockComment}b`, {}, [ \"quote\" ] ], [ `${blockComment}c`, {}, [ \"code\" ] ]),\n    html: `<blockquote>${blockComment}a&lt;!--block--&gt;b</blockquote><pre>${blockComment}&lt;!--block--&gt;c</pre>`,\n    serializedHTML: \"<blockquote>a&lt;!--block--&gt;b</blockquote><pre>&lt;!--block--&gt;c</pre>\",\n  },\n\n  \"unordered list with one item\": {\n    document: createDocument([ \"a\", {}, [ \"bulletList\", \"bullet\" ] ]),\n    html: `<ul><li>${blockComment}a</li></ul>`,\n  },\n\n  \"unordered list with bold text\": {\n    document: createDocument([ \"a\", { bold: true }, [ \"bulletList\", \"bullet\" ] ]),\n    html: `<ul><li>${blockComment}<strong>a</strong></li></ul>`,\n  },\n\n  \"unordered list with partially formatted text\": {\n    document: new Document([\n      new Block(new Text([ new StringPiece(\"a\"), new StringPiece(\"b\", { italic: true }) ]), [ \"bulletList\", \"bullet\" ]),\n    ]),\n    html: `<ul><li>${blockComment}a<em>b</em></li></ul>`,\n  },\n\n  \"unordered list with two items\": {\n    document: createDocument([ \"a\", {}, [ \"bulletList\", \"bullet\" ] ], [ \"b\", {}, [ \"bulletList\", \"bullet\" ] ]),\n    html: `<ul><li>${blockComment}a</li><li>${blockComment}b</li></ul>`,\n  },\n\n  \"unordered list surrounded by unformatted blocks\": {\n    document: createDocument([ \"a\" ], [ \"b\", {}, [ \"bulletList\", \"bullet\" ] ], [ \"c\" ]),\n    html: `<div>${blockComment}a</div><ul><li>${blockComment}b</li></ul><div>${blockComment}c</div>`,\n  },\n\n  \"ordered list\": {\n    document: createDocument([ \"a\", {}, [ \"numberList\", \"number\" ] ]),\n    html: `<ol><li>${blockComment}a</li></ol>`,\n  },\n\n  \"ordered list and an unordered list\": {\n    document: createDocument([ \"a\", {}, [ \"bulletList\", \"bullet\" ] ], [ \"b\", {}, [ \"numberList\", \"number\" ] ]),\n    html: `<ul><li>${blockComment}a</li></ul><ol><li>${blockComment}b</li></ol>`,\n  },\n\n  \"empty block with attributes\": {\n    document: createDocument([ \"\", {}, [ \"quote\" ] ]),\n    html: `<blockquote>${blockComment}<br></blockquote>`,\n  },\n\n  \"image attachment\": (() => {\n    const attrs = {\n      url: TEST_IMAGE_URL,\n      filename: \"example.png\",\n      filesize: 98203,\n      contentType: \"image/png\",\n      width: 1,\n      height: 1,\n    }\n    const attachment = new Attachment(attrs)\n    const text = Text.textForAttachmentWithAttributes(attachment)\n\n    const image = makeElement(\"img\", { src: attrs.url, \"data-trix-mutable\": true, width: 1, height: 1 })\n    image.dataset.trixStoreKey = [ \"imageElement\", attachment.id, image.src, image.width, image.height ].join(\"/\")\n\n    const caption = makeElement({ tagName: \"figcaption\", className: css.attachmentCaption })\n    caption.innerHTML = `<span class=\"${css.attachmentName}\">${attrs.filename}</span> <span class=\"${css.attachmentSize}\">95.9 KB</span>`\n\n    const figure = makeElement({\n      tagName: \"figure\",\n      className: \"attachment attachment--preview attachment--png\",\n      editable: false,\n      data: {\n        trixAttachment: JSON.stringify(attachment),\n        trixContentType: \"image/png\",\n        trixId: attachment.id,\n      },\n    })\n\n    figure.setAttribute(\"contenteditable\", false)\n    figure.appendChild(image)\n    figure.appendChild(caption)\n\n    const serializedFigure = figure.cloneNode(true)\n\n    ;[ \"data-trix-id\", \"data-trix-mutable\", \"data-trix-store-key\", \"contenteditable\" ].forEach((attribute) => {\n      serializedFigure.removeAttribute(attribute)\n\n      Array.from(serializedFigure.querySelectorAll(`[${attribute}]`)).forEach((element) => {\n        element.removeAttribute(attribute)\n      })\n    })\n\n    return {\n      html: `<div>${blockComment}${cursorTargetLeft}${figure.outerHTML}${cursorTargetRight}</div>`,\n      serializedHTML: `<div>${serializedFigure.outerHTML}</div>`,\n      document: new Document([ new Block(text) ]),\n    }\n  })(),\n\n  \"text with newlines and image attachment\": (() => {\n    const stringText = Text.textForStringWithAttributes(\"a\\nb\")\n\n    const attrs = {\n      url: TEST_IMAGE_URL,\n      filename: \"example.png\",\n      filesize: 98203,\n      contentType: \"image/png\",\n      width: 1,\n      height: 1,\n    }\n    const attachment = new Attachment(attrs)\n    const attachmentText = Text.textForAttachmentWithAttributes(attachment)\n\n    const image = makeElement(\"img\", { src: attrs.url, \"data-trix-mutable\": true, width: 1, height: 1 })\n    image.dataset.trixStoreKey = [ \"imageElement\", attachment.id, image.src, image.width, image.height ].join(\"/\")\n\n    const caption = makeElement({ tagName: \"figcaption\", className: css.attachmentCaption })\n    caption.innerHTML = `<span class=\"${css.attachmentName}\">${attrs.filename}</span> <span class=\"${css.attachmentSize}\">95.9 KB</span>`\n\n    const figure = makeElement({\n      tagName: \"figure\",\n      className: \"attachment attachment--preview attachment--png\",\n      editable: false,\n      data: {\n        trixAttachment: JSON.stringify(attachment),\n        trixContentType: \"image/png\",\n        trixId: attachment.id,\n      },\n    })\n\n    figure.appendChild(image)\n    figure.appendChild(caption)\n\n    const serializedFigure = figure.cloneNode(true)\n\n    ;[ \"data-trix-id\", \"data-trix-mutable\", \"data-trix-store-key\", \"contenteditable\" ].forEach((attribute) => {\n      serializedFigure.removeAttribute(attribute)\n\n      Array.from(serializedFigure.querySelectorAll(`[${attribute}]`)).forEach((element) => {\n        element.removeAttribute(attribute)\n      })\n    })\n\n    const text = stringText.appendText(attachmentText)\n\n    return {\n      html: `<div>${blockComment}a<br>b${cursorTargetLeft}${figure.outerHTML}${cursorTargetRight}</div>`,\n      serializedHTML: `<div>a<br>b${serializedFigure.outerHTML}</div>`,\n      document: new Document([ new Block(text) ]),\n    }\n  })(),\n\n  \"image attachment with edited caption\": (() => {\n    const attrs = {\n      url: TEST_IMAGE_URL,\n      filename: \"example.png\",\n      filesize: 123,\n      contentType: \"image/png\",\n      width: 1,\n      height: 1,\n    }\n    const attachment = new Attachment(attrs)\n    const textAttrs = { caption: \"Example\" }\n    const text = Text.textForAttachmentWithAttributes(attachment, textAttrs)\n\n    const image = makeElement(\"img\", { src: attrs.url, \"data-trix-mutable\": true, width: 1, height: 1 })\n    image.dataset.trixStoreKey = [ \"imageElement\", attachment.id, image.src, image.width, image.height ].join(\"/\")\n\n    const caption = makeElement({\n      tagName: \"figcaption\",\n      className: `${css.attachmentCaption} ${css.attachmentCaption}--edited`,\n      textContent: \"Example\",\n    })\n\n    const figure = makeElement({\n      tagName: \"figure\",\n      className: \"attachment attachment--preview attachment--png\",\n      editable: false,\n      data: {\n        trixAttachment: JSON.stringify(attachment),\n        trixContentType: \"image/png\",\n        trixId: attachment.id,\n        trixAttributes: JSON.stringify(textAttrs),\n      },\n    })\n\n    figure.appendChild(image)\n    figure.appendChild(caption)\n\n    return {\n      html: `<div>${blockComment}${cursorTargetLeft}${figure.outerHTML}${cursorTargetRight}</div>`,\n      document: new Document([ new Block(text) ]),\n    }\n  })(),\n\n  \"file attachment\": (() => {\n    const attrs = {\n      href: \"http://example.com/example.pdf\",\n      filename: \"example.pdf\",\n      filesize: 34038769,\n      contentType: \"application/pdf\",\n    }\n    const attachment = new Attachment(attrs)\n    const text = Text.textForAttachmentWithAttributes(attachment)\n\n    const figure = makeElement({\n      tagName: \"figure\",\n      className: \"attachment attachment--file attachment--pdf\",\n      editable: false,\n      data: {\n        trixAttachment: JSON.stringify(attachment),\n        trixContentType: \"application/pdf\",\n        trixId: attachment.id,\n      },\n    })\n\n    const caption = `<figcaption class=\"${css.attachmentCaption}\"><span class=\"${css.attachmentName}\">${attrs.filename}</span> <span class=\"${css.attachmentSize}\">32.46 MB</span></figcaption>`\n    figure.innerHTML = caption\n\n    const link = makeElement({ tagName: \"a\", editable: false, attributes: { href: attrs.href, tabindex: -1 } })\n    Array.from(figure.childNodes).forEach((node) => {\n      link.appendChild(node)\n    })\n    figure.appendChild(link)\n\n    return {\n      html: `<div>${blockComment}${cursorTargetLeft}${figure.outerHTML}${cursorTargetRight}</div>`,\n      document: new Document([ new Block(text) ]),\n    }\n  })(),\n\n  \"pending file attachment\": (() => {\n    const attrs = { filename: \"example.pdf\", filesize: 34038769, contentType: \"application/pdf\" }\n    const attachment = new Attachment(attrs)\n    attachment.file = {}\n    const text = Text.textForAttachmentWithAttributes(attachment)\n\n    const figure = makeElement({\n      tagName: \"figure\",\n      className: \"attachment attachment--file attachment--pdf\",\n      editable: false,\n      data: {\n        trixAttachment: JSON.stringify(attachment),\n        trixContentType: \"application/pdf\",\n        trixId: attachment.id,\n        trixSerialize: false,\n      },\n    })\n\n    const progress = makeElement({\n      tagName: \"progress\",\n      attributes: {\n        class: \"attachment__progress\",\n        value: 0,\n        max: 100,\n      },\n      data: {\n        trixMutable: true,\n        trixStoreKey: [ \"progressElement\", attachment.id ].join(\"/\"),\n      },\n    })\n\n    const caption = `<figcaption class=\"${css.attachmentCaption}\"><span class=\"${css.attachmentName}\">${attrs.filename}</span> <span class=\"${css.attachmentSize}\">32.46 MB</span></figcaption>`\n    figure.innerHTML = caption + progress.outerHTML\n\n    return {\n      html: `<div>${blockComment}${cursorTargetLeft}${figure.outerHTML}${cursorTargetRight}</div>`,\n      document: new Document([ new Block(text) ]),\n    }\n  })(),\n\n  \"content attachment\": (() => {\n    const content =\n      \"<blockquote class=\\\"twitter-tweet\\\" data-cards=\\\"hidden\\\"><p>ruby-build 20150413 is out, with definitions for 2.2.2, 2.1.6, and 2.0.0-p645 to address recent security issues: <a href=\\\"https://t.co/YEwV6NtRD8\\\">https://t.co/YEwV6NtRD8</a></p>&mdash; Sam Stephenson (@sstephenson) <a href=\\\"https://twitter.com/sstephenson/status/587715996783218688\\\">April 13, 2015</a></blockquote>\"\n    const href = \"https://twitter.com/sstephenson/status/587715996783218688\"\n    const contentType = \"embed/twitter\"\n\n    const attachment = new Attachment({ content, contentType, href })\n    const text = Text.textForAttachmentWithAttributes(attachment)\n\n    const figure = makeElement({\n      tagName: \"figure\",\n      className: \"attachment attachment--content\",\n      editable: false,\n      data: {\n        trixAttachment: JSON.stringify(attachment),\n        trixContentType: contentType,\n        trixId: attachment.id,\n      },\n    })\n\n    figure.innerHTML = content\n\n    const caption = makeElement({ tagName: \"figcaption\", className: css.attachmentCaption })\n    figure.appendChild(caption)\n\n    return {\n      html: `<div>${blockComment}${cursorTargetLeft}${figure.outerHTML}${cursorTargetRight}</div>`,\n      document: new Document([ new Block(text) ]),\n    }\n  })(),\n\n  \"nested quote and code formatted block\": {\n    document: createDocument([ \"ab3\", {}, [ \"quote\", \"code\" ] ]),\n    html: `<blockquote><pre>${blockComment}ab3</pre></blockquote>`,\n  },\n\n  \"nested code and quote formatted block\": {\n    document: createDocument([ \"ab3\", {}, [ \"code\", \"quote\" ] ]),\n    html: `<pre><blockquote>${blockComment}ab3</blockquote></pre>`,\n  },\n\n  \"nested code blocks in quote\": {\n    document: createDocument(\n      [ \"a\\n\", {}, [ \"quote\" ] ],\n      [ \"b\", {}, [ \"quote\", \"code\" ] ],\n      [ \"\\nc\\n\", {}, [ \"quote\" ] ],\n      [ \"d\", {}, [ \"quote\", \"code\" ] ]\n    ),\n    html: removeWhitespace(\n      `<blockquote>\n        ${blockComment}\n        a\n        <br>\n        <br>\n        <pre>\n          ${blockComment}\n          b\n        </pre>\n        ${blockComment}\n        <br>\n        c\n        <br>\n        <br>\n        <pre>\n          ${blockComment}\n          d\n        </pre>\n      </blockquote>`\n    ),\n    serializedHTML: removeWhitespace(\n      `<blockquote>\n        a\n        <br>\n        <br>\n        <pre>\n          b\n        </pre>\n        <br>\n        c\n        <br>\n        <br>\n        <pre>\n          d\n        </pre>\n      </blockquote>`\n    ),\n  },\n\n  \"nested code, quote, and list in quote\": {\n    document: createDocument(\n      [ \"a\\n\", {}, [ \"quote\" ] ],\n      [ \"b\", {}, [ \"quote\", \"code\" ] ],\n      [ \"\\nc\\n\", {}, [ \"quote\" ] ],\n      [ \"d\", {}, [ \"quote\", \"quote\" ] ],\n      [ \"\\ne\\n\", {}, [ \"quote\" ] ],\n      [ \"f\", {}, [ \"quote\", \"bulletList\", \"bullet\" ] ]\n    ),\n    html: removeWhitespace(\n      `<blockquote>\n        ${blockComment}\n        a\n        <br>\n        <br>\n        <pre>\n          ${blockComment}\n          b\n        </pre>\n        ${blockComment}\n        <br>\n        c\n        <br>\n        <br>\n        <blockquote>\n          ${blockComment}\n          d\n        </blockquote>\n        ${blockComment}\n        <br>\n        e\n        <br>\n        <br>\n        <ul>\n          <li>\n            ${blockComment}\n            f\n          </li>\n        </ul>\n      </blockquote>`\n  ),\n    serializedHTML: removeWhitespace(\n      `<blockquote>\n        a\n        <br>\n        <br>\n        <pre>\n          b\n        </pre>\n        <br>\n        c\n        <br>\n        <br>\n        <blockquote>\n          d\n        </blockquote>\n        <br>\n        e\n        <br>\n        <br>\n        <ul>\n          <li>\n            f\n          </li>\n        </ul>\n      </blockquote>`\n    ),\n  },\n\n  \"nested quotes at different nesting levels\": {\n    document: createDocument(\n      [ \"a\", {}, [ \"quote\", \"quote\", \"quote\" ] ],\n      [ \"b\", {}, [ \"quote\", \"quote\" ] ],\n      [ \"c\", {}, [ \"quote\" ] ],\n      [ \"d\", {}, [ \"quote\", \"quote\" ] ]\n    ),\n    html: removeWhitespace(\n      `<blockquote>\n        <blockquote>\n          <blockquote>\n            ${blockComment}\n            a\n          </blockquote>\n          ${blockComment}\n          b\n        </blockquote>\n        ${blockComment}\n        c\n        <blockquote>\n          ${blockComment}\n          d\n        </blockquote>\n      </blockquote>`\n    ),\n    serializedHTML: removeWhitespace(\n      `<blockquote>\n        <blockquote>\n          <blockquote>\n            a\n          </blockquote>\n          b\n        </blockquote>\n        c\n        <blockquote>\n          d\n        </blockquote>\n      </blockquote>`\n    ),\n  },\n\n  \"nested quote and list\": {\n    document: createDocument([ \"ab3\", {}, [ \"quote\", \"bulletList\", \"bullet\" ] ]),\n    html: `<blockquote><ul><li>${blockComment}ab3</li></ul></blockquote>`,\n  },\n\n  \"nested list and quote\": {\n    document: createDocument([ \"ab3\", {}, [ \"bulletList\", \"bullet\", \"quote\" ] ]),\n    html: `<ul><li><blockquote>${blockComment}ab3</blockquote></li></ul>`,\n  },\n\n  \"nested lists and quotes\": {\n    document: createDocument(\n      [ \"a\", {}, [ \"bulletList\", \"bullet\", \"quote\" ] ],\n      [ \"b\", {}, [ \"bulletList\", \"bullet\", \"quote\" ] ]\n    ),\n    html: `<ul><li><blockquote>${blockComment}a</blockquote></li><li><blockquote>${blockComment}b</blockquote></li></ul>`,\n  },\n\n  \"nested quote and list with two items\": {\n    document: createDocument(\n      [ \"a\", {}, [ \"quote\", \"bulletList\", \"bullet\" ] ],\n      [ \"b\", {}, [ \"quote\", \"bulletList\", \"bullet\" ] ]\n    ),\n    html: `<blockquote><ul><li>${blockComment}a</li><li>${blockComment}b</li></ul></blockquote>`,\n  },\n\n  \"nested unordered lists\": {\n    document: createDocument(\n      [ \"a\", {}, [ \"bulletList\", \"bullet\" ] ],\n      [ \"b\", {}, [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ] ],\n      [ \"c\", {}, [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ] ]\n    ),\n    html: `<ul><li>${blockComment}a<ul><li>${blockComment}b</li><li>${blockComment}c</li></ul></li></ul>`,\n  },\n\n  \"nested lists\": {\n    document: createDocument(\n      [ \"a\", {}, [ \"numberList\", \"number\" ] ],\n      [ \"b\", {}, [ \"numberList\", \"number\", \"bulletList\", \"bullet\" ] ],\n      [ \"c\", {}, [ \"numberList\", \"number\", \"bulletList\", \"bullet\" ] ]\n    ),\n    html: `<ol><li>${blockComment}a<ul><li>${blockComment}b</li><li>${blockComment}c</li></ul></li></ol>`,\n  },\n\n  \"blocks beginning with newlines\": {\n    document: createDocument([ \"\\na\", {}, [ \"quote\" ] ], [ \"\\nb\", {}, [] ], [ \"\\nc\", {}, [ \"quote\" ] ]),\n    html: `<blockquote>${blockComment}<br>a</blockquote><div>${blockComment}<br>b</div><blockquote>${blockComment}<br>c</blockquote>`,\n  },\n\n  \"blocks beginning with formatted text\": {\n    document: createDocument(\n      [ \"a\", { bold: true }, [ \"quote\" ] ],\n      [ \"b\", { italic: true }, [] ],\n      [ \"c\", { bold: true }, [ \"quote\" ] ]\n    ),\n    html: `<blockquote>${blockComment}<strong>a</strong></blockquote><div>${blockComment}<em>b</em></div><blockquote>${blockComment}<strong>c</strong></blockquote>`,\n  },\n\n  \"text with newlines before block\": {\n    document: createDocument([ \"a\\nb\" ], [ \"c\", {}, [ \"quote\" ] ]),\n    html: `<div>${blockComment}a<br>b</div><blockquote>${blockComment}c</blockquote>`,\n  },\n\n  \"empty heading block\": {\n    document: createDocument([ \"\", {}, [ \"heading1\" ] ]),\n    html: `<h1>${blockComment}<br></h1>`,\n  },\n\n  \"two adjacent headings\": {\n    document: createDocument([ \"a\", {}, [ \"heading1\" ] ], [ \"b\", {}, [ \"heading1\" ] ]),\n    html: `<h1>${blockComment}a</h1><h1>${blockComment}b</h1>`,\n  },\n\n  \"heading in ordered list\": {\n    document: createDocument([ \"a\", {}, [ \"numberList\", \"number\", \"heading1\" ] ]),\n    html: `<ol><li><h1>${blockComment}a</h1></li></ol>`,\n  },\n\n  \"headings with formatted text\": {\n    document: createDocument([ \"a\", { bold: true }, [ \"heading1\" ] ], [ \"b\", { italic: true, bold: true }, [ \"heading1\" ] ]),\n    html: `<h1>${blockComment}<strong>a</strong></h1><h1>${blockComment}<strong><em>b</em></strong></h1>`,\n  },\n\n  \"bidrectional text\": {\n    document: createDocument(\n      [ \"a\" ],\n      [ \"ل\", {}, [ \"quote\" ] ],\n      [ \"b\", {}, [ \"bulletList\", \"bullet\" ] ],\n      [ \"ל\", {}, [ \"bulletList\", \"bullet\" ] ],\n      [ \"\", {}, [ \"bulletList\", \"bullet\" ] ],\n      [ \"cید\" ],\n      [ \"\\n گ\" ]\n    ),\n    html: `<div>${blockComment}a</div>\\\n<blockquote dir=\"rtl\">${blockComment}ل</blockquote>\\\n<ul><li>${blockComment}b</li></ul>\\\n<ul dir=\"rtl\"><li>${blockComment}ל</li><li>${blockComment}<br></li></ul>\\\n<div>${blockComment}cید</div>\\\n<div dir=\"rtl\">${blockComment}<br>&nbsp;گ</div>\\\n`,\n    serializedHTML:\n      \"\\\n<div>a</div>\\\n<blockquote dir=\\\"rtl\\\">ل</blockquote>\\\n<ul><li>b</li></ul>\\\n<ul dir=\\\"rtl\\\"><li>ל</li><li><br></li></ul>\\\n<div>cید</div>\\\n<div dir=\\\"rtl\\\"><br>&nbsp;گ</div>\\\n\",\n  },\n}\n\nexport const eachFixture = (callback) => {\n  for (const name in fixtures) {\n    const details = fixtures[name]\n    callback(name, details)\n  }\n}\n","import { fixtureTemplates } from \"test/test_helpers/fixtures/fixtures\"\nimport { removeNode } from \"trix/core/helpers\"\n\nconst setFixtureHTML = function (html, container = \"form\") {\n  let element = document.getElementById(\"trix-container\")\n  if (element != null) {\n    removeNode(element)\n  }\n\n  element = document.createElement(container)\n  element.id = \"trix-container\"\n  element.innerHTML = html\n\n  return document.body.insertAdjacentElement(\"afterbegin\", element)\n}\n\nlet ready = null\n\nexport const testGroup = function (name, options, callback) {\n  let container, setup, teardown, template\n  if (callback != null) {\n    ({ container, template, setup, teardown } = options)\n  } else {\n    callback = options\n  }\n\n  const beforeEach = () => {\n    // Ensure window is active on CI so focus and blur events are natively dispatched\n    window.focus()\n\n    ready = function (callback) {\n      if (template != null) {\n        let handler\n        addEventListener(\n          \"trix-initialize\",\n          handler = function ({ target }) {\n            removeEventListener(\"trix-initialize\", handler)\n            if (target.hasAttribute(\"autofocus\")) {\n              target.editor.setSelectedRange(0)\n            }\n            callback(target)\n          }\n        )\n\n        return setFixtureHTML(fixtureTemplates[template](), container)\n      } else {\n        callback()\n      }\n    }\n    if (setup) setup()\n  }\n\n  const afterEach = () => {\n    if (template != null) {\n      setFixtureHTML(\"\")\n    }\n    return teardown?.()\n  }\n\n  if (callback != null) {\n    return QUnit.module(name, function (hooks) {\n      hooks.beforeEach(beforeEach)\n      hooks.afterEach(afterEach)\n      callback()\n    })\n  } else {\n    return QUnit.module(name, { beforeEach, afterEach })\n  }\n}\n\nexport const test = (name, callback) =>\n  QUnit.test(name, function (assert) {\n    const doneAsync = assert.async()\n\n    return ready(function (element) {\n      const done = function (expectedDocumentValue) {\n        if (element != null) {\n          if (expectedDocumentValue) {\n            assert.equal(element.editor.getDocument().toString(), expectedDocumentValue)\n          }\n          requestAnimationFrame(doneAsync)\n        } else {\n          return doneAsync()\n        }\n      }\n\n      if (callback.length === 0) {\n        callback()\n        return done()\n      } else {\n        callback(done)\n      }\n    })\n  })\n\nexport const testIf = function (condition, ...args) {\n  if (condition) {\n    test(...Array.from(args || []))\n  } else {\n    skip(...Array.from(args || []))\n  }\n}\n\nexport const { skip } = QUnit\n","import { normalizeRange, rangeIsCollapsed } from \"trix/core/helpers\"\n\nexport class TestCompositionDelegate {\n  compositionDidRequestChangingSelectionToLocationRange() {\n    return this.getSelectionManager().setLocationRange(...arguments)\n  }\n\n  getSelectionManager() {\n    if (!this.selectionManager) this.selectionManager = new TestSelectionManager()\n    return this.selectionManager\n  }\n}\n\nexport class TestSelectionManager {\n  constructor() {\n    this.setLocationRange({ index: 0, offset: 0 })\n  }\n\n  getLocationRange() {\n    return this.locationRange\n  }\n\n  setLocationRange(locationRange) {\n    this.locationRange = normalizeRange(locationRange)\n  }\n\n  preserveSelection(block) {\n    const locationRange = this.getLocationRange()\n    block()\n    this.locationRange = locationRange\n  }\n\n  setLocationRangeFromPoint(point) {}\n\n  locationIsCursorTarget() {\n    return false\n  }\n\n  selectionIsExpanded() {\n    return !rangeIsCollapsed(this.getLocationRange())\n  }\n}\n","export const extend = function (properties) {\n  for (const key in properties) {\n    const value = properties[key]\n    this[key] = value\n  }\n  return this\n}\n\nexport const after = (delay, callback) => setTimeout(callback, delay)\n","/**\r\n * Rangy, a cross-browser JavaScript range and selection library\r\n * https://github.com/timdown/rangy\r\n *\r\n * Copyright 2015, Tim Down\r\n * Licensed under the MIT license.\r\n * Version: 1.3.0\r\n * Build date: 10 May 2015\r\n */\r\n\r\n(function(factory, root) {\r\n    if (typeof define == \"function\" && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\r\n        // Node/CommonJS style\r\n        module.exports = factory();\r\n    } else {\r\n        // No AMD or CommonJS support so we place Rangy in (probably) the global variable\r\n        root.rangy = factory();\r\n    }\r\n})(function() {\r\n\r\n    var OBJECT = \"object\", FUNCTION = \"function\", UNDEFINED = \"undefined\";\r\n\r\n    // Minimal set of properties required for DOM Level 2 Range compliance. Comparison constants such as START_TO_START\r\n    // are omitted because ranges in KHTML do not have them but otherwise work perfectly well. See issue 113.\r\n    var domRangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\r\n        \"commonAncestorContainer\"];\r\n\r\n    // Minimal set of methods required for DOM Level 2 Range compliance\r\n    var domRangeMethods = [\"setStart\", \"setStartBefore\", \"setStartAfter\", \"setEnd\", \"setEndBefore\",\r\n        \"setEndAfter\", \"collapse\", \"selectNode\", \"selectNodeContents\", \"compareBoundaryPoints\", \"deleteContents\",\r\n        \"extractContents\", \"cloneContents\", \"insertNode\", \"surroundContents\", \"cloneRange\", \"toString\", \"detach\"];\r\n\r\n    var textRangeProperties = [\"boundingHeight\", \"boundingLeft\", \"boundingTop\", \"boundingWidth\", \"htmlText\", \"text\"];\r\n\r\n    // Subset of TextRange's full set of methods that we're interested in\r\n    var textRangeMethods = [\"collapse\", \"compareEndPoints\", \"duplicate\", \"moveToElementText\", \"parentElement\", \"select\",\r\n        \"setEndPoint\", \"getBoundingClientRect\"];\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Trio of functions taken from Peter Michaux's article:\r\n    // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\r\n    function isHostMethod(o, p) {\r\n        var t = typeof o[p];\r\n        return t == FUNCTION || (!!(t == OBJECT && o[p])) || t == \"unknown\";\r\n    }\r\n\r\n    function isHostObject(o, p) {\r\n        return !!(typeof o[p] == OBJECT && o[p]);\r\n    }\r\n\r\n    function isHostProperty(o, p) {\r\n        return typeof o[p] != UNDEFINED;\r\n    }\r\n\r\n    // Creates a convenience function to save verbose repeated calls to tests functions\r\n    function createMultiplePropertyTest(testFunc) {\r\n        return function(o, props) {\r\n            var i = props.length;\r\n            while (i--) {\r\n                if (!testFunc(o, props[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n    }\r\n\r\n    // Next trio of functions are a convenience to save verbose repeated calls to previous two functions\r\n    var areHostMethods = createMultiplePropertyTest(isHostMethod);\r\n    var areHostObjects = createMultiplePropertyTest(isHostObject);\r\n    var areHostProperties = createMultiplePropertyTest(isHostProperty);\r\n\r\n    function isTextRange(range) {\r\n        return range && areHostMethods(range, textRangeMethods) && areHostProperties(range, textRangeProperties);\r\n    }\r\n\r\n    function getBody(doc) {\r\n        return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\r\n    }\r\n\r\n    var forEach = [].forEach ?\r\n        function(arr, func) {\r\n            arr.forEach(func);\r\n        } :\r\n        function(arr, func) {\r\n            for (var i = 0, len = arr.length; i < len; ++i) {\r\n                func(arr[i], i);\r\n            }\r\n        };\r\n\r\n    var modules = {};\r\n\r\n    var isBrowser = (typeof window != UNDEFINED && typeof document != UNDEFINED);\r\n\r\n    var util = {\r\n        isHostMethod: isHostMethod,\r\n        isHostObject: isHostObject,\r\n        isHostProperty: isHostProperty,\r\n        areHostMethods: areHostMethods,\r\n        areHostObjects: areHostObjects,\r\n        areHostProperties: areHostProperties,\r\n        isTextRange: isTextRange,\r\n        getBody: getBody,\r\n        forEach: forEach\r\n    };\r\n\r\n    var api = {\r\n        version: \"1.3.0\",\r\n        initialized: false,\r\n        isBrowser: isBrowser,\r\n        supported: true,\r\n        util: util,\r\n        features: {},\r\n        modules: modules,\r\n        config: {\r\n            alertOnFail: false,\r\n            alertOnWarn: false,\r\n            preferTextRange: false,\r\n            autoInitialize: (typeof rangyAutoInitialize == UNDEFINED) ? true : rangyAutoInitialize\r\n        }\r\n    };\r\n\r\n    function consoleLog(msg) {\r\n        if (typeof console != UNDEFINED && isHostMethod(console, \"log\")) {\r\n            console.log(msg);\r\n        }\r\n    }\r\n\r\n    function alertOrLog(msg, shouldAlert) {\r\n        if (isBrowser && shouldAlert) {\r\n            alert(msg);\r\n        } else  {\r\n            consoleLog(msg);\r\n        }\r\n    }\r\n\r\n    function fail(reason) {\r\n        api.initialized = true;\r\n        api.supported = false;\r\n        alertOrLog(\"Rangy is not supported in this environment. Reason: \" + reason, api.config.alertOnFail);\r\n    }\r\n\r\n    api.fail = fail;\r\n\r\n    function warn(msg) {\r\n        alertOrLog(\"Rangy warning: \" + msg, api.config.alertOnWarn);\r\n    }\r\n\r\n    api.warn = warn;\r\n\r\n    // Add utility extend() method\r\n    var extend;\r\n    if ({}.hasOwnProperty) {\r\n        util.extend = extend = function(obj, props, deep) {\r\n            var o, p;\r\n            for (var i in props) {\r\n                if (props.hasOwnProperty(i)) {\r\n                    o = obj[i];\r\n                    p = props[i];\r\n                    if (deep && o !== null && typeof o == \"object\" && p !== null && typeof p == \"object\") {\r\n                        extend(o, p, true);\r\n                    }\r\n                    obj[i] = p;\r\n                }\r\n            }\r\n            // Special case for toString, which does not show up in for...in loops in IE <= 8\r\n            if (props.hasOwnProperty(\"toString\")) {\r\n                obj.toString = props.toString;\r\n            }\r\n            return obj;\r\n        };\r\n\r\n        util.createOptions = function(optionsParam, defaults) {\r\n            var options = {};\r\n            extend(options, defaults);\r\n            if (optionsParam) {\r\n                extend(options, optionsParam);\r\n            }\r\n            return options;\r\n        };\r\n    } else {\r\n        fail(\"hasOwnProperty not supported\");\r\n    }\r\n\r\n    // Test whether we're in a browser and bail out if not\r\n    if (!isBrowser) {\r\n        fail(\"Rangy can only run in a browser\");\r\n    }\r\n\r\n    // Test whether Array.prototype.slice can be relied on for NodeLists and use an alternative toArray() if not\r\n    (function() {\r\n        var toArray;\r\n\r\n        if (isBrowser) {\r\n            var el = document.createElement(\"div\");\r\n            el.appendChild(document.createElement(\"span\"));\r\n            var slice = [].slice;\r\n            try {\r\n                if (slice.call(el.childNodes, 0)[0].nodeType == 1) {\r\n                    toArray = function(arrayLike) {\r\n                        return slice.call(arrayLike, 0);\r\n                    };\r\n                }\r\n            } catch (e) {}\r\n        }\r\n\r\n        if (!toArray) {\r\n            toArray = function(arrayLike) {\r\n                var arr = [];\r\n                for (var i = 0, len = arrayLike.length; i < len; ++i) {\r\n                    arr[i] = arrayLike[i];\r\n                }\r\n                return arr;\r\n            };\r\n        }\r\n\r\n        util.toArray = toArray;\r\n    })();\r\n\r\n    // Very simple event handler wrapper function that doesn't attempt to solve issues such as \"this\" handling or\r\n    // normalization of event properties\r\n    var addListener;\r\n    if (isBrowser) {\r\n        if (isHostMethod(document, \"addEventListener\")) {\r\n            addListener = function(obj, eventType, listener) {\r\n                obj.addEventListener(eventType, listener, false);\r\n            };\r\n        } else if (isHostMethod(document, \"attachEvent\")) {\r\n            addListener = function(obj, eventType, listener) {\r\n                obj.attachEvent(\"on\" + eventType, listener);\r\n            };\r\n        } else {\r\n            fail(\"Document does not have required addEventListener or attachEvent method\");\r\n        }\r\n\r\n        util.addListener = addListener;\r\n    }\r\n\r\n    var initListeners = [];\r\n\r\n    function getErrorDesc(ex) {\r\n        return ex.message || ex.description || String(ex);\r\n    }\r\n\r\n    // Initialization\r\n    function init() {\r\n        if (!isBrowser || api.initialized) {\r\n            return;\r\n        }\r\n        var testRange;\r\n        var implementsDomRange = false, implementsTextRange = false;\r\n\r\n        // First, perform basic feature tests\r\n\r\n        if (isHostMethod(document, \"createRange\")) {\r\n            testRange = document.createRange();\r\n            if (areHostMethods(testRange, domRangeMethods) && areHostProperties(testRange, domRangeProperties)) {\r\n                implementsDomRange = true;\r\n            }\r\n        }\r\n\r\n        var body = getBody(document);\r\n        if (!body || body.nodeName.toLowerCase() != \"body\") {\r\n            fail(\"No body element found\");\r\n            return;\r\n        }\r\n\r\n        if (body && isHostMethod(body, \"createTextRange\")) {\r\n            testRange = body.createTextRange();\r\n            if (isTextRange(testRange)) {\r\n                implementsTextRange = true;\r\n            }\r\n        }\r\n\r\n        if (!implementsDomRange && !implementsTextRange) {\r\n            fail(\"Neither Range nor TextRange are available\");\r\n            return;\r\n        }\r\n\r\n        api.initialized = true;\r\n        api.features = {\r\n            implementsDomRange: implementsDomRange,\r\n            implementsTextRange: implementsTextRange\r\n        };\r\n\r\n        // Initialize modules\r\n        var module, errorMessage;\r\n        for (var moduleName in modules) {\r\n            if ( (module = modules[moduleName]) instanceof Module ) {\r\n                module.init(module, api);\r\n            }\r\n        }\r\n\r\n        // Call init listeners\r\n        for (var i = 0, len = initListeners.length; i < len; ++i) {\r\n            try {\r\n                initListeners[i](api);\r\n            } catch (ex) {\r\n                errorMessage = \"Rangy init listener threw an exception. Continuing. Detail: \" + getErrorDesc(ex);\r\n                consoleLog(errorMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    function deprecationNotice(deprecated, replacement, module) {\r\n        if (module) {\r\n            deprecated += \" in module \" + module.name;\r\n        }\r\n        api.warn(\"DEPRECATED: \" + deprecated + \" is deprecated. Please use \" +\r\n        replacement + \" instead.\");\r\n    }\r\n\r\n    function createAliasForDeprecatedMethod(owner, deprecated, replacement, module) {\r\n        owner[deprecated] = function() {\r\n            deprecationNotice(deprecated, replacement, module);\r\n            return owner[replacement].apply(owner, util.toArray(arguments));\r\n        };\r\n    }\r\n\r\n    util.deprecationNotice = deprecationNotice;\r\n    util.createAliasForDeprecatedMethod = createAliasForDeprecatedMethod;\r\n\r\n    // Allow external scripts to initialize this library in case it's loaded after the document has loaded\r\n    api.init = init;\r\n\r\n    // Execute listener immediately if already initialized\r\n    api.addInitListener = function(listener) {\r\n        if (api.initialized) {\r\n            listener(api);\r\n        } else {\r\n            initListeners.push(listener);\r\n        }\r\n    };\r\n\r\n    var shimListeners = [];\r\n\r\n    api.addShimListener = function(listener) {\r\n        shimListeners.push(listener);\r\n    };\r\n\r\n    function shim(win) {\r\n        win = win || window;\r\n        init();\r\n\r\n        // Notify listeners\r\n        for (var i = 0, len = shimListeners.length; i < len; ++i) {\r\n            shimListeners[i](win);\r\n        }\r\n    }\r\n\r\n    if (isBrowser) {\r\n        api.shim = api.createMissingNativeApi = shim;\r\n        createAliasForDeprecatedMethod(api, \"createMissingNativeApi\", \"shim\");\r\n    }\r\n\r\n    function Module(name, dependencies, initializer) {\r\n        this.name = name;\r\n        this.dependencies = dependencies;\r\n        this.initialized = false;\r\n        this.supported = false;\r\n        this.initializer = initializer;\r\n    }\r\n\r\n    Module.prototype = {\r\n        init: function() {\r\n            var requiredModuleNames = this.dependencies || [];\r\n            for (var i = 0, len = requiredModuleNames.length, requiredModule, moduleName; i < len; ++i) {\r\n                moduleName = requiredModuleNames[i];\r\n\r\n                requiredModule = modules[moduleName];\r\n                if (!requiredModule || !(requiredModule instanceof Module)) {\r\n                    throw new Error(\"required module '\" + moduleName + \"' not found\");\r\n                }\r\n\r\n                requiredModule.init();\r\n\r\n                if (!requiredModule.supported) {\r\n                    throw new Error(\"required module '\" + moduleName + \"' not supported\");\r\n                }\r\n            }\r\n\r\n            // Now run initializer\r\n            this.initializer(this);\r\n        },\r\n\r\n        fail: function(reason) {\r\n            this.initialized = true;\r\n            this.supported = false;\r\n            throw new Error(reason);\r\n        },\r\n\r\n        warn: function(msg) {\r\n            api.warn(\"Module \" + this.name + \": \" + msg);\r\n        },\r\n\r\n        deprecationNotice: function(deprecated, replacement) {\r\n            api.warn(\"DEPRECATED: \" + deprecated + \" in module \" + this.name + \" is deprecated. Please use \" +\r\n                replacement + \" instead\");\r\n        },\r\n\r\n        createError: function(msg) {\r\n            return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\r\n        }\r\n    };\r\n\r\n    function createModule(name, dependencies, initFunc) {\r\n        var newModule = new Module(name, dependencies, function(module) {\r\n            if (!module.initialized) {\r\n                module.initialized = true;\r\n                try {\r\n                    initFunc(api, module);\r\n                    module.supported = true;\r\n                } catch (ex) {\r\n                    var errorMessage = \"Module '\" + name + \"' failed to load: \" + getErrorDesc(ex);\r\n                    consoleLog(errorMessage);\r\n                    if (ex.stack) {\r\n                        consoleLog(ex.stack);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        modules[name] = newModule;\r\n        return newModule;\r\n    }\r\n\r\n    api.createModule = function(name) {\r\n        // Allow 2 or 3 arguments (second argument is an optional array of dependencies)\r\n        var initFunc, dependencies;\r\n        if (arguments.length == 2) {\r\n            initFunc = arguments[1];\r\n            dependencies = [];\r\n        } else {\r\n            initFunc = arguments[2];\r\n            dependencies = arguments[1];\r\n        }\r\n\r\n        var module = createModule(name, dependencies, initFunc);\r\n\r\n        // Initialize the module immediately if the core is already initialized\r\n        if (api.initialized && api.supported) {\r\n            module.init();\r\n        }\r\n    };\r\n\r\n    api.createCoreModule = function(name, dependencies, initFunc) {\r\n        createModule(name, dependencies, initFunc);\r\n    };\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Ensure rangy.rangePrototype and rangy.selectionPrototype are available immediately\r\n\r\n    function RangePrototype() {}\r\n    api.RangePrototype = RangePrototype;\r\n    api.rangePrototype = new RangePrototype();\r\n\r\n    function SelectionPrototype() {}\r\n    api.selectionPrototype = new SelectionPrototype();\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // DOM utility methods used by Rangy\n    api.createCoreModule(\"DomUtil\", [], function(api, module) {\n        var UNDEF = \"undefined\";\n        var util = api.util;\n        var getBody = util.getBody;\n\n        // Perform feature tests\n        if (!util.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n            module.fail(\"document missing a Node creation method\");\n        }\n\n        if (!util.isHostMethod(document, \"getElementsByTagName\")) {\n            module.fail(\"document missing getElementsByTagName method\");\n        }\n\n        var el = document.createElement(\"div\");\n        if (!util.areHostMethods(el, [\"insertBefore\", \"appendChild\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]))) {\n            module.fail(\"Incomplete Element implementation\");\n        }\n\n        // innerHTML is required for Range's createContextualFragment method\n        if (!util.isHostProperty(el, \"innerHTML\")) {\n            module.fail(\"Element is missing innerHTML property\");\n        }\n\n        var textNode = document.createTextNode(\"test\");\n        if (!util.areHostMethods(textNode, [\"splitText\", \"deleteData\", \"insertData\", \"appendData\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]) ||\n                !util.areHostProperties(textNode, [\"data\"]))) {\n            module.fail(\"Incomplete Text Node implementation\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Removed use of indexOf because of a bizarre bug in Opera that is thrown in one of the Acid3 tests. I haven't been\n        // able to replicate it outside of the test. The bug is that indexOf returns -1 when called on an Array that\n        // contains just the document as a single element and the value searched for is the document.\n        var arrayContains = /*Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val) > -1;\n            }:*/\n\n            function(arr, val) {\n                var i = arr.length;\n                while (i--) {\n                    if (arr[i] === val) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n\n        // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\n        function isHtmlNamespace(node) {\n            var ns;\n            return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n        }\n\n        function parentElement(node) {\n            var parent = node.parentNode;\n            return (parent.nodeType == 1) ? parent : null;\n        }\n\n        function getNodeIndex(node) {\n            var i = 0;\n            while( (node = node.previousSibling) ) {\n                ++i;\n            }\n            return i;\n        }\n\n        function getNodeLength(node) {\n            switch (node.nodeType) {\n                case 7:\n                case 10:\n                    return 0;\n                case 3:\n                case 8:\n                    return node.length;\n                default:\n                    return node.childNodes.length;\n            }\n        }\n\n        function getCommonAncestor(node1, node2) {\n            var ancestors = [], n;\n            for (n = node1; n; n = n.parentNode) {\n                ancestors.push(n);\n            }\n\n            for (n = node2; n; n = n.parentNode) {\n                if (arrayContains(ancestors, n)) {\n                    return n;\n                }\n            }\n\n            return null;\n        }\n\n        function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n            var n = selfIsAncestor ? descendant : descendant.parentNode;\n            while (n) {\n                if (n === ancestor) {\n                    return true;\n                } else {\n                    n = n.parentNode;\n                }\n            }\n            return false;\n        }\n\n        function isOrIsAncestorOf(ancestor, descendant) {\n            return isAncestorOf(ancestor, descendant, true);\n        }\n\n        function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n            var p, n = selfIsAncestor ? node : node.parentNode;\n            while (n) {\n                p = n.parentNode;\n                if (p === ancestor) {\n                    return n;\n                }\n                n = p;\n            }\n            return null;\n        }\n\n        function isCharacterDataNode(node) {\n            var t = node.nodeType;\n            return t == 3 || t == 4 || t == 8 ; // Text, CDataSection or Comment\n        }\n\n        function isTextOrCommentNode(node) {\n            if (!node) {\n                return false;\n            }\n            var t = node.nodeType;\n            return t == 3 || t == 8 ; // Text or Comment\n        }\n\n        function insertAfter(node, precedingNode) {\n            var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n            if (nextNode) {\n                parent.insertBefore(node, nextNode);\n            } else {\n                parent.appendChild(node);\n            }\n            return node;\n        }\n\n        // Note that we cannot use splitText() because it is bugridden in IE 9.\n        function splitDataNode(node, index, positionsToPreserve) {\n            var newNode = node.cloneNode(false);\n            newNode.deleteData(0, index);\n            node.deleteData(index, node.length - index);\n            insertAfter(newNode, node);\n\n            // Preserve positions\n            if (positionsToPreserve) {\n                for (var i = 0, position; position = positionsToPreserve[i++]; ) {\n                    // Handle case where position was inside the portion of node after the split point\n                    if (position.node == node && position.offset > index) {\n                        position.node = newNode;\n                        position.offset -= index;\n                    }\n                    // Handle the case where the position is a node offset within node's parent\n                    else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                        ++position.offset;\n                    }\n                }\n            }\n            return newNode;\n        }\n\n        function getDocument(node) {\n            if (node.nodeType == 9) {\n                return node;\n            } else if (typeof node.ownerDocument != UNDEF) {\n                return node.ownerDocument;\n            } else if (typeof node.document != UNDEF) {\n                return node.document;\n            } else if (node.parentNode) {\n                return getDocument(node.parentNode);\n            } else {\n                throw module.createError(\"getDocument: no document found for node\");\n            }\n        }\n\n        function getWindow(node) {\n            var doc = getDocument(node);\n            if (typeof doc.defaultView != UNDEF) {\n                return doc.defaultView;\n            } else if (typeof doc.parentWindow != UNDEF) {\n                return doc.parentWindow;\n            } else {\n                throw module.createError(\"Cannot get a window object for node\");\n            }\n        }\n\n        function getIframeDocument(iframeEl) {\n            if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument;\n            } else if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow.document;\n            } else {\n                throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n            }\n        }\n\n        function getIframeWindow(iframeEl) {\n            if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow;\n            } else if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument.defaultView;\n            } else {\n                throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n            }\n        }\n\n        // This looks bad. Is it worth it?\n        function isWindow(obj) {\n            return obj && util.isHostMethod(obj, \"setTimeout\") && util.isHostObject(obj, \"document\");\n        }\n\n        function getContentDocument(obj, module, methodName) {\n            var doc;\n\n            if (!obj) {\n                doc = document;\n            }\n\n            // Test if a DOM node has been passed and obtain a document object for it if so\n            else if (util.isHostProperty(obj, \"nodeType\")) {\n                doc = (obj.nodeType == 1 && obj.tagName.toLowerCase() == \"iframe\") ?\n                    getIframeDocument(obj) : getDocument(obj);\n            }\n\n            // Test if the doc parameter appears to be a Window object\n            else if (isWindow(obj)) {\n                doc = obj.document;\n            }\n\n            if (!doc) {\n                throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n            }\n\n            return doc;\n        }\n\n        function getRootContainer(node) {\n            var parent;\n            while ( (parent = node.parentNode) ) {\n                node = parent;\n            }\n            return node;\n        }\n\n        function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n            // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n            var nodeC, root, childA, childB, n;\n            if (nodeA == nodeB) {\n                // Case 1: nodes are the same\n                return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeB, nodeA, true)) ) {\n                // Case 2: node C (container B or an ancestor) is a child node of A\n                return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeA, nodeB, true)) ) {\n                // Case 3: node C (container A or an ancestor) is a child node of B\n                return getNodeIndex(nodeC) < offsetB  ? -1 : 1;\n            } else {\n                root = getCommonAncestor(nodeA, nodeB);\n                if (!root) {\n                    throw new Error(\"comparePoints error: nodes have no common ancestor\");\n                }\n\n                // Case 4: containers are siblings or descendants of siblings\n                childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n                childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n\n                if (childA === childB) {\n                    // This shouldn't be possible\n                    throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n                } else {\n                    n = root.firstChild;\n                    while (n) {\n                        if (n === childA) {\n                            return -1;\n                        } else if (n === childB) {\n                            return 1;\n                        }\n                        n = n.nextSibling;\n                    }\n                }\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test for IE's crash (IE 6/7) or exception (IE >= 8) when a reference to garbage-collected text node is queried\n        var crashyTextNodes = false;\n\n        function isBrokenNode(node) {\n            var n;\n            try {\n                n = node.parentNode;\n                return false;\n            } catch (e) {\n                return true;\n            }\n        }\n\n        (function() {\n            var el = document.createElement(\"b\");\n            el.innerHTML = \"1\";\n            var textNode = el.firstChild;\n            el.innerHTML = \"<br />\";\n            crashyTextNodes = isBrokenNode(textNode);\n\n            api.features.crashyTextNodes = crashyTextNodes;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function inspectNode(node) {\n            if (!node) {\n                return \"[No node]\";\n            }\n            if (crashyTextNodes && isBrokenNode(node)) {\n                return \"[Broken node]\";\n            }\n            if (isCharacterDataNode(node)) {\n                return '\"' + node.data + '\"';\n            }\n            if (node.nodeType == 1) {\n                var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n                return \"<\" + node.nodeName + idAttr + \">[index:\" + getNodeIndex(node) + \",length:\" + node.childNodes.length + \"][\" + (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n            }\n            return node.nodeName;\n        }\n\n        function fragmentFromNodeChildren(node) {\n            var fragment = getDocument(node).createDocumentFragment(), child;\n            while ( (child = node.firstChild) ) {\n                fragment.appendChild(child);\n            }\n            return fragment;\n        }\n\n        var getComputedStyleProperty;\n        if (typeof window.getComputedStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return getWindow(el).getComputedStyle(el, null)[propName];\n            };\n        } else if (typeof document.documentElement.currentStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return el.currentStyle ? el.currentStyle[propName] : \"\";\n            };\n        } else {\n            module.fail(\"No means of obtaining computed style properties found\");\n        }\n\n        function createTestElement(doc, html, contentEditable) {\n            var body = getBody(doc);\n            var el = doc.createElement(\"div\");\n            el.contentEditable = \"\" + !!contentEditable;\n            if (html) {\n                el.innerHTML = html;\n            }\n\n            // Insert the test element at the start of the body to prevent scrolling to the bottom in iOS (issue #292)\n            var bodyFirstChild = body.firstChild;\n            if (bodyFirstChild) {\n                body.insertBefore(el, bodyFirstChild);\n            } else {\n                body.appendChild(el);\n            }\n\n            return el;\n        }\n\n        function removeNode(node) {\n            return node.parentNode.removeChild(node);\n        }\n\n        function NodeIterator(root) {\n            this.root = root;\n            this._next = root;\n        }\n\n        NodeIterator.prototype = {\n            _current: null,\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                var n = this._current = this._next;\n                var child, next;\n                if (this._current) {\n                    child = n.firstChild;\n                    if (child) {\n                        this._next = child;\n                    } else {\n                        next = null;\n                        while ((n !== this.root) && !(next = n.nextSibling)) {\n                            n = n.parentNode;\n                        }\n                        this._next = next;\n                    }\n                }\n                return this._current;\n            },\n\n            detach: function() {\n                this._current = this._next = this.root = null;\n            }\n        };\n\n        function createIterator(root) {\n            return new NodeIterator(root);\n        }\n\n        function DomPosition(node, offset) {\n            this.node = node;\n            this.offset = offset;\n        }\n\n        DomPosition.prototype = {\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset == pos.offset;\n            },\n\n            inspect: function() {\n                return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n            },\n\n            toString: function() {\n                return this.inspect();\n            }\n        };\n\n        function DOMException(codeName) {\n            this.code = this[codeName];\n            this.codeName = codeName;\n            this.message = \"DOMException: \" + this.codeName;\n        }\n\n        DOMException.prototype = {\n            INDEX_SIZE_ERR: 1,\n            HIERARCHY_REQUEST_ERR: 3,\n            WRONG_DOCUMENT_ERR: 4,\n            NO_MODIFICATION_ALLOWED_ERR: 7,\n            NOT_FOUND_ERR: 8,\n            NOT_SUPPORTED_ERR: 9,\n            INVALID_STATE_ERR: 11,\n            INVALID_NODE_TYPE_ERR: 24\n        };\n\n        DOMException.prototype.toString = function() {\n            return this.message;\n        };\n\n        api.dom = {\n            arrayContains: arrayContains,\n            isHtmlNamespace: isHtmlNamespace,\n            parentElement: parentElement,\n            getNodeIndex: getNodeIndex,\n            getNodeLength: getNodeLength,\n            getCommonAncestor: getCommonAncestor,\n            isAncestorOf: isAncestorOf,\n            isOrIsAncestorOf: isOrIsAncestorOf,\n            getClosestAncestorIn: getClosestAncestorIn,\n            isCharacterDataNode: isCharacterDataNode,\n            isTextOrCommentNode: isTextOrCommentNode,\n            insertAfter: insertAfter,\n            splitDataNode: splitDataNode,\n            getDocument: getDocument,\n            getWindow: getWindow,\n            getIframeWindow: getIframeWindow,\n            getIframeDocument: getIframeDocument,\n            getBody: getBody,\n            isWindow: isWindow,\n            getContentDocument: getContentDocument,\n            getRootContainer: getRootContainer,\n            comparePoints: comparePoints,\n            isBrokenNode: isBrokenNode,\n            inspectNode: inspectNode,\n            getComputedStyleProperty: getComputedStyleProperty,\n            createTestElement: createTestElement,\n            removeNode: removeNode,\n            fragmentFromNodeChildren: fragmentFromNodeChildren,\n            createIterator: createIterator,\n            DomPosition: DomPosition\n        };\n\n        api.DOMException = DOMException;\n    });\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Pure JavaScript implementation of DOM Range\n    api.createCoreModule(\"DomRange\", [\"DomUtil\"], function(api, module) {\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DOMException = api.DOMException;\n\n        var isCharacterDataNode = dom.isCharacterDataNode;\n        var getNodeIndex = dom.getNodeIndex;\n        var isOrIsAncestorOf = dom.isOrIsAncestorOf;\n        var getDocument = dom.getDocument;\n        var comparePoints = dom.comparePoints;\n        var splitDataNode = dom.splitDataNode;\n        var getClosestAncestorIn = dom.getClosestAncestorIn;\n        var getNodeLength = dom.getNodeLength;\n        var arrayContains = dom.arrayContains;\n        var getRootContainer = dom.getRootContainer;\n        var crashyTextNodes = api.features.crashyTextNodes;\n\n        var removeNode = dom.removeNode;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Utility functions\n\n        function isNonTextPartiallySelected(node, range) {\n            return (node.nodeType != 3) &&\n                   (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n        }\n\n        function getRangeDocument(range) {\n            return range.document || getDocument(range.startContainer);\n        }\n\n        function getRangeRoot(range) {\n            return getRootContainer(range.startContainer);\n        }\n\n        function getBoundaryBeforeNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node));\n        }\n\n        function getBoundaryAfterNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n        }\n\n        function insertNodeAtPosition(node, n, o) {\n            var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n            if (isCharacterDataNode(n)) {\n                if (o == n.length) {\n                    dom.insertAfter(node, n);\n                } else {\n                    n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n                }\n            } else if (o >= n.childNodes.length) {\n                n.appendChild(node);\n            } else {\n                n.insertBefore(node, n.childNodes[o]);\n            }\n            return firstNodeInserted;\n        }\n\n        function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n            assertRangeValid(rangeA);\n            assertRangeValid(rangeB);\n\n            if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n\n            var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset),\n                endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n\n            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n        }\n\n        function cloneSubtree(iterator) {\n            var partiallySelected;\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n                partiallySelected = iterator.isPartiallySelectedSubtree();\n                node = node.cloneNode(!partiallySelected);\n                if (partiallySelected) {\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(cloneSubtree(subIterator));\n                    subIterator.detach();\n                }\n\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function iterateSubtree(rangeIterator, func, iteratorState) {\n            var it, n;\n            iteratorState = iteratorState || { stop: false };\n            for (var node, subRangeIterator; node = rangeIterator.next(); ) {\n                if (rangeIterator.isPartiallySelectedSubtree()) {\n                    if (func(node) === false) {\n                        iteratorState.stop = true;\n                        return;\n                    } else {\n                        // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                        // the node selected by the Range.\n                        subRangeIterator = rangeIterator.getSubtreeIterator();\n                        iterateSubtree(subRangeIterator, func, iteratorState);\n                        subRangeIterator.detach();\n                        if (iteratorState.stop) {\n                            return;\n                        }\n                    }\n                } else {\n                    // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n                    // descendants\n                    it = dom.createIterator(node);\n                    while ( (n = it.next()) ) {\n                        if (func(n) === false) {\n                            iteratorState.stop = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        function deleteSubtree(iterator) {\n            var subIterator;\n            while (iterator.next()) {\n                if (iterator.isPartiallySelectedSubtree()) {\n                    subIterator = iterator.getSubtreeIterator();\n                    deleteSubtree(subIterator);\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n            }\n        }\n\n        function extractSubtree(iterator) {\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n\n                if (iterator.isPartiallySelectedSubtree()) {\n                    node = node.cloneNode(false);\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(extractSubtree(subIterator));\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function getNodesInRange(range, nodeTypes, filter) {\n            var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n            var filterExists = !!filter;\n            if (filterNodeTypes) {\n                regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n            }\n\n            var nodes = [];\n            iterateSubtree(new RangeIterator(range, false), function(node) {\n                if (filterNodeTypes && !regex.test(node.nodeType)) {\n                    return;\n                }\n                if (filterExists && !filter(node)) {\n                    return;\n                }\n                // Don't include a boundary container if it is a character data node and the range does not contain any\n                // of its character data. See issue 190.\n                var sc = range.startContainer;\n                if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n                    return;\n                }\n\n                var ec = range.endContainer;\n                if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n                    return;\n                }\n\n                nodes.push(node);\n            });\n            return nodes;\n        }\n\n        function inspect(range) {\n            var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n            return \"[\" + name + \"(\" + dom.inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n                    dom.inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\n\n        function RangeIterator(range, clonePartiallySelectedTextNodes) {\n            this.range = range;\n            this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n\n\n            if (!range.collapsed) {\n                this.sc = range.startContainer;\n                this.so = range.startOffset;\n                this.ec = range.endContainer;\n                this.eo = range.endOffset;\n                var root = range.commonAncestorContainer;\n\n                if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                    this.isSingleCharacterDataNode = true;\n                    this._first = this._last = this._next = this.sc;\n                } else {\n                    this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                        this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                    this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                        this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n                }\n            }\n        }\n\n        RangeIterator.prototype = {\n            _current: null,\n            _next: null,\n            _first: null,\n            _last: null,\n            isSingleCharacterDataNode: false,\n\n            reset: function() {\n                this._current = null;\n                this._next = this._first;\n            },\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                // Move to next node\n                var current = this._current = this._next;\n                if (current) {\n                    this._next = (current !== this._last) ? current.nextSibling : null;\n\n                    // Check for partially selected text nodes\n                    if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                        if (current === this.ec) {\n                            (current = current.cloneNode(true)).deleteData(this.eo, current.length - this.eo);\n                        }\n                        if (this._current === this.sc) {\n                            (current = current.cloneNode(true)).deleteData(0, this.so);\n                        }\n                    }\n                }\n\n                return current;\n            },\n\n            remove: function() {\n                var current = this._current, start, end;\n\n                if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n                    start = (current === this.sc) ? this.so : 0;\n                    end = (current === this.ec) ? this.eo : current.length;\n                    if (start != end) {\n                        current.deleteData(start, end - start);\n                    }\n                } else {\n                    if (current.parentNode) {\n                        removeNode(current);\n                    } else {\n                    }\n                }\n            },\n\n            // Checks if the current node is partially selected\n            isPartiallySelectedSubtree: function() {\n                var current = this._current;\n                return isNonTextPartiallySelected(current, this.range);\n            },\n\n            getSubtreeIterator: function() {\n                var subRange;\n                if (this.isSingleCharacterDataNode) {\n                    subRange = this.range.cloneRange();\n                    subRange.collapse(false);\n                } else {\n                    subRange = new Range(getRangeDocument(this.range));\n                    var current = this._current;\n                    var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n\n                    if (isOrIsAncestorOf(current, this.sc)) {\n                        startContainer = this.sc;\n                        startOffset = this.so;\n                    }\n                    if (isOrIsAncestorOf(current, this.ec)) {\n                        endContainer = this.ec;\n                        endOffset = this.eo;\n                    }\n\n                    updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n                }\n                return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n            },\n\n            detach: function() {\n                this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\n        var rootContainerNodeTypes = [2, 9, 11];\n        var readonlyNodeTypes = [5, 6, 10, 12];\n        var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\n        var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\n\n        function createAncestorFinder(nodeTypes) {\n            return function(node, selfIsAncestor) {\n                var t, n = selfIsAncestor ? node : node.parentNode;\n                while (n) {\n                    t = n.nodeType;\n                    if (arrayContains(nodeTypes, t)) {\n                        return n;\n                    }\n                    n = n.parentNode;\n                }\n                return null;\n            };\n        }\n\n        var getDocumentOrFragmentContainer = createAncestorFinder( [9, 11] );\n        var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\n        var getDocTypeNotationEntityAncestor = createAncestorFinder( [6, 10, 12] );\n\n        function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n            if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidNodeType(node, invalidTypes) {\n            if (!arrayContains(invalidTypes, node.nodeType)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        function assertSameDocumentOrFragment(node1, node2) {\n            if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertNodeNotReadOnly(node) {\n            if (getReadonlyAncestor(node, true)) {\n                throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n            }\n        }\n\n        function assertNode(node, codeName) {\n            if (!node) {\n                throw new DOMException(codeName);\n            }\n        }\n\n        function isValidOffset(node, offset) {\n            return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n        }\n\n        function isRangeValid(range) {\n            return (!!range.startContainer && !!range.endContainer &&\n                    !(crashyTextNodes && (dom.isBrokenNode(range.startContainer) || dom.isBrokenNode(range.endContainer))) &&\n                    getRootContainer(range.startContainer) == getRootContainer(range.endContainer) &&\n                    isValidOffset(range.startContainer, range.startOffset) &&\n                    isValidOffset(range.endContainer, range.endOffset));\n        }\n\n        function assertRangeValid(range) {\n            if (!isRangeValid(range)) {\n                throw new Error(\"Range error: Range is not valid. This usually happens after DOM mutation. Range: (\" + range.inspect() + \")\");\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test the browser's innerHTML support to decide how to implement createContextualFragment\n        var styleEl = document.createElement(\"style\");\n        var htmlParsingConforms = false;\n        try {\n            styleEl.innerHTML = \"<b>x</b>\";\n            htmlParsingConforms = (styleEl.firstChild.nodeType == 3); // Opera incorrectly creates an element node\n        } catch (e) {\n            // IE 6 and 7 throw\n        }\n\n        api.features.htmlParsingConforms = htmlParsingConforms;\n\n        var createContextualFragment = htmlParsingConforms ?\n\n            // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n            // discussion and base code for this implementation at issue 67.\n            // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n            // Thanks to Aleks Williams.\n            function(fragmentStr) {\n                // \"Let node the context object's start's node.\"\n                var node = this.startContainer;\n                var doc = getDocument(node);\n\n                // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n                // exception and abort these steps.\"\n                if (!node) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // \"Let element be as follows, depending on node's interface:\"\n                // Document, Document Fragment: null\n                var el = null;\n\n                // \"Element: node\"\n                if (node.nodeType == 1) {\n                    el = node;\n\n                // \"Text, Comment: node's parentElement\"\n                } else if (isCharacterDataNode(node)) {\n                    el = dom.parentElement(node);\n                }\n\n                // \"If either element is null or element's ownerDocument is an HTML document\n                // and element's local name is \"html\" and element's namespace is the HTML\n                // namespace\"\n                if (el === null || (\n                    el.nodeName == \"HTML\" &&\n                    dom.isHtmlNamespace(getDocument(el).documentElement) &&\n                    dom.isHtmlNamespace(el)\n                )) {\n\n                // \"let element be a new Element with \"body\" as its local name and the HTML\n                // namespace as its namespace.\"\"\n                    el = doc.createElement(\"body\");\n                } else {\n                    el = el.cloneNode(false);\n                }\n\n                // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n                // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n                // \"In either case, the algorithm must be invoked with fragment as the input\n                // and element as the context element.\"\n                el.innerHTML = fragmentStr;\n\n                // \"If this raises an exception, then abort these steps. Otherwise, let new\n                // children be the nodes returned.\"\n\n                // \"Let fragment be a new DocumentFragment.\"\n                // \"Append all new children to fragment.\"\n                // \"Return fragment.\"\n                return dom.fragmentFromNodeChildren(el);\n            } :\n\n            // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that\n            // previous versions of Rangy used (with the exception of using a body element rather than a div)\n            function(fragmentStr) {\n                var doc = getRangeDocument(this);\n                var el = doc.createElement(\"body\");\n                el.innerHTML = fragmentStr;\n\n                return dom.fragmentFromNodeChildren(el);\n            };\n\n        function splitRangeBoundaries(range, positionsToPreserve) {\n            assertRangeValid(range);\n\n            var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n            var startEndSame = (sc === ec);\n\n            if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n                splitDataNode(ec, eo, positionsToPreserve);\n            }\n\n            if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n                sc = splitDataNode(sc, so, positionsToPreserve);\n                if (startEndSame) {\n                    eo -= so;\n                    ec = sc;\n                } else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n                    eo++;\n                }\n                so = 0;\n            }\n            range.setStartAndEnd(sc, so, ec, eo);\n        }\n\n        function rangeToHtml(range) {\n            assertRangeValid(range);\n            var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n            container.appendChild( range.cloneContents() );\n            return container.innerHTML;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var rangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n            \"commonAncestorContainer\"];\n\n        var s2s = 0, s2e = 1, e2e = 2, e2s = 3;\n        var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\n\n        util.extend(api.rangePrototype, {\n            compareBoundaryPoints: function(how, range) {\n                assertRangeValid(this);\n                assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n\n                var nodeA, offsetA, nodeB, offsetB;\n                var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n                var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n                nodeA = this[prefixA + \"Container\"];\n                offsetA = this[prefixA + \"Offset\"];\n                nodeB = range[prefixB + \"Container\"];\n                offsetB = range[prefixB + \"Offset\"];\n                return comparePoints(nodeA, offsetA, nodeB, offsetB);\n            },\n\n            insertNode: function(node) {\n                assertRangeValid(this);\n                assertValidNodeType(node, insertableNodeTypes);\n                assertNodeNotReadOnly(this.startContainer);\n\n                if (isOrIsAncestorOf(node, this.startContainer)) {\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n\n                // No check for whether the container of the start of the Range is of a type that does not allow\n                // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n                // to add the node\n\n                var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                this.setStartBefore(firstNodeInserted);\n            },\n\n            cloneContents: function() {\n                assertRangeValid(this);\n\n                var clone, frag;\n                if (this.collapsed) {\n                    return getRangeDocument(this).createDocumentFragment();\n                } else {\n                    if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                        clone = this.startContainer.cloneNode(true);\n                        clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                        frag = getRangeDocument(this).createDocumentFragment();\n                        frag.appendChild(clone);\n                        return frag;\n                    } else {\n                        var iterator = new RangeIterator(this, true);\n                        clone = cloneSubtree(iterator);\n                        iterator.detach();\n                    }\n                    return clone;\n                }\n            },\n\n            canSurroundContents: function() {\n                assertRangeValid(this);\n                assertNodeNotReadOnly(this.startContainer);\n                assertNodeNotReadOnly(this.endContainer);\n\n                // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                // no non-text nodes.\n                var iterator = new RangeIterator(this, true);\n                var boundariesInvalid = (iterator._first && (isNonTextPartiallySelected(iterator._first, this)) ||\n                        (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                iterator.detach();\n                return !boundariesInvalid;\n            },\n\n            surroundContents: function(node) {\n                assertValidNodeType(node, surroundNodeTypes);\n\n                if (!this.canSurroundContents()) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // Extract the contents\n                var content = this.extractContents();\n\n                // Clear the children of the node\n                if (node.hasChildNodes()) {\n                    while (node.lastChild) {\n                        node.removeChild(node.lastChild);\n                    }\n                }\n\n                // Insert the new node and add the extracted contents\n                insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                node.appendChild(content);\n\n                this.selectNode(node);\n            },\n\n            cloneRange: function() {\n                assertRangeValid(this);\n                var range = new Range(getRangeDocument(this));\n                var i = rangeProperties.length, prop;\n                while (i--) {\n                    prop = rangeProperties[i];\n                    range[prop] = this[prop];\n                }\n                return range;\n            },\n\n            toString: function() {\n                assertRangeValid(this);\n                var sc = this.startContainer;\n                if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                    return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n                } else {\n                    var textParts = [], iterator = new RangeIterator(this, true);\n                    iterateSubtree(iterator, function(node) {\n                        // Accept only text or CDATA nodes, not comments\n                        if (node.nodeType == 3 || node.nodeType == 4) {\n                            textParts.push(node.data);\n                        }\n                    });\n                    iterator.detach();\n                    return textParts.join(\"\");\n                }\n            },\n\n            // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n            // been removed from Mozilla.\n\n            compareNode: function(node) {\n                assertRangeValid(this);\n\n                var parent = node.parentNode;\n                var nodeIndex = getNodeIndex(node);\n\n                if (!parent) {\n                    throw new DOMException(\"NOT_FOUND_ERR\");\n                }\n\n                var startComparison = this.comparePoint(parent, nodeIndex),\n                    endComparison = this.comparePoint(parent, nodeIndex + 1);\n\n                if (startComparison < 0) { // Node starts before\n                    return (endComparison > 0) ? n_b_a : n_b;\n                } else {\n                    return (endComparison > 0) ? n_a : n_i;\n                }\n            },\n\n            comparePoint: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                    return -1;\n                } else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                    return 1;\n                }\n                return 0;\n            },\n\n            createContextualFragment: createContextualFragment,\n\n            toHtml: function() {\n                return rangeToHtml(this);\n            },\n\n            // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n            // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n            intersectsNode: function(node, touchingIsIntersecting) {\n                assertRangeValid(this);\n                if (getRootContainer(node) != getRangeRoot(this)) {\n                    return false;\n                }\n\n                var parent = node.parentNode, offset = getNodeIndex(node);\n                if (!parent) {\n                    return true;\n                }\n\n                var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset),\n                    endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n\n                return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n            },\n\n            isPointInRange: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                       (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n            },\n\n            // The methods below are non-standard and invented by me.\n\n            // Sharing a boundary start-to-end or end-to-start does not count as intersection.\n            intersectsRange: function(range) {\n                return rangesIntersect(this, range, false);\n            },\n\n            // Sharing a boundary start-to-end or end-to-start does count as intersection.\n            intersectsOrTouchesRange: function(range) {\n                return rangesIntersect(this, range, true);\n            },\n\n            intersection: function(range) {\n                if (this.intersectsRange(range)) {\n                    var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset),\n                        endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n\n                    var intersectionRange = this.cloneRange();\n                    if (startComparison == -1) {\n                        intersectionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (endComparison == 1) {\n                        intersectionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return intersectionRange;\n                }\n                return null;\n            },\n\n            union: function(range) {\n                if (this.intersectsOrTouchesRange(range)) {\n                    var unionRange = this.cloneRange();\n                    if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                        unionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                        unionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return unionRange;\n                } else {\n                    throw new DOMException(\"Ranges do not intersect\");\n                }\n            },\n\n            containsNode: function(node, allowPartial) {\n                if (allowPartial) {\n                    return this.intersectsNode(node, false);\n                } else {\n                    return this.compareNode(node) == n_i;\n                }\n            },\n\n            containsNodeContents: function(node) {\n                return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n            },\n\n            containsRange: function(range) {\n                var intersection = this.intersection(range);\n                return intersection !== null && range.equals(intersection);\n            },\n\n            containsNodeText: function(node) {\n                var nodeRange = this.cloneRange();\n                nodeRange.selectNode(node);\n                var textNodes = nodeRange.getNodes([3]);\n                if (textNodes.length > 0) {\n                    nodeRange.setStart(textNodes[0], 0);\n                    var lastTextNode = textNodes.pop();\n                    nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                    return this.containsRange(nodeRange);\n                } else {\n                    return this.containsNodeContents(node);\n                }\n            },\n\n            getNodes: function(nodeTypes, filter) {\n                assertRangeValid(this);\n                return getNodesInRange(this, nodeTypes, filter);\n            },\n\n            getDocument: function() {\n                return getRangeDocument(this);\n            },\n\n            collapseBefore: function(node) {\n                this.setEndBefore(node);\n                this.collapse(false);\n            },\n\n            collapseAfter: function(node) {\n                this.setStartAfter(node);\n                this.collapse(true);\n            },\n\n            getBookmark: function(containerNode) {\n                var doc = getRangeDocument(this);\n                var preSelectionRange = api.createRange(doc);\n                containerNode = containerNode || dom.getBody(doc);\n                preSelectionRange.selectNodeContents(containerNode);\n                var range = this.intersection(preSelectionRange);\n                var start = 0, end = 0;\n                if (range) {\n                    preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                    start = preSelectionRange.toString().length;\n                    end = start + range.toString().length;\n                }\n\n                return {\n                    start: start,\n                    end: end,\n                    containerNode: containerNode\n                };\n            },\n\n            moveToBookmark: function(bookmark) {\n                var containerNode = bookmark.containerNode;\n                var charIndex = 0;\n                this.setStart(containerNode, 0);\n                this.collapse(true);\n                var nodeStack = [containerNode], node, foundStart = false, stop = false;\n                var nextCharIndex, i, childNodes;\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType == 3) {\n                        nextCharIndex = charIndex + node.length;\n                        if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                            this.setStart(node, bookmark.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                            this.setEnd(node, bookmark.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        childNodes = node.childNodes;\n                        i = childNodes.length;\n                        while (i--) {\n                            nodeStack.push(childNodes[i]);\n                        }\n                    }\n                }\n            },\n\n            getName: function() {\n                return \"DomRange\";\n            },\n\n            equals: function(range) {\n                return Range.rangesEqual(this, range);\n            },\n\n            isValid: function() {\n                return isRangeValid(this);\n            },\n\n            inspect: function() {\n                return inspect(this);\n            },\n\n            detach: function() {\n                // In DOM4, detach() is now a no-op.\n            }\n        });\n\n        function copyComparisonConstantsToObject(obj) {\n            obj.START_TO_START = s2s;\n            obj.START_TO_END = s2e;\n            obj.END_TO_END = e2e;\n            obj.END_TO_START = e2s;\n\n            obj.NODE_BEFORE = n_b;\n            obj.NODE_AFTER = n_a;\n            obj.NODE_BEFORE_AND_AFTER = n_b_a;\n            obj.NODE_INSIDE = n_i;\n        }\n\n        function copyComparisonConstants(constructor) {\n            copyComparisonConstantsToObject(constructor);\n            copyComparisonConstantsToObject(constructor.prototype);\n        }\n\n        function createRangeContentRemover(remover, boundaryUpdater) {\n            return function() {\n                assertRangeValid(this);\n\n                var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n\n                var iterator = new RangeIterator(this, true);\n\n                // Work out where to position the range after content removal\n                var node, boundary;\n                if (sc !== root) {\n                    node = getClosestAncestorIn(sc, root, true);\n                    boundary = getBoundaryAfterNode(node);\n                    sc = boundary.node;\n                    so = boundary.offset;\n                }\n\n                // Check none of the range is read-only\n                iterateSubtree(iterator, assertNodeNotReadOnly);\n\n                iterator.reset();\n\n                // Remove the content\n                var returnValue = remover(iterator);\n                iterator.detach();\n\n                // Move to the new position\n                boundaryUpdater(this, sc, so, sc, so);\n\n                return returnValue;\n            };\n        }\n\n        function createPrototypeRange(constructor, boundaryUpdater) {\n            function createBeforeAfterNodeSetter(isBefore, isStart) {\n                return function(node) {\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n                    assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n\n                    var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n                    (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n                };\n            }\n\n            function setRangeStart(range, node, offset) {\n                var ec = range.endContainer, eo = range.endOffset;\n                if (node !== range.startContainer || offset !== range.startOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                        ec = node;\n                        eo = offset;\n                    }\n                    boundaryUpdater(range, node, offset, ec, eo);\n                }\n            }\n\n            function setRangeEnd(range, node, offset) {\n                var sc = range.startContainer, so = range.startOffset;\n                if (node !== range.endContainer || offset !== range.endOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                        sc = node;\n                        so = offset;\n                    }\n                    boundaryUpdater(range, sc, so, node, offset);\n                }\n            }\n\n            // Set up inheritance\n            var F = function() {};\n            F.prototype = api.rangePrototype;\n            constructor.prototype = new F();\n\n            util.extend(constructor.prototype, {\n                setStart: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeStart(this, node, offset);\n                },\n\n                setEnd: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeEnd(this, node, offset);\n                },\n\n                /**\n                 * Convenience method to set a range's start and end boundaries. Overloaded as follows:\n                 * - Two parameters (node, offset) creates a collapsed range at that position\n                 * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at\n                 *   startOffset and ending at endOffset\n                 * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in\n                 *   startNode and ending at endOffset in endNode\n                 */\n                setStartAndEnd: function() {\n                    var args = arguments;\n                    var sc = args[0], so = args[1], ec = sc, eo = so;\n\n                    switch (args.length) {\n                        case 3:\n                            eo = args[2];\n                            break;\n                        case 4:\n                            ec = args[2];\n                            eo = args[3];\n                            break;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                setBoundary: function(node, offset, isStart) {\n                    this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                },\n\n                setStartBefore: createBeforeAfterNodeSetter(true, true),\n                setStartAfter: createBeforeAfterNodeSetter(false, true),\n                setEndBefore: createBeforeAfterNodeSetter(true, false),\n                setEndAfter: createBeforeAfterNodeSetter(false, false),\n\n                collapse: function(isStart) {\n                    assertRangeValid(this);\n                    if (isStart) {\n                        boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n                    } else {\n                        boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n                    }\n                },\n\n                selectNodeContents: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n\n                    boundaryUpdater(this, node, 0, node, getNodeLength(node));\n                },\n\n                selectNode: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, false);\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n\n                    var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n                    boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n                },\n\n                extractContents: createRangeContentRemover(extractSubtree, boundaryUpdater),\n\n                deleteContents: createRangeContentRemover(deleteSubtree, boundaryUpdater),\n\n                canSurroundContents: function() {\n                    assertRangeValid(this);\n                    assertNodeNotReadOnly(this.startContainer);\n                    assertNodeNotReadOnly(this.endContainer);\n\n                    // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                    // no non-text nodes.\n                    var iterator = new RangeIterator(this, true);\n                    var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                            (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                    iterator.detach();\n                    return !boundariesInvalid;\n                },\n\n                splitBoundaries: function() {\n                    splitRangeBoundaries(this);\n                },\n\n                splitBoundariesPreservingPositions: function(positionsToPreserve) {\n                    splitRangeBoundaries(this, positionsToPreserve);\n                },\n\n                normalizeBoundaries: function() {\n                    assertRangeValid(this);\n\n                    var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n\n                    var mergeForward = function(node) {\n                        var sibling = node.nextSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            ec = node;\n                            eo = node.length;\n                            node.appendData(sibling.data);\n                            removeNode(sibling);\n                        }\n                    };\n\n                    var mergeBackward = function(node) {\n                        var sibling = node.previousSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            sc = node;\n                            var nodeLength = node.length;\n                            so = sibling.length;\n                            node.insertData(0, sibling.data);\n                            removeNode(sibling);\n                            if (sc == ec) {\n                                eo += so;\n                                ec = sc;\n                            } else if (ec == node.parentNode) {\n                                var nodeIndex = getNodeIndex(node);\n                                if (eo == nodeIndex) {\n                                    ec = node;\n                                    eo = nodeLength;\n                                } else if (eo > nodeIndex) {\n                                    eo--;\n                                }\n                            }\n                        }\n                    };\n\n                    var normalizeStart = true;\n                    var sibling;\n\n                    if (isCharacterDataNode(ec)) {\n                        if (eo == ec.length) {\n                            mergeForward(ec);\n                        } else if (eo == 0) {\n                            sibling = ec.previousSibling;\n                            if (sibling && sibling.nodeType == ec.nodeType) {\n                                eo = sibling.length;\n                                if (sc == ec) {\n                                    normalizeStart = false;\n                                }\n                                sibling.appendData(ec.data);\n                                removeNode(ec);\n                                ec = sibling;\n                            }\n                        }\n                    } else {\n                        if (eo > 0) {\n                            var endNode = ec.childNodes[eo - 1];\n                            if (endNode && isCharacterDataNode(endNode)) {\n                                mergeForward(endNode);\n                            }\n                        }\n                        normalizeStart = !this.collapsed;\n                    }\n\n                    if (normalizeStart) {\n                        if (isCharacterDataNode(sc)) {\n                            if (so == 0) {\n                                mergeBackward(sc);\n                            } else if (so == sc.length) {\n                                sibling = sc.nextSibling;\n                                if (sibling && sibling.nodeType == sc.nodeType) {\n                                    if (ec == sibling) {\n                                        ec = sc;\n                                        eo += sc.length;\n                                    }\n                                    sc.appendData(sibling.data);\n                                    removeNode(sibling);\n                                }\n                            }\n                        } else {\n                            if (so < sc.childNodes.length) {\n                                var startNode = sc.childNodes[so];\n                                if (startNode && isCharacterDataNode(startNode)) {\n                                    mergeBackward(startNode);\n                                }\n                            }\n                        }\n                    } else {\n                        sc = ec;\n                        so = eo;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                collapseToPoint: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n                    this.setStartAndEnd(node, offset);\n                }\n            });\n\n            copyComparisonConstants(constructor);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Updates commonAncestorContainer and collapsed after boundary change\n        function updateCollapsedAndCommonAncestor(range) {\n            range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n            range.commonAncestorContainer = range.collapsed ?\n                range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);\n        }\n\n        function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n            range.startContainer = startContainer;\n            range.startOffset = startOffset;\n            range.endContainer = endContainer;\n            range.endOffset = endOffset;\n            range.document = dom.getDocument(startContainer);\n\n            updateCollapsedAndCommonAncestor(range);\n        }\n\n        function Range(doc) {\n            this.startContainer = doc;\n            this.startOffset = 0;\n            this.endContainer = doc;\n            this.endOffset = 0;\n            this.document = doc;\n            updateCollapsedAndCommonAncestor(this);\n        }\n\n        createPrototypeRange(Range, updateBoundaries);\n\n        util.extend(Range, {\n            rangeProperties: rangeProperties,\n            RangeIterator: RangeIterator,\n            copyComparisonConstants: copyComparisonConstants,\n            createPrototypeRange: createPrototypeRange,\n            inspect: inspect,\n            toHtml: rangeToHtml,\n            getRangeDocument: getRangeDocument,\n            rangesEqual: function(r1, r2) {\n                return r1.startContainer === r2.startContainer &&\n                    r1.startOffset === r2.startOffset &&\n                    r1.endContainer === r2.endContainer &&\n                    r1.endOffset === r2.endOffset;\n            }\n        });\n\n        api.DomRange = Range;\n    });\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Wrappers for the browser's native DOM Range and/or TextRange implementation\n    api.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n        var WrappedRange, WrappedTextRange;\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DomRange = api.DomRange;\n        var getBody = dom.getBody;\n        var getContentDocument = dom.getContentDocument;\n        var isCharacterDataNode = dom.isCharacterDataNode;\n\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        if (api.features.implementsDomRange) {\n            // This is a wrapper around the browser's native DOM Range. It has two aims:\n            // - Provide workarounds for specific browser bugs\n            // - provide convenient extensions, which are inherited from Rangy's DomRange\n\n            (function() {\n                var rangeProto;\n                var rangeProperties = DomRange.rangeProperties;\n\n                function updateRangeProperties(range) {\n                    var i = rangeProperties.length, prop;\n                    while (i--) {\n                        prop = rangeProperties[i];\n                        range[prop] = range.nativeRange[prop];\n                    }\n                    // Fix for broken collapsed property in IE 9.\n                    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n                }\n\n                function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n                    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n                    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n                    var nativeRangeDifferent = !range.equals(range.nativeRange);\n\n                    // Always set both boundaries for the benefit of IE9 (see issue 35)\n                    if (startMoved || endMoved || nativeRangeDifferent) {\n                        range.setEnd(endContainer, endOffset);\n                        range.setStart(startContainer, startOffset);\n                    }\n                }\n\n                var createBeforeAfterNodeSetter;\n\n                WrappedRange = function(range) {\n                    if (!range) {\n                        throw module.createError(\"WrappedRange: Range must be specified\");\n                    }\n                    this.nativeRange = range;\n                    updateRangeProperties(this);\n                };\n\n                DomRange.createPrototypeRange(WrappedRange, updateNativeRange);\n\n                rangeProto = WrappedRange.prototype;\n\n                rangeProto.selectNode = function(node) {\n                    this.nativeRange.selectNode(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneContents = function() {\n                    return this.nativeRange.cloneContents();\n                };\n\n                // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n                // insertNode() is never delegated to the native range.\n\n                rangeProto.surroundContents = function(node) {\n                    this.nativeRange.surroundContents(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.collapse = function(isStart) {\n                    this.nativeRange.collapse(isStart);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneRange = function() {\n                    return new WrappedRange(this.nativeRange.cloneRange());\n                };\n\n                rangeProto.refresh = function() {\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.toString = function() {\n                    return this.nativeRange.toString();\n                };\n\n                // Create test range and node for feature detection\n\n                var testTextNode = document.createTextNode(\"test\");\n                getBody(document).appendChild(testTextNode);\n                var range = document.createRange();\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n                // correct for it\n\n                range.setStart(testTextNode, 0);\n                range.setEnd(testTextNode, 0);\n\n                try {\n                    range.setStart(testTextNode, 1);\n\n                    rangeProto.setStart = function(node, offset) {\n                        this.nativeRange.setStart(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        this.nativeRange.setEnd(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name) {\n                        return function(node) {\n                            this.nativeRange[name](node);\n                            updateRangeProperties(this);\n                        };\n                    };\n\n                } catch(ex) {\n\n                    rangeProto.setStart = function(node, offset) {\n                        try {\n                            this.nativeRange.setStart(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setEnd(node, offset);\n                            this.nativeRange.setStart(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        try {\n                            this.nativeRange.setEnd(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setStart(node, offset);\n                            this.nativeRange.setEnd(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name, oppositeName) {\n                        return function(node) {\n                            try {\n                                this.nativeRange[name](node);\n                            } catch (ex) {\n                                this.nativeRange[oppositeName](node);\n                                this.nativeRange[name](node);\n                            }\n                            updateRangeProperties(this);\n                        };\n                    };\n                }\n\n                rangeProto.setStartBefore = createBeforeAfterNodeSetter(\"setStartBefore\", \"setEndBefore\");\n                rangeProto.setStartAfter = createBeforeAfterNodeSetter(\"setStartAfter\", \"setEndAfter\");\n                rangeProto.setEndBefore = createBeforeAfterNodeSetter(\"setEndBefore\", \"setStartBefore\");\n                rangeProto.setEndAfter = createBeforeAfterNodeSetter(\"setEndAfter\", \"setStartAfter\");\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n                // whether the native implementation can be trusted\n                rangeProto.selectNodeContents = function(node) {\n                    this.setStartAndEnd(node, 0, dom.getNodeLength(node));\n                };\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n                // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n\n                range.selectNodeContents(testTextNode);\n                range.setEnd(testTextNode, 3);\n\n                var range2 = document.createRange();\n                range2.selectNodeContents(testTextNode);\n                range2.setEnd(testTextNode, 4);\n                range2.setStart(testTextNode, 2);\n\n                if (range.compareBoundaryPoints(range.START_TO_END, range2) == -1 &&\n                        range.compareBoundaryPoints(range.END_TO_START, range2) == 1) {\n                    // This is the wrong way round, so correct for it\n\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        range = range.nativeRange || range;\n                        if (type == range.START_TO_END) {\n                            type = range.END_TO_START;\n                        } else if (type == range.END_TO_START) {\n                            type = range.START_TO_END;\n                        }\n                        return this.nativeRange.compareBoundaryPoints(type, range);\n                    };\n                } else {\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        return this.nativeRange.compareBoundaryPoints(type, range.nativeRange || range);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for IE deleteContents() and extractContents() bug and correct it. See issue 107.\n\n                var el = document.createElement(\"div\");\n                el.innerHTML = \"123\";\n                var textNode = el.firstChild;\n                var body = getBody(document);\n                body.appendChild(el);\n\n                range.setStart(textNode, 1);\n                range.setEnd(textNode, 2);\n                range.deleteContents();\n\n                if (textNode.data == \"13\") {\n                    // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n                    // extractContents()\n                    rangeProto.deleteContents = function() {\n                        this.nativeRange.deleteContents();\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.extractContents = function() {\n                        var frag = this.nativeRange.extractContents();\n                        updateRangeProperties(this);\n                        return frag;\n                    };\n                } else {\n                }\n\n                body.removeChild(el);\n                body = null;\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for existence of createContextualFragment and delegate to it if it exists\n                if (util.isHostMethod(range, \"createContextualFragment\")) {\n                    rangeProto.createContextualFragment = function(fragmentStr) {\n                        return this.nativeRange.createContextualFragment(fragmentStr);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Clean up\n                getBody(document).removeChild(testTextNode);\n\n                rangeProto.getName = function() {\n                    return \"WrappedRange\";\n                };\n\n                api.WrappedRange = WrappedRange;\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return doc.createRange();\n                };\n            })();\n        }\n\n        if (api.features.implementsTextRange) {\n            /*\n            This is a workaround for a bug where IE returns the wrong container element from the TextRange's parentElement()\n            method. For example, in the following (where pipes denote the selection boundaries):\n\n            <ul id=\"ul\"><li id=\"a\">| a </li><li id=\"b\"> b |</li></ul>\n\n            var range = document.selection.createRange();\n            alert(range.parentElement().id); // Should alert \"ul\" but alerts \"b\"\n\n            This method returns the common ancestor node of the following:\n            - the parentElement() of the textRange\n            - the parentElement() of the textRange after calling collapse(true)\n            - the parentElement() of the textRange after calling collapse(false)\n            */\n            var getTextRangeContainerElement = function(textRange) {\n                var parentEl = textRange.parentElement();\n                var range = textRange.duplicate();\n                range.collapse(true);\n                var startEl = range.parentElement();\n                range = textRange.duplicate();\n                range.collapse(false);\n                var endEl = range.parentElement();\n                var startEndContainer = (startEl == endEl) ? startEl : dom.getCommonAncestor(startEl, endEl);\n\n                return startEndContainer == parentEl ? startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);\n            };\n\n            var textRangeIsCollapsed = function(textRange) {\n                return textRange.compareEndPoints(\"StartToEnd\", textRange) == 0;\n            };\n\n            // Gets the boundary of a TextRange expressed as a node and an offset within that node. This function started\n            // out as an improved version of code found in Tim Cameron Ryan's IERange (http://code.google.com/p/ierange/)\n            // but has grown, fixing problems with line breaks in preformatted text, adding workaround for IE TextRange\n            // bugs, handling for inputs and images, plus optimizations.\n            var getTextRangeBoundaryPosition = function(textRange, wholeRangeContainerElement, isStart, isCollapsed, startInfo) {\n                var workingRange = textRange.duplicate();\n                workingRange.collapse(isStart);\n                var containerElement = workingRange.parentElement();\n\n                // Sometimes collapsing a TextRange that's at the start of a text node can move it into the previous node, so\n                // check for that\n                if (!dom.isOrIsAncestorOf(wholeRangeContainerElement, containerElement)) {\n                    containerElement = wholeRangeContainerElement;\n                }\n\n\n                // Deal with nodes that cannot \"contain rich HTML markup\". In practice, this means form inputs, images and\n                // similar. See http://msdn.microsoft.com/en-us/library/aa703950%28VS.85%29.aspx\n                if (!containerElement.canHaveHTML) {\n                    var pos = new DomPosition(containerElement.parentNode, dom.getNodeIndex(containerElement));\n                    return {\n                        boundaryPosition: pos,\n                        nodeInfo: {\n                            nodeIndex: pos.offset,\n                            containerElement: pos.node\n                        }\n                    };\n                }\n\n                var workingNode = dom.getDocument(containerElement).createElement(\"span\");\n\n                // Workaround for HTML5 Shiv's insane violation of document.createElement(). See Rangy issue 104 and HTML5\n                // Shiv issue 64: https://github.com/aFarkas/html5shiv/issues/64\n                if (workingNode.parentNode) {\n                    dom.removeNode(workingNode);\n                }\n\n                var comparison, workingComparisonType = isStart ? \"StartToStart\" : \"StartToEnd\";\n                var previousNode, nextNode, boundaryPosition, boundaryNode;\n                var start = (startInfo && startInfo.containerElement == containerElement) ? startInfo.nodeIndex : 0;\n                var childNodeCount = containerElement.childNodes.length;\n                var end = childNodeCount;\n\n                // Check end first. Code within the loop assumes that the endth child node of the container is definitely\n                // after the range boundary.\n                var nodeIndex = end;\n\n                while (true) {\n                    if (nodeIndex == childNodeCount) {\n                        containerElement.appendChild(workingNode);\n                    } else {\n                        containerElement.insertBefore(workingNode, containerElement.childNodes[nodeIndex]);\n                    }\n                    workingRange.moveToElementText(workingNode);\n                    comparison = workingRange.compareEndPoints(workingComparisonType, textRange);\n                    if (comparison == 0 || start == end) {\n                        break;\n                    } else if (comparison == -1) {\n                        if (end == start + 1) {\n                            // We know the endth child node is after the range boundary, so we must be done.\n                            break;\n                        } else {\n                            start = nodeIndex;\n                        }\n                    } else {\n                        end = (end == start + 1) ? start : nodeIndex;\n                    }\n                    nodeIndex = Math.floor((start + end) / 2);\n                    containerElement.removeChild(workingNode);\n                }\n\n\n                // We've now reached or gone past the boundary of the text range we're interested in\n                // so have identified the node we want\n                boundaryNode = workingNode.nextSibling;\n\n                if (comparison == -1 && boundaryNode && isCharacterDataNode(boundaryNode)) {\n                    // This is a character data node (text, comment, cdata). The working range is collapsed at the start of\n                    // the node containing the text range's boundary, so we move the end of the working range to the\n                    // boundary point and measure the length of its text to get the boundary's offset within the node.\n                    workingRange.setEndPoint(isStart ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n                    var offset;\n\n                    if (/[\\r\\n]/.test(boundaryNode.data)) {\n                        /*\n                        For the particular case of a boundary within a text node containing rendered line breaks (within a\n                        <pre> element, for example), we need a slightly complicated approach to get the boundary's offset in\n                        IE. The facts:\n\n                        - Each line break is represented as \\r in the text node's data/nodeValue properties\n                        - Each line break is represented as \\r\\n in the TextRange's 'text' property\n                        - The 'text' property of the TextRange does not contain trailing line breaks\n\n                        To get round the problem presented by the final fact above, we can use the fact that TextRange's\n                        moveStart() and moveEnd() methods return the actual number of characters moved, which is not\n                        necessarily the same as the number of characters it was instructed to move. The simplest approach is\n                        to use this to store the characters moved when moving both the start and end of the range to the\n                        start of the document body and subtracting the start offset from the end offset (the\n                        \"move-negative-gazillion\" method). However, this is extremely slow when the document is large and\n                        the range is near the end of it. Clearly doing the mirror image (i.e. moving the range boundaries to\n                        the end of the document) has the same problem.\n\n                        Another approach that works is to use moveStart() to move the start boundary of the range up to the\n                        end boundary one character at a time and incrementing a counter with the value returned by the\n                        moveStart() call. However, the check for whether the start boundary has reached the end boundary is\n                        expensive, so this method is slow (although unlike \"move-negative-gazillion\" is largely unaffected\n                        by the location of the range within the document).\n\n                        The approach used below is a hybrid of the two methods above. It uses the fact that a string\n                        containing the TextRange's 'text' property with each \\r\\n converted to a single \\r character cannot\n                        be longer than the text of the TextRange, so the start of the range is moved that length initially\n                        and then a character at a time to make up for any trailing line breaks not contained in the 'text'\n                        property. This has good performance in most situations compared to the previous two methods.\n                        */\n                        var tempRange = workingRange.duplicate();\n                        var rangeLength = tempRange.text.replace(/\\r\\n/g, \"\\r\").length;\n\n                        offset = tempRange.moveStart(\"character\", rangeLength);\n                        while ( (comparison = tempRange.compareEndPoints(\"StartToEnd\", tempRange)) == -1) {\n                            offset++;\n                            tempRange.moveStart(\"character\", 1);\n                        }\n                    } else {\n                        offset = workingRange.text.length;\n                    }\n                    boundaryPosition = new DomPosition(boundaryNode, offset);\n                } else {\n\n                    // If the boundary immediately follows a character data node and this is the end boundary, we should favour\n                    // a position within that, and likewise for a start boundary preceding a character data node\n                    previousNode = (isCollapsed || !isStart) && workingNode.previousSibling;\n                    nextNode = (isCollapsed || isStart) && workingNode.nextSibling;\n                    if (nextNode && isCharacterDataNode(nextNode)) {\n                        boundaryPosition = new DomPosition(nextNode, 0);\n                    } else if (previousNode && isCharacterDataNode(previousNode)) {\n                        boundaryPosition = new DomPosition(previousNode, previousNode.data.length);\n                    } else {\n                        boundaryPosition = new DomPosition(containerElement, dom.getNodeIndex(workingNode));\n                    }\n                }\n\n                // Clean up\n                dom.removeNode(workingNode);\n\n                return {\n                    boundaryPosition: boundaryPosition,\n                    nodeInfo: {\n                        nodeIndex: nodeIndex,\n                        containerElement: containerElement\n                    }\n                };\n            };\n\n            // Returns a TextRange representing the boundary of a TextRange expressed as a node and an offset within that\n            // node. This function started out as an optimized version of code found in Tim Cameron Ryan's IERange\n            // (http://code.google.com/p/ierange/)\n            var createBoundaryTextRange = function(boundaryPosition, isStart) {\n                var boundaryNode, boundaryParent, boundaryOffset = boundaryPosition.offset;\n                var doc = dom.getDocument(boundaryPosition.node);\n                var workingNode, childNodes, workingRange = getBody(doc).createTextRange();\n                var nodeIsDataNode = isCharacterDataNode(boundaryPosition.node);\n\n                if (nodeIsDataNode) {\n                    boundaryNode = boundaryPosition.node;\n                    boundaryParent = boundaryNode.parentNode;\n                } else {\n                    childNodes = boundaryPosition.node.childNodes;\n                    boundaryNode = (boundaryOffset < childNodes.length) ? childNodes[boundaryOffset] : null;\n                    boundaryParent = boundaryPosition.node;\n                }\n\n                // Position the range immediately before the node containing the boundary\n                workingNode = doc.createElement(\"span\");\n\n                // Making the working element non-empty element persuades IE to consider the TextRange boundary to be within\n                // the element rather than immediately before or after it\n                workingNode.innerHTML = \"&#feff;\";\n\n                // insertBefore is supposed to work like appendChild if the second parameter is null. However, a bug report\n                // for IERange suggests that it can crash the browser: http://code.google.com/p/ierange/issues/detail?id=12\n                if (boundaryNode) {\n                    boundaryParent.insertBefore(workingNode, boundaryNode);\n                } else {\n                    boundaryParent.appendChild(workingNode);\n                }\n\n                workingRange.moveToElementText(workingNode);\n                workingRange.collapse(!isStart);\n\n                // Clean up\n                boundaryParent.removeChild(workingNode);\n\n                // Move the working range to the text offset, if required\n                if (nodeIsDataNode) {\n                    workingRange[isStart ? \"moveStart\" : \"moveEnd\"](\"character\", boundaryOffset);\n                }\n\n                return workingRange;\n            };\n\n            /*------------------------------------------------------------------------------------------------------------*/\n\n            // This is a wrapper around a TextRange, providing full DOM Range functionality using rangy's DomRange as a\n            // prototype\n\n            WrappedTextRange = function(textRange) {\n                this.textRange = textRange;\n                this.refresh();\n            };\n\n            WrappedTextRange.prototype = new DomRange(document);\n\n            WrappedTextRange.prototype.refresh = function() {\n                var start, end, startBoundary;\n\n                // TextRange's parentElement() method cannot be trusted. getTextRangeContainerElement() works around that.\n                var rangeContainerElement = getTextRangeContainerElement(this.textRange);\n\n                if (textRangeIsCollapsed(this.textRange)) {\n                    end = start = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true,\n                        true).boundaryPosition;\n                } else {\n                    startBoundary = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true, false);\n                    start = startBoundary.boundaryPosition;\n\n                    // An optimization used here is that if the start and end boundaries have the same parent element, the\n                    // search scope for the end boundary can be limited to exclude the portion of the element that precedes\n                    // the start boundary\n                    end = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, false, false,\n                        startBoundary.nodeInfo).boundaryPosition;\n                }\n\n                this.setStart(start.node, start.offset);\n                this.setEnd(end.node, end.offset);\n            };\n\n            WrappedTextRange.prototype.getName = function() {\n                return \"WrappedTextRange\";\n            };\n\n            DomRange.copyComparisonConstants(WrappedTextRange);\n\n            var rangeToTextRange = function(range) {\n                if (range.collapsed) {\n                    return createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                } else {\n                    var startRange = createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                    var endRange = createBoundaryTextRange(new DomPosition(range.endContainer, range.endOffset), false);\n                    var textRange = getBody( DomRange.getRangeDocument(range) ).createTextRange();\n                    textRange.setEndPoint(\"StartToStart\", startRange);\n                    textRange.setEndPoint(\"EndToEnd\", endRange);\n                    return textRange;\n                }\n            };\n\n            WrappedTextRange.rangeToTextRange = rangeToTextRange;\n\n            WrappedTextRange.prototype.toTextRange = function() {\n                return rangeToTextRange(this);\n            };\n\n            api.WrappedTextRange = WrappedTextRange;\n\n            // IE 9 and above have both implementations and Rangy makes both available. The next few lines sets which\n            // implementation to use by default.\n            if (!api.features.implementsDomRange || api.config.preferTextRange) {\n                // Add WrappedTextRange as the Range property of the global object to allow expression like Range.END_TO_END to work\n                var globalObj = (function(f) { return f(\"return this;\")(); })(Function);\n                if (typeof globalObj.Range == \"undefined\") {\n                    globalObj.Range = WrappedTextRange;\n                }\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return getBody(doc).createTextRange();\n                };\n\n                api.WrappedRange = WrappedTextRange;\n            }\n        }\n\n        api.createRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRange\");\n            return new api.WrappedRange(api.createNativeRange(doc));\n        };\n\n        api.createRangyRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRangyRange\");\n            return new DomRange(doc);\n        };\n\n        util.createAliasForDeprecatedMethod(api, \"createIframeRange\", \"createRange\");\n        util.createAliasForDeprecatedMethod(api, \"createIframeRangyRange\", \"createRangyRange\");\n\n        api.addShimListener(function(win) {\n            var doc = win.document;\n            if (typeof doc.createRange == \"undefined\") {\n                doc.createRange = function() {\n                    return api.createRange(doc);\n                };\n            }\n            doc = win = null;\n        });\n    });\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n    // in the HTML Editing spec (http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)\n    api.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\n        api.config.checkSelectionRanges = true;\n\n        var BOOLEAN = \"boolean\";\n        var NUMBER = \"number\";\n        var dom = api.dom;\n        var util = api.util;\n        var isHostMethod = util.isHostMethod;\n        var DomRange = api.DomRange;\n        var WrappedRange = api.WrappedRange;\n        var DOMException = api.DOMException;\n        var DomPosition = dom.DomPosition;\n        var getNativeSelection;\n        var selectionIsCollapsed;\n        var features = api.features;\n        var CONTROL = \"Control\";\n        var getDocument = dom.getDocument;\n        var getBody = dom.getBody;\n        var rangesEqual = DomRange.rangesEqual;\n\n\n        // Utility function to support direction parameters in the API that may be a string (\"backward\", \"backwards\",\n        // \"forward\" or \"forwards\") or a Boolean (true for backwards).\n        function isDirectionBackward(dir) {\n            return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n        }\n\n        function getWindow(win, methodName) {\n            if (!win) {\n                return window;\n            } else if (dom.isWindow(win)) {\n                return win;\n            } else if (win instanceof WrappedSelection) {\n                return win.win;\n            } else {\n                var doc = dom.getContentDocument(win, module, methodName);\n                return dom.getWindow(doc);\n            }\n        }\n\n        function getWinSelection(winParam) {\n            return getWindow(winParam, \"getWinSelection\").getSelection();\n        }\n\n        function getDocSelection(winParam) {\n            return getWindow(winParam, \"getDocSelection\").document.selection;\n        }\n\n        function winSelectionIsBackward(sel) {\n            var backward = false;\n            if (sel.anchorNode) {\n                backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n            }\n            return backward;\n        }\n\n        // Test for the Range/TextRange and Selection features required\n        // Test for ability to retrieve selection\n        var implementsWinGetSelection = isHostMethod(window, \"getSelection\"),\n            implementsDocSelection = util.isHostObject(document, \"selection\");\n\n        features.implementsWinGetSelection = implementsWinGetSelection;\n        features.implementsDocSelection = implementsDocSelection;\n\n        var useDocumentSelection = implementsDocSelection && (!implementsWinGetSelection || api.config.preferTextRange);\n\n        if (useDocumentSelection) {\n            getNativeSelection = getDocSelection;\n            api.isSelectionValid = function(winParam) {\n                var doc = getWindow(winParam, \"isSelectionValid\").document, nativeSel = doc.selection;\n\n                // Check whether the selection TextRange is actually contained within the correct document\n                return (nativeSel.type != \"None\" || getDocument(nativeSel.createRange().parentElement()) == doc);\n            };\n        } else if (implementsWinGetSelection) {\n            getNativeSelection = getWinSelection;\n            api.isSelectionValid = function() {\n                return true;\n            };\n        } else {\n            module.fail(\"Neither document.selection or window.getSelection() detected.\");\n            return false;\n        }\n\n        api.getNativeSelection = getNativeSelection;\n\n        var testSelection = getNativeSelection();\n\n        // In Firefox, the selection is null in an iframe with display: none. See issue #138.\n        if (!testSelection) {\n            module.fail(\"Native selection was null (possibly issue 138?)\");\n            return false;\n        }\n\n        var testRange = api.createNativeRange(document);\n        var body = getBody(document);\n\n        // Obtaining a range from a selection\n        var selectionHasAnchorAndFocus = util.areHostProperties(testSelection,\n            [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n\n        features.selectionHasAnchorAndFocus = selectionHasAnchorAndFocus;\n\n        // Test for existence of native selection extend() method\n        var selectionHasExtend = isHostMethod(testSelection, \"extend\");\n        features.selectionHasExtend = selectionHasExtend;\n\n        // Test if rangeCount exists\n        var selectionHasRangeCount = (typeof testSelection.rangeCount == NUMBER);\n        features.selectionHasRangeCount = selectionHasRangeCount;\n\n        var selectionSupportsMultipleRanges = false;\n        var collapsedNonEditableSelectionsSupported = true;\n\n        var addRangeBackwardToNative = selectionHasExtend ?\n            function(nativeSelection, range) {\n                var doc = DomRange.getRangeDocument(range);\n                var endRange = api.createRange(doc);\n                endRange.collapseToPoint(range.endContainer, range.endOffset);\n                nativeSelection.addRange(getNativeRange(endRange));\n                nativeSelection.extend(range.startContainer, range.startOffset);\n            } : null;\n\n        if (util.areHostMethods(testSelection, [\"addRange\", \"getRangeAt\", \"removeAllRanges\"]) &&\n                typeof testSelection.rangeCount == NUMBER && features.implementsDomRange) {\n\n            (function() {\n                // Previously an iframe was used but this caused problems in some circumstances in IE, so tests are\n                // performed on the current document's selection. See issue 109.\n\n                // Note also that if a selection previously existed, it is wiped and later restored by these tests. This\n                // will result in the selection direction begin reversed if the original selection was backwards and the\n                // browser does not support setting backwards selections (Internet Explorer, I'm looking at you).\n                var sel = window.getSelection();\n                if (sel) {\n                    // Store the current selection\n                    var originalSelectionRangeCount = sel.rangeCount;\n                    var selectionHasMultipleRanges = (originalSelectionRangeCount > 1);\n                    var originalSelectionRanges = [];\n                    var originalSelectionBackward = winSelectionIsBackward(sel);\n                    for (var i = 0; i < originalSelectionRangeCount; ++i) {\n                        originalSelectionRanges[i] = sel.getRangeAt(i);\n                    }\n\n                    // Create some test elements\n                    var testEl = dom.createTestElement(document, \"\", false);\n                    var textNode = testEl.appendChild( document.createTextNode(\"\\u00a0\\u00a0\\u00a0\") );\n\n                    // Test whether the native selection will allow a collapsed selection within a non-editable element\n                    var r1 = document.createRange();\n\n                    r1.setStart(textNode, 1);\n                    r1.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(r1);\n                    collapsedNonEditableSelectionsSupported = (sel.rangeCount == 1);\n                    sel.removeAllRanges();\n\n                    // Test whether the native selection is capable of supporting multiple ranges.\n                    if (!selectionHasMultipleRanges) {\n                        // Doing the original feature test here in Chrome 36 (and presumably later versions) prints a\n                        // console error of \"Discontiguous selection is not supported.\" that cannot be suppressed. There's\n                        // nothing we can do about this while retaining the feature test so we have to resort to a browser\n                        // sniff. I'm not happy about it. See\n                        // https://code.google.com/p/chromium/issues/detail?id=399791\n                        var chromeMatch = window.navigator.appVersion.match(/Chrome\\/(.*?) /);\n                        if (chromeMatch && parseInt(chromeMatch[1]) >= 36) {\n                            selectionSupportsMultipleRanges = false;\n                        } else {\n                            var r2 = r1.cloneRange();\n                            r1.setStart(textNode, 0);\n                            r2.setEnd(textNode, 3);\n                            r2.setStart(textNode, 2);\n                            sel.addRange(r1);\n                            sel.addRange(r2);\n                            selectionSupportsMultipleRanges = (sel.rangeCount == 2);\n                        }\n                    }\n\n                    // Clean up\n                    dom.removeNode(testEl);\n                    sel.removeAllRanges();\n\n                    for (i = 0; i < originalSelectionRangeCount; ++i) {\n                        if (i == 0 && originalSelectionBackward) {\n                            if (addRangeBackwardToNative) {\n                                addRangeBackwardToNative(sel, originalSelectionRanges[i]);\n                            } else {\n                                api.warn(\"Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend\");\n                                sel.addRange(originalSelectionRanges[i]);\n                            }\n                        } else {\n                            sel.addRange(originalSelectionRanges[i]);\n                        }\n                    }\n                }\n            })();\n        }\n\n        features.selectionSupportsMultipleRanges = selectionSupportsMultipleRanges;\n        features.collapsedNonEditableSelectionsSupported = collapsedNonEditableSelectionsSupported;\n\n        // ControlRanges\n        var implementsControlRange = false, testControlRange;\n\n        if (body && isHostMethod(body, \"createControlRange\")) {\n            testControlRange = body.createControlRange();\n            if (util.areHostProperties(testControlRange, [\"item\", \"add\"])) {\n                implementsControlRange = true;\n            }\n        }\n        features.implementsControlRange = implementsControlRange;\n\n        // Selection collapsedness\n        if (selectionHasAnchorAndFocus) {\n            selectionIsCollapsed = function(sel) {\n                return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n            };\n        } else {\n            selectionIsCollapsed = function(sel) {\n                return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n            };\n        }\n\n        function updateAnchorAndFocusFromRange(sel, range, backward) {\n            var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n            sel.anchorNode = range[anchorPrefix + \"Container\"];\n            sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n            sel.focusNode = range[focusPrefix + \"Container\"];\n            sel.focusOffset = range[focusPrefix + \"Offset\"];\n        }\n\n        function updateAnchorAndFocusFromNativeSelection(sel) {\n            var nativeSel = sel.nativeSelection;\n            sel.anchorNode = nativeSel.anchorNode;\n            sel.anchorOffset = nativeSel.anchorOffset;\n            sel.focusNode = nativeSel.focusNode;\n            sel.focusOffset = nativeSel.focusOffset;\n        }\n\n        function updateEmptySelection(sel) {\n            sel.anchorNode = sel.focusNode = null;\n            sel.anchorOffset = sel.focusOffset = 0;\n            sel.rangeCount = 0;\n            sel.isCollapsed = true;\n            sel._ranges.length = 0;\n        }\n\n        function getNativeRange(range) {\n            var nativeRange;\n            if (range instanceof DomRange) {\n                nativeRange = api.createNativeRange(range.getDocument());\n                nativeRange.setEnd(range.endContainer, range.endOffset);\n                nativeRange.setStart(range.startContainer, range.startOffset);\n            } else if (range instanceof WrappedRange) {\n                nativeRange = range.nativeRange;\n            } else if (features.implementsDomRange && (range instanceof dom.getWindow(range.startContainer).Range)) {\n                nativeRange = range;\n            }\n            return nativeRange;\n        }\n\n        function rangeContainsSingleElement(rangeNodes) {\n            if (!rangeNodes.length || rangeNodes[0].nodeType != 1) {\n                return false;\n            }\n            for (var i = 1, len = rangeNodes.length; i < len; ++i) {\n                if (!dom.isAncestorOf(rangeNodes[0], rangeNodes[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function getSingleElementFromRange(range) {\n            var nodes = range.getNodes();\n            if (!rangeContainsSingleElement(nodes)) {\n                throw module.createError(\"getSingleElementFromRange: range \" + range.inspect() + \" did not consist of a single element\");\n            }\n            return nodes[0];\n        }\n\n        // Simple, quick test which only needs to distinguish between a TextRange and a ControlRange\n        function isTextRange(range) {\n            return !!range && typeof range.text != \"undefined\";\n        }\n\n        function updateFromTextRange(sel, range) {\n            // Create a Range from the selected TextRange\n            var wrappedRange = new WrappedRange(range);\n            sel._ranges = [wrappedRange];\n\n            updateAnchorAndFocusFromRange(sel, wrappedRange, false);\n            sel.rangeCount = 1;\n            sel.isCollapsed = wrappedRange.collapsed;\n        }\n\n        function updateControlSelection(sel) {\n            // Update the wrapped selection based on what's now in the native selection\n            sel._ranges.length = 0;\n            if (sel.docSelection.type == \"None\") {\n                updateEmptySelection(sel);\n            } else {\n                var controlRange = sel.docSelection.createRange();\n                if (isTextRange(controlRange)) {\n                    // This case (where the selection type is \"Control\" and calling createRange() on the selection returns\n                    // a TextRange) can happen in IE 9. It happens, for example, when all elements in the selected\n                    // ControlRange have been removed from the ControlRange and removed from the document.\n                    updateFromTextRange(sel, controlRange);\n                } else {\n                    sel.rangeCount = controlRange.length;\n                    var range, doc = getDocument(controlRange.item(0));\n                    for (var i = 0; i < sel.rangeCount; ++i) {\n                        range = api.createRange(doc);\n                        range.selectNode(controlRange.item(i));\n                        sel._ranges.push(range);\n                    }\n                    sel.isCollapsed = sel.rangeCount == 1 && sel._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);\n                }\n            }\n        }\n\n        function addRangeToControlSelection(sel, range) {\n            var controlRange = sel.docSelection.createRange();\n            var rangeElement = getSingleElementFromRange(range);\n\n            // Create a new ControlRange containing all the elements in the selected ControlRange plus the element\n            // contained by the supplied range\n            var doc = getDocument(controlRange.item(0));\n            var newControlRange = getBody(doc).createControlRange();\n            for (var i = 0, len = controlRange.length; i < len; ++i) {\n                newControlRange.add(controlRange.item(i));\n            }\n            try {\n                newControlRange.add(rangeElement);\n            } catch (ex) {\n                throw module.createError(\"addRange(): Element within the specified Range could not be added to control selection (does it have layout?)\");\n            }\n            newControlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        var getSelectionRangeAt;\n\n        if (isHostMethod(testSelection, \"getRangeAt\")) {\n            // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n            // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n            // lesson to us all, especially me.\n            getSelectionRangeAt = function(sel, index) {\n                try {\n                    return sel.getRangeAt(index);\n                } catch (ex) {\n                    return null;\n                }\n            };\n        } else if (selectionHasAnchorAndFocus) {\n            getSelectionRangeAt = function(sel) {\n                var doc = getDocument(sel.anchorNode);\n                var range = api.createRange(doc);\n                range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n\n                // Handle the case when the selection was selected backwards (from the end to the start in the\n                // document)\n                if (range.collapsed !== this.isCollapsed) {\n                    range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n                }\n\n                return range;\n            };\n        }\n\n        function WrappedSelection(selection, docSelection, win) {\n            this.nativeSelection = selection;\n            this.docSelection = docSelection;\n            this._ranges = [];\n            this.win = win;\n            this.refresh();\n        }\n\n        WrappedSelection.prototype = api.selectionPrototype;\n\n        function deleteProperties(sel) {\n            sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n            sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n            sel.detached = true;\n        }\n\n        var cachedRangySelections = [];\n\n        function actOnCachedSelection(win, action) {\n            var i = cachedRangySelections.length, cached, sel;\n            while (i--) {\n                cached = cachedRangySelections[i];\n                sel = cached.selection;\n                if (action == \"deleteAll\") {\n                    deleteProperties(sel);\n                } else if (cached.win == win) {\n                    if (action == \"delete\") {\n                        cachedRangySelections.splice(i, 1);\n                        return true;\n                    } else {\n                        return sel;\n                    }\n                }\n            }\n            if (action == \"deleteAll\") {\n                cachedRangySelections.length = 0;\n            }\n            return null;\n        }\n\n        var getSelection = function(win) {\n            // Check if the parameter is a Rangy Selection object\n            if (win && win instanceof WrappedSelection) {\n                win.refresh();\n                return win;\n            }\n\n            win = getWindow(win, \"getNativeSelection\");\n\n            var sel = actOnCachedSelection(win);\n            var nativeSel = getNativeSelection(win), docSel = implementsDocSelection ? getDocSelection(win) : null;\n            if (sel) {\n                sel.nativeSelection = nativeSel;\n                sel.docSelection = docSel;\n                sel.refresh();\n            } else {\n                sel = new WrappedSelection(nativeSel, docSel, win);\n                cachedRangySelections.push( { win: win, selection: sel } );\n            }\n            return sel;\n        };\n\n        api.getSelection = getSelection;\n\n        util.createAliasForDeprecatedMethod(api, \"getIframeSelection\", \"getSelection\");\n\n        var selProto = WrappedSelection.prototype;\n\n        function createControlSelection(sel, ranges) {\n            // Ensure that the selection becomes of type \"Control\"\n            var doc = getDocument(ranges[0].startContainer);\n            var controlRange = getBody(doc).createControlRange();\n            for (var i = 0, el, len = ranges.length; i < len; ++i) {\n                el = getSingleElementFromRange(ranges[i]);\n                try {\n                    controlRange.add(el);\n                } catch (ex) {\n                    throw module.createError(\"setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)\");\n                }\n            }\n            controlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        // Selecting a range\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && util.areHostMethods(testSelection, [\"removeAllRanges\", \"addRange\"])) {\n            selProto.removeAllRanges = function() {\n                this.nativeSelection.removeAllRanges();\n                updateEmptySelection(this);\n            };\n\n            var addRangeBackward = function(sel, range) {\n                addRangeBackwardToNative(sel.nativeSelection, range);\n                sel.refresh();\n            };\n\n            if (selectionHasRangeCount) {\n                selProto.addRange = function(range, direction) {\n                    if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                        addRangeToControlSelection(this, range);\n                    } else {\n                        if (isDirectionBackward(direction) && selectionHasExtend) {\n                            addRangeBackward(this, range);\n                        } else {\n                            var previousRangeCount;\n                            if (selectionSupportsMultipleRanges) {\n                                previousRangeCount = this.rangeCount;\n                            } else {\n                                this.removeAllRanges();\n                                previousRangeCount = 0;\n                            }\n                            // Clone the native range so that changing the selected range does not affect the selection.\n                            // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                            // issue 80.\n                            var clonedNativeRange = getNativeRange(range).cloneRange();\n                            try {\n                                this.nativeSelection.addRange(clonedNativeRange);\n                            } catch (ex) {\n                            }\n\n                            // Check whether adding the range was successful\n                            this.rangeCount = this.nativeSelection.rangeCount;\n\n                            if (this.rangeCount == previousRangeCount + 1) {\n                                // The range was added successfully\n\n                                // Check whether the range that we added to the selection is reflected in the last range extracted from\n                                // the selection\n                                if (api.config.checkSelectionRanges) {\n                                    var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                                    if (nativeRange && !rangesEqual(nativeRange, range)) {\n                                        // Happens in WebKit with, for example, a selection placed at the start of a text node\n                                        range = new WrappedRange(nativeRange);\n                                    }\n                                }\n                                this._ranges[this.rangeCount - 1] = range;\n                                updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                                this.isCollapsed = selectionIsCollapsed(this);\n                            } else {\n                                // The range was not added successfully. The simplest thing is to refresh\n                                this.refresh();\n                            }\n                        }\n                    }\n                };\n            } else {\n                selProto.addRange = function(range, direction) {\n                    if (isDirectionBackward(direction) && selectionHasExtend) {\n                        addRangeBackward(this, range);\n                    } else {\n                        this.nativeSelection.addRange(getNativeRange(range));\n                        this.refresh();\n                    }\n                };\n            }\n\n            selProto.setRanges = function(ranges) {\n                if (implementsControlRange && implementsDocSelection && ranges.length > 1) {\n                    createControlSelection(this, ranges);\n                } else {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        this.addRange(ranges[i]);\n                    }\n                }\n            };\n        } else if (isHostMethod(testSelection, \"empty\") && isHostMethod(testRange, \"select\") &&\n                   implementsControlRange && useDocumentSelection) {\n\n            selProto.removeAllRanges = function() {\n                // Added try/catch as fix for issue #21\n                try {\n                    this.docSelection.empty();\n\n                    // Check for empty() not working (issue #24)\n                    if (this.docSelection.type != \"None\") {\n                        // Work around failure to empty a control selection by instead selecting a TextRange and then\n                        // calling empty()\n                        var doc;\n                        if (this.anchorNode) {\n                            doc = getDocument(this.anchorNode);\n                        } else if (this.docSelection.type == CONTROL) {\n                            var controlRange = this.docSelection.createRange();\n                            if (controlRange.length) {\n                                doc = getDocument( controlRange.item(0) );\n                            }\n                        }\n                        if (doc) {\n                            var textRange = getBody(doc).createTextRange();\n                            textRange.select();\n                            this.docSelection.empty();\n                        }\n                    }\n                } catch(ex) {}\n                updateEmptySelection(this);\n            };\n\n            selProto.addRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    addRangeToControlSelection(this, range);\n                } else {\n                    api.WrappedTextRange.rangeToTextRange(range).select();\n                    this._ranges[0] = range;\n                    this.rangeCount = 1;\n                    this.isCollapsed = this._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(this, range, false);\n                }\n            };\n\n            selProto.setRanges = function(ranges) {\n                this.removeAllRanges();\n                var rangeCount = ranges.length;\n                if (rangeCount > 1) {\n                    createControlSelection(this, ranges);\n                } else if (rangeCount) {\n                    this.addRange(ranges[0]);\n                }\n            };\n        } else {\n            module.fail(\"No means of selecting a Range or TextRange was found\");\n            return false;\n        }\n\n        selProto.getRangeAt = function(index) {\n            if (index < 0 || index >= this.rangeCount) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            } else {\n                // Clone the range to preserve selection-range independence. See issue 80.\n                return this._ranges[index].cloneRange();\n            }\n        };\n\n        var refreshSelection;\n\n        if (useDocumentSelection) {\n            refreshSelection = function(sel) {\n                var range;\n                if (api.isSelectionValid(sel.win)) {\n                    range = sel.docSelection.createRange();\n                } else {\n                    range = getBody(sel.win.document).createTextRange();\n                    range.collapse(true);\n                }\n\n                if (sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else if (isTextRange(range)) {\n                    updateFromTextRange(sel, range);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else if (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n            refreshSelection = function(sel) {\n                if (implementsControlRange && implementsDocSelection && sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else {\n                    sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n                    if (sel.rangeCount) {\n                        for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                            sel._ranges[i] = new api.WrappedRange(sel.nativeSelection.getRangeAt(i));\n                        }\n                        updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n                        sel.isCollapsed = selectionIsCollapsed(sel);\n                    } else {\n                        updateEmptySelection(sel);\n                    }\n                }\n            };\n        } else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n            refreshSelection = function(sel) {\n                var range, nativeSel = sel.nativeSelection;\n                if (nativeSel.anchorNode) {\n                    range = getSelectionRangeAt(nativeSel, 0);\n                    sel._ranges = [range];\n                    sel.rangeCount = 1;\n                    updateAnchorAndFocusFromNativeSelection(sel);\n                    sel.isCollapsed = selectionIsCollapsed(sel);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else {\n            module.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n            return false;\n        }\n\n        selProto.refresh = function(checkForChanges) {\n            var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n            var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n\n            refreshSelection(this);\n            if (checkForChanges) {\n                // Check the range count first\n                var i = oldRanges.length;\n                if (i != this._ranges.length) {\n                    return true;\n                }\n\n                // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                // ranges after this\n                if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                    return true;\n                }\n\n                // Finally, compare each range in turn\n                while (i--) {\n                    if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        };\n\n        // Removal of a single range\n        var removeRangeManually = function(sel, range) {\n            var ranges = sel.getAllRanges();\n            sel.removeAllRanges();\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                if (!rangesEqual(range, ranges[i])) {\n                    sel.addRange(ranges[i]);\n                }\n            }\n            if (!sel.rangeCount) {\n                updateEmptySelection(sel);\n            }\n        };\n\n        if (implementsControlRange && implementsDocSelection) {\n            selProto.removeRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    var controlRange = this.docSelection.createRange();\n                    var rangeElement = getSingleElementFromRange(range);\n\n                    // Create a new ControlRange containing all the elements in the selected ControlRange minus the\n                    // element contained by the supplied range\n                    var doc = getDocument(controlRange.item(0));\n                    var newControlRange = getBody(doc).createControlRange();\n                    var el, removed = false;\n                    for (var i = 0, len = controlRange.length; i < len; ++i) {\n                        el = controlRange.item(i);\n                        if (el !== rangeElement || removed) {\n                            newControlRange.add(controlRange.item(i));\n                        } else {\n                            removed = true;\n                        }\n                    }\n                    newControlRange.select();\n\n                    // Update the wrapped selection based on what's now in the native selection\n                    updateControlSelection(this);\n                } else {\n                    removeRangeManually(this, range);\n                }\n            };\n        } else {\n            selProto.removeRange = function(range) {\n                removeRangeManually(this, range);\n            };\n        }\n\n        // Detecting if a selection is backward\n        var selectionIsBackward;\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && features.implementsDomRange) {\n            selectionIsBackward = winSelectionIsBackward;\n\n            selProto.isBackward = function() {\n                return selectionIsBackward(this);\n            };\n        } else {\n            selectionIsBackward = selProto.isBackward = function() {\n                return false;\n            };\n        }\n\n        // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n        selProto.isBackwards = selProto.isBackward;\n\n        // Selection stringifier\n        // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n        // The current spec does not yet define this method.\n        selProto.toString = function() {\n            var rangeTexts = [];\n            for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                rangeTexts[i] = \"\" + this._ranges[i];\n            }\n            return rangeTexts.join(\"\");\n        };\n\n        function assertNodeInSameDocument(sel, node) {\n            if (sel.win.document != getDocument(node)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n        selProto.collapse = function(node, offset) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.collapseToPoint(node, offset);\n            this.setSingleRange(range);\n            this.isCollapsed = true;\n        };\n\n        selProto.collapseToStart = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[0];\n                this.collapse(range.startContainer, range.startOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        selProto.collapseToEnd = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[this.rangeCount - 1];\n                this.collapse(range.endContainer, range.endOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        // The spec is very specific on how selectAllChildren should be implemented and not all browsers implement it as\n        // specified so the native implementation is never used by Rangy.\n        selProto.selectAllChildren = function(node) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.selectNodeContents(node);\n            this.setSingleRange(range);\n        };\n\n        selProto.deleteFromDocument = function() {\n            // Sepcial behaviour required for IE's control selections\n            if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                var controlRange = this.docSelection.createRange();\n                var element;\n                while (controlRange.length) {\n                    element = controlRange.item(0);\n                    controlRange.remove(element);\n                    dom.removeNode(element);\n                }\n                this.refresh();\n            } else if (this.rangeCount) {\n                var ranges = this.getAllRanges();\n                if (ranges.length) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        ranges[i].deleteContents();\n                    }\n                    // The spec says nothing about what the selection should contain after calling deleteContents on each\n                    // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                    this.addRange(ranges[len - 1]);\n                }\n            }\n        };\n\n        // The following are non-standard extensions\n        selProto.eachRange = function(func, returnValue) {\n            for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                if ( func( this.getRangeAt(i) ) ) {\n                    return returnValue;\n                }\n            }\n        };\n\n        selProto.getAllRanges = function() {\n            var ranges = [];\n            this.eachRange(function(range) {\n                ranges.push(range);\n            });\n            return ranges;\n        };\n\n        selProto.setSingleRange = function(range, direction) {\n            this.removeAllRanges();\n            this.addRange(range, direction);\n        };\n\n        selProto.callMethodOnEachRange = function(methodName, params) {\n            var results = [];\n            this.eachRange( function(range) {\n                results.push( range[methodName].apply(range, params || []) );\n            } );\n            return results;\n        };\n\n        function createStartOrEndSetter(isStart) {\n            return function(node, offset) {\n                var range;\n                if (this.rangeCount) {\n                    range = this.getRangeAt(0);\n                    range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                } else {\n                    range = api.createRange(this.win.document);\n                    range.setStartAndEnd(node, offset);\n                }\n                this.setSingleRange(range, this.isBackward());\n            };\n        }\n\n        selProto.setStart = createStartOrEndSetter(true);\n        selProto.setEnd = createStartOrEndSetter(false);\n\n        // Add select() method to Range prototype. Any existing selection will be removed.\n        api.rangePrototype.select = function(direction) {\n            getSelection( this.getDocument() ).setSingleRange(this, direction);\n        };\n\n        selProto.changeEachRange = function(func) {\n            var ranges = [];\n            var backward = this.isBackward();\n\n            this.eachRange(function(range) {\n                func(range);\n                ranges.push(range);\n            });\n\n            this.removeAllRanges();\n            if (backward && ranges.length == 1) {\n                this.addRange(ranges[0], \"backward\");\n            } else {\n                this.setRanges(ranges);\n            }\n        };\n\n        selProto.containsNode = function(node, allowPartial) {\n            return this.eachRange( function(range) {\n                return range.containsNode(node, allowPartial);\n            }, true ) || false;\n        };\n\n        selProto.getBookmark = function(containerNode) {\n            return {\n                backward: this.isBackward(),\n                rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n            };\n        };\n\n        selProto.moveToBookmark = function(bookmark) {\n            var selRanges = [];\n            for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++]; ) {\n                range = api.createRange(this.win);\n                range.moveToBookmark(rangeBookmark);\n                selRanges.push(range);\n            }\n            if (bookmark.backward) {\n                this.setSingleRange(selRanges[0], \"backward\");\n            } else {\n                this.setRanges(selRanges);\n            }\n        };\n\n        selProto.saveRanges = function() {\n            return {\n                backward: this.isBackward(),\n                ranges: this.callMethodOnEachRange(\"cloneRange\")\n            };\n        };\n\n        selProto.restoreRanges = function(selRanges) {\n            this.removeAllRanges();\n            for (var i = 0, range; range = selRanges.ranges[i]; ++i) {\n                this.addRange(range, (selRanges.backward && i == 0));\n            }\n        };\n\n        selProto.toHtml = function() {\n            var rangeHtmls = [];\n            this.eachRange(function(range) {\n                rangeHtmls.push( DomRange.toHtml(range) );\n            });\n            return rangeHtmls.join(\"\");\n        };\n\n        if (features.implementsTextRange) {\n            selProto.getNativeTextRange = function() {\n                var sel, textRange;\n                if ( (sel = this.docSelection) ) {\n                    var range = sel.createRange();\n                    if (isTextRange(range)) {\n                        return range;\n                    } else {\n                        throw module.createError(\"getNativeTextRange: selection is a control selection\");\n                    }\n                } else if (this.rangeCount > 0) {\n                    return api.WrappedTextRange.rangeToTextRange( this.getRangeAt(0) );\n                } else {\n                    throw module.createError(\"getNativeTextRange: selection contains no range\");\n                }\n            };\n        }\n\n        function inspect(sel) {\n            var rangeInspects = [];\n            var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n            var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n            var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n\n            if (typeof sel.rangeCount != \"undefined\") {\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                }\n            }\n            return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                    \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n        }\n\n        selProto.getName = function() {\n            return \"WrappedSelection\";\n        };\n\n        selProto.inspect = function() {\n            return inspect(this);\n        };\n\n        selProto.detach = function() {\n            actOnCachedSelection(this.win, \"delete\");\n            deleteProperties(this);\n        };\n\n        WrappedSelection.detachAll = function() {\n            actOnCachedSelection(null, \"deleteAll\");\n        };\n\n        WrappedSelection.inspect = inspect;\n        WrappedSelection.isDirectionBackward = isDirectionBackward;\n\n        api.Selection = WrappedSelection;\n\n        api.selectionPrototype = selProto;\n\n        api.addShimListener(function(win) {\n            if (typeof win.getSelection == \"undefined\") {\n                win.getSelection = function() {\n                    return getSelection(win);\n                };\n            }\n            win = null;\n        });\n    });\n    \r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Wait for document to load before initializing\r\n    var docReady = false;\r\n\r\n    var loadHandler = function(e) {\r\n        if (!docReady) {\r\n            docReady = true;\r\n            if (!api.initialized && api.config.autoInitialize) {\r\n                init();\r\n            }\r\n        }\r\n    };\r\n\r\n    if (isBrowser) {\r\n        // Test whether the document has already been loaded and initialize immediately if so\r\n        if (document.readyState == \"complete\") {\r\n            loadHandler();\r\n        } else {\r\n            if (isHostMethod(document, \"addEventListener\")) {\r\n                document.addEventListener(\"DOMContentLoaded\", loadHandler, false);\r\n            }\r\n\r\n            // Add a fallback in case the DOMContentLoaded event isn't supported\r\n            addListener(window, \"load\", loadHandler);\r\n        }\r\n    }\r\n\r\n    return api;\r\n}, this);","/**\r\n * Text range module for Rangy.\r\n * Text-based manipulation and searching of ranges and selections.\r\n *\r\n * Features\r\n *\r\n * - Ability to move range boundaries by character or word offsets\r\n * - Customizable word tokenizer\r\n * - Ignores text nodes inside <script> or <style> elements or those hidden by CSS display and visibility properties\r\n * - Range findText method to search for text or regex within the page or within a range. Flags for whole words and case\r\n *   sensitivity\r\n * - Selection and range save/restore as text offsets within a node\r\n * - Methods to return visible text within a range or selection\r\n * - innerText method for elements\r\n *\r\n * References\r\n *\r\n * https://www.w3.org/Bugs/Public/show_bug.cgi?id=13145\r\n * http://aryeh.name/spec/innertext/innertext.html\r\n * http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html\r\n *\r\n * Part of Rangy, a cross-browser JavaScript range and selection library\r\n * https://github.com/timdown/rangy\r\n *\r\n * Depends on Rangy core.\r\n *\r\n * Copyright 2015, Tim Down\r\n * Licensed under the MIT license.\r\n * Version: 1.3.0\r\n * Build date: 10 May 2015\r\n */\r\n\r\n/**\r\n * Problem: handling of trailing spaces before line breaks is handled inconsistently between browsers.\r\n *\r\n * First, a <br>: this is relatively simple. For the following HTML:\r\n *\r\n * 1 <br>2\r\n *\r\n * - IE and WebKit render the space, include it in the selection (i.e. when the content is selected and pasted into a\r\n *   textarea, the space is present) and allow the caret to be placed after it.\r\n * - Firefox does not acknowledge the space in the selection but it is possible to place the caret after it.\r\n * - Opera does not render the space but has two separate caret positions on either side of the space (left and right\r\n *   arrow keys show this) and includes the space in the selection.\r\n *\r\n * The other case is the line break or breaks implied by block elements. For the following HTML:\r\n *\r\n * <p>1 </p><p>2<p>\r\n *\r\n * - WebKit does not acknowledge the space in any way\r\n * - Firefox, IE and Opera as per <br>\r\n *\r\n * One more case is trailing spaces before line breaks in elements with white-space: pre-line. For the following HTML:\r\n *\r\n * <p style=\"white-space: pre-line\">1\r\n * 2</p>\r\n *\r\n * - Firefox and WebKit include the space in caret positions\r\n * - IE does not support pre-line up to and including version 9\r\n * - Opera ignores the space\r\n * - Trailing space only renders if there is a non-collapsed character in the line\r\n *\r\n * Problem is whether Rangy should ever acknowledge the space and if so, when. Another problem is whether this can be\r\n * feature-tested\r\n */\r\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"./rangy-core\"], factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory( require(\"rangy\") );\n    } else {\n        // No AMD or CommonJS support so we use the rangy property of root (probably the global variable)\n        factory(root.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"TextRange\", [\"WrappedSelection\"], function(api, module) {\n        var UNDEF = \"undefined\";\n        var CHARACTER = \"character\", WORD = \"word\";\n        var dom = api.dom, util = api.util;\n        var extend = util.extend;\n        var createOptions = util.createOptions;\n        var getBody = dom.getBody;\n\n\n        var spacesRegex = /^[ \\t\\f\\r\\n]+$/;\n        var spacesMinusLineBreaksRegex = /^[ \\t\\f\\r]+$/;\n        var allWhiteSpaceRegex = /^[\\t-\\r \\u0085\\u00A0\\u1680\\u180E\\u2000-\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000]+$/;\n        var nonLineBreakWhiteSpaceRegex = /^[\\t \\u00A0\\u1680\\u180E\\u2000-\\u200B\\u202F\\u205F\\u3000]+$/;\n        var lineBreakRegex = /^[\\n-\\r\\u0085\\u2028\\u2029]$/;\n\n        var defaultLanguage = \"en\";\n\n        var isDirectionBackward = api.Selection.isDirectionBackward;\n\n        // Properties representing whether trailing spaces inside blocks are completely collapsed (as they are in WebKit,\n        // but not other browsers). Also test whether trailing spaces before <br> elements are collapsed.\n        var trailingSpaceInBlockCollapses = false;\n        var trailingSpaceBeforeBrCollapses = false;\n        var trailingSpaceBeforeBlockCollapses = false;\n        var trailingSpaceBeforeLineBreakInPreLineCollapses = true;\n\n        (function() {\n            var el = dom.createTestElement(document, \"<p>1 </p><p></p>\", true);\n            var p = el.firstChild;\n            var sel = api.getSelection();\n            sel.collapse(p.lastChild, 2);\n            sel.setStart(p.firstChild, 0);\n            trailingSpaceInBlockCollapses = (\"\" + sel).length == 1;\n\n            el.innerHTML = \"1 <br />\";\n            sel.collapse(el, 2);\n            sel.setStart(el.firstChild, 0);\n            trailingSpaceBeforeBrCollapses = (\"\" + sel).length == 1;\n\n            el.innerHTML = \"1 <p>1</p>\";\n            sel.collapse(el, 2);\n            sel.setStart(el.firstChild, 0);\n            trailingSpaceBeforeBlockCollapses = (\"\" + sel).length == 1;\n\n            dom.removeNode(el);\n            sel.removeAllRanges();\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // This function must create word and non-word tokens for the whole of the text supplied to it\n        function defaultTokenizer(chars, wordOptions) {\n            var word = chars.join(\"\"), result, tokenRanges = [];\n\n            function createTokenRange(start, end, isWord) {\n                tokenRanges.push( { start: start, end: end, isWord: isWord } );\n            }\n\n            // Match words and mark characters\n            var lastWordEnd = 0, wordStart, wordEnd;\n            while ( (result = wordOptions.wordRegex.exec(word)) ) {\n                wordStart = result.index;\n                wordEnd = wordStart + result[0].length;\n\n                // Create token for non-word characters preceding this word\n                if (wordStart > lastWordEnd) {\n                    createTokenRange(lastWordEnd, wordStart, false);\n                }\n\n                // Get trailing space characters for word\n                if (wordOptions.includeTrailingSpace) {\n                    while ( nonLineBreakWhiteSpaceRegex.test(chars[wordEnd]) ) {\n                        ++wordEnd;\n                    }\n                }\n                createTokenRange(wordStart, wordEnd, true);\n                lastWordEnd = wordEnd;\n            }\n\n            // Create token for trailing non-word characters, if any exist\n            if (lastWordEnd < chars.length) {\n                createTokenRange(lastWordEnd, chars.length, false);\n            }\n\n            return tokenRanges;\n        }\n\n        function convertCharRangeToToken(chars, tokenRange) {\n            var tokenChars = chars.slice(tokenRange.start, tokenRange.end);\n            var token = {\n                isWord: tokenRange.isWord,\n                chars: tokenChars,\n                toString: function() {\n                    return tokenChars.join(\"\");\n                }\n            };\n            for (var i = 0, len = tokenChars.length; i < len; ++i) {\n                tokenChars[i].token = token;\n            }\n            return token;\n        }\n\n        function tokenize(chars, wordOptions, tokenizer) {\n            var tokenRanges = tokenizer(chars, wordOptions);\n            var tokens = [];\n            for (var i = 0, tokenRange; tokenRange = tokenRanges[i++]; ) {\n                tokens.push( convertCharRangeToToken(chars, tokenRange) );\n            }\n            return tokens;\n        }\n\n        var defaultCharacterOptions = {\n            includeBlockContentTrailingSpace: true,\n            includeSpaceBeforeBr: true,\n            includeSpaceBeforeBlock: true,\n            includePreLineTrailingSpace: true,\n            ignoreCharacters: \"\"\n        };\n\n        function normalizeIgnoredCharacters(ignoredCharacters) {\n            // Check if character is ignored\n            var ignoredChars = ignoredCharacters || \"\";\n\n            // Normalize ignored characters into a string consisting of characters in ascending order of character code\n            var ignoredCharsArray = (typeof ignoredChars == \"string\") ? ignoredChars.split(\"\") : ignoredChars;\n            ignoredCharsArray.sort(function(char1, char2) {\n                return char1.charCodeAt(0) - char2.charCodeAt(0);\n            });\n\n            /// Convert back to a string and remove duplicates\n            return ignoredCharsArray.join(\"\").replace(/(.)\\1+/g, \"$1\");\n        }\n\n        var defaultCaretCharacterOptions = {\n            includeBlockContentTrailingSpace: !trailingSpaceBeforeLineBreakInPreLineCollapses,\n            includeSpaceBeforeBr: !trailingSpaceBeforeBrCollapses,\n            includeSpaceBeforeBlock: !trailingSpaceBeforeBlockCollapses,\n            includePreLineTrailingSpace: true\n        };\n\n        var defaultWordOptions = {\n            \"en\": {\n                wordRegex: /[a-z0-9]+('[a-z0-9]+)*/gi,\n                includeTrailingSpace: false,\n                tokenizer: defaultTokenizer\n            }\n        };\n\n        var defaultFindOptions = {\n            caseSensitive: false,\n            withinRange: null,\n            wholeWordsOnly: false,\n            wrap: false,\n            direction: \"forward\",\n            wordOptions: null,\n            characterOptions: null\n        };\n\n        var defaultMoveOptions = {\n            wordOptions: null,\n            characterOptions: null\n        };\n\n        var defaultExpandOptions = {\n            wordOptions: null,\n            characterOptions: null,\n            trim: false,\n            trimStart: true,\n            trimEnd: true\n        };\n\n        var defaultWordIteratorOptions = {\n            wordOptions: null,\n            characterOptions: null,\n            direction: \"forward\"\n        };\n\n        function createWordOptions(options) {\n            var lang, defaults;\n            if (!options) {\n                return defaultWordOptions[defaultLanguage];\n            } else {\n                lang = options.language || defaultLanguage;\n                defaults = {};\n                extend(defaults, defaultWordOptions[lang] || defaultWordOptions[defaultLanguage]);\n                extend(defaults, options);\n                return defaults;\n            }\n        }\n\n        function createNestedOptions(optionsParam, defaults) {\n            var options = createOptions(optionsParam, defaults);\n            if (defaults.hasOwnProperty(\"wordOptions\")) {\n                options.wordOptions = createWordOptions(options.wordOptions);\n            }\n            if (defaults.hasOwnProperty(\"characterOptions\")) {\n                options.characterOptions = createOptions(options.characterOptions, defaultCharacterOptions);\n            }\n            return options;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        /* DOM utility functions */\n        var getComputedStyleProperty = dom.getComputedStyleProperty;\n\n        // Create cachable versions of DOM functions\n\n        // Test for old IE's incorrect display properties\n        var tableCssDisplayBlock;\n        (function() {\n            var table = document.createElement(\"table\");\n            var body = getBody(document);\n            body.appendChild(table);\n            tableCssDisplayBlock = (getComputedStyleProperty(table, \"display\") == \"block\");\n            body.removeChild(table);\n        })();\n\n        var defaultDisplayValueForTag = {\n            table: \"table\",\n            caption: \"table-caption\",\n            colgroup: \"table-column-group\",\n            col: \"table-column\",\n            thead: \"table-header-group\",\n            tbody: \"table-row-group\",\n            tfoot: \"table-footer-group\",\n            tr: \"table-row\",\n            td: \"table-cell\",\n            th: \"table-cell\"\n        };\n\n        // Corrects IE's \"block\" value for table-related elements\n        function getComputedDisplay(el, win) {\n            var display = getComputedStyleProperty(el, \"display\", win);\n            var tagName = el.tagName.toLowerCase();\n            return (display == \"block\" &&\n                    tableCssDisplayBlock &&\n                    defaultDisplayValueForTag.hasOwnProperty(tagName)) ?\n                defaultDisplayValueForTag[tagName] : display;\n        }\n\n        function isHidden(node) {\n            var ancestors = getAncestorsAndSelf(node);\n            for (var i = 0, len = ancestors.length; i < len; ++i) {\n                if (ancestors[i].nodeType == 1 && getComputedDisplay(ancestors[i]) == \"none\") {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        function isVisibilityHiddenTextNode(textNode) {\n            var el;\n            return textNode.nodeType == 3 &&\n                (el = textNode.parentNode) &&\n                getComputedStyleProperty(el, \"visibility\") == \"hidden\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n    \n        // \"A block node is either an Element whose \"display\" property does not have\n        // resolved value \"inline\" or \"inline-block\" or \"inline-table\" or \"none\", or a\n        // Document, or a DocumentFragment.\"\n        function isBlockNode(node) {\n            return node &&\n                ((node.nodeType == 1 && !/^(inline(-block|-table)?|none)$/.test(getComputedDisplay(node))) ||\n                node.nodeType == 9 || node.nodeType == 11);\n        }\n\n        function getLastDescendantOrSelf(node) {\n            var lastChild = node.lastChild;\n            return lastChild ? getLastDescendantOrSelf(lastChild) : node;\n        }\n\n        function containsPositions(node) {\n            return dom.isCharacterDataNode(node) ||\n                !/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(node.nodeName);\n        }\n\n        function getAncestors(node) {\n            var ancestors = [];\n            while (node.parentNode) {\n                ancestors.unshift(node.parentNode);\n                node = node.parentNode;\n            }\n            return ancestors;\n        }\n\n        function getAncestorsAndSelf(node) {\n            return getAncestors(node).concat([node]);\n        }\n\n        function nextNodeDescendants(node) {\n            while (node && !node.nextSibling) {\n                node = node.parentNode;\n            }\n            if (!node) {\n                return null;\n            }\n            return node.nextSibling;\n        }\n\n        function nextNode(node, excludeChildren) {\n            if (!excludeChildren && node.hasChildNodes()) {\n                return node.firstChild;\n            }\n            return nextNodeDescendants(node);\n        }\n\n        function previousNode(node) {\n            var previous = node.previousSibling;\n            if (previous) {\n                node = previous;\n                while (node.hasChildNodes()) {\n                    node = node.lastChild;\n                }\n                return node;\n            }\n            var parent = node.parentNode;\n            if (parent && parent.nodeType == 1) {\n                return parent;\n            }\n            return null;\n        }\n\n        // Adpated from Aryeh's code.\n        // \"A whitespace node is either a Text node whose data is the empty string; or\n        // a Text node whose data consists only of one or more tabs (0x0009), line\n        // feeds (0x000A), carriage returns (0x000D), and/or spaces (0x0020), and whose\n        // parent is an Element whose resolved value for \"white-space\" is \"normal\" or\n        // \"nowrap\"; or a Text node whose data consists only of one or more tabs\n        // (0x0009), carriage returns (0x000D), and/or spaces (0x0020), and whose\n        // parent is an Element whose resolved value for \"white-space\" is \"pre-line\".\"\n        function isWhitespaceNode(node) {\n            if (!node || node.nodeType != 3) {\n                return false;\n            }\n            var text = node.data;\n            if (text === \"\") {\n                return true;\n            }\n            var parent = node.parentNode;\n            if (!parent || parent.nodeType != 1) {\n                return false;\n            }\n            var computedWhiteSpace = getComputedStyleProperty(node.parentNode, \"whiteSpace\");\n\n            return (/^[\\t\\n\\r ]+$/.test(text) && /^(normal|nowrap)$/.test(computedWhiteSpace)) ||\n                (/^[\\t\\r ]+$/.test(text) && computedWhiteSpace == \"pre-line\");\n        }\n\n        // Adpated from Aryeh's code.\n        // \"node is a collapsed whitespace node if the following algorithm returns\n        // true:\"\n        function isCollapsedWhitespaceNode(node) {\n            // \"If node's data is the empty string, return true.\"\n            if (node.data === \"\") {\n                return true;\n            }\n\n            // \"If node is not a whitespace node, return false.\"\n            if (!isWhitespaceNode(node)) {\n                return false;\n            }\n\n            // \"Let ancestor be node's parent.\"\n            var ancestor = node.parentNode;\n\n            // \"If ancestor is null, return true.\"\n            if (!ancestor) {\n                return true;\n            }\n\n            // \"If the \"display\" property of some ancestor of node has resolved value \"none\", return true.\"\n            if (isHidden(node)) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function isCollapsedNode(node) {\n            var type = node.nodeType;\n            return type == 7 /* PROCESSING_INSTRUCTION */ ||\n                type == 8 /* COMMENT */ ||\n                isHidden(node) ||\n                /^(script|style)$/i.test(node.nodeName) ||\n                isVisibilityHiddenTextNode(node) ||\n                isCollapsedWhitespaceNode(node);\n        }\n\n        function isIgnoredNode(node, win) {\n            var type = node.nodeType;\n            return type == 7 /* PROCESSING_INSTRUCTION */ ||\n                type == 8 /* COMMENT */ ||\n                (type == 1 && getComputedDisplay(node, win) == \"none\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Possibly overengineered caching system to prevent repeated DOM calls slowing everything down\n\n        function Cache() {\n            this.store = {};\n        }\n\n        Cache.prototype = {\n            get: function(key) {\n                return this.store.hasOwnProperty(key) ? this.store[key] : null;\n            },\n\n            set: function(key, value) {\n                return this.store[key] = value;\n            }\n        };\n\n        var cachedCount = 0, uncachedCount = 0;\n\n        function createCachingGetter(methodName, func, objProperty) {\n            return function(args) {\n                var cache = this.cache;\n                if (cache.hasOwnProperty(methodName)) {\n                    cachedCount++;\n                    return cache[methodName];\n                } else {\n                    uncachedCount++;\n                    var value = func.call(this, objProperty ? this[objProperty] : this, args);\n                    cache[methodName] = value;\n                    return value;\n                }\n            };\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function NodeWrapper(node, session) {\n            this.node = node;\n            this.session = session;\n            this.cache = new Cache();\n            this.positions = new Cache();\n        }\n\n        var nodeProto = {\n            getPosition: function(offset) {\n                var positions = this.positions;\n                return positions.get(offset) || positions.set(offset, new Position(this, offset));\n            },\n\n            toString: function() {\n                return \"[NodeWrapper(\" + dom.inspectNode(this.node) + \")]\";\n            }\n        };\n\n        NodeWrapper.prototype = nodeProto;\n\n        var EMPTY = \"EMPTY\",\n            NON_SPACE = \"NON_SPACE\",\n            UNCOLLAPSIBLE_SPACE = \"UNCOLLAPSIBLE_SPACE\",\n            COLLAPSIBLE_SPACE = \"COLLAPSIBLE_SPACE\",\n            TRAILING_SPACE_BEFORE_BLOCK = \"TRAILING_SPACE_BEFORE_BLOCK\",\n            TRAILING_SPACE_IN_BLOCK = \"TRAILING_SPACE_IN_BLOCK\",\n            TRAILING_SPACE_BEFORE_BR = \"TRAILING_SPACE_BEFORE_BR\",\n            PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK = \"PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK\",\n            TRAILING_LINE_BREAK_AFTER_BR = \"TRAILING_LINE_BREAK_AFTER_BR\",\n            INCLUDED_TRAILING_LINE_BREAK_AFTER_BR = \"INCLUDED_TRAILING_LINE_BREAK_AFTER_BR\";\n\n        extend(nodeProto, {\n            isCharacterDataNode: createCachingGetter(\"isCharacterDataNode\", dom.isCharacterDataNode, \"node\"),\n            getNodeIndex: createCachingGetter(\"nodeIndex\", dom.getNodeIndex, \"node\"),\n            getLength: createCachingGetter(\"nodeLength\", dom.getNodeLength, \"node\"),\n            containsPositions: createCachingGetter(\"containsPositions\", containsPositions, \"node\"),\n            isWhitespace: createCachingGetter(\"isWhitespace\", isWhitespaceNode, \"node\"),\n            isCollapsedWhitespace: createCachingGetter(\"isCollapsedWhitespace\", isCollapsedWhitespaceNode, \"node\"),\n            getComputedDisplay: createCachingGetter(\"computedDisplay\", getComputedDisplay, \"node\"),\n            isCollapsed: createCachingGetter(\"collapsed\", isCollapsedNode, \"node\"),\n            isIgnored: createCachingGetter(\"ignored\", isIgnoredNode, \"node\"),\n            next: createCachingGetter(\"nextPos\", nextNode, \"node\"),\n            previous: createCachingGetter(\"previous\", previousNode, \"node\"),\n\n            getTextNodeInfo: createCachingGetter(\"textNodeInfo\", function(textNode) {\n                var spaceRegex = null, collapseSpaces = false;\n                var cssWhitespace = getComputedStyleProperty(textNode.parentNode, \"whiteSpace\");\n                var preLine = (cssWhitespace == \"pre-line\");\n                if (preLine) {\n                    spaceRegex = spacesMinusLineBreaksRegex;\n                    collapseSpaces = true;\n                } else if (cssWhitespace == \"normal\" || cssWhitespace == \"nowrap\") {\n                    spaceRegex = spacesRegex;\n                    collapseSpaces = true;\n                }\n\n                return {\n                    node: textNode,\n                    text: textNode.data,\n                    spaceRegex: spaceRegex,\n                    collapseSpaces: collapseSpaces,\n                    preLine: preLine\n                };\n            }, \"node\"),\n\n            hasInnerText: createCachingGetter(\"hasInnerText\", function(el, backward) {\n                var session = this.session;\n                var posAfterEl = session.getPosition(el.parentNode, this.getNodeIndex() + 1);\n                var firstPosInEl = session.getPosition(el, 0);\n\n                var pos = backward ? posAfterEl : firstPosInEl;\n                var endPos = backward ? firstPosInEl : posAfterEl;\n\n                /*\n                 <body><p>X  </p><p>Y</p></body>\n\n                 Positions:\n\n                 body:0:\"\"\n                 p:0:\"\"\n                 text:0:\"\"\n                 text:1:\"X\"\n                 text:2:TRAILING_SPACE_IN_BLOCK\n                 text:3:COLLAPSED_SPACE\n                 p:1:\"\"\n                 body:1:\"\\n\"\n                 p:0:\"\"\n                 text:0:\"\"\n                 text:1:\"Y\"\n\n                 A character is a TRAILING_SPACE_IN_BLOCK iff:\n\n                 - There is no uncollapsed character after it within the visible containing block element\n\n                 A character is a TRAILING_SPACE_BEFORE_BR iff:\n\n                 - There is no uncollapsed character after it preceding a <br> element\n\n                 An element has inner text iff\n\n                 - It is not hidden\n                 - It contains an uncollapsed character\n\n                 All trailing spaces (pre-line, before <br>, end of block) require definite non-empty characters to render.\n                 */\n\n                while (pos !== endPos) {\n                    pos.prepopulateChar();\n                    if (pos.isDefinitelyNonEmpty()) {\n                        return true;\n                    }\n                    pos = backward ? pos.previousVisible() : pos.nextVisible();\n                }\n\n                return false;\n            }, \"node\"),\n\n            isRenderedBlock: createCachingGetter(\"isRenderedBlock\", function(el) {\n                // Ensure that a block element containing a <br> is considered to have inner text\n                var brs = el.getElementsByTagName(\"br\");\n                for (var i = 0, len = brs.length; i < len; ++i) {\n                    if (!isCollapsedNode(brs[i])) {\n                        return true;\n                    }\n                }\n                return this.hasInnerText();\n            }, \"node\"),\n\n            getTrailingSpace: createCachingGetter(\"trailingSpace\", function(el) {\n                if (el.tagName.toLowerCase() == \"br\") {\n                    return \"\";\n                } else {\n                    switch (this.getComputedDisplay()) {\n                        case \"inline\":\n                            var child = el.lastChild;\n                            while (child) {\n                                if (!isIgnoredNode(child)) {\n                                    return (child.nodeType == 1) ? this.session.getNodeWrapper(child).getTrailingSpace() : \"\";\n                                }\n                                child = child.previousSibling;\n                            }\n                            break;\n                        case \"inline-block\":\n                        case \"inline-table\":\n                        case \"none\":\n                        case \"table-column\":\n                        case \"table-column-group\":\n                            break;\n                        case \"table-cell\":\n                            return \"\\t\";\n                        default:\n                            return this.isRenderedBlock(true) ? \"\\n\" : \"\";\n                    }\n                }\n                return \"\";\n            }, \"node\"),\n\n            getLeadingSpace: createCachingGetter(\"leadingSpace\", function(el) {\n                switch (this.getComputedDisplay()) {\n                    case \"inline\":\n                    case \"inline-block\":\n                    case \"inline-table\":\n                    case \"none\":\n                    case \"table-column\":\n                    case \"table-column-group\":\n                    case \"table-cell\":\n                        break;\n                    default:\n                        return this.isRenderedBlock(false) ? \"\\n\" : \"\";\n                }\n                return \"\";\n            }, \"node\")\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function Position(nodeWrapper, offset) {\n            this.offset = offset;\n            this.nodeWrapper = nodeWrapper;\n            this.node = nodeWrapper.node;\n            this.session = nodeWrapper.session;\n            this.cache = new Cache();\n        }\n\n        function inspectPosition() {\n            return \"[Position(\" + dom.inspectNode(this.node) + \":\" + this.offset + \")]\";\n        }\n\n        var positionProto = {\n            character: \"\",\n            characterType: EMPTY,\n            isBr: false,\n\n            /*\n            This method:\n            - Fully populates positions that have characters that can be determined independently of any other characters.\n            - Populates most types of space positions with a provisional character. The character is finalized later.\n             */\n            prepopulateChar: function() {\n                var pos = this;\n                if (!pos.prepopulatedChar) {\n                    var node = pos.node, offset = pos.offset;\n                    var visibleChar = \"\", charType = EMPTY;\n                    var finalizedChar = false;\n                    if (offset > 0) {\n                        if (node.nodeType == 3) {\n                            var text = node.data;\n                            var textChar = text.charAt(offset - 1);\n\n                            var nodeInfo = pos.nodeWrapper.getTextNodeInfo();\n                            var spaceRegex = nodeInfo.spaceRegex;\n                            if (nodeInfo.collapseSpaces) {\n                                if (spaceRegex.test(textChar)) {\n                                    // \"If the character at position is from set, append a single space (U+0020) to newdata and advance\n                                    // position until the character at position is not from set.\"\n\n                                    // We also need to check for the case where we're in a pre-line and we have a space preceding a\n                                    // line break, because such spaces are collapsed in some browsers\n                                    if (offset > 1 && spaceRegex.test(text.charAt(offset - 2))) {\n                                    } else if (nodeInfo.preLine && text.charAt(offset) === \"\\n\") {\n                                        visibleChar = \" \";\n                                        charType = PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK;\n                                    } else {\n                                        visibleChar = \" \";\n                                        //pos.checkForFollowingLineBreak = true;\n                                        charType = COLLAPSIBLE_SPACE;\n                                    }\n                                } else {\n                                    visibleChar = textChar;\n                                    charType = NON_SPACE;\n                                    finalizedChar = true;\n                                }\n                            } else {\n                                visibleChar = textChar;\n                                charType = UNCOLLAPSIBLE_SPACE;\n                                finalizedChar = true;\n                            }\n                        } else {\n                            var nodePassed = node.childNodes[offset - 1];\n                            if (nodePassed && nodePassed.nodeType == 1 && !isCollapsedNode(nodePassed)) {\n                                if (nodePassed.tagName.toLowerCase() == \"br\") {\n                                    visibleChar = \"\\n\";\n                                    pos.isBr = true;\n                                    charType = COLLAPSIBLE_SPACE;\n                                    finalizedChar = false;\n                                } else {\n                                    pos.checkForTrailingSpace = true;\n                                }\n                            }\n\n                            // Check the leading space of the next node for the case when a block element follows an inline\n                            // element or text node. In that case, there is an implied line break between the two nodes.\n                            if (!visibleChar) {\n                                var nextNode = node.childNodes[offset];\n                                if (nextNode && nextNode.nodeType == 1 && !isCollapsedNode(nextNode)) {\n                                    pos.checkForLeadingSpace = true;\n                                }\n                            }\n                        }\n                    }\n\n                    pos.prepopulatedChar = true;\n                    pos.character = visibleChar;\n                    pos.characterType = charType;\n                    pos.isCharInvariant = finalizedChar;\n                }\n            },\n\n            isDefinitelyNonEmpty: function() {\n                var charType = this.characterType;\n                return charType == NON_SPACE || charType == UNCOLLAPSIBLE_SPACE;\n            },\n\n            // Resolve leading and trailing spaces, which may involve prepopulating other positions\n            resolveLeadingAndTrailingSpaces: function() {\n                if (!this.prepopulatedChar) {\n                    this.prepopulateChar();\n                }\n                if (this.checkForTrailingSpace) {\n                    var trailingSpace = this.session.getNodeWrapper(this.node.childNodes[this.offset - 1]).getTrailingSpace();\n                    if (trailingSpace) {\n                        this.isTrailingSpace = true;\n                        this.character = trailingSpace;\n                        this.characterType = COLLAPSIBLE_SPACE;\n                    }\n                    this.checkForTrailingSpace = false;\n                }\n                if (this.checkForLeadingSpace) {\n                    var leadingSpace = this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();\n                    if (leadingSpace) {\n                        this.isLeadingSpace = true;\n                        this.character = leadingSpace;\n                        this.characterType = COLLAPSIBLE_SPACE;\n                    }\n                    this.checkForLeadingSpace = false;\n                }\n            },\n\n            getPrecedingUncollapsedPosition: function(characterOptions) {\n                var pos = this, character;\n                while ( (pos = pos.previousVisible()) ) {\n                    character = pos.getCharacter(characterOptions);\n                    if (character !== \"\") {\n                        return pos;\n                    }\n                }\n\n                return null;\n            },\n\n            getCharacter: function(characterOptions) {\n                this.resolveLeadingAndTrailingSpaces();\n\n                var thisChar = this.character, returnChar;\n\n                // Check if character is ignored\n                var ignoredChars = normalizeIgnoredCharacters(characterOptions.ignoreCharacters);\n                var isIgnoredCharacter = (thisChar !== \"\" && ignoredChars.indexOf(thisChar) > -1);\n\n                // Check if this position's  character is invariant (i.e. not dependent on character options) and return it\n                // if so\n                if (this.isCharInvariant) {\n                    returnChar = isIgnoredCharacter ? \"\" : thisChar;\n                    return returnChar;\n                }\n\n                var cacheKey = [\"character\", characterOptions.includeSpaceBeforeBr, characterOptions.includeBlockContentTrailingSpace, characterOptions.includePreLineTrailingSpace, ignoredChars].join(\"_\");\n                var cachedChar = this.cache.get(cacheKey);\n                if (cachedChar !== null) {\n                    return cachedChar;\n                }\n\n                // We need to actually get the character now\n                var character = \"\";\n                var collapsible = (this.characterType == COLLAPSIBLE_SPACE);\n\n                var nextPos, previousPos;\n                var gotPreviousPos = false;\n                var pos = this;\n\n                function getPreviousPos() {\n                    if (!gotPreviousPos) {\n                        previousPos = pos.getPrecedingUncollapsedPosition(characterOptions);\n                        gotPreviousPos = true;\n                    }\n                    return previousPos;\n                }\n\n                // Disallow a collapsible space that is followed by a line break or is the last character\n                if (collapsible) {\n                    // Allow a trailing space that we've previously determined should be included\n                    if (this.type == INCLUDED_TRAILING_LINE_BREAK_AFTER_BR) {\n                        character = \"\\n\";\n                    }\n                    // Disallow a collapsible space that follows a trailing space or line break, or is the first character,\n                    // or follows a collapsible included space\n                    else if (thisChar == \" \" &&\n                            (!getPreviousPos() || previousPos.isTrailingSpace || previousPos.character == \"\\n\" || (previousPos.character == \" \" && previousPos.characterType == COLLAPSIBLE_SPACE))) {\n                    }\n                    // Allow a leading line break unless it follows a line break\n                    else if (thisChar == \"\\n\" && this.isLeadingSpace) {\n                        if (getPreviousPos() && previousPos.character != \"\\n\") {\n                            character = \"\\n\";\n                        } else {\n                        }\n                    } else {\n                        nextPos = this.nextUncollapsed();\n                        if (nextPos) {\n                            if (nextPos.isBr) {\n                                this.type = TRAILING_SPACE_BEFORE_BR;\n                            } else if (nextPos.isTrailingSpace && nextPos.character == \"\\n\") {\n                                this.type = TRAILING_SPACE_IN_BLOCK;\n                            } else if (nextPos.isLeadingSpace && nextPos.character == \"\\n\") {\n                                this.type = TRAILING_SPACE_BEFORE_BLOCK;\n                            }\n\n                            if (nextPos.character == \"\\n\") {\n                                if (this.type == TRAILING_SPACE_BEFORE_BR && !characterOptions.includeSpaceBeforeBr) {\n                                } else if (this.type == TRAILING_SPACE_BEFORE_BLOCK && !characterOptions.includeSpaceBeforeBlock) {\n                                } else if (this.type == TRAILING_SPACE_IN_BLOCK && nextPos.isTrailingSpace && !characterOptions.includeBlockContentTrailingSpace) {\n                                } else if (this.type == PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK && nextPos.type == NON_SPACE && !characterOptions.includePreLineTrailingSpace) {\n                                } else if (thisChar == \"\\n\") {\n                                    if (nextPos.isTrailingSpace) {\n                                        if (this.isTrailingSpace) {\n                                        } else if (this.isBr) {\n                                            nextPos.type = TRAILING_LINE_BREAK_AFTER_BR;\n\n                                            if (getPreviousPos() && previousPos.isLeadingSpace && !previousPos.isTrailingSpace && previousPos.character == \"\\n\") {\n                                                nextPos.character = \"\";\n                                            } else {\n                                                nextPos.type = INCLUDED_TRAILING_LINE_BREAK_AFTER_BR;\n                                            }\n                                        }\n                                    } else {\n                                        character = \"\\n\";\n                                    }\n                                } else if (thisChar == \" \") {\n                                    character = \" \";\n                                } else {\n                                }\n                            } else {\n                                character = thisChar;\n                            }\n                        } else {\n                        }\n                    }\n                }\n\n                if (ignoredChars.indexOf(character) > -1) {\n                    character = \"\";\n                }\n\n\n                this.cache.set(cacheKey, character);\n\n                return character;\n            },\n\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset === pos.offset;\n            },\n\n            inspect: inspectPosition,\n\n            toString: function() {\n                return this.character;\n            }\n        };\n\n        Position.prototype = positionProto;\n\n        extend(positionProto, {\n            next: createCachingGetter(\"nextPos\", function(pos) {\n                var nodeWrapper = pos.nodeWrapper, node = pos.node, offset = pos.offset, session = nodeWrapper.session;\n                if (!node) {\n                    return null;\n                }\n                var nextNode, nextOffset, child;\n                if (offset == nodeWrapper.getLength()) {\n                    // Move onto the next node\n                    nextNode = node.parentNode;\n                    nextOffset = nextNode ? nodeWrapper.getNodeIndex() + 1 : 0;\n                } else {\n                    if (nodeWrapper.isCharacterDataNode()) {\n                        nextNode = node;\n                        nextOffset = offset + 1;\n                    } else {\n                        child = node.childNodes[offset];\n                        // Go into the children next, if children there are\n                        if (session.getNodeWrapper(child).containsPositions()) {\n                            nextNode = child;\n                            nextOffset = 0;\n                        } else {\n                            nextNode = node;\n                            nextOffset = offset + 1;\n                        }\n                    }\n                }\n\n                return nextNode ? session.getPosition(nextNode, nextOffset) : null;\n            }),\n\n            previous: createCachingGetter(\"previous\", function(pos) {\n                var nodeWrapper = pos.nodeWrapper, node = pos.node, offset = pos.offset, session = nodeWrapper.session;\n                var previousNode, previousOffset, child;\n                if (offset == 0) {\n                    previousNode = node.parentNode;\n                    previousOffset = previousNode ? nodeWrapper.getNodeIndex() : 0;\n                } else {\n                    if (nodeWrapper.isCharacterDataNode()) {\n                        previousNode = node;\n                        previousOffset = offset - 1;\n                    } else {\n                        child = node.childNodes[offset - 1];\n                        // Go into the children next, if children there are\n                        if (session.getNodeWrapper(child).containsPositions()) {\n                            previousNode = child;\n                            previousOffset = dom.getNodeLength(child);\n                        } else {\n                            previousNode = node;\n                            previousOffset = offset - 1;\n                        }\n                    }\n                }\n                return previousNode ? session.getPosition(previousNode, previousOffset) : null;\n            }),\n\n            /*\n             Next and previous position moving functions that filter out\n\n             - Hidden (CSS visibility/display) elements\n             - Script and style elements\n             */\n            nextVisible: createCachingGetter(\"nextVisible\", function(pos) {\n                var next = pos.next();\n                if (!next) {\n                    return null;\n                }\n                var nodeWrapper = next.nodeWrapper, node = next.node;\n                var newPos = next;\n                if (nodeWrapper.isCollapsed()) {\n                    // We're skipping this node and all its descendants\n                    newPos = nodeWrapper.session.getPosition(node.parentNode, nodeWrapper.getNodeIndex() + 1);\n                }\n                return newPos;\n            }),\n\n            nextUncollapsed: createCachingGetter(\"nextUncollapsed\", function(pos) {\n                var nextPos = pos;\n                while ( (nextPos = nextPos.nextVisible()) ) {\n                    nextPos.resolveLeadingAndTrailingSpaces();\n                    if (nextPos.character !== \"\") {\n                        return nextPos;\n                    }\n                }\n                return null;\n            }),\n\n            previousVisible: createCachingGetter(\"previousVisible\", function(pos) {\n                var previous = pos.previous();\n                if (!previous) {\n                    return null;\n                }\n                var nodeWrapper = previous.nodeWrapper, node = previous.node;\n                var newPos = previous;\n                if (nodeWrapper.isCollapsed()) {\n                    // We're skipping this node and all its descendants\n                    newPos = nodeWrapper.session.getPosition(node.parentNode, nodeWrapper.getNodeIndex());\n                }\n                return newPos;\n            })\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var currentSession = null;\n\n        var Session = (function() {\n            function createWrapperCache(nodeProperty) {\n                var cache = new Cache();\n\n                return {\n                    get: function(node) {\n                        var wrappersByProperty = cache.get(node[nodeProperty]);\n                        if (wrappersByProperty) {\n                            for (var i = 0, wrapper; wrapper = wrappersByProperty[i++]; ) {\n                                if (wrapper.node === node) {\n                                    return wrapper;\n                                }\n                            }\n                        }\n                        return null;\n                    },\n\n                    set: function(nodeWrapper) {\n                        var property = nodeWrapper.node[nodeProperty];\n                        var wrappersByProperty = cache.get(property) || cache.set(property, []);\n                        wrappersByProperty.push(nodeWrapper);\n                    }\n                };\n            }\n\n            var uniqueIDSupported = util.isHostProperty(document.documentElement, \"uniqueID\");\n\n            function Session() {\n                this.initCaches();\n            }\n\n            Session.prototype = {\n                initCaches: function() {\n                    this.elementCache = uniqueIDSupported ? (function() {\n                        var elementsCache = new Cache();\n\n                        return {\n                            get: function(el) {\n                                return elementsCache.get(el.uniqueID);\n                            },\n\n                            set: function(elWrapper) {\n                                elementsCache.set(elWrapper.node.uniqueID, elWrapper);\n                            }\n                        };\n                    })() : createWrapperCache(\"tagName\");\n\n                    // Store text nodes keyed by data, although we may need to truncate this\n                    this.textNodeCache = createWrapperCache(\"data\");\n                    this.otherNodeCache = createWrapperCache(\"nodeName\");\n                },\n\n                getNodeWrapper: function(node) {\n                    var wrapperCache;\n                    switch (node.nodeType) {\n                        case 1:\n                            wrapperCache = this.elementCache;\n                            break;\n                        case 3:\n                            wrapperCache = this.textNodeCache;\n                            break;\n                        default:\n                            wrapperCache = this.otherNodeCache;\n                            break;\n                    }\n\n                    var wrapper = wrapperCache.get(node);\n                    if (!wrapper) {\n                        wrapper = new NodeWrapper(node, this);\n                        wrapperCache.set(wrapper);\n                    }\n                    return wrapper;\n                },\n\n                getPosition: function(node, offset) {\n                    return this.getNodeWrapper(node).getPosition(offset);\n                },\n\n                getRangeBoundaryPosition: function(range, isStart) {\n                    var prefix = isStart ? \"start\" : \"end\";\n                    return this.getPosition(range[prefix + \"Container\"], range[prefix + \"Offset\"]);\n                },\n\n                detach: function() {\n                    this.elementCache = this.textNodeCache = this.otherNodeCache = null;\n                }\n            };\n\n            return Session;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function startSession() {\n            endSession();\n            return (currentSession = new Session());\n        }\n\n        function getSession() {\n            return currentSession || startSession();\n        }\n\n        function endSession() {\n            if (currentSession) {\n                currentSession.detach();\n            }\n            currentSession = null;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the rangy.dom utility object\n\n        extend(dom, {\n            nextNode: nextNode,\n            previousNode: previousNode\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function createCharacterIterator(startPos, backward, endPos, characterOptions) {\n\n            // Adjust the end position to ensure that it is actually reached\n            if (endPos) {\n                if (backward) {\n                    if (isCollapsedNode(endPos.node)) {\n                        endPos = startPos.previousVisible();\n                    }\n                } else {\n                    if (isCollapsedNode(endPos.node)) {\n                        endPos = endPos.nextVisible();\n                    }\n                }\n            }\n\n            var pos = startPos, finished = false;\n\n            function next() {\n                var charPos = null;\n                if (backward) {\n                    charPos = pos;\n                    if (!finished) {\n                        pos = pos.previousVisible();\n                        finished = !pos || (endPos && pos.equals(endPos));\n                    }\n                } else {\n                    if (!finished) {\n                        charPos = pos = pos.nextVisible();\n                        finished = !pos || (endPos && pos.equals(endPos));\n                    }\n                }\n                if (finished) {\n                    pos = null;\n                }\n                return charPos;\n            }\n\n            var previousTextPos, returnPreviousTextPos = false;\n\n            return {\n                next: function() {\n                    if (returnPreviousTextPos) {\n                        returnPreviousTextPos = false;\n                        return previousTextPos;\n                    } else {\n                        var pos, character;\n                        while ( (pos = next()) ) {\n                            character = pos.getCharacter(characterOptions);\n                            if (character) {\n                                previousTextPos = pos;\n                                return pos;\n                            }\n                        }\n                        return null;\n                    }\n                },\n\n                rewind: function() {\n                    if (previousTextPos) {\n                        returnPreviousTextPos = true;\n                    } else {\n                        throw module.createError(\"createCharacterIterator: cannot rewind. Only one position can be rewound.\");\n                    }\n                },\n\n                dispose: function() {\n                    startPos = endPos = null;\n                }\n            };\n        }\n\n        var arrayIndexOf = Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val);\n            } :\n            function(arr, val) {\n                for (var i = 0, len = arr.length; i < len; ++i) {\n                    if (arr[i] === val) {\n                        return i;\n                    }\n                }\n                return -1;\n            };\n\n        // Provides a pair of iterators over text positions, tokenized. Transparently requests more text when next()\n        // is called and there is no more tokenized text\n        function createTokenizedTextProvider(pos, characterOptions, wordOptions) {\n            var forwardIterator = createCharacterIterator(pos, false, null, characterOptions);\n            var backwardIterator = createCharacterIterator(pos, true, null, characterOptions);\n            var tokenizer = wordOptions.tokenizer;\n\n            // Consumes a word and the whitespace beyond it\n            function consumeWord(forward) {\n                var pos, textChar;\n                var newChars = [], it = forward ? forwardIterator : backwardIterator;\n\n                var passedWordBoundary = false, insideWord = false;\n\n                while ( (pos = it.next()) ) {\n                    textChar = pos.character;\n\n\n                    if (allWhiteSpaceRegex.test(textChar)) {\n                        if (insideWord) {\n                            insideWord = false;\n                            passedWordBoundary = true;\n                        }\n                    } else {\n                        if (passedWordBoundary) {\n                            it.rewind();\n                            break;\n                        } else {\n                            insideWord = true;\n                        }\n                    }\n                    newChars.push(pos);\n                }\n\n\n                return newChars;\n            }\n\n            // Get initial word surrounding initial position and tokenize it\n            var forwardChars = consumeWord(true);\n            var backwardChars = consumeWord(false).reverse();\n            var tokens = tokenize(backwardChars.concat(forwardChars), wordOptions, tokenizer);\n\n            // Create initial token buffers\n            var forwardTokensBuffer = forwardChars.length ?\n                tokens.slice(arrayIndexOf(tokens, forwardChars[0].token)) : [];\n\n            var backwardTokensBuffer = backwardChars.length ?\n                tokens.slice(0, arrayIndexOf(tokens, backwardChars.pop().token) + 1) : [];\n\n            function inspectBuffer(buffer) {\n                var textPositions = [\"[\" + buffer.length + \"]\"];\n                for (var i = 0; i < buffer.length; ++i) {\n                    textPositions.push(\"(word: \" + buffer[i] + \", is word: \" + buffer[i].isWord + \")\");\n                }\n                return textPositions;\n            }\n\n\n            return {\n                nextEndToken: function() {\n                    var lastToken, forwardChars;\n\n                    // If we're down to the last token, consume character chunks until we have a word or run out of\n                    // characters to consume\n                    while ( forwardTokensBuffer.length == 1 &&\n                        !(lastToken = forwardTokensBuffer[0]).isWord &&\n                        (forwardChars = consumeWord(true)).length > 0) {\n\n                        // Merge trailing non-word into next word and tokenize\n                        forwardTokensBuffer = tokenize(lastToken.chars.concat(forwardChars), wordOptions, tokenizer);\n                    }\n\n                    return forwardTokensBuffer.shift();\n                },\n\n                previousStartToken: function() {\n                    var lastToken, backwardChars;\n\n                    // If we're down to the last token, consume character chunks until we have a word or run out of\n                    // characters to consume\n                    while ( backwardTokensBuffer.length == 1 &&\n                        !(lastToken = backwardTokensBuffer[0]).isWord &&\n                        (backwardChars = consumeWord(false)).length > 0) {\n\n                        // Merge leading non-word into next word and tokenize\n                        backwardTokensBuffer = tokenize(backwardChars.reverse().concat(lastToken.chars), wordOptions, tokenizer);\n                    }\n\n                    return backwardTokensBuffer.pop();\n                },\n\n                dispose: function() {\n                    forwardIterator.dispose();\n                    backwardIterator.dispose();\n                    forwardTokensBuffer = backwardTokensBuffer = null;\n                }\n            };\n        }\n\n        function movePositionBy(pos, unit, count, characterOptions, wordOptions) {\n            var unitsMoved = 0, currentPos, newPos = pos, charIterator, nextPos, absCount = Math.abs(count), token;\n            if (count !== 0) {\n                var backward = (count < 0);\n\n                switch (unit) {\n                    case CHARACTER:\n                        charIterator = createCharacterIterator(pos, backward, null, characterOptions);\n                        while ( (currentPos = charIterator.next()) && unitsMoved < absCount ) {\n                            ++unitsMoved;\n                            newPos = currentPos;\n                        }\n                        nextPos = currentPos;\n                        charIterator.dispose();\n                        break;\n                    case WORD:\n                        var tokenizedTextProvider = createTokenizedTextProvider(pos, characterOptions, wordOptions);\n                        var next = backward ? tokenizedTextProvider.previousStartToken : tokenizedTextProvider.nextEndToken;\n\n                        while ( (token = next()) && unitsMoved < absCount ) {\n                            if (token.isWord) {\n                                ++unitsMoved;\n                                newPos = backward ? token.chars[0] : token.chars[token.chars.length - 1];\n                            }\n                        }\n                        break;\n                    default:\n                        throw new Error(\"movePositionBy: unit '\" + unit + \"' not implemented\");\n                }\n\n                // Perform any necessary position tweaks\n                if (backward) {\n                    newPos = newPos.previousVisible();\n                    unitsMoved = -unitsMoved;\n                } else if (newPos && newPos.isLeadingSpace && !newPos.isTrailingSpace) {\n                    // Tweak the position for the case of a leading space. The problem is that an uncollapsed leading space\n                    // before a block element (for example, the line break between \"1\" and \"2\" in the following HTML:\n                    // \"1<p>2</p>\") is considered to be attached to the position immediately before the block element, which\n                    // corresponds with a different selection position in most browsers from the one we want (i.e. at the\n                    // start of the contents of the block element). We get round this by advancing the position returned to\n                    // the last possible equivalent visible position.\n                    if (unit == WORD) {\n                        charIterator = createCharacterIterator(pos, false, null, characterOptions);\n                        nextPos = charIterator.next();\n                        charIterator.dispose();\n                    }\n                    if (nextPos) {\n                        newPos = nextPos.previousVisible();\n                    }\n                }\n            }\n\n\n            return {\n                position: newPos,\n                unitsMoved: unitsMoved\n            };\n        }\n\n        function createRangeCharacterIterator(session, range, characterOptions, backward) {\n            var rangeStart = session.getRangeBoundaryPosition(range, true);\n            var rangeEnd = session.getRangeBoundaryPosition(range, false);\n            var itStart = backward ? rangeEnd : rangeStart;\n            var itEnd = backward ? rangeStart : rangeEnd;\n\n            return createCharacterIterator(itStart, !!backward, itEnd, characterOptions);\n        }\n\n        function getRangeCharacters(session, range, characterOptions) {\n\n            var chars = [], it = createRangeCharacterIterator(session, range, characterOptions), pos;\n            while ( (pos = it.next()) ) {\n                chars.push(pos);\n            }\n\n            it.dispose();\n            return chars;\n        }\n\n        function isWholeWord(startPos, endPos, wordOptions) {\n            var range = api.createRange(startPos.node);\n            range.setStartAndEnd(startPos.node, startPos.offset, endPos.node, endPos.offset);\n            return !range.expand(\"word\", { wordOptions: wordOptions });\n        }\n\n        function findTextFromPosition(initialPos, searchTerm, isRegex, searchScopeRange, findOptions) {\n            var backward = isDirectionBackward(findOptions.direction);\n            var it = createCharacterIterator(\n                initialPos,\n                backward,\n                initialPos.session.getRangeBoundaryPosition(searchScopeRange, backward),\n                findOptions.characterOptions\n            );\n            var text = \"\", chars = [], pos, currentChar, matchStartIndex, matchEndIndex;\n            var result, insideRegexMatch;\n            var returnValue = null;\n\n            function handleMatch(startIndex, endIndex) {\n                var startPos = chars[startIndex].previousVisible();\n                var endPos = chars[endIndex - 1];\n                var valid = (!findOptions.wholeWordsOnly || isWholeWord(startPos, endPos, findOptions.wordOptions));\n\n                return {\n                    startPos: startPos,\n                    endPos: endPos,\n                    valid: valid\n                };\n            }\n\n            while ( (pos = it.next()) ) {\n                currentChar = pos.character;\n                if (!isRegex && !findOptions.caseSensitive) {\n                    currentChar = currentChar.toLowerCase();\n                }\n\n                if (backward) {\n                    chars.unshift(pos);\n                    text = currentChar + text;\n                } else {\n                    chars.push(pos);\n                    text += currentChar;\n                }\n\n                if (isRegex) {\n                    result = searchTerm.exec(text);\n                    if (result) {\n                        matchStartIndex = result.index;\n                        matchEndIndex = matchStartIndex + result[0].length;\n                        if (insideRegexMatch) {\n                            // Check whether the match is now over\n                            if ((!backward && matchEndIndex < text.length) || (backward && matchStartIndex > 0)) {\n                                returnValue = handleMatch(matchStartIndex, matchEndIndex);\n                                break;\n                            }\n                        } else {\n                            insideRegexMatch = true;\n                        }\n                    }\n                } else if ( (matchStartIndex = text.indexOf(searchTerm)) != -1 ) {\n                    returnValue = handleMatch(matchStartIndex, matchStartIndex + searchTerm.length);\n                    break;\n                }\n            }\n\n            // Check whether regex match extends to the end of the range\n            if (insideRegexMatch) {\n                returnValue = handleMatch(matchStartIndex, matchEndIndex);\n            }\n            it.dispose();\n\n            return returnValue;\n        }\n\n        function createEntryPointFunction(func) {\n            return function() {\n                var sessionRunning = !!currentSession;\n                var session = getSession();\n                var args = [session].concat( util.toArray(arguments) );\n                var returnValue = func.apply(this, args);\n                if (!sessionRunning) {\n                    endSession();\n                }\n                return returnValue;\n            };\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the Rangy Range object\n\n        function createRangeBoundaryMover(isStart, collapse) {\n            /*\n             Unit can be \"character\" or \"word\"\n             Options:\n\n             - includeTrailingSpace\n             - wordRegex\n             - tokenizer\n             - collapseSpaceBeforeLineBreak\n             */\n            return createEntryPointFunction(\n                function(session, unit, count, moveOptions) {\n                    if (typeof count == UNDEF) {\n                        count = unit;\n                        unit = CHARACTER;\n                    }\n                    moveOptions = createNestedOptions(moveOptions, defaultMoveOptions);\n\n                    var boundaryIsStart = isStart;\n                    if (collapse) {\n                        boundaryIsStart = (count >= 0);\n                        this.collapse(!boundaryIsStart);\n                    }\n                    var moveResult = movePositionBy(session.getRangeBoundaryPosition(this, boundaryIsStart), unit, count, moveOptions.characterOptions, moveOptions.wordOptions);\n                    var newPos = moveResult.position;\n                    this[boundaryIsStart ? \"setStart\" : \"setEnd\"](newPos.node, newPos.offset);\n                    return moveResult.unitsMoved;\n                }\n            );\n        }\n\n        function createRangeTrimmer(isStart) {\n            return createEntryPointFunction(\n                function(session, characterOptions) {\n                    characterOptions = createOptions(characterOptions, defaultCharacterOptions);\n                    var pos;\n                    var it = createRangeCharacterIterator(session, this, characterOptions, !isStart);\n                    var trimCharCount = 0;\n                    while ( (pos = it.next()) && allWhiteSpaceRegex.test(pos.character) ) {\n                        ++trimCharCount;\n                    }\n                    it.dispose();\n                    var trimmed = (trimCharCount > 0);\n                    if (trimmed) {\n                        this[isStart ? \"moveStart\" : \"moveEnd\"](\n                            \"character\",\n                            isStart ? trimCharCount : -trimCharCount,\n                            { characterOptions: characterOptions }\n                        );\n                    }\n                    return trimmed;\n                }\n            );\n        }\n\n        extend(api.rangePrototype, {\n            moveStart: createRangeBoundaryMover(true, false),\n\n            moveEnd: createRangeBoundaryMover(false, false),\n\n            move: createRangeBoundaryMover(true, true),\n\n            trimStart: createRangeTrimmer(true),\n\n            trimEnd: createRangeTrimmer(false),\n\n            trim: createEntryPointFunction(\n                function(session, characterOptions) {\n                    var startTrimmed = this.trimStart(characterOptions), endTrimmed = this.trimEnd(characterOptions);\n                    return startTrimmed || endTrimmed;\n                }\n            ),\n\n            expand: createEntryPointFunction(\n                function(session, unit, expandOptions) {\n                    var moved = false;\n                    expandOptions = createNestedOptions(expandOptions, defaultExpandOptions);\n                    var characterOptions = expandOptions.characterOptions;\n                    if (!unit) {\n                        unit = CHARACTER;\n                    }\n                    if (unit == WORD) {\n                        var wordOptions = expandOptions.wordOptions;\n                        var startPos = session.getRangeBoundaryPosition(this, true);\n                        var endPos = session.getRangeBoundaryPosition(this, false);\n\n                        var startTokenizedTextProvider = createTokenizedTextProvider(startPos, characterOptions, wordOptions);\n                        var startToken = startTokenizedTextProvider.nextEndToken();\n                        var newStartPos = startToken.chars[0].previousVisible();\n                        var endToken, newEndPos;\n\n                        if (this.collapsed) {\n                            endToken = startToken;\n                        } else {\n                            var endTokenizedTextProvider = createTokenizedTextProvider(endPos, characterOptions, wordOptions);\n                            endToken = endTokenizedTextProvider.previousStartToken();\n                        }\n                        newEndPos = endToken.chars[endToken.chars.length - 1];\n\n                        if (!newStartPos.equals(startPos)) {\n                            this.setStart(newStartPos.node, newStartPos.offset);\n                            moved = true;\n                        }\n                        if (newEndPos && !newEndPos.equals(endPos)) {\n                            this.setEnd(newEndPos.node, newEndPos.offset);\n                            moved = true;\n                        }\n\n                        if (expandOptions.trim) {\n                            if (expandOptions.trimStart) {\n                                moved = this.trimStart(characterOptions) || moved;\n                            }\n                            if (expandOptions.trimEnd) {\n                                moved = this.trimEnd(characterOptions) || moved;\n                            }\n                        }\n\n                        return moved;\n                    } else {\n                        return this.moveEnd(CHARACTER, 1, expandOptions);\n                    }\n                }\n            ),\n\n            text: createEntryPointFunction(\n                function(session, characterOptions) {\n                    return this.collapsed ?\n                        \"\" : getRangeCharacters(session, this, createOptions(characterOptions, defaultCharacterOptions)).join(\"\");\n                }\n            ),\n\n            selectCharacters: createEntryPointFunction(\n                function(session, containerNode, startIndex, endIndex, characterOptions) {\n                    var moveOptions = { characterOptions: characterOptions };\n                    if (!containerNode) {\n                        containerNode = getBody( this.getDocument() );\n                    }\n                    this.selectNodeContents(containerNode);\n                    this.collapse(true);\n                    this.moveStart(\"character\", startIndex, moveOptions);\n                    this.collapse(true);\n                    this.moveEnd(\"character\", endIndex - startIndex, moveOptions);\n                }\n            ),\n\n            // Character indexes are relative to the start of node\n            toCharacterRange: createEntryPointFunction(\n                function(session, containerNode, characterOptions) {\n                    if (!containerNode) {\n                        containerNode = getBody( this.getDocument() );\n                    }\n                    var parent = containerNode.parentNode, nodeIndex = dom.getNodeIndex(containerNode);\n                    var rangeStartsBeforeNode = (dom.comparePoints(this.startContainer, this.endContainer, parent, nodeIndex) == -1);\n                    var rangeBetween = this.cloneRange();\n                    var startIndex, endIndex;\n                    if (rangeStartsBeforeNode) {\n                        rangeBetween.setStartAndEnd(this.startContainer, this.startOffset, parent, nodeIndex);\n                        startIndex = -rangeBetween.text(characterOptions).length;\n                    } else {\n                        rangeBetween.setStartAndEnd(parent, nodeIndex, this.startContainer, this.startOffset);\n                        startIndex = rangeBetween.text(characterOptions).length;\n                    }\n                    endIndex = startIndex + this.text(characterOptions).length;\n\n                    return {\n                        start: startIndex,\n                        end: endIndex\n                    };\n                }\n            ),\n\n            findText: createEntryPointFunction(\n                function(session, searchTermParam, findOptions) {\n                    // Set up options\n                    findOptions = createNestedOptions(findOptions, defaultFindOptions);\n\n                    // Create word options if we're matching whole words only\n                    if (findOptions.wholeWordsOnly) {\n                        // We don't ever want trailing spaces for search results\n                        findOptions.wordOptions.includeTrailingSpace = false;\n                    }\n\n                    var backward = isDirectionBackward(findOptions.direction);\n\n                    // Create a range representing the search scope if none was provided\n                    var searchScopeRange = findOptions.withinRange;\n                    if (!searchScopeRange) {\n                        searchScopeRange = api.createRange();\n                        searchScopeRange.selectNodeContents(this.getDocument());\n                    }\n\n                    // Examine and prepare the search term\n                    var searchTerm = searchTermParam, isRegex = false;\n                    if (typeof searchTerm == \"string\") {\n                        if (!findOptions.caseSensitive) {\n                            searchTerm = searchTerm.toLowerCase();\n                        }\n                    } else {\n                        isRegex = true;\n                    }\n\n                    var initialPos = session.getRangeBoundaryPosition(this, !backward);\n\n                    // Adjust initial position if it lies outside the search scope\n                    var comparison = searchScopeRange.comparePoint(initialPos.node, initialPos.offset);\n\n                    if (comparison === -1) {\n                        initialPos = session.getRangeBoundaryPosition(searchScopeRange, true);\n                    } else if (comparison === 1) {\n                        initialPos = session.getRangeBoundaryPosition(searchScopeRange, false);\n                    }\n\n                    var pos = initialPos;\n                    var wrappedAround = false;\n\n                    // Try to find a match and ignore invalid ones\n                    var findResult;\n                    while (true) {\n                        findResult = findTextFromPosition(pos, searchTerm, isRegex, searchScopeRange, findOptions);\n\n                        if (findResult) {\n                            if (findResult.valid) {\n                                this.setStartAndEnd(findResult.startPos.node, findResult.startPos.offset, findResult.endPos.node, findResult.endPos.offset);\n                                return true;\n                            } else {\n                                // We've found a match that is not a whole word, so we carry on searching from the point immediately\n                                // after the match\n                                pos = backward ? findResult.startPos : findResult.endPos;\n                            }\n                        } else if (findOptions.wrap && !wrappedAround) {\n                            // No result found but we're wrapping around and limiting the scope to the unsearched part of the range\n                            searchScopeRange = searchScopeRange.cloneRange();\n                            pos = session.getRangeBoundaryPosition(searchScopeRange, !backward);\n                            searchScopeRange.setBoundary(initialPos.node, initialPos.offset, backward);\n                            wrappedAround = true;\n                        } else {\n                            // Nothing found and we can't wrap around, so we're done\n                            return false;\n                        }\n                    }\n                }\n            ),\n\n            pasteHtml: function(html) {\n                this.deleteContents();\n                if (html) {\n                    var frag = this.createContextualFragment(html);\n                    var lastChild = frag.lastChild;\n                    this.insertNode(frag);\n                    this.collapseAfter(lastChild);\n                }\n            }\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the Rangy Selection object\n\n        function createSelectionTrimmer(methodName) {\n            return createEntryPointFunction(\n                function(session, characterOptions) {\n                    var trimmed = false;\n                    this.changeEachRange(function(range) {\n                        trimmed = range[methodName](characterOptions) || trimmed;\n                    });\n                    return trimmed;\n                }\n            );\n        }\n\n        extend(api.selectionPrototype, {\n            expand: createEntryPointFunction(\n                function(session, unit, expandOptions) {\n                    this.changeEachRange(function(range) {\n                        range.expand(unit, expandOptions);\n                    });\n                }\n            ),\n\n            move: createEntryPointFunction(\n                function(session, unit, count, options) {\n                    var unitsMoved = 0;\n                    if (this.focusNode) {\n                        this.collapse(this.focusNode, this.focusOffset);\n                        var range = this.getRangeAt(0);\n                        if (!options) {\n                            options = {};\n                        }\n                        options.characterOptions = createOptions(options.characterOptions, defaultCaretCharacterOptions);\n                        unitsMoved = range.move(unit, count, options);\n                        this.setSingleRange(range);\n                    }\n                    return unitsMoved;\n                }\n            ),\n\n            trimStart: createSelectionTrimmer(\"trimStart\"),\n            trimEnd: createSelectionTrimmer(\"trimEnd\"),\n            trim: createSelectionTrimmer(\"trim\"),\n\n            selectCharacters: createEntryPointFunction(\n                function(session, containerNode, startIndex, endIndex, direction, characterOptions) {\n                    var range = api.createRange(containerNode);\n                    range.selectCharacters(containerNode, startIndex, endIndex, characterOptions);\n                    this.setSingleRange(range, direction);\n                }\n            ),\n\n            saveCharacterRanges: createEntryPointFunction(\n                function(session, containerNode, characterOptions) {\n                    var ranges = this.getAllRanges(), rangeCount = ranges.length;\n                    var rangeInfos = [];\n\n                    var backward = rangeCount == 1 && this.isBackward();\n\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        rangeInfos[i] = {\n                            characterRange: ranges[i].toCharacterRange(containerNode, characterOptions),\n                            backward: backward,\n                            characterOptions: characterOptions\n                        };\n                    }\n\n                    return rangeInfos;\n                }\n            ),\n\n            restoreCharacterRanges: createEntryPointFunction(\n                function(session, containerNode, saved) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = saved.length, range, rangeInfo, characterRange; i < len; ++i) {\n                        rangeInfo = saved[i];\n                        characterRange = rangeInfo.characterRange;\n                        range = api.createRange(containerNode);\n                        range.selectCharacters(containerNode, characterRange.start, characterRange.end, rangeInfo.characterOptions);\n                        this.addRange(range, rangeInfo.backward);\n                    }\n                }\n            ),\n\n            text: createEntryPointFunction(\n                function(session, characterOptions) {\n                    var rangeTexts = [];\n                    for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                        rangeTexts[i] = this.getRangeAt(i).text(characterOptions);\n                    }\n                    return rangeTexts.join(\"\");\n                }\n            )\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the core rangy object\n\n        api.innerText = function(el, characterOptions) {\n            var range = api.createRange(el);\n            range.selectNodeContents(el);\n            var text = range.text(characterOptions);\n            return text;\n        };\n\n        api.createWordIterator = function(startNode, startOffset, iteratorOptions) {\n            var session = getSession();\n            iteratorOptions = createNestedOptions(iteratorOptions, defaultWordIteratorOptions);\n            var startPos = session.getPosition(startNode, startOffset);\n            var tokenizedTextProvider = createTokenizedTextProvider(startPos, iteratorOptions.characterOptions, iteratorOptions.wordOptions);\n            var backward = isDirectionBackward(iteratorOptions.direction);\n\n            return {\n                next: function() {\n                    return backward ? tokenizedTextProvider.previousStartToken() : tokenizedTextProvider.nextEndToken();\n                },\n\n                dispose: function() {\n                    tokenizedTextProvider.dispose();\n                    this.next = function() {};\n                }\n            };\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        api.noMutation = function(func) {\n            var session = getSession();\n            func(session);\n            endSession();\n        };\n\n        api.noMutation.createEntryPointFunction = createEntryPointFunction;\n\n        api.textRange = {\n            isBlockNode: isBlockNode,\n            isCollapsedWhitespaceNode: isCollapsedWhitespaceNode,\n\n            createPosition: createEntryPointFunction(\n                function(session, node, offset) {\n                    return session.getPosition(node, offset);\n                }\n            )\n        };\n    });\n    \n    return rangy;\n}, this);","import config from \"trix/config\"\n\nimport { triggerEvent } from \"event_helpers\"\nimport { defer } from \"trix/core/helpers\"\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nimport rangy from \"rangy\"\nimport \"rangy/lib/rangy-textrange\"\n\nwindow.rangy = rangy\n\nconst keyCodes = {}\nfor (const code in config.keyNames) {\n  const name = config.keyNames[code]\n  keyCodes[name] = code\n}\n\nconst keys = {\n  left: \"ArrowLeft\",\n  right: \"ArrowRight\",\n}\n\nexport const moveCursor = function (options, callback) {\n  let direction, move, times\n  if (typeof options === \"string\") {\n    direction = options\n  } else {\n    times = options.times\n    direction = options.direction\n  }\n\n  if (!times) times = 1\n\n  return (move = () =>\n    defer(() => {\n      if (triggerEvent(document.activeElement, \"keydown\", { keyCode: keyCodes[direction], key: keys[direction] })) {\n        const selection = rangy.getSelection()\n        selection.move(\"character\", direction === \"right\" ? 1 : -1)\n        selectionChangeObserver.update()\n      }\n\n      if (--times === 0) {\n        defer(() => callback(getCursorCoordinates()))\n      } else {\n        return move()\n      }\n    }))()\n}\n\nexport const expandSelection = (options, callback) =>\n  defer(() => {\n    let direction, expand, times\n    if (typeof options === \"string\") {\n      direction = options\n    } else {\n      ({ direction } = options)\n      times = options.times\n    }\n\n    if (!times) times = 1\n\n    return (expand = () =>\n      defer(() => {\n        if (triggerEvent(document.activeElement, \"keydown\", { keyCode: keyCodes[direction], key: keys[direction], shiftKey: true })) {\n          getComposition().expandSelectionInDirection(direction === \"left\" ? \"backward\" : \"forward\")\n        }\n\n        if (--times === 0) {\n          defer(callback)\n        } else {\n          return expand()\n        }\n      }))()\n  })\n\nexport const collapseSelection = function (direction, callback) {\n  const selection = rangy.getSelection()\n  if (direction === \"left\") {\n    selection.collapseToStart()\n  } else {\n    selection.collapseToEnd()\n  }\n  selectionChangeObserver.update()\n  defer(callback)\n}\n\nexport const selectAll = function (callback) {\n  rangy.getSelection().selectAllChildren(document.activeElement)\n  selectionChangeObserver.update()\n  defer(callback)\n}\n\nexport const deleteSelection = () => {\n  const selection = rangy.getSelection()\n  selection.getRangeAt(0).deleteContents()\n  selectionChangeObserver.update()\n}\n\nexport const selectionIsCollapsed = () => rangy.getSelection().isCollapsed\n\nexport const insertNode = function (node, callback) {\n  const selection = rangy.getSelection()\n  const range = selection.getRangeAt(0)\n  range.splitBoundaries()\n  range.insertNode(node)\n  range.setStartAfter(node)\n  range.deleteContents()\n  selection.setSingleRange(range)\n  selectionChangeObserver.update()\n  if (callback) {\n    requestAnimationFrame(callback)\n  }\n}\n\nexport const selectNode = function (node, callback) {\n  const selection = rangy.getSelection()\n  selection.selectAllChildren(node)\n  selectionChangeObserver.update()\n  if (callback) callback()\n}\n\nexport const createDOMRangeFromPoint = function (px, py) {\n  if (document.caretPositionFromPoint) {\n    const { offsetNode, offset } = document.caretPositionFromPoint(px, py)\n    const domRange = document.createRange()\n    domRange.setStart(offsetNode, offset)\n    return domRange\n  } else if (document.caretRangeFromPoint) {\n    return document.caretRangeFromPoint(px, py)\n  }\n}\n\nconst getCursorCoordinates = () => {\n  const rect = window.getSelection().getRangeAt(0).getClientRects()[0]\n  if (rect) {\n    return {\n      clientX: rect.left,\n      clientY: rect.top + rect.height / 2,\n    }\n  }\n}\n","import config from \"trix/config\"\nimport { defer } from \"trix/core/helpers\"\nimport { triggerEvent } from \"./event_helpers\"\nimport {\n  collapseSelection,\n  createDOMRangeFromPoint,\n  deleteSelection,\n  insertNode,\n  selectNode,\n  selectionIsCollapsed,\n} from \"./selection_helpers\"\n\nconst keyCodes = {}\n\nObject.keys(config.keyNames).forEach(code => {\n  const name = config.keyNames[code]\n  keyCodes[name] = code\n})\n\nconst isIE = /Windows.*Trident/.test(navigator.userAgent)\n\nexport const triggerInputEvent = function (element, type, properties = {}) {\n  if (config.input.getLevel() === 2) {\n    let ranges\n    if (properties.ranges) {\n      ({ ranges } = properties)\n      delete properties.ranges\n    } else {\n      ranges = []\n      const selection = window.getSelection()\n      if (selection.rangeCount > 0) {\n        ranges.push(selection.getRangeAt(0).cloneRange())\n      }\n    }\n    properties.getTargetRanges = () => ranges\n    triggerEvent(element, type, properties)\n  }\n}\n\nexport const pasteContent = function (contentType, value, callback) {\n  let data\n\n  if (typeof contentType === \"object\") {\n    data = contentType\n    callback = value\n  } else {\n    data = { [contentType]: value }\n  }\n\n  const testClipboardData = {\n    getData: (type) => data[type],\n    types: Object.keys(data),\n    items: Object.values(data),\n  }\n\n  if (testClipboardData.types.includes(\"Files\")) {\n    testClipboardData.files = testClipboardData.items\n  }\n\n  triggerInputEvent(document.activeElement, \"beforeinput\", {\n    inputType: \"insertFromPaste\",\n    dataTransfer: testClipboardData,\n  })\n\n  triggerEvent(document.activeElement, \"paste\", { testClipboardData })\n\n  if (callback) {\n    requestAnimationFrame (callback)\n  }\n}\n\nexport const createFile = function (properties = {}) {\n  const file = {\n    getAsFile() {\n      return {}\n    },\n  }\n  for (const key in properties) {\n    const value = properties[key]\n    file[key] = value\n  }\n  return file\n}\n\nexport const typeCharacters = function (string, callback) {\n  let characters, typeNextCharacter\n  if (Array.isArray(string)) {\n    characters = string\n  } else {\n    characters = string.split(\"\")\n  }\n\n  return (typeNextCharacter = () =>\n    defer(function () {\n      const character = characters.shift()\n      if (character != null) {\n        switch (character) {\n          case \"\\n\":\n            return pressKey(\"return\", typeNextCharacter)\n          case \"\\b\":\n            return pressKey(\"backspace\", typeNextCharacter)\n          default:\n            return typeCharacterInElement(character, document.activeElement, typeNextCharacter)\n        }\n      } else {\n        return callback()\n      }\n    }))()\n}\n\nexport const pressKey = function (keyName, callback) {\n  const element = document.activeElement\n  const code = keyCodes[keyName]\n  const properties = { which: code, keyCode: code, charCode: 0, key: capitalize(keyName) }\n\n  if (!triggerEvent(element, \"keydown\", properties)) {\n    return callback()\n  }\n\n  return simulateKeypress(keyName, () => {\n    defer(() => {\n      triggerEvent(element, \"keyup\", properties)\n      defer(callback)\n    })\n  })\n}\n\nexport const startComposition = function (data, callback) {\n  const element = document.activeElement\n  triggerEvent(element, \"compositionstart\", { data: \"\" })\n  triggerInputEvent(element, \"beforeinput\", { inputType: \"insertCompositionText\", data })\n  triggerEvent(element, \"compositionupdate\", { data })\n  triggerEvent(element, \"input\")\n\n  const node = document.createTextNode(data)\n  insertNode(node)\n  selectNode(node, callback)\n}\n\nexport const updateComposition = function (data, callback) {\n  const element = document.activeElement\n  triggerInputEvent(element, \"beforeinput\", { inputType: \"insertCompositionText\", data })\n  triggerEvent(element, \"compositionupdate\", { data })\n  triggerEvent(element, \"input\")\n\n  const node = document.createTextNode(data)\n  insertNode(node)\n  selectNode(node, callback)\n}\n\nexport const endComposition = function (data, callback) {\n  const element = document.activeElement\n  triggerInputEvent(element, \"beforeinput\", { inputType: \"insertCompositionText\", data })\n  triggerEvent(element, \"compositionupdate\", { data })\n\n  const node = document.createTextNode(data)\n  insertNode(node)\n  selectNode(node)\n  collapseSelection(\"right\", function () {\n    triggerEvent(element, \"input\")\n    triggerEvent(element, \"compositionend\", { data })\n    requestAnimationFrame (callback)\n  })\n}\n\nexport const clickElement = function (element, callback) {\n  if (triggerEvent(element, \"mousedown\")) {\n    defer(function () {\n      if (triggerEvent(element, \"mouseup\")) {\n        defer(function () {\n          triggerEvent(element, \"click\")\n          defer(callback)\n        })\n      }\n    })\n  }\n}\n\nexport const dragToCoordinates = function (coordinates, callback) {\n  const element = document.activeElement\n\n  // IE only allows writing \"text\" to DataTransfer\n  // https://msdn.microsoft.com/en-us/library/ms536744(v=vs.85).aspx\n  const dataTransfer = {\n    files: [],\n    data: {},\n    getData(format) {\n      if (isIE && format.toLowerCase() !== \"text\") {\n        throw new Error(\"Invalid argument.\")\n      } else {\n        this.data[format]\n        return true\n      }\n    },\n    setData(format, data) {\n      if (isIE && format.toLowerCase() !== \"text\") {\n        throw new Error(\"Unexpected call to method or property access.\")\n      } else {\n        this.data[format] = data\n      }\n    },\n  }\n\n  triggerEvent(element, \"mousemove\")\n\n  const dragstartData = { dataTransfer }\n  triggerEvent(element, \"dragstart\", dragstartData)\n  triggerInputEvent(element, \"beforeinput\", { inputType: \"deleteByDrag\" })\n\n  const dropData = { dataTransfer }\n  for (const key in coordinates) {\n    const value = coordinates[key]\n    dropData[key] = value\n  }\n  triggerEvent(element, \"drop\", dropData)\n\n  const { clientX, clientY } = coordinates\n  const domRange = createDOMRangeFromPoint(clientX, clientY)\n  triggerInputEvent(element, \"beforeinput\", { inputType: \"insertFromDrop\", ranges: [ domRange ] })\n\n  defer(callback)\n}\n\nexport const mouseDownOnElementAndMove = function (element, distance, callback) {\n  const coordinates = getElementCoordinates(element)\n  triggerEvent(element, \"mousedown\", coordinates)\n\n  const destination = (offset) => ({\n    clientX: coordinates.clientX + offset,\n    clientY: coordinates.clientY + offset,\n  })\n\n  const dragSpeed = 20\n\n  return after(dragSpeed, function () {\n    let drag\n    let offset = 0\n    return (drag = () => {\n      if (++offset <= distance) {\n        triggerEvent(element, \"mousemove\", destination(offset))\n        return after(dragSpeed, drag)\n      } else {\n        triggerEvent(element, \"mouseup\", destination(distance))\n        return after(dragSpeed, callback)\n      }\n    })()\n  })\n}\n\nconst typeCharacterInElement = function (character, element, callback) {\n  const charCode = character.charCodeAt(0)\n  const keyCode = character.toUpperCase().charCodeAt(0)\n\n  if (!triggerEvent(element, \"keydown\", { keyCode, charCode: 0 })) {\n    return callback()\n  }\n\n  defer(function () {\n    if (!triggerEvent(element, \"keypress\", { keyCode: charCode, charCode })) {\n      return callback()\n    }\n    triggerInputEvent(element, \"beforeinput\", { inputType: \"insertText\", data: character })\n    return insertCharacter(character, function () {\n      triggerEvent(element, \"input\")\n\n      defer(function () {\n        triggerEvent(element, \"keyup\", { keyCode, charCode: 0 })\n        return callback()\n      })\n    })\n  })\n}\n\nconst insertCharacter = function (character, callback) {\n  const node = document.createTextNode(character)\n  return insertNode(node, callback)\n}\n\nconst simulateKeypress = function (keyName, callback) {\n  switch (keyName) {\n    case \"backspace\":\n      return deleteInDirection(\"left\", callback)\n    case \"delete\":\n      return deleteInDirection(\"right\", callback)\n    case \"return\":\n      defer(function () {\n        triggerInputEvent(document.activeElement, \"beforeinput\", { inputType: \"insertParagraph\" })\n        const node = document.createElement(\"br\")\n        return insertNode(node, callback)\n      })\n  }\n}\n\nconst deleteInDirection = function (direction, callback) {\n  if (selectionIsCollapsed()) {\n    getComposition().expandSelectionInDirection(direction === \"left\" ? \"backward\" : \"forward\")\n    defer(function () {\n      const inputType = direction === \"left\" ? \"deleteContentBackward\" : \"deleteContentForward\"\n      triggerInputEvent(document.activeElement, \"beforeinput\", { inputType })\n      defer(function () {\n        deleteSelection()\n        return callback()\n      })\n    })\n  } else {\n    triggerInputEvent(document.activeElement, \"beforeinput\", { inputType: \"deleteContentBackward\" })\n    deleteSelection()\n    return callback()\n  }\n}\n\nconst getElementCoordinates = function (element) {\n  const rect = element.getBoundingClientRect()\n  return {\n    clientX: rect.left + rect.width / 2,\n    clientY: rect.top + rect.height / 2,\n  }\n}\n\nconst capitalize = (string) => string.charAt(0).toUpperCase() + string.slice(1)\n","import { TEST_IMAGE_URL } from \"test/test_helpers/fixtures/test_image_url\"\nimport Attachment from \"trix/models/attachment\"\n\nexport const insertString = function (string) {\n  getComposition().insertString(string)\n  render()\n}\n\nexport const insertText = function (text) {\n  getComposition().insertText(text)\n  render()\n}\n\nexport const insertDocument = function (document) {\n  getComposition().insertDocument(document)\n  render()\n}\n\nexport const insertFile = function (file) {\n  getComposition().insertFile(file)\n  render()\n}\n\nexport const insertAttachment = function (attachment) {\n  getComposition().insertAttachment(attachment)\n  render()\n}\n\nexport const insertAttachments = function (attachments) {\n  getComposition().insertAttachments(attachments)\n  render()\n}\n\nexport const insertImageAttachment = function (attributes) {\n  const attachment = createImageAttachment(attributes)\n  return insertAttachment(attachment)\n}\n\nexport const createImageAttachment = function (attributes) {\n  if (!attributes) {\n    attributes = {\n      url: TEST_IMAGE_URL,\n      width: 10,\n      height: 10,\n      filename: \"image.gif\",\n      filesize: 35,\n      contentType: \"image/gif\",\n    }\n  }\n\n  return new Attachment(attributes)\n}\n\nexport const replaceDocument = function (document) {\n  getComposition().setDocument(document)\n  render()\n}\n\nconst render = () => getEditorController().render()\n","import { defer } from \"trix/core/helpers\"\nimport { triggerEvent } from \"./event_helpers\"\nimport { selectionChangeObserver } from \"trix/observers/selection_change_observer\"\n\nexport const clickToolbarButton = function (selector, callback) {\n  selectionChangeObserver.update()\n  const button = getToolbarButton(selector)\n  triggerEvent(button, \"mousedown\")\n  defer(callback)\n}\n\nexport const typeToolbarKeyCommand = function (selector, callback) {\n  const button = getToolbarButton(selector)\n  const { trixKey } = button.dataset\n  if (trixKey) {\n    const keyCode = trixKey.toUpperCase().charCodeAt(0)\n    triggerEvent(getEditorElement(), \"keydown\", { keyCode, charCode: 0, metaKey: true, ctrlKey: true })\n  }\n  defer(callback)\n}\n\nexport const clickToolbarDialogButton = function ({ method }, callback) {\n  const button = getToolbarElement().querySelector(`[data-trix-dialog] [data-trix-method='${method}']`)\n  triggerEvent(button, \"click\")\n  defer(callback)\n}\n\nexport const isToolbarButtonActive = function (selector) {\n  const button = getToolbarButton(selector)\n  return button.hasAttribute(\"data-trix-active\") && button.classList.contains(\"trix-active\")\n}\n\nexport const isToolbarButtonDisabled = (selector) => getToolbarButton(selector).disabled\n\nexport const typeInToolbarDialog = function (string, { attribute }, callback) {\n  const dialog = getToolbarDialog({ attribute })\n  const input = dialog.querySelector(`[data-trix-input][name='${attribute}']`)\n  const button = dialog.querySelector(\"[data-trix-method='setAttribute']\")\n  input.value = string\n  triggerEvent(button, \"click\")\n  defer(callback)\n}\n\nexport const isToolbarDialogActive = function (selector) {\n  const dialog = getToolbarDialog(selector)\n  return dialog.hasAttribute(\"data-trix-active\") && dialog.classList.contains(\"trix-active\")\n}\n\nconst getToolbarButton = ({ attribute, action }) =>\n  getToolbarElement().querySelector(`[data-trix-attribute='${attribute}'], [data-trix-action='${action}']`)\n\nconst getToolbarDialog = ({ attribute, action }) => getToolbarElement().querySelector(`[data-trix-dialog='${attribute}']`)\n","import config from \"trix/config\"\n\nexport * from \"trix/core/helpers/functions\"\nexport * from \"trix/core/helpers/global\"\nexport * from \"./test_helpers/event_helpers\"\nexport * from \"./test_helpers/assertions\"\nexport * from \"./test_helpers/test_helpers\"\nexport * from \"./test_helpers/test_stubs\"\nexport * from \"./test_helpers/functions\"\nexport * from \"./test_helpers/fixtures/fixtures\"\nexport * from \"./test_helpers/event_helpers\"\nexport * from \"./test_helpers/input_helpers\"\nexport * from \"./test_helpers/editor_helpers\"\nexport * from \"./test_helpers/toolbar_helpers\"\nexport * from \"./test_helpers/selection_helpers\"\n\nconfig.undoInterval = 0\n\nQUnit.config.hidepassed = true\nQUnit.config.testTimeout = 20000\n\ndocument.head.insertAdjacentHTML(\n  \"beforeend\",\n  `<style type=\"text/css\">\n    #trix-container { height: 150px; }\n    trix-toolbar { margin-bottom: 10px; }\n    trix-toolbar button { border: 1px solid #ccc; background: #fff; }\n    trix-toolbar button.active { background: #d3e6fd; }\n    trix-toolbar button:disabled { color: #ccc; }\n  </style>`\n)\n","import { assert, test, testGroup } from \"test/test_helper\"\nimport Attachment from \"trix/models/attachment\"\n\ntestGroup(\"Attachment\", () => {\n  const previewableTypes = \"image image/gif image/png image/jpg\".split(\" \")\n  const nonPreviewableTypes = \"image/tiff application/foo\".split(\" \")\n\n  const createAttachment = (attributes) => new Attachment(attributes)\n\n  previewableTypes.forEach((contentType) => {\n    test(`${contentType} content type is previewable`, () => {\n      assert.ok(createAttachment({ contentType }).isPreviewable())\n    })\n  })\n\n  nonPreviewableTypes.forEach((contentType) => {\n    test(`${contentType} content type is NOT previewable`, () => {\n      assert.notOk(createAttachment({ contentType }).isPreviewable())\n    })\n  })\n\n  test(\"'previewable' attribute determines previewability\", () => {\n    let attrs = { previewable: true, contentType: nonPreviewableTypes[0] }\n    assert.ok(createAttachment(attrs).isPreviewable())\n\n    attrs = { previewable: false, contentType: previewableTypes[0] }\n    assert.notOk(createAttachment(attrs).isPreviewable())\n  })\n})\n","import { assert, test, testGroup } from \"test/test_helper\"\n\nimport Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\n\ntestGroup(\"Block\", () => {\n  test(\"consolidating blocks creates text with one blockBreak piece\", () => {\n    const blockA = new Block(Text.textForStringWithAttributes(\"a\"))\n    const blockB = new Block(Text.textForStringWithAttributes(\"b\"))\n    const consolidatedBlock = blockA.consolidateWith(blockB)\n    const pieces = consolidatedBlock.text.getPieces()\n\n    assert.equal(pieces.length, 2, JSON.stringify(pieces))\n    assert.deepEqual(pieces[0].getAttributes(), {})\n    assert.deepEqual(pieces[1].getAttributes(), { blockBreak: true })\n    assert.equal(consolidatedBlock.toString(), \"a\\nb\\n\")\n  })\n\n  test(\"consolidating empty blocks creates text with one blockBreak piece\", () => {\n    const consolidatedBlock = new Block().consolidateWith(new Block())\n    const pieces = consolidatedBlock.text.getPieces()\n\n    assert.equal(pieces.length, 2, JSON.stringify(pieces))\n    assert.deepEqual(pieces[0].getAttributes(), {})\n    assert.deepEqual(pieces[1].getAttributes(), { blockBreak: true })\n    assert.equal(consolidatedBlock.toString(), \"\\n\\n\")\n  })\n})\n","import { assert, test, testGroup } from \"test/test_helper\"\n\nimport Composition from \"trix/models/composition\"\nimport { TestCompositionDelegate } from \"test/test_helpers/test_stubs\"\n\nlet composition = null\nconst setup = () => {\n  composition = new Composition()\n  composition.delegate = new TestCompositionDelegate()\n}\n\ntestGroup(\"Composition\", { setup }, () =>\n  test(\"deleteInDirection respects UTF-16 character boundaries\", () => {\n    composition.insertString(\"abc😭\")\n    composition.deleteInDirection(\"backward\")\n    composition.insertString(\"d\")\n    assert.equal(composition.document.toString(), \"abcd\\n\")\n  })\n)\n","import { assert, test, testGroup } from \"test/test_helper\"\n\nimport Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\nimport Attachment from \"trix/models/attachment\"\nimport Document from \"trix/models/document\"\nimport HTMLParser from \"trix/models/html_parser\"\n\ntestGroup(\"Document\", () => {\n  const createDocumentWithAttachment = function (attachment) {\n    const text = Text.textForAttachmentWithAttributes(attachment)\n    return new Document([ new Block(text) ])\n  }\n\n  test(\"documents with different attachments are not equal\", () => {\n    const aDoc = createDocumentWithAttachment(new Attachment({ url: \"a\" }))\n    const bDoc = createDocumentWithAttachment(new Attachment({ url: \"b\" }))\n    assert.notOk(aDoc.isEqualTo(bDoc))\n  })\n\n  test(\"getStringAtRange does not leak trailing block breaks\", () => {\n    const document = Document.fromString(\"Hey\")\n    assert.equal(document.getStringAtRange([ 0, 0 ]), \"\")\n    assert.equal(document.getStringAtRange([ 0, 1 ]), \"H\")\n    assert.equal(document.getStringAtRange([ 0, 2 ]), \"He\")\n    assert.equal(document.getStringAtRange([ 0, 3 ]), \"Hey\")\n    assert.equal(document.getStringAtRange([ 0, 4 ]), \"Hey\\n\")\n  })\n\n  test(\"findRangesForTextAttribute\", () => {\n    const document = HTMLParser.parse(\n      `\n      <div>Hello <strong>world, <em>this</em> is</strong> a <strong>test</strong>.<br></div>\n    `\n    ).getDocument()\n    assert.deepEqual(document.findRangesForTextAttribute(\"bold\"), [\n      [ 6, 20 ],\n      [ 23, 27 ],\n    ])\n    assert.deepEqual(document.findRangesForTextAttribute(\"italic\"), [ [ 13, 17 ] ])\n    assert.deepEqual(document.findRangesForTextAttribute(\"href\"), [])\n  })\n\n  test(\"findRangesForTextAttribute withValue\", () => {\n    const document = HTMLParser.parse(\n      `\n      <div>Hello <a href=\"http://google.com/\">world, <em>this</em> is</a> a <a href=\"http://basecamp.com/\">test</a>.<br></div>\n    `\n    ).getDocument()\n    assert.deepEqual(document.findRangesForTextAttribute(\"href\"), [\n      [ 6, 20 ],\n      [ 23, 27 ],\n    ])\n    assert.deepEqual(document.findRangesForTextAttribute(\"href\", { withValue: \"http://google.com/\" }), [ [ 6, 20 ] ])\n    assert.deepEqual(document.findRangesForTextAttribute(\"href\", { withValue: \"http://basecamp.com/\" }), [ [ 23, 27 ] ])\n    assert.deepEqual(document.findRangesForTextAttribute(\"href\", { withValue: \"http://amazon.com/\" }), [])\n  })\n})\n","import { assert, eachFixture, test, testGroup } from \"test/test_helper\"\n\ntestGroup(\"DocumentView\", () => {\n  eachFixture((name, details) => {\n    test(name, () => {\n      assert.documentHTMLEqual(details.document, details.html)\n    })\n  })\n})\n","import {\n  TEST_IMAGE_URL,\n  after,\n  assert,\n  createCursorTarget,\n  eachFixture,\n  fixtures,\n  getHTML,\n  test,\n  testGroup,\n} from \"test/test_helper\"\n\nimport config from \"trix/config\"\nimport HTMLParser from \"trix/models/html_parser\"\n\nconst cursorTargetLeft = createCursorTarget(\"left\").outerHTML\nconst cursorTargetRight = createCursorTarget(\"right\").outerHTML\n\ntestGroup(\"HTMLParser\", () => {\n  eachFixture((name, { html, serializedHTML, document }) => {\n    test(name, () => {\n      const parsedDocument = HTMLParser.parse(html).getDocument()\n      assert.documentHTMLEqual(parsedDocument.copyUsingObjectsFromDocument(document), html)\n    })\n  })\n\n  eachFixture((name, { html, serializedHTML, document }) => {\n    if (serializedHTML) {\n      test(`${name} (serialized)`, () => {\n        const parsedDocument = HTMLParser.parse(serializedHTML).getDocument()\n        assert.documentHTMLEqual(parsedDocument.copyUsingObjectsFromDocument(document), html)\n      })\n    }\n  })\n\n  testGroup(\"nested line breaks\", () => {\n    const cases = {\n      \"<div>a<div>b</div>c</div>\": \"<div><!--block-->a<br>b<br>c</div>\",\n      \"<div>a<div><div><div>b</div></div></div>c</div>\": \"<div><!--block-->a<br>b<br>c</div>\",\n      \"<blockquote>a<div>b</div>c</blockquote>\": \"<blockquote><!--block-->a<br>b<br>c</blockquote>\",\n    }\n    // TODO:\n    // \"<div><div>a</div><div>b</div>c</div>\": \"<div><!--block-->a<br>b<br>c</div>\"\n    // \"<blockquote><div>a</div><div>b</div><div>c</div></blockquote>\": \"<blockquote><!--block-->a<br>b<br>c</blockquote>\"\n    // \"<blockquote><div>a<br></div><div><br></div><div>b<br></div></blockquote>\": \"<blockquote><!--block-->a<br><br>b</blockquote>\"\n\n    for (const [ html, expectedHTML ] of Object.entries(cases)) {\n      test(html, () => {\n        assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n      })\n    }\n  })\n\n  test(\"parses absolute image URLs\", () => {\n    const src = `${getOrigin()}/test_helpers/fixtures/logo.png`\n    const pattern = new RegExp(`src=\"${src}\"`)\n    const html = `<img src=\"${src}\">`\n\n    const finalHTML = getHTML(HTMLParser.parse(html).getDocument())\n    assert.ok(pattern.test(finalHTML), `${pattern} not found in ${JSON.stringify(finalHTML)}`)\n  })\n\n  test(\"parses relative image URLs\", () => {\n    const src = \"/test_helpers/fixtures/logo.png\"\n    const pattern = new RegExp(`src=\"${src}\"`)\n    const html = `<img src=\"${src}\">`\n\n    const finalHTML = getHTML(HTMLParser.parse(html).getDocument())\n    assert.ok(pattern.test(finalHTML), `${pattern} not found in ${JSON.stringify(finalHTML)}`)\n  })\n\n  test(\"parses unfamiliar html\", () => {\n    const html =\n      \"<meta charset=\\\"UTF-8\\\"><span style=\\\"font-style: italic\\\">abc</span><span>d</span><section style=\\\"margin:0\\\"><blink>123</blink><a href=\\\"http://example.com\\\">45<b>6</b></a>x<br />y</section><p style=\\\"margin:0\\\">9</p>\"\n    const expectedHTML =\n      \"<div><!--block--><em>abc</em>d</div><div><!--block-->123<a href=\\\"http://example.com\\\">45<strong>6</strong></a>x<br>y</div><div><!--block-->9</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"ignores leading whitespace before <meta> tag\", () => {\n    const html = \" \\n <meta charset=\\\"UTF-8\\\"><pre>abc</pre>\"\n    const expectedHTML = \"<pre><!--block-->abc</pre>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"ignores content after </html>\", () => {\n    const html = `\n      <html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" xmlns:m=\"http://schemas.microsoft.com/office/2004/12/omml\" xmlns=\"http://www.w3.org/TR/REC-html40\">\n      <head>\n      <meta http-equiv=Content-Type content=\"text/html; charset=utf-8\">\n      <meta name=ProgId content=Word.Document>\n      </head>\n\n      <body lang=EN-US link=blue vlink=\"#954F72\" style='tab-interval:.5in'>\n      <!--StartFragment--><span lang=EN style='font-size:12.0pt;font-family:\n      \"Arial\",sans-serif;mso-fareast-font-family:\"Times New Roman\";mso-ansi-language:\n      EN;mso-fareast-language:EN-US;mso-bidi-language:AR-SA'>abc</span><!--EndFragment-->\n      </body>\n\n      </html>\n      TAxelFCg��K��`\n\n    const expectedHTML = \"<div><!--block-->abc</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses incorrectly nested list html\", () => {\n    const html = \"<ul><li>a</li><ul><li>b</li><ol><li>1</li><li>2</li><ol></ul></ul>\"\n    const expectedHTML =\n      \"<ul><li><!--block-->a<ul><li><!--block-->b<ol><li><!--block-->1</li><li><!--block-->2</li></ol></li></ul></li></ul>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"ignores whitespace between block elements\", () => {\n    const html = \"<div>a</div> \\n <div>b</div>     <article>c</article>  \\n\\n <section>d</section> \"\n    const expectedHTML =\n      \"<div><!--block-->a</div><div><!--block-->b</div><div><!--block-->c</div><div><!--block-->d</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"ingores whitespace between nested block elements\", () => {\n    const html = \"<ul> <li>a</li> \\n  <li>b</li>  </ul><div>  <div> \\n <blockquote>c</blockquote>\\n </div>  \\n</div>\"\n    const expectedHTML = \"<ul><li><!--block-->a</li><li><!--block-->b</li></ul><blockquote><!--block-->c</blockquote>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"ignores inline whitespace that can't be displayed\", () => {\n    const html = \" a  \\n b    <span>c\\n</span><span>d  \\ne </span> f <span style=\\\"white-space: pre\\\">  g\\n\\n h  </span>\"\n    const expectedHTML = \"<div><!--block-->a b c d e f &nbsp; g<br><br>&nbsp;h &nbsp;</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses significant whitespace in empty inline elements\", () => {\n    const html = \"a<span style='mso-spacerun:yes'> </span>b<span style='mso-spacerun:yes'>  </span>c\"\n    const expectedHTML = \"<div><!--block-->a b c</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses block elements with leading breakable whitespace\", () => {\n    const html =\n      \"<blockquote> <span>a</span> <blockquote>\\n <strong>b</strong> <pre> <span>c</span></pre></blockquote></blockquote>\"\n    const expectedHTML =\n      \"<blockquote><!--block-->a<blockquote><!--block--><strong>b</strong><pre><!--block--> c</pre></blockquote></blockquote>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses block elements with leading non-breaking whitespace\", () => {\n    const html = \"<blockquote>&nbsp;<span>a</span></blockquote>\"\n    const expectedHTML = \"<blockquote><!--block-->&nbsp;a</blockquote>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"converts newlines to spaces\", () => {\n    const html = \"<div>a\\nb \\nc \\n d \\n\\ne</div><pre>1\\n2</pre>\"\n    const expectedHTML = \"<div><!--block-->a b c d e</div><pre><!--block-->1\\n2</pre>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses entire HTML document\", () => {\n    const html =\n      \"<html><head><style>.bold {font-weight: bold}</style></head><body><span class=\\\"bold\\\">abc</span></body></html>\"\n    const expectedHTML = \"<div><!--block--><strong>abc</strong></div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses inline element following block element\", () => {\n    const html = \"<blockquote>abc</blockquote><strong>123</strong>\"\n    const expectedHTML = \"<blockquote><!--block-->abc</blockquote><div><!--block--><strong>123</strong></div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses text nodes following block elements\", () => {\n    const html = \"<ul><li>a</li></ul>b<blockquote>c</blockquote>d\"\n    const expectedHTML =\n      \"<ul><li><!--block-->a</li></ul><div><!--block-->b</div><blockquote><!--block-->c</blockquote><div><!--block-->d</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses whitespace-only text nodes without a containing block element\", () => {\n    const html = \"a <strong>b</strong> <em>c</em>\"\n    const expectedHTML = \"<div><!--block-->a <strong>b</strong> <em>c</em></div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses spaces around cursor targets\", () => {\n    const html = `<div>a ${cursorTargetLeft}<span>b</span>${cursorTargetRight} c</div>`\n    const expectedHTML = \"<div><!--block-->a b c</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses spanned text elements that don't have a parser function\", () => {\n    assert.notOk(config.textAttributes.strike.parser)\n    const html = \"<del>a <strong>b</strong></del>\"\n    const expectedHTML = \"<div><!--block--><del>a </del><strong><del>b</del></strong></div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"translates tables into plain text\", () => {\n    const html = \"<table><tr><td>a</td><td>b</td></tr><tr><td>1</td><td><p>2</p></td></tr><table>\"\n    const expectedHTML = \"<div><!--block-->a | b<br>1 | 2</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"translates block element margins to newlines\", () => {\n    const html =\n      \"<p style=\\\"margin: 0 0 1em 0\\\">a</p><p style=\\\"margin: 0\\\">b</p><article style=\\\"margin: 1em 0 0 0\\\">c</article>\"\n    const expectedHTML = \"<div><!--block-->a<br><br></div><div><!--block-->b</div><div><!--block--><br>c</div>\"\n    const document = HTMLParser.parse(html).getDocument()\n    assert.documentHTMLEqual(document, expectedHTML)\n  })\n\n  test(\"skips translating empty block element margins to newlines\", () => {\n    const html =\n      \"<p style=\\\"margin: 0 0 1em 0\\\">a</p><p style=\\\"margin: 0 0 1em 0\\\"><span></span></p><p style=\\\"margin: 0\\\">b</p>\"\n    const expectedHTML = \"<div><!--block-->a<br><br></div><div><!--block--><br></div><div><!--block-->b</div>\"\n    const document = HTMLParser.parse(html).getDocument()\n    assert.documentHTMLEqual(document, expectedHTML)\n  })\n\n  test(\"ignores text nodes in script elements\", () => {\n    const html = \"<div>a<script>alert(\\\"b\\\")</script></div>\"\n    const expectedHTML = \"<div><!--block-->a</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"ignores iframe elements\", () => {\n    const html = \"<div>a<iframe src=\\\"data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk7PC9zY3JpcHQ+\\\">b</iframe></div>\"\n    const expectedHTML = \"<div><!--block-->a</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"sanitizes unsafe html\", (done) => {\n    window.unsanitized = []\n    HTMLParser.parse(`\n      <img onload=\"window.unsanitized.push('img.onload');\" src=\"${TEST_IMAGE_URL}\">\n      <img onerror=\"window.unsanitized.push('img.onerror');\" src=\"data:image/gif;base64,TOTALLYBOGUS\">\n      <script>\n        window.unsanitized.push('script tag');\n      </script>`)\n\n    after(20, () => {\n      assert.deepEqual(window.unsanitized, [])\n      delete window.unsanitized\n      done()\n    })\n  })\n\n  test(\"forbids href attributes with javascript: protocol\", () => {\n    const html =\n      \"<a href=\\\"javascript:alert()\\\">a</a> <a href=\\\" javascript: alert()\\\">b</a> <a href=\\\"JavaScript:alert()\\\">c</a>\"\n    const expectedHTML = \"<div><!--block-->a b c</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"ignores attachment elements with malformed JSON\", () => {\n    const html =\n      \"<div>a</div><div data-trix-attachment data-trix-attributes></div>\" +\n      \"<div data-trix-attachment=\\\"\\\" data-trix-attributes=\\\"\\\"></div>\" +\n      \"<div data-trix-attachment=\\\"{&quot;x:}\\\" data-trix-attributes=\\\"{&quot;x:}\\\"></div>\" +\n      \"<div>b</div>\"\n    const expectedHTML = \"<div><!--block-->a</div><div><!--block--><br></div><div><!--block-->b</div>\"\n    assert.documentHTMLEqual(HTMLParser.parse(html).getDocument(), expectedHTML)\n  })\n\n  test(\"parses attachment caption from large html string\", (done) => {\n    let { html } = fixtures[\"image attachment with edited caption\"]\n\n    for (let i = 1; i <= 30; i++) {\n      html += fixtures[\"image attachment\"].html\n    }\n\n    for (let n = 1; n <= 3; n++) {\n      const attachmentPiece = HTMLParser.parse(html).getDocument().getAttachmentPieces()[0]\n      assert.equal(attachmentPiece.getCaption(), \"Example\")\n    }\n\n    done()\n  })\n\n  test(\"parses foreground color when configured\", () => {\n    const attrConfig = { foregroundColor: { styleProperty: \"color\" } }\n\n    withTextAttributeConfig(attrConfig, () => {\n      const html = \"<span style=\\\"color: rgb(60, 179, 113);\\\">green</span>\"\n      const expectedHTML = \"<div><!--block--><span style=\\\"color: rgb(60, 179, 113);\\\">green</span></div>\"\n      const document = HTMLParser.parse(html).getDocument()\n      assert.documentHTMLEqual(document, expectedHTML)\n    })\n  })\n\n  test(\"parses background color when configured\", () => {\n    const attrConfig = { backgroundColor: { styleProperty: \"backgroundColor\" } }\n\n    withTextAttributeConfig(attrConfig, () => {\n      const html = \"<span style=\\\"background-color: yellow;\\\">on yellow</span>\"\n      const expectedHTML = \"<div><!--block--><span style=\\\"background-color: yellow;\\\">on yellow</span></div>\"\n      const document = HTMLParser.parse(html).getDocument()\n      assert.documentHTMLEqual(document, expectedHTML)\n    })\n  })\n\n  test(\"parses configured foreground color on formatted text\", () => {\n    const attrConfig = { foregroundColor: { styleProperty: \"color\" } }\n\n    withTextAttributeConfig(attrConfig, () => {\n      const html = \"<strong style=\\\"color: rgb(60, 179, 113);\\\">GREEN</strong>\"\n      const expectedHTML = \"<div><!--block--><strong style=\\\"color: rgb(60, 179, 113);\\\">GREEN</strong></div>\"\n      const document = HTMLParser.parse(html).getDocument()\n      assert.documentHTMLEqual(document, expectedHTML)\n    })\n  })\n\n  test(\"parses foreground color using configured parser function\", () => {\n    const attrConfig = {\n      foregroundColor: {\n        styleProperty: \"color\",\n        parser(element) {\n          const { color } = element.style\n          if (color === \"rgb(60, 179, 113)\") {\n            return color\n          }\n        },\n      },\n    }\n\n    withTextAttributeConfig(attrConfig, () => {\n      const html = \"<span style=\\\"color: rgb(60, 179, 113);\\\">green</span><span style=\\\"color: yellow;\\\">not yellow</span>\"\n      const expectedHTML = \"<div><!--block--><span style=\\\"color: rgb(60, 179, 113);\\\">green</span>not yellow</div>\"\n      const document = HTMLParser.parse(html).getDocument()\n      assert.documentHTMLEqual(document, expectedHTML)\n    })\n  })\n})\n\nconst withTextAttributeConfig = (attrConfig = {}, fn) => {\n  const originalConfig = {}\n\n  for (const [ key, value ] of Object.entries(attrConfig)) {\n    originalConfig[key] = config.textAttributes[key]\n    config.textAttributes[key] = value\n  }\n\n  try {\n    fn()\n  } finally {\n    for (const [ key, value ] of Object.entries(originalConfig)) {\n      if (value) {\n        config.textAttributes[key] = value\n      } else {\n        delete config.textAttributes[key]\n      }\n    }\n  }\n}\n\nconst getOrigin = () => {\n  const { protocol, hostname, port } = window.location\n  return `${protocol}//${hostname}${port ? `:${port}` : \"\"}`\n}\n","import { TEST_IMAGE_URL, assert, test, testGroup } from \"test/test_helper\"\n\nimport DocumentView from \"trix/views/document_view\"\nimport Document from \"trix/models/document\"\nimport LocationMapper from \"trix/models/location_mapper\"\n\ntestGroup(\"LocationMapper\", () => {\n  test(\"findLocationFromContainerAndOffset\", () => {\n    setDocument([\n      // <trix-editor>\n      // 0 <div>\n      //     0 <!--block-->\n      //     1 <strong>\n      //         0 a\n      //         1 <br>\n      //       </strong>\n      //     2 <br>\n      //   </div>\n      // 1 <blockquote>\n      //     0 <!--block-->\n      //     1 b😭cd\n      //     2 <span data-trix-cursor-target>\n      //         0 (zero-width space)\n      //       </span>\n      //     3 <a href=\"data:image/png,\" data-trix-attachment=\"\" ...>\n      //         0 <figure ...>...</figure>\n      //       </a>\n      //     4 <span data-trix-cursor-target>\n      //         0 (zero-width space)\n      //       </span>\n      //     5 e\n      //   </blockquote>\n      // </trix-editor>\n      {\n        text: [\n          { type: \"string\", attributes: { bold: true }, string: \"a\\n\" },\n          { type: \"string\", attributes: { blockBreak: true }, string: \"\\n\" },\n        ],\n        attributes: [],\n      },\n      {\n        text: [\n          { type: \"string\", attributes: {}, string: \"b😭cd\" },\n          {\n            type: \"attachment\",\n            attributes: {},\n            attachment: {\n              contentType: \"image/png\",\n              filename: \"x.png\",\n              filesize: 0,\n              height: 13,\n              href: TEST_IMAGE_URL,\n              identifier: \"1\",\n              url: TEST_IMAGE_URL,\n              width: 15,\n            },\n          },\n          { type: \"string\", attributes: {}, string: \"e\" },\n          { type: \"string\", attributes: { blockBreak: true }, string: \"\\n\" },\n        ],\n        attributes: [ \"quote\" ],\n      },\n    ])\n\n    const assertions = [\n      { location: [ 0, 0 ], container: [], offset: 0 },\n      { location: [ 0, 0 ], container: [ 0 ], offset: 0 },\n      { location: [ 0, 0 ], container: [ 0 ], offset: 1 },\n      { location: [ 0, 0 ], container: [ 0, 1 ], offset: 0 },\n      { location: [ 0, 0 ], container: [ 0, 1, 0 ], offset: 0 },\n      { location: [ 0, 1 ], container: [ 0, 1, 0 ], offset: 1 },\n      { location: [ 0, 1 ], container: [ 0, 1 ], offset: 1 },\n      { location: [ 0, 2 ], container: [ 0, 1 ], offset: 2 },\n      { location: [ 0, 2 ], container: [ 0 ], offset: 2 },\n      { location: [ 0, 3 ], container: [], offset: 1 },\n      { location: [ 0, 3 ], container: [ 1 ], offset: 0 },\n      { location: [ 1, 0 ], container: [ 1 ], offset: 1 },\n      { location: [ 1, 0 ], container: [ 1, 1 ], offset: 0 },\n      { location: [ 1, 1 ], container: [ 1, 1 ], offset: 1 },\n      { location: [ 1, 2 ], container: [ 1, 1 ], offset: 2 },\n      { location: [ 1, 3 ], container: [ 1, 1 ], offset: 3 },\n      { location: [ 1, 4 ], container: [ 1, 1 ], offset: 4 },\n      { location: [ 1, 5 ], container: [ 1, 1 ], offset: 5 },\n      { location: [ 1, 6 ], container: [ 1, 1 ], offset: 6 },\n      { location: [ 1, 5 ], container: [ 1 ], offset: 2 },\n      { location: [ 1, 5 ], container: [ 1, 2 ], offset: 0 },\n      { location: [ 1, 5 ], container: [ 1, 2 ], offset: 1 },\n      { location: [ 1, 5 ], container: [ 1 ], offset: 3 },\n      { location: [ 1, 5 ], container: [ 1, 3 ], offset: 0 },\n      { location: [ 1, 5 ], container: [ 1, 3 ], offset: 1 },\n      { location: [ 1, 6 ], container: [ 1 ], offset: 4 },\n      { location: [ 1, 6 ], container: [ 1, 4 ], offset: 0 },\n      { location: [ 1, 6 ], container: [ 1, 4 ], offset: 1 },\n      { location: [ 1, 6 ], container: [ 1 ], offset: 5 },\n      { location: [ 1, 6 ], container: [ 1, 5 ], offset: 0 },\n      { location: [ 1, 7 ], container: [ 1, 5 ], offset: 1 },\n      { location: [ 1, 7 ], container: [], offset: 2 },\n    ]\n\n    for (const assertion of assertions) {\n      const path = assertion.container\n      const container = findContainer(path)\n      const { offset } = assertion\n\n      const expectedLocation = { index: assertion.location[0], offset: assertion.location[1] }\n      const actualLocation = mapper.findLocationFromContainerAndOffset(container, offset)\n\n      assert.equal(\n        format(actualLocation),\n        format(expectedLocation),\n        `${describe(container)} at [${path.join(\", \")}], offset ${offset} = ${format(expectedLocation)}`\n      )\n    }\n  })\n\n  test(\"findContainerAndOffsetFromLocation: (0/0)\", () => {\n    setDocument([\n      // <trix-editor>\n      // 0 <ul>\n      //     0 <li>\n      //         0 <!--block-->\n      //         1 <br>\n      //       </li>\n      //   </ul>\n      // </trix-editor>\n      {\n        text: [ { type: \"string\", attributes: { blockBreak: true }, string: \"\\n\" } ],\n        attributes: [ \"bulletList\", \"bullet\" ],\n      },\n    ])\n\n    const location = { index: 0, offset: 0 }\n    const container = findContainer([ 0, 0 ])\n    const offset = 1\n\n    assert.deepEqual(mapper.findContainerAndOffsetFromLocation(location), [ container, offset ])\n  })\n\n  test(\"findContainerAndOffsetFromLocation after newline in formatted text\", () => {\n    setDocument([\n      // <trix-editor>\n      // 0 <div>\n      //     0 <!--block-->\n      //     0 <strong>\n      //         0 a\n      //         1 <br>\n      //       </strong>\n      //   </div>\n      // </trix-editor>\n      {\n        text: [\n          { type: \"string\", attributes: { bold: true }, string: \"a\\n\" },\n          { type: \"string\", attributes: { blockBreak: true }, string: \"\\n\" },\n        ],\n        attributes: [],\n      },\n    ])\n\n    const location = { index: 0, offset: 2 }\n    const container = findContainer([ 0 ])\n    const offset = 2\n\n    assert.deepEqual(mapper.findContainerAndOffsetFromLocation(location), [ container, offset ])\n  })\n\n  test(\"findContainerAndOffsetFromLocation after nested block\", () => {\n    setDocument([\n      // <trix-editor>\n      //   <blockquote>\n      //     <ul>\n      //       <li>\n      //         <!--block-->\n      //         a\n      //       </li>\n      //     </ul>\n      //     <!--block-->\n      //     <br>\n      //   </blockquote>\n      // </trix-editor>\n      {\n        text: [\n          { type: \"string\", attributes: {}, string: \"a\" },\n          { type: \"string\", attributes: { blockBreak: true }, string: \"\\n\" },\n        ],\n        attributes: [ \"quote\", \"bulletList\", \"bullet\" ],\n      },\n      {\n        text: [ { type: \"string\", attributes: { blockBreak: true }, string: \"\\n\" } ],\n        attributes: [ \"quote\" ],\n      },\n    ])\n\n    const location = { index: 1, offset: 0 }\n    const container = findContainer([ 0 ])\n    const offset = 2\n\n    assert.deepEqual(mapper.findContainerAndOffsetFromLocation(location), [ container, offset ])\n  })\n})\n\n// ---\nlet document = null\nlet element = null\nlet mapper = null\n\nconst setDocument = (json) => {\n  document = Document.fromJSON(json)\n  element = DocumentView.render(document)\n  return mapper = new LocationMapper(element)\n}\n\nconst findContainer = (path) => {\n  let el = element\n  for (const index of path) {\n    el = el.childNodes[index]\n  }\n  return el\n}\n\nconst format = ({ index, offset }) => `${index}/${offset}`\n\nconst describe = (node) => {\n  if (node.nodeType === Node.TEXT_NODE) {\n    return `text node ${JSON.stringify(node.textContent)}`\n  } else {\n    return `container <${node.tagName.toLowerCase()}>`\n  }\n}\n","import { assert, defer, test, testGroup } from \"test/test_helper\"\n\nimport MutationObserver from \"trix/observers/mutation_observer\"\n\nlet observer = null\nlet element = null\nlet summaries = []\n\nconst install = function (html) {\n  element = document.createElement(\"div\")\n  if (html) {\n    element.innerHTML = html\n  }\n  observer = new MutationObserver(element)\n  observer.delegate = {\n    elementDidMutate(summary) {\n      summaries.push(summary)\n    },\n  }\n}\n\nconst uninstall = () => {\n  observer?.stop()\n  observer = null\n  element = null\n  summaries = []\n}\n\nconst observerTest = (name, options = {}, callback) =>\n  test(name, (done) => {\n    install(options.html)\n    callback(() => {\n      uninstall()\n      done()\n    })\n  })\n\ntestGroup(\"MutationObserver\", () => {\n  observerTest(\"add character\", { html: \"a\" }, (done) => {\n    element.firstChild.data += \"b\"\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textAdded: \"b\" })\n      done()\n    })\n  })\n\n  observerTest(\"remove character\", { html: \"ab\" }, (done) => {\n    element.firstChild.data = \"a\"\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textDeleted: \"b\" })\n      done()\n    })\n  })\n\n  observerTest(\"replace character\", { html: \"ab\" }, (done) => {\n    element.firstChild.data = \"ac\"\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textAdded: \"c\", textDeleted: \"b\" })\n      done()\n    })\n  })\n\n  observerTest(\"add <br>\", { html: \"a\" }, (done) => {\n    element.appendChild(document.createElement(\"br\"))\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textAdded: \"\\n\" })\n      done()\n    })\n  })\n\n  observerTest(\"remove <br>\", { html: \"a<br>\" }, (done) => {\n    element.removeChild(element.lastChild)\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textDeleted: \"\\n\" })\n      done()\n    })\n  })\n\n  observerTest(\"remove block comment\", { html: \"<div><!--block-->a</div>\" }, (done) => {\n    element.firstChild.removeChild(element.firstChild.firstChild)\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textDeleted: \"\\n\" })\n      done()\n    })\n  })\n\n  observerTest(\"remove formatted element\", { html: \"a<strong>b</strong>\" }, (done) => {\n    element.removeChild(element.lastChild)\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textDeleted: \"b\" })\n      done()\n    })\n  })\n\n  observerTest(\"remove nested formatted elements\", { html: \"a<strong>b<em>c</em></strong>\" }, (done) => {\n    element.removeChild(element.lastChild)\n    defer(() => {\n      assert.equal(summaries.length, 1)\n      assert.deepEqual(summaries[0], { textDeleted: \"bc\" })\n      done()\n    })\n  })\n})\n","import { serializeToContentType } from \"trix/core/serialization\"\nimport { assert, eachFixture, test, testGroup } from \"test/test_helper\"\n\ntestGroup(\"serializeToContentType\", () => {\n  eachFixture((name, details) => {\n    if (details.serializedHTML) {\n      test(name, () => {\n        assert.equal(serializeToContentType(details.document, \"text/html\"), details.serializedHTML)\n      })\n    }\n  })\n})\n","import { assert, test, testGroup } from \"test/test_helper\"\n\nimport { summarizeStringChange } from \"trix/core/helpers\"\n\ntestGroup(\"summarizeStringChange\", () => {\n  const assertions = {\n    \"no change\": {\n      oldString: \"abc\",\n      newString: \"abc\",\n      change: { added: \"\", removed: \"\" },\n    },\n    \"adding a character\": {\n      oldString: \"\",\n      newString: \"a\",\n      change: { added: \"a\", removed: \"\" },\n    },\n    \"appending a character\": {\n      oldString: \"ab\",\n      newString: \"abc\",\n      change: { added: \"c\", removed: \"\" },\n    },\n    \"appending a multibyte character\": {\n      oldString: \"a💩\",\n      newString: \"a💩💩\",\n      change: { added: \"💩\", removed: \"\" },\n    },\n    \"prepending a character\": {\n      oldString: \"bc\",\n      newString: \"abc\",\n      change: { added: \"a\", removed: \"\" },\n    },\n    \"inserting a character\": {\n      oldString: \"ac\",\n      newString: \"abc\",\n      change: { added: \"b\", removed: \"\" },\n    },\n    \"inserting a string\": {\n      oldString: \"ac\",\n      newString: \"aZZZc\",\n      change: { added: \"ZZZ\", removed: \"\" },\n    },\n    \"replacing a character\": {\n      oldString: \"abc\",\n      newString: \"aZc\",\n      change: { added: \"Z\", removed: \"b\" },\n    },\n    \"replacing a character with a string\": {\n      oldString: \"abc\",\n      newString: \"aXYc\",\n      change: { added: \"XY\", removed: \"b\" },\n    },\n    \"replacing a string with a character\": {\n      oldString: \"abcde\",\n      newString: \"aXe\",\n      change: { added: \"X\", removed: \"bcd\" },\n    },\n    \"replacing a string with a string\": {\n      oldString: \"abcde\",\n      newString: \"aBCDe\",\n      change: { added: \"BCD\", removed: \"bcd\" },\n    },\n    \"removing a character\": {\n      oldString: \"abc\",\n      newString: \"ac\",\n      change: { added: \"\", removed: \"b\" },\n    },\n  }\n\n  for (const name in assertions) {\n    test(name, () => {\n      const details = assertions[name]\n      const { oldString, newString, change } = details\n      assert.deepEqual(summarizeStringChange(oldString, newString), change)\n    })\n  }\n})\n","import { assert, test, testGroup } from \"test/test_helper\"\n\nimport Text from \"trix/models/text\"\nimport StringPiece from \"trix/models/string_piece\"\n\ntestGroup(\"Text\", () =>\n  testGroup(\"#removeTextAtRange\", () => {\n    test(\"removes text with range in single piece\", () => {\n      const text = new Text([ new StringPiece(\"abc\") ])\n      const pieces = text.removeTextAtRange([ 0, 1 ]).getPieces()\n      assert.equal(pieces.length, 1)\n      assert.equal(pieces[0].toString(), \"bc\")\n      assert.deepEqual(pieces[0].getAttributes(), {})\n    })\n\n    test(\"removes text with range spanning pieces\", () => {\n      const text = new Text([ new StringPiece(\"abc\"), new StringPiece(\"123\", { bold: true }) ])\n      const pieces = text.removeTextAtRange([ 2, 4 ]).getPieces()\n      assert.equal(pieces.length, 2)\n      assert.equal(pieces[0].toString(), \"ab\")\n      assert.deepEqual(pieces[0].getAttributes(), {})\n      assert.equal(pieces[1].toString(), \"23\")\n      assert.deepEqual(pieces[1].getAttributes(), { bold: true })\n    })\n  })\n)\n","import { assert, test, testGroup, triggerEvent } from \"test/test_helper\"\n\ntestGroup(\"Accessibility attributes\", { template: \"editor_default_aria_label\" }, () => {\n  test(\"sets the role to textbox\", () => {\n    const editor = document.getElementById(\"editor-without-labels\")\n    assert.equal(editor.getAttribute(\"role\"), \"textbox\")\n  })\n\n  test(\"does not set aria-label when the element has no <label> elements\", () => {\n    const editor = document.getElementById(\"editor-without-labels\")\n    assert.equal(editor.hasAttribute(\"aria-label\"), false)\n  })\n\n  test(\"does not override aria-label when the element declares it\", () => {\n    const editor = document.getElementById(\"editor-with-aria-label\")\n    assert.equal(editor.getAttribute(\"aria-label\"), \"ARIA Label text\")\n  })\n\n  test(\"does not set aria-label when the element declares aria-labelledby\", () => {\n    const editor = document.getElementById(\"editor-with-aria-labelledby\")\n    assert.equal(editor.hasAttribute(\"aria-label\"), false)\n    assert.equal(editor.getAttribute(\"aria-labelledby\"), \"aria-labelledby-id\")\n  })\n\n  test(\"assigns aria-label to the text of the element's <label> elements\", () => {\n    const editor = document.getElementById(\"editor-with-labels\")\n    assert.equal(editor.getAttribute(\"aria-label\"), \"Label 1 Label 2 Label 3\")\n  })\n\n  test(\"updates the aria-label on focus\", () => {\n    const editor = document.getElementById(\"editor-with-modified-label\")\n    const label = document.getElementById(\"modified-label\")\n\n    label.innerHTML = \"<span>New Value</span>\"\n    triggerEvent(editor, \"focus\")\n    assert.equal(editor.getAttribute(\"aria-label\"), \"New Value\")\n  })\n})\n","import config from \"trix/config\"\nimport { assert, insertImageAttachment, test, testGroup } from \"test/test_helper\"\n\ntestGroup(\"Attachment captions\", { template: \"editor_empty\" }, () => {\n  test(\"default caption includes file name and size\", () => {\n    insertImageAttachment()\n    const element = getCaptionElement()\n    assert.notOk(element.hasAttribute(\"data-trix-placeholder\"))\n    assert.equal(element.textContent, \"image.gif 35 Bytes\")\n  })\n\n  test(\"caption excludes file name when configured\", () => {\n    withPreviewCaptionConfig({ name: false, size: true }, () => {\n      insertImageAttachment()\n      const element = getCaptionElement()\n      assert.notOk(element.hasAttribute(\"data-trix-placeholder\"))\n      assert.equal(element.textContent, \"35 Bytes\")\n    })\n  })\n\n  test(\"caption excludes file size when configured\", () => {\n    withPreviewCaptionConfig({ name: true, size: false }, () => {\n      insertImageAttachment()\n      const element = getCaptionElement()\n      assert.notOk(element.hasAttribute(\"data-trix-placeholder\"))\n      assert.equal(element.textContent, \"image.gif\")\n    })\n  })\n\n  test(\"caption is empty when configured\", () => {\n    withPreviewCaptionConfig({ name: false, size: false }, () => {\n      insertImageAttachment()\n      const element = getCaptionElement()\n      assert.ok(element.hasAttribute(\"data-trix-placeholder\"))\n      assert.equal(element.getAttribute(\"data-trix-placeholder\"), config.lang.captionPlaceholder)\n      assert.equal(element.textContent, \"\")\n    })\n  })\n})\n\nconst withPreviewCaptionConfig = (captionConfig, fn) => {\n  if (!captionConfig) captionConfig = {}\n  const { caption } = config.attachments.preview\n  config.attachments.preview.caption = captionConfig\n  try {\n    return fn()\n  } finally {\n    config.attachments.preview.caption = caption\n  }\n}\n\nconst getCaptionElement = () => getEditorElement().querySelector(\"figcaption\")\n","import {\n  assert,\n  clickToolbarButton,\n  createImageAttachment,\n  insertAttachments,\n  pressKey,\n  test,\n  testGroup,\n  typeCharacters,\n} from \"test/test_helper\"\nimport { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nconst ORC = OBJECT_REPLACEMENT_CHARACTER\n\ntestGroup(\"Attachment galleries\", { template: \"editor_empty\" }, () => {\n  test(\"inserting more than one image attachment creates a gallery block\", function (expectDocument) {\n    insertAttachments(createImageAttachments(2))\n    assert.blockAttributes([ 0, 2 ], [ \"attachmentGallery\" ])\n    expectDocument(`${ORC}${ORC}\\n`)\n  })\n\n  test(\"gallery formatting is removed from blocks containing less than two image attachments\", function (expectDocument) {\n    insertAttachments(createImageAttachments(2))\n    assert.blockAttributes([ 0, 2 ], [ \"attachmentGallery\" ])\n    getEditor().setSelectedRange([ 1, 2 ])\n    pressKey(\"backspace\", () => {\n      requestAnimationFrame(() => {\n        assert.blockAttributes([ 0, 2 ], [])\n        expectDocument(`${ORC}\\n`)\n      })\n    })\n  })\n\n  test(\"typing in an attachment gallery block splits it\", function (expectDocument) {\n    insertAttachments(createImageAttachments(4))\n    getEditor().setSelectedRange(2)\n    typeCharacters(\"a\", () => {\n      requestAnimationFrame(() => {\n        assert.blockAttributes([ 0, 2 ], [ \"attachmentGallery\" ])\n        assert.blockAttributes([ 3, 4 ], [])\n        assert.blockAttributes([ 5, 7 ], [ \"attachmentGallery\" ])\n        expectDocument(`${ORC}${ORC}\\na\\n${ORC}${ORC}\\n`)\n      })\n    })\n  })\n\n  test(\"inserting a gallery in a formatted block\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      typeCharacters(\"abc\", () => {\n        insertAttachments(createImageAttachments(2))\n        requestAnimationFrame(() => {\n          assert.blockAttributes([ 0, 3 ], [ \"quote\" ])\n          assert.blockAttributes([ 4, 6 ], [ \"attachmentGallery\" ])\n          expectDocument(`abc\\n${ORC}${ORC}\\n`)\n        })\n      })\n    })\n  })\n})\n\nconst createImageAttachments = function (num) {\n  if (num == null) {\n    num = 1\n  }\n  const attachments = []\n  while (attachments.length < num) {\n    attachments.push(createImageAttachment())\n  }\n  return attachments\n}\n","import config from \"trix/config\"\nimport { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nimport {\n  after,\n  assert,\n  clickElement,\n  clickToolbarButton,\n  createFile,\n  defer,\n  dragToCoordinates,\n  moveCursor,\n  pressKey,\n  test,\n  testGroup,\n  triggerEvent,\n  typeCharacters,\n} from \"test/test_helper\"\n\ntestGroup(\"Attachments\", { template: \"editor_with_image\" }, () => {\n  test(\"moving an image by drag and drop\", (expectDocument) => {\n    typeCharacters(\"!\", () => {\n      moveCursor({ direction: \"right\", times: 1 }, (coordinates) => {\n        const img = document.activeElement.querySelector(\"img\")\n        triggerEvent(img, \"mousedown\")\n        defer(() => {\n          dragToCoordinates(coordinates, () => {\n            expectDocument(`!a${OBJECT_REPLACEMENT_CHARACTER}b\\n`)\n          })\n        })\n      })\n    })\n  })\n\n  test(\"removing an image\", (expectDocument) => {\n    after(20, () => {\n      clickElement(getFigure(), () => {\n        const closeButton = getFigure().querySelector(\"[data-trix-action=remove]\")\n        clickElement(closeButton, () => {\n          expectDocument(\"ab\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"editing an image caption\", (expectDocument) => {\n    after(20, () => {\n      clickElement(findElement(\"figure\"), () => {\n        clickElement(findElement(\"figcaption\"), () => {\n          defer(() => {\n            const textarea = findElement(\"textarea\")\n            assert.ok(textarea)\n            textarea.focus()\n            textarea.value = \"my\"\n            triggerEvent(textarea, \"input\")\n            defer(() => {\n              textarea.value = \"\"\n              defer(() => {\n                textarea.value = \"my caption\"\n                triggerEvent(textarea, \"input\")\n                pressKey(\"return\", () => {\n                  assert.notOk(findElement(\"textarea\"))\n                  assert.textAttributes([ 2, 3 ], { caption: \"my caption\" })\n                  assert.locationRange({ index: 0, offset: 3 })\n                  expectDocument(`ab${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"editing an attachment caption with no filename\", (done) =>\n    after(20, () => {\n      let captionElement = findElement(\"figcaption\")\n      assert.ok(captionElement.clientHeight > 0)\n      assert.equal(captionElement.getAttribute(\"data-trix-placeholder\"), config.lang.captionPlaceholder)\n\n      clickElement(findElement(\"figure\"), () => {\n        captionElement = findElement(\"figcaption\")\n        assert.ok(captionElement.clientHeight > 0)\n        assert.equal(captionElement.getAttribute(\"data-trix-placeholder\"), config.lang.captionPlaceholder)\n        done()\n      })\n    }))\n\n  test(\"updating an attachment's href attribute while editing its caption\", (expectDocument) => {\n    const attachment = getEditorController().attachmentManager.getAttachments()[0]\n\n    after(20, () => {\n      clickElement(findElement(\"figure\"), () => {\n        clickElement(findElement(\"figcaption\"), () => {\n          defer(() => {\n            let textarea = findElement(\"textarea\")\n            assert.ok(textarea)\n            textarea.focus()\n            textarea.value = \"my caption\"\n            triggerEvent(textarea, \"input\")\n            attachment.setAttributes({ href: \"https://example.com\" })\n            defer(() => {\n              textarea = findElement(\"textarea\")\n              assert.ok(document.activeElement === textarea)\n              assert.equal(textarea.value, \"my caption\")\n              pressKey(\"return\", () => {\n                assert.notOk(findElement(\"textarea\"))\n                assert.textAttributes([ 2, 3 ], { caption: \"my caption\" })\n                assert.locationRange({ index: 0, offset: 3 })\n                expectDocument(`ab${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  testGroup(\"File insertion\", { template: \"editor_empty\" }, () => {\n    test(\"inserting a file in a formatted block\", (expectDocument) => {\n      clickToolbarButton({ attribute: \"bullet\" }, () => {\n        clickToolbarButton({ attribute: \"bold\" }, () => {\n          getComposition().insertFile(createFile())\n          assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n          assert.textAttributes([ 0, 1 ], {})\n          expectDocument(`${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n        })\n      })\n    })\n\n    test(\"inserting a files in a formatted block\", (expectDocument) => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        clickToolbarButton({ attribute: \"italic\" }, () => {\n          getComposition().insertFiles([ createFile(), createFile() ])\n\n          assert.blockAttributes([ 0, 2 ], [ \"quote\" ])\n          assert.textAttributes([ 0, 1 ], {})\n          assert.textAttributes([ 1, 2 ], {})\n          expectDocument(`${OBJECT_REPLACEMENT_CHARACTER}${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n        })\n      })\n    })\n  })\n})\n\nconst getFigure = () => findElement(\"figure\")\n\nconst findElement = (selector) => getEditorElement().querySelector(selector)\n","import config from \"trix/config\"\nimport {\n  assert,\n  defer,\n  dragToCoordinates,\n  expandSelection,\n  insertNode,\n  moveCursor,\n  pressKey,\n  selectAll,\n  test,\n  testGroup,\n  testIf,\n  triggerEvent,\n  typeCharacters,\n} from \"test/test_helper\"\n\ntestGroup(\"Basic input\", { template: \"editor_empty\" }, () => {\n  test(\"typing\", (expectDocument) => typeCharacters(\"abc\", () => expectDocument(\"abc\\n\")))\n\n  test(\"backspacing\", (expectDocument) =>\n    typeCharacters(\"abc\\b\", () => {\n      expectDocument(\"ab\\n\")\n    }))\n\n  test(\"pressing delete\", (expectDocument) =>\n    typeCharacters(\"ab\", () => moveCursor(\"left\", () => pressKey(\"delete\", () => expectDocument(\"a\\n\")))))\n\n  test(\"pressing return\", (expectDocument) =>\n    typeCharacters(\"ab\", () => pressKey(\"return\", () => typeCharacters(\"c\", () => expectDocument(\"ab\\nc\\n\")))))\n\n  test(\"pressing escape in Safari\", (expectDocument) =>\n    typeCharacters(\"a\", () => {\n      if (triggerEvent(document.activeElement, \"keydown\", { charCode: 0, keyCode: 27, which: 27, key: \"Escape\", code: \"Escape\" })) {\n        triggerEvent(document.activeElement, \"keypress\", { charCode: 27, keyCode: 27, which: 27, key: \"Escape\", code: \"Escape\" })\n      }\n      defer(() => expectDocument(\"a\\n\"))\n    }))\n\n  test(\"pressing escape in Firefox\", (expectDocument) =>\n    typeCharacters(\"a\", () => {\n      if (triggerEvent(document.activeElement, \"keydown\", { charCode: 0, keyCode: 27, which: 27, key: \"Escape\", code: \"Escape\" })) {\n        triggerEvent(document.activeElement, \"keypress\", { charCode: 0, keyCode: 27, which: 0, key: \"Escape\", code: \"Escape\" })\n      }\n      defer(() => expectDocument(\"a\\n\"))\n    }))\n\n  test(\"pressing escape in Chrome\", (expectDocument) =>\n    typeCharacters(\"a\", () => {\n      triggerEvent(document.activeElement, \"keydown\", {\n        charCode: 0,\n        keyCode: 27,\n        which: 27,\n        key: \"Escape\",\n        code: \"Escape\",\n      })\n      defer(() => expectDocument(\"a\\n\"))\n    }))\n\n  test(\"cursor left\", (expectDocument) =>\n    typeCharacters(\"ac\", () => moveCursor(\"left\", () => typeCharacters(\"b\", () => expectDocument(\"abc\\n\")))))\n\n  test(\"replace entire document\", (expectDocument) =>\n    typeCharacters(\"abc\", () => selectAll(() => typeCharacters(\"d\", () => expectDocument(\"d\\n\")))))\n\n  test(\"remove entire document\", (expectDocument) =>\n    typeCharacters(\"abc\", () => selectAll(() => typeCharacters(\"\\b\", () => expectDocument(\"\\n\")))))\n\n  test(\"drag text\", (expectDocument) =>\n    typeCharacters(\"abc\", () =>\n      moveCursor({ direction: \"left\", times: 2 }, (coordinates) =>\n        moveCursor(\"right\", () =>\n          expandSelection(\"right\", () => dragToCoordinates(coordinates, () => expectDocument(\"acb\\n\")))\n        )\n      )\n    ))\n\n  testIf(config.input.getLevel() === 0, \"inserting newline after cursor (control + o)\", (expectDocument) => {\n    typeCharacters(\"ab\", () => {\n      moveCursor(\"left\", () => {\n        triggerEvent(document.activeElement, \"keydown\", { charCode: 0, keyCode: 79, which: 79, ctrlKey: true })\n        defer(() => {\n          assert.locationRange({ index: 0, offset: 1 })\n          expectDocument(\"a\\nb\\n\")\n        })\n      })\n    })\n   })\n\n  testIf(config.input.getLevel() === 0, \"inserting ó with control + alt + o (AltGr)\", (expectDocument) => {\n    typeCharacters(\"ab\", () => {\n      moveCursor(\"left\", () => {\n        if (triggerEvent(document.activeElement, \"keydown\", { charCode: 0, keyCode: 79, which: 79, altKey: true, ctrlKey: true })) {\n          triggerEvent(document.activeElement, \"keypress\", { charCode: 243, keyCode: 243, which: 243, altKey: true, ctrlKey: true })\n          insertNode(document.createTextNode(\"ó\"))\n        }\n\n        defer(() => {\n          assert.locationRange({ index: 0, offset: 2 })\n          expectDocument(\"aób\\n\")\n        })\n      })\n    })\n  })\n})\n","import Text from \"trix/models/text\"\nimport Block from \"trix/models/block\"\nimport Document from \"trix/models/document\"\n\nimport {\n  assert,\n  clickToolbarButton,\n  defer,\n  expandSelection,\n  isToolbarButtonActive,\n  isToolbarButtonDisabled,\n  moveCursor,\n  pressKey,\n  replaceDocument,\n  selectAll,\n  test,\n  testGroup,\n  typeCharacters,\n} from \"test/test_helper\"\n\ntestGroup(\"Block formatting\", { template: \"editor_empty\" }, () => {\n  test(\"applying block attributes\", (done) => {\n    typeCharacters(\"abc\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        assert.blockAttributes([ 0, 4 ], [ \"quote\" ])\n        assert.ok(isToolbarButtonActive({ attribute: \"quote\" }))\n        clickToolbarButton({ attribute: \"code\" }, () => {\n          assert.blockAttributes([ 0, 4 ], [ \"quote\", \"code\" ])\n          assert.ok(isToolbarButtonActive({ attribute: \"code\" }))\n          clickToolbarButton({ attribute: \"code\" }, () => {\n            assert.blockAttributes([ 0, 4 ], [ \"quote\" ])\n            assert.notOk(isToolbarButtonActive({ attribute: \"code\" }))\n            assert.ok(isToolbarButtonActive({ attribute: \"quote\" }))\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"applying block attributes to text after newline\", (done) => {\n    typeCharacters(\"a\\nbc\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        assert.blockAttributes([ 0, 2 ], [])\n        assert.blockAttributes([ 2, 4 ], [ \"quote\" ])\n        done()\n      })\n    })\n  })\n\n  test(\"applying block attributes to text between newlines\", (done) => {\n    typeCharacters(\"ab\\ndef\\nghi\\nj\\n\", () => {\n      moveCursor({ direction: \"left\", times: 2 }, () => {\n        expandSelection({ direction: \"left\", times: 5 }, () => {\n          clickToolbarButton({ attribute: \"quote\" }, () => {\n            assert.blockAttributes([ 0, 3 ], [])\n            assert.blockAttributes([ 3, 11 ], [ \"quote\" ])\n            assert.blockAttributes([ 11, 13 ], [])\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"applying bullets to text with newlines\", (done) => {\n    typeCharacters(\"abc\\ndef\\nghi\\njkl\\nmno\\n\", () => {\n      moveCursor({ direction: \"left\", times: 2 }, () => {\n        expandSelection({ direction: \"left\", times: 15 }, () => {\n          clickToolbarButton({ attribute: \"bullet\" }, () => {\n            assert.blockAttributes([ 0, 4 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 4, 8 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 8, 12 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 12, 16 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 16, 20 ], [ \"bulletList\", \"bullet\" ])\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"applying block attributes to adjacent unformatted blocks consolidates them\", (done) => {\n    const document = new Document([\n      new Block(Text.textForStringWithAttributes(\"1\"), [ \"bulletList\", \"bullet\" ]),\n      new Block(Text.textForStringWithAttributes(\"a\"), []),\n      new Block(Text.textForStringWithAttributes(\"b\"), []),\n      new Block(Text.textForStringWithAttributes(\"c\"), []),\n      new Block(Text.textForStringWithAttributes(\"2\"), [ \"bulletList\", \"bullet\" ]),\n      new Block(Text.textForStringWithAttributes(\"3\"), [ \"bulletList\", \"bullet\" ]),\n    ])\n\n    replaceDocument(document)\n    getEditorController().setLocationRange([\n      { index: 0, offset: 0 },\n      { index: 5, offset: 1 },\n    ])\n    defer(() => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\", \"quote\" ])\n        assert.blockAttributes([ 2, 8 ], [ \"quote\" ])\n        assert.blockAttributes([ 8, 10 ], [ \"bulletList\", \"bullet\", \"quote\" ])\n        assert.blockAttributes([ 10, 12 ], [ \"bulletList\", \"bullet\", \"quote\" ])\n        done()\n      })\n    })\n  })\n\n  test(\"breaking out of the end of a block\", (done) => {\n    typeCharacters(\"abc\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        typeCharacters(\"\\n\\n\", () => {\n          const document = getDocument()\n          assert.equal(document.getBlockCount(), 2)\n\n          let block = document.getBlockAtIndex(0)\n          assert.deepEqual(block.getAttributes(), [ \"quote\" ])\n          assert.equal(block.toString(), \"abc\\n\")\n\n          block = document.getBlockAtIndex(1)\n          assert.deepEqual(block.getAttributes(), [])\n          assert.equal(block.toString(), \"\\n\")\n\n          assert.locationRange({ index: 1, offset: 0 })\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"breaking out of the middle of a block before character\", (done) => {\n    // * = cursor\n    //\n    // ab\n    // *c\n    //\n    typeCharacters(\"abc\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        moveCursor(\"left\", () => {\n          typeCharacters(\"\\n\\n\", () => {\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 3)\n\n            let block = document.getBlockAtIndex(0)\n            assert.deepEqual(block.getAttributes(), [ \"quote\" ])\n            assert.equal(block.toString(), \"ab\\n\")\n\n            block = document.getBlockAtIndex(1)\n            assert.deepEqual(block.getAttributes(), [])\n            assert.equal(block.toString(), \"\\n\")\n\n            block = document.getBlockAtIndex(2)\n            assert.deepEqual(block.getAttributes(), [ \"quote\" ])\n            assert.equal(block.toString(), \"c\\n\")\n\n            assert.locationRange({ index: 2, offset: 0 })\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"breaking out of the middle of a block before newline\", (done) => {\n    // * = cursor\n    //\n    // ab\n    // *\n    // c\n    //\n    typeCharacters(\"abc\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        moveCursor(\"left\", () => {\n          typeCharacters(\"\\n\", () => {\n            moveCursor(\"left\", () => {\n              typeCharacters(\"\\n\\n\", () => {\n                const document = getDocument()\n                assert.equal(document.getBlockCount(), 3)\n\n                let block = document.getBlockAtIndex(0)\n                assert.deepEqual(block.getAttributes(), [ \"quote\" ])\n                assert.equal(block.toString(), \"ab\\n\")\n\n                block = document.getBlockAtIndex(1)\n                assert.deepEqual(block.getAttributes(), [])\n                assert.equal(block.toString(), \"\\n\")\n\n                block = document.getBlockAtIndex(2)\n                assert.deepEqual(block.getAttributes(), [ \"quote\" ])\n                assert.equal(block.toString(), \"c\\n\")\n\n                done()\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"breaking out of a formatted block with adjacent non-formatted blocks\", (expectDocument) => {\n    // * = cursor\n    //\n    // a\n    // b*\n    // c\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"a\"), []),\n      new Block(Text.textForStringWithAttributes(\"b\"), [ \"quote\" ]),\n      new Block(Text.textForStringWithAttributes(\"c\"), []),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(3)\n\n    typeCharacters(\"\\n\\n\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 4)\n      assert.blockAttributes([ 0, 1 ], [])\n      assert.blockAttributes([ 2, 3 ], [ \"quote\" ])\n      assert.blockAttributes([ 4, 5 ], [])\n      assert.blockAttributes([ 5, 6 ], [])\n      expectDocument(\"a\\nb\\n\\nc\\n\")\n    })\n  })\n\n  test(\"breaking out a block after newline at offset 0\", (done) => // * = cursor\n    //\n    //\n    // *a\n    //\n    typeCharacters(\"a\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        moveCursor(\"left\", () => {\n          typeCharacters(\"\\n\\n\", () => {\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 2)\n\n            let block = document.getBlockAtIndex(0)\n            assert.deepEqual(block.getAttributes(), [])\n            assert.equal(block.toString(), \"\\n\")\n\n            block = document.getBlockAtIndex(1)\n            assert.deepEqual(block.getAttributes(), [ \"quote\" ])\n            assert.equal(block.toString(), \"a\\n\")\n            assert.locationRange({ index: 1, offset: 0 })\n\n            done()\n          })\n        })\n      })\n    }))\n\n  test(\"deleting the only non-block-break character in a block\", (done) => {\n    typeCharacters(\"ab\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        typeCharacters(\"\\b\\b\", () => {\n          assert.blockAttributes([ 0, 1 ], [ \"quote\" ])\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"backspacing a quote\", (done) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      assert.blockAttributes([ 0, 1 ], [ \"quote\" ])\n      pressKey(\"backspace\", () => {\n        assert.blockAttributes([ 0, 1 ], [])\n        done()\n      })\n    })\n  })\n\n  test(\"backspacing a nested quote\", (done) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n        assert.blockAttributes([ 0, 1 ], [ \"quote\", \"quote\" ])\n        pressKey(\"backspace\", () => {\n          assert.blockAttributes([ 0, 1 ], [ \"quote\" ])\n          pressKey(\"backspace\", () => {\n            assert.blockAttributes([ 0, 1 ], [])\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"backspacing a list item\", (done) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n      pressKey(\"backspace\", () => {\n        assert.blockAttributes([ 0, 0 ], [])\n        done()\n      })\n    })\n  })\n\n  test(\"backspacing a nested list item\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\\n\", () => {\n        clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n          assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ])\n          pressKey(\"backspace\", () => {\n            assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\" ])\n            expectDocument(\"a\\n\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"backspacing a list item inside a quote\", (done) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      clickToolbarButton({ attribute: \"bullet\" }, () => {\n        assert.blockAttributes([ 0, 1 ], [ \"quote\", \"bulletList\", \"bullet\" ])\n        pressKey(\"backspace\", () => {\n          assert.blockAttributes([ 0, 1 ], [ \"quote\" ])\n          pressKey(\"backspace\", () => {\n            assert.blockAttributes([ 0, 1 ], [])\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"backspacing selected nested list items\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\\n\", () => {\n        clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n          typeCharacters(\"b\", () => {\n            getSelectionManager().setLocationRange([\n              { index: 0, offset: 0 },\n              { index: 1, offset: 1 },\n            ])\n            pressKey(\"backspace\", () => {\n              assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n              expectDocument(\"\\n\")\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"backspace selection spanning formatted blocks\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      typeCharacters(\"ab\\n\\n\", () => {\n        clickToolbarButton({ attribute: \"code\" }, () => {\n          typeCharacters(\"cd\", () => {\n            getSelectionManager().setLocationRange([\n              { index: 0, offset: 1 },\n              { index: 1, offset: 1 },\n            ])\n            getComposition().deleteInDirection(\"backward\")\n            assert.blockAttributes([ 0, 2 ], [ \"quote\" ])\n            expectDocument(\"ad\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"backspace selection spanning and entire formatted block and a formatted block\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      typeCharacters(\"ab\\n\\n\", () => {\n        clickToolbarButton({ attribute: \"code\" }, () => {\n          typeCharacters(\"cd\", () => {\n            getSelectionManager().setLocationRange([\n              { index: 0, offset: 0 },\n              { index: 1, offset: 1 },\n            ])\n            getComposition().deleteInDirection(\"backward\")\n            assert.blockAttributes([ 0, 2 ], [ \"code\" ])\n            expectDocument(\"d\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"increasing list level\", (done) => {\n    assert.ok(isToolbarButtonDisabled({ action: \"increaseNestingLevel\" }))\n    assert.ok(isToolbarButtonDisabled({ action: \"decreaseNestingLevel\" }))\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      assert.ok(isToolbarButtonDisabled({ action: \"increaseNestingLevel\" }))\n      assert.notOk(isToolbarButtonDisabled({ action: \"decreaseNestingLevel\" }))\n      typeCharacters(\"a\\n\", () => {\n        assert.notOk(isToolbarButtonDisabled({ action: \"increaseNestingLevel\" }))\n        assert.notOk(isToolbarButtonDisabled({ action: \"decreaseNestingLevel\" }))\n        clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n          typeCharacters(\"b\", () => {\n            assert.ok(isToolbarButtonDisabled({ action: \"increaseNestingLevel\" }))\n            assert.notOk(isToolbarButtonDisabled({ action: \"decreaseNestingLevel\" }))\n            assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 2, 4 ], [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ])\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"changing list type\", (done) =>\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n      clickToolbarButton({ attribute: \"number\" }, () => {\n        assert.blockAttributes([ 0, 1 ], [ \"numberList\", \"number\" ])\n        done()\n      })\n    }))\n\n  test(\"adding bullet to heading block\", (done) => {\n    clickToolbarButton({ attribute: \"heading1\" }, () => {\n      clickToolbarButton({ attribute: \"bullet\" }, () => {\n        assert.ok(isToolbarButtonActive({ attribute: \"heading1\" }))\n        assert.blockAttributes([ 1, 2 ], [])\n        done()\n      })\n    })\n  })\n\n  test(\"removing bullet from heading block\", (done) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      clickToolbarButton({ attribute: \"heading1\" }, () => {\n        assert.ok(isToolbarButtonDisabled({ attribute: \"bullet\" }))\n        done()\n      })\n    })\n  })\n\n  test(\"breaking out of heading in list\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      clickToolbarButton({ attribute: \"heading1\" }, () => {\n        assert.ok(isToolbarButtonActive({ attribute: \"heading1\" }))\n        typeCharacters(\"abc\", () => {\n          typeCharacters(\"\\n\", () => {\n            assert.ok(isToolbarButtonActive({ attribute: \"bullet\" }))\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 2)\n            assert.blockAttributes([ 0, 4 ], [ \"bulletList\", \"bullet\", \"heading1\" ])\n            assert.blockAttributes([ 4, 5 ], [ \"bulletList\", \"bullet\" ])\n            expectDocument(\"abc\\n\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"breaking out of middle of heading block\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"heading1\" }, () => {\n      typeCharacters(\"abc\", () => {\n        assert.ok(isToolbarButtonActive({ attribute: \"heading1\" }))\n        moveCursor({ direction: \"left\", times: 1 }, () => {\n          typeCharacters(\"\\n\", () => {\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 2)\n            assert.blockAttributes([ 0, 3 ], [ \"heading1\" ])\n            assert.blockAttributes([ 3, 4 ], [ \"heading1\" ])\n            expectDocument(\"ab\\nc\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"breaking out of middle of heading block with preceding blocks\", (expectDocument) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"a\"), [ \"heading1\" ]),\n      new Block(Text.textForStringWithAttributes(\"b\"), []),\n      new Block(Text.textForStringWithAttributes(\"cd\"), [ \"heading1\" ]),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(5)\n    assert.ok(isToolbarButtonActive({ attribute: \"heading1\" }))\n\n    typeCharacters(\"\\n\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 4)\n      assert.blockAttributes([ 0, 1 ], [ \"heading1\" ])\n      assert.blockAttributes([ 2, 3 ], [])\n      assert.blockAttributes([ 4, 5 ], [ \"heading1\" ])\n      assert.blockAttributes([ 6, 7 ], [ \"heading1\" ])\n      expectDocument(\"a\\nb\\nc\\nd\\n\")\n    })\n  })\n\n  test(\"breaking out of end of heading block with preceding blocks\", (expectDocument) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"a\"), [ \"heading1\" ]),\n      new Block(Text.textForStringWithAttributes(\"b\"), []),\n      new Block(Text.textForStringWithAttributes(\"cd\"), [ \"heading1\" ]),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(6)\n    assert.ok(isToolbarButtonActive({ attribute: \"heading1\" }))\n\n    typeCharacters(\"\\n\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 4)\n      assert.blockAttributes([ 0, 1 ], [ \"heading1\" ])\n      assert.blockAttributes([ 2, 3 ], [])\n      assert.blockAttributes([ 4, 6 ], [ \"heading1\" ])\n      assert.blockAttributes([ 7, 8 ], [])\n      expectDocument(\"a\\nb\\ncd\\n\\n\")\n    })\n  })\n\n  test(\"inserting newline before heading\", (done) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"\\n\"), []),\n      new Block(Text.textForStringWithAttributes(\"abc\"), [ \"heading1\" ]),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(0)\n\n    typeCharacters(\"\\n\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 2)\n\n      let block = document.getBlockAtIndex(0)\n      assert.deepEqual(block.getAttributes(), [])\n      assert.equal(block.toString(), \"\\n\\n\\n\")\n\n      block = document.getBlockAtIndex(1)\n      assert.deepEqual(block.getAttributes(), [ \"heading1\" ])\n      assert.equal(block.toString(), \"abc\\n\")\n\n      done()\n    })\n  })\n\n  test(\"inserting multiple newlines before heading\", (done) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"\\n\"), []),\n      new Block(Text.textForStringWithAttributes(\"abc\"), [ \"heading1\" ]),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(0)\n\n    typeCharacters(\"\\n\\n\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 2)\n\n      let block = document.getBlockAtIndex(0)\n      assert.deepEqual(block.getAttributes(), [])\n      assert.equal(block.toString(), \"\\n\\n\\n\\n\")\n\n      block = document.getBlockAtIndex(1)\n      assert.deepEqual(block.getAttributes(), [ \"heading1\" ])\n      assert.equal(block.toString(), \"abc\\n\")\n      done()\n    })\n  })\n\n  test(\"inserting multiple newlines before formatted block\", (expectDocument) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"\\n\"), []),\n      new Block(Text.textForStringWithAttributes(\"abc\"), [ \"quote\" ]),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(1)\n\n    typeCharacters(\"\\n\\n\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 2)\n      assert.blockAttributes([ 0, 1 ], [])\n      assert.blockAttributes([ 2, 3 ], [])\n      assert.blockAttributes([ 4, 6 ], [ \"quote\" ])\n      assert.locationRange({ index: 0, offset: 3 })\n      expectDocument(\"\\n\\n\\n\\nabc\\n\")\n    })\n  })\n\n  test(\"inserting newline after heading with text in following block\", (expectDocument) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"ab\"), [ \"heading1\" ]),\n      new Block(Text.textForStringWithAttributes(\"cd\"), []),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(2)\n\n    typeCharacters(\"\\n\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 3)\n      assert.blockAttributes([ 0, 2 ], [ \"heading1\" ])\n      assert.blockAttributes([ 3, 4 ], [])\n      assert.blockAttributes([ 5, 6 ], [])\n      expectDocument(\"ab\\n\\ncd\\n\")\n    })\n  })\n\n  test(\"backspacing a newline in an empty block with adjacent formatted blocks\", (expectDocument) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"abc\"), [ \"heading1\" ]),\n      new Block(),\n      new Block(Text.textForStringWithAttributes(\"d\"), [ \"heading1\" ]),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(4)\n\n    pressKey(\"backspace\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 2)\n      assert.blockAttributes([ 0, 1 ], [ \"heading1\" ])\n      assert.blockAttributes([ 2, 3 ], [ \"heading1\" ])\n      expectDocument(\"abc\\nd\\n\")\n    })\n  })\n\n  test(\"backspacing a newline at beginning of non-formatted block\", (expectDocument) => {\n    let document = new Document([\n      new Block(Text.textForStringWithAttributes(\"ab\"), [ \"heading1\" ]),\n      new Block(Text.textForStringWithAttributes(\"\\ncd\"), []),\n    ])\n\n    replaceDocument(document)\n    getEditor().setSelectedRange(3)\n\n    pressKey(\"backspace\", () => {\n      document = getDocument()\n      assert.equal(document.getBlockCount(), 2)\n      assert.blockAttributes([ 0, 2 ], [ \"heading1\" ])\n      assert.blockAttributes([ 3, 5 ], [])\n      expectDocument(\"ab\\ncd\\n\")\n    })\n  })\n\n  test(\"inserting newline after single character header\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"heading1\" }, () => {\n      typeCharacters(\"a\", () => {\n        typeCharacters(\"\\n\", () => {\n          const document = getDocument()\n          assert.equal(document.getBlockCount(), 2)\n          assert.blockAttributes([ 0, 1 ], [ \"heading1\" ])\n          expectDocument(\"a\\n\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"terminal attributes are only added once\", (expectDocument) => {\n    replaceDocument(\n      new Document([\n        new Block(Text.textForStringWithAttributes(\"a\"), []),\n        new Block(Text.textForStringWithAttributes(\"b\"), [ \"heading1\" ]),\n        new Block(Text.textForStringWithAttributes(\"c\"), []),\n      ])\n    )\n\n    selectAll(() => {\n      clickToolbarButton({ attribute: \"heading1\" }, () => {\n        assert.equal(getDocument().getBlockCount(), 3)\n        assert.blockAttributes([ 0, 1 ], [ \"heading1\" ])\n        assert.blockAttributes([ 2, 3 ], [ \"heading1\" ])\n        assert.blockAttributes([ 4, 5 ], [ \"heading1\" ])\n        expectDocument(\"a\\nb\\nc\\n\")\n      })\n    })\n  })\n\n  test(\"terminal attributes replace existing terminal attributes\", (expectDocument) => {\n    replaceDocument(\n      new Document([\n        new Block(Text.textForStringWithAttributes(\"a\"), []),\n        new Block(Text.textForStringWithAttributes(\"b\"), [ \"heading1\" ]),\n        new Block(Text.textForStringWithAttributes(\"c\"), []),\n      ])\n    )\n\n    selectAll(() => {\n      clickToolbarButton({ attribute: \"code\" }, () => {\n        assert.equal(getDocument().getBlockCount(), 3)\n        assert.blockAttributes([ 0, 1 ], [ \"code\" ])\n        assert.blockAttributes([ 2, 3 ], [ \"code\" ])\n        assert.blockAttributes([ 4, 5 ], [ \"code\" ])\n        expectDocument(\"a\\nb\\nc\\n\")\n      })\n    })\n  })\n\n  test(\"code blocks preserve newlines\", (expectDocument) => {\n    typeCharacters(\"a\\nb\", () => {\n      selectAll(() => {\n        clickToolbarButton({ attribute: \"code\" }, () => {\n          assert.equal(getDocument().getBlockCount(), 1)\n          assert.blockAttributes([ 0, 3 ], [ \"code\" ])\n          expectDocument(\"a\\nb\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"code blocks are not indentable\", (done) => {\n    clickToolbarButton({ attribute: \"code\" }, () => {\n      assert.notOk(isToolbarButtonActive({ action: \"increaseNestingLevel\" }))\n      done()\n    })\n  })\n\n  test(\"code blocks are terminal\", (done) => {\n    clickToolbarButton({ attribute: \"code\" }, () => {\n      assert.ok(isToolbarButtonDisabled({ attribute: \"quote\" }))\n      assert.ok(isToolbarButtonDisabled({ attribute: \"heading1\" }))\n      assert.ok(isToolbarButtonDisabled({ attribute: \"bullet\" }))\n      assert.ok(isToolbarButtonDisabled({ attribute: \"number\" }))\n      assert.notOk(isToolbarButtonDisabled({ attribute: \"code\" }))\n      assert.notOk(isToolbarButtonDisabled({ attribute: \"bold\" }))\n      assert.notOk(isToolbarButtonDisabled({ attribute: \"italic\" }))\n      done()\n    })\n  })\n\n  test(\"unindenting a code block inside a bullet\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      clickToolbarButton({ attribute: \"code\" }, () => {\n        typeCharacters(\"a\", () => {\n          clickToolbarButton({ action: \"decreaseNestingLevel\" }, () => {\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 1)\n            assert.blockAttributes([ 0, 1 ], [ \"code\" ])\n            expectDocument(\"a\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"indenting a heading inside a bullet\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\", () => {\n        typeCharacters(\"\\n\", () => {\n          clickToolbarButton({ attribute: \"heading1\" }, () => {\n            typeCharacters(\"b\", () => {\n              clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n                const document = getDocument()\n                assert.equal(document.getBlockCount(), 2)\n                assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n                assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\", \"heading1\" ])\n                expectDocument(\"a\\nb\\n\")\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"indenting a quote inside a bullet\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n          const document = getDocument()\n          assert.equal(document.getBlockCount(), 1)\n          assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\", \"quote\", \"quote\" ])\n          expectDocument(\"\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"list indentation constraints consider the list type\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\\n\\n\", () => {\n        clickToolbarButton({ attribute: \"number\" }, () => {\n          clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 2)\n            assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 2, 3 ], [ \"numberList\", \"number\" ])\n            expectDocument(\"a\\n\\n\")\n          })\n        })\n      })\n    })\n  })\n})\n","import { assert, clickToolbarButton, moveCursor, test, testGroup, typeCharacters } from \"test/test_helper\"\n\ntestGroup(\"View caching\", { template: \"editor_empty\" }, () => {\n  test(\"reparsing and rendering identical texts\", (done) => {\n    typeCharacters(\"a\\nb\\na\", () => {\n      moveCursor({ direction: \"left\", times: 2 }, () => {\n        clickToolbarButton({ attribute: \"quote\" }, () => {\n          const html = getEditorElement().innerHTML\n          getEditorController().reparse()\n          getEditorController().render()\n          assert.equal(getEditorElement().innerHTML, html)\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"reparsing and rendering identical blocks\", (done) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\\na\", () => {\n        const html = getEditorElement().innerHTML\n        getEditorController().reparse()\n        getEditorController().render()\n        assert.equal(getEditorElement().innerHTML, html)\n        done()\n      })\n    })\n  })\n})\n","import { pressKey, test, testGroup, typeCharacters } from \"test/test_helper\"\n\nconst testOptions = {\n  template: \"editor_empty\",\n  setup() {\n    let handler\n    addEventListener(\"keydown\", cancel, true)\n    addEventListener(\n      \"trix-before-initialize\",\n      handler = function ({ target }) {\n        removeEventListener(\"trix-before-initialize\", handler)\n        target.addEventListener(\"keydown\", cancel)\n      }\n    )\n  },\n  teardown() {\n    removeEventListener(\"keydown\", cancel, true)\n  },\n}\n\nlet cancelingInCapturingPhase = false\nlet cancelingAtTarget = false\n\nconst cancel = (event) => {\n  switch (event.eventPhase) {\n    case Event.prototype.CAPTURING_PHASE:\n      if (cancelingInCapturingPhase) {\n        event.preventDefault()\n      }\n      break\n    case Event.prototype.AT_TARGET:\n      if (cancelingAtTarget) {\n        event.preventDefault()\n      }\n      break\n  }\n}\n\ntestGroup(\"Canceled input\", testOptions, () => {\n  test(\"ignoring canceled input events in capturing phase\", (expectDocument) => {\n    typeCharacters(\"a\", () => {\n      cancelingInCapturingPhase = true\n      pressKey(\"backspace\", () => {\n        pressKey(\"return\", () => {\n          cancelingInCapturingPhase = false\n          typeCharacters(\"b\", () => expectDocument(\"ab\\n\"))\n        })\n      })\n    })\n  })\n\n  test(\"ignoring canceled input events at target\", (expectDocument) => {\n    typeCharacters(\"a\", () => {\n      cancelingAtTarget = true\n      pressKey(\"backspace\", () => {\n        pressKey(\"return\", () => {\n          cancelingAtTarget = false\n          typeCharacters(\"b\", () => expectDocument(\"ab\\n\"))\n        })\n      })\n    })\n  })\n})\n","import config from \"trix/config\"\n\nimport {\n  assert,\n  clickToolbarButton,\n  defer,\n  endComposition,\n  insertNode,\n  pressKey,\n  selectNode,\n  startComposition,\n  test,\n  testGroup,\n  testIf,\n  triggerEvent,\n  triggerInputEvent,\n  typeCharacters,\n  updateComposition,\n} from \"test/test_helper\"\n\ntestGroup(\"Composition input\", { template: \"editor_empty\" }, () => {\n  test(\"composing\", (expectDocument) =>\n    startComposition(\"a\", () => updateComposition(\"ab\", () => endComposition(\"abc\", () => expectDocument(\"abc\\n\")))))\n\n  test(\"typing and composing\", (expectDocument) =>\n    typeCharacters(\"a\", () =>\n      startComposition(\"b\", () =>\n        updateComposition(\"bc\", () => endComposition(\"bcd\", () => typeCharacters(\"e\", () => expectDocument(\"abcde\\n\"))))\n      )\n    ))\n\n  test(\"composition input is serialized\", (expectDocument) => {\n    startComposition(\"´\", () => {\n      endComposition(\"é\", () => {\n        assert.equal(getEditorElement().value, \"<div>é</div>\")\n        expectDocument(\"é\\n\")\n      })\n    })\n  })\n\n  test(\"pressing after a canceled composition\", (expectDocument) => {\n    typeCharacters(\"ab\", () => {\n      triggerEvent(document.activeElement, \"compositionend\", { data: \"ab\" })\n      pressKey(\"return\", () => expectDocument(\"ab\\n\\n\"))\n    })\n  })\n\n  test(\"composing formatted text\", (expectDocument) => {\n    typeCharacters(\"abc\", () => {\n      clickToolbarButton({ attribute: \"bold\" }, () => {\n        startComposition(\"d\", () => {\n          updateComposition(\"de\", () => {\n            endComposition(\"def\", () => {\n              assert.textAttributes([ 0, 3 ], {})\n              assert.textAttributes([ 3, 6 ], { bold: true })\n              expectDocument(\"abcdef\\n\")\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"composing away from formatted text\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bold\" }, () => {\n      typeCharacters(\"abc\", () => {\n        clickToolbarButton({ attribute: \"bold\" }, () => {\n          startComposition(\"d\", () => {\n            updateComposition(\"de\", () => {\n              endComposition(\"def\", () => {\n                assert.textAttributes([ 0, 3 ], { bold: true })\n                assert.textAttributes([ 3, 6 ], {})\n                expectDocument(\"abcdef\\n\")\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"composing another language using a QWERTY keyboard\", (expectDocument) => {\n    const element = getEditorElement()\n    const keyCodes = { x: 120, i: 105 }\n\n    triggerEvent(element, \"keypress\", { charCode: keyCodes.x, keyCode: keyCodes.x, which: keyCodes.x })\n    startComposition(\"x\", () => {\n      triggerEvent(element, \"keypress\", { charCode: keyCodes.i, keyCode: keyCodes.i, which: keyCodes.i })\n      updateComposition(\"xi\", () => endComposition(\"喜\", () => expectDocument(\"喜\\n\")))\n    })\n  })\n\n  // Simulates the sequence of events when pressing backspace through a word on Android\n  testIf(config.input.getLevel() === 0, \"backspacing through a composition\", (expectDocument) => {\n    const element = getEditorElement()\n    element.editor.insertString(\"a cat\")\n\n    triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n    triggerEvent(element, \"compositionupdate\", { data: \"ca\" })\n    triggerEvent(element, \"input\")\n    removeCharacters(-1, () => {\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n      triggerEvent(element, \"compositionupdate\", { data: \"c\" })\n      triggerEvent(element, \"input\")\n      triggerEvent(element, \"compositionend\", { data: \"c\" })\n      removeCharacters(-1, () => pressKey(\"backspace\", () => expectDocument(\"a \\n\")))\n    })\n  })\n\n  // Simulates the sequence of events when pressing backspace at the end of a\n  // word and updating it on Android (running older versions of System WebView)\n  testIf(config.input.getLevel() === 0, \"updating a composition\", (expectDocument) => {\n    const element = getEditorElement()\n    element.editor.insertString(\"cat\")\n\n    triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n    triggerEvent(element, \"compositionstart\", { data: \"cat\" })\n    triggerEvent(element, \"compositionupdate\", { data: \"cat\" })\n    triggerEvent(element, \"input\")\n    removeCharacters(-1, () => {\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n      triggerEvent(element, \"compositionupdate\", { data: \"car\" })\n      triggerEvent(element, \"input\")\n      triggerEvent(element, \"compositionend\", { data: \"car\" })\n      insertNode(document.createTextNode(\"r\"), () => expectDocument(\"car\\n\"))\n    })\n  })\n\n  // Simulates the sequence of events when typing on Android and then tapping elsewhere\n  testIf(config.input.getLevel() === 0, \"leaving a composition\", (expectDocument) => {\n    const element = getEditorElement()\n\n    triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n    triggerEvent(element, \"compositionstart\", { data: \"\" })\n    triggerInputEvent(element, \"beforeinput\", { inputType: \"insertCompositionText\", data: \"c\" })\n    triggerEvent(element, \"compositionupdate\", { data: \"c\" })\n    triggerEvent(element, \"input\")\n    const node = document.createTextNode(\"c\")\n    insertNode(node)\n    selectNode(node)\n    defer(() => {\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n      triggerInputEvent(element, \"beforeinput\", { inputType: \"insertCompositionText\", data: \"ca\" })\n      triggerEvent(element, \"compositionupdate\", { data: \"ca\" })\n      triggerEvent(element, \"input\")\n      node.data = \"ca\"\n      defer(() => {\n        triggerEvent(element, \"compositionend\", { data: \"\" })\n        defer(() => expectDocument(\"ca\\n\"))\n      })\n    })\n  })\n\n  testIf(config.browser.composesExistingText, \"composition events from cursor movement are ignored\", (expectDocument) => {\n    const element = getEditorElement()\n    element.editor.insertString(\"ab \")\n\n    element.editor.setSelectedRange(0)\n    triggerEvent(element, \"compositionstart\", { data: \"\" })\n    triggerEvent(element, \"compositionupdate\", { data: \"ab\" })\n    defer(() => {\n      element.editor.setSelectedRange(1)\n      triggerEvent(element, \"compositionupdate\", { data: \"ab\" })\n      defer(() => {\n        element.editor.setSelectedRange(2)\n        triggerEvent(element, \"compositionupdate\", { data: \"ab\" })\n        defer(() => {\n          element.editor.setSelectedRange(3)\n          triggerEvent(element, \"compositionend\", { data: \"ab\" })\n          defer(() => expectDocument(\"ab \\n\"))\n        })\n      })\n    })\n  })\n\n  // Simulates compositions in Firefox where the final composition data is\n  // dispatched as both compositionupdate and compositionend.\n  testIf(config.input.getLevel() === 0, \"composition ending with same data as last update\", (expectDocument) => {\n    const element = getEditorElement()\n\n    triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n    triggerEvent(element, \"compositionstart\", { data: \"\" })\n    triggerEvent(element, \"compositionupdate\", { data: \"´\" })\n    const node = document.createTextNode(\"´\")\n    insertNode(node)\n    selectNode(node)\n    defer(() => {\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n      triggerEvent(element, \"compositionupdate\", { data: \"é\" })\n      triggerEvent(element, \"input\")\n      node.data = \"é\"\n      defer(() => {\n        triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n        triggerEvent(element, \"compositionupdate\", { data: \"éé\" })\n        triggerEvent(element, \"input\")\n        node.data = \"éé\"\n        defer(() => {\n          triggerEvent(element, \"compositionend\", { data: \"éé\" })\n          defer(() => {\n            assert.locationRange({ index: 0, offset: 2 })\n            expectDocument(\"éé\\n\")\n          })\n        })\n      })\n    })\n  })\n})\n\nconst removeCharacters = function (direction, callback) {\n  const selection = rangy.getSelection()\n  const range = selection.getRangeAt(0)\n  range.moveStart(\"character\", direction)\n  range.deleteContents()\n  defer(callback)\n}\n","import {\n  assert,\n  createFile,\n  expandSelection,\n  insertFile,\n  insertString,\n  moveCursor,\n  test,\n  testGroup,\n} from \"test/test_helper\"\n\ntestGroup(\"Cursor movement\", { template: \"editor_empty\" }, () => {\n  test(\"move cursor around attachment\", (done) => {\n    insertFile(createFile())\n    assert.locationRange({ index: 0, offset: 1 })\n    moveCursor(\"left\", () => {\n      assert.locationRange({ index: 0, offset: 0 }, { index: 0, offset: 1 })\n      moveCursor(\"left\", () => {\n        assert.locationRange({ index: 0, offset: 0 })\n        moveCursor(\"right\", () => {\n          assert.locationRange({ index: 0, offset: 0 }, { index: 0, offset: 1 })\n          moveCursor(\"right\", () => {\n            assert.locationRange({ index: 0, offset: 1 })\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"move cursor around attachment and text\", (done) => {\n    insertString(\"a\")\n    insertFile(createFile())\n    insertString(\"b\")\n    assert.locationRange({ index: 0, offset: 3 })\n    moveCursor(\"left\", () => {\n      assert.locationRange({ index: 0, offset: 2 })\n      moveCursor(\"left\", () => {\n        assert.locationRange({ index: 0, offset: 1 }, { index: 0, offset: 2 })\n        moveCursor(\"left\", () => {\n          assert.locationRange({ index: 0, offset: 1 })\n          moveCursor(\"left\", () => {\n            assert.locationRange({ index: 0, offset: 0 })\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"expand selection over attachment\", (done) => {\n    insertFile(createFile())\n    assert.locationRange({ index: 0, offset: 1 })\n    expandSelection(\"left\", () => {\n      assert.locationRange({ index: 0, offset: 0 }, { index: 0, offset: 1 })\n      moveCursor(\"left\", () => {\n        assert.locationRange({ index: 0, offset: 0 })\n        expandSelection(\"right\", () => {\n          assert.locationRange({ index: 0, offset: 0 }, { index: 0, offset: 1 })\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"expand selection over attachment and text\", (done) => {\n    insertString(\"a\")\n    insertFile(createFile())\n    insertString(\"b\")\n    assert.locationRange({ index: 0, offset: 3 })\n    expandSelection(\"left\", () => {\n      assert.locationRange({ index: 0, offset: 2 }, { index: 0, offset: 3 })\n      expandSelection(\"left\", () => {\n        assert.locationRange({ index: 0, offset: 1 }, { index: 0, offset: 3 })\n        expandSelection(\"left\", () => {\n          assert.locationRange({ index: 0, offset: 0 }, { index: 0, offset: 3 })\n          done()\n        })\n      })\n    })\n  })\n})\n","import { rangesAreEqual } from \"trix/core/helpers\"\n\nimport {\n  TEST_IMAGE_URL,\n  after,\n  assert,\n  clickElement,\n  clickToolbarButton,\n  createFile,\n  defer,\n  insertImageAttachment,\n  moveCursor,\n  pasteContent,\n  test,\n  testGroup,\n  testIf,\n  triggerEvent,\n  typeCharacters,\n  typeInToolbarDialog,\n} from \"test/test_helper\"\n\ntestGroup(\"Custom element API\", { template: \"editor_empty\" }, () => {\n  test(\"element triggers trix-initialize on first connect\", (done) => {\n    const container = document.getElementById(\"trix-container\")\n    container.innerHTML = \"\"\n\n    let initializeEventCount = 0\n    const element = document.createElement(\"trix-editor\")\n    element.addEventListener(\"trix-initialize\", () => initializeEventCount++)\n\n    container.appendChild(element)\n    requestAnimationFrame(() => {\n      container.removeChild(element)\n      requestAnimationFrame(() => {\n        container.appendChild(element)\n        after(60, () => {\n          assert.equal(initializeEventCount, 1)\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"files are accepted by default\", () => {\n    getComposition().insertFile(createFile())\n    assert.equal(getComposition().getAttachments().length, 1)\n  })\n\n  test(\"rejecting a file by canceling the trix-file-accept event\", () => {\n    getEditorElement().addEventListener(\"trix-file-accept\", (event) => event.preventDefault())\n    getComposition().insertFile(createFile())\n    assert.equal(getComposition().getAttachments().length, 0)\n  })\n\n  test(\"element triggers attachment events\", () => {\n    const file = createFile()\n    const element = getEditorElement()\n    const composition = getComposition()\n    let attachment = null\n    const events = []\n\n    element.addEventListener(\"trix-file-accept\", function (event) {\n      events.push(event.type)\n      assert.ok(file === event.file)\n    })\n\n    element.addEventListener(\"trix-attachment-add\", function (event) {\n      events.push(event.type)\n      attachment = event.attachment\n    })\n\n    composition.insertFile(file)\n    assert.deepEqual(events, [ \"trix-file-accept\", \"trix-attachment-add\" ])\n\n    element.addEventListener(\"trix-attachment-remove\", function (event) {\n      events.push(event.type)\n      assert.ok(attachment === event.attachment)\n    })\n\n    attachment.remove()\n    assert.deepEqual(events, [ \"trix-file-accept\", \"trix-attachment-add\", \"trix-attachment-remove\" ])\n  })\n\n  test(\"element triggers trix-change when an attachment is edited\", () => {\n    const file = createFile()\n    const element = getEditorElement()\n    const composition = getComposition()\n    let attachment = null\n    const events = []\n\n    element.addEventListener(\"trix-attachment-add\", (event) => attachment = event.attachment)\n\n    composition.insertFile(file)\n\n    element.addEventListener(\"trix-attachment-edit\", (event) => events.push(event.type))\n\n    element.addEventListener(\"trix-change\", (event) => events.push(event.type))\n\n    attachment.setAttributes({ width: 9876 })\n    assert.deepEqual(events, [ \"trix-attachment-edit\", \"trix-change\" ])\n  })\n\n  test(\"editing the document in a trix-attachment-add handler doesn't trigger trix-attachment-add again\", () => {\n    const element = getEditorElement()\n    const composition = getComposition()\n    let eventCount = 0\n\n    element.addEventListener(\"trix-attachment-add\", () => {\n      if (eventCount++ === 0) {\n        element.editor.setSelectedRange([ 0, 1 ])\n        element.editor.activateAttribute(\"bold\")\n      }\n    })\n\n    composition.insertFile(createFile())\n    assert.equal(eventCount, 1)\n  })\n\n  test(\"element triggers trix-change events when the document changes\", (done) => {\n    const element = getEditorElement()\n    let eventCount = 0\n    element.addEventListener(\"trix-change\", (event) => eventCount++)\n\n    typeCharacters(\"a\", () => {\n      assert.equal(eventCount, 1)\n      moveCursor(\"left\", () => {\n        assert.equal(eventCount, 1)\n        typeCharacters(\"bcd\", () => {\n          assert.equal(eventCount, 4)\n          clickToolbarButton({ action: \"undo\" }, () => {\n            assert.equal(eventCount, 5)\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"element triggers trix-change event after toggling attributes\", (done) => {\n    const element = getEditorElement()\n    const { editor } = element\n\n    const afterChangeEvent = function (edit, callback) {\n      let handler\n      element.addEventListener(\n        \"trix-change\",\n        handler = function (event) {\n          element.removeEventListener(\"trix-change\", handler)\n          callback(event)\n        }\n      )\n      edit()\n    }\n\n    typeCharacters(\"hello\", () => {\n      let edit = () => editor.activateAttribute(\"quote\")\n      afterChangeEvent(edit, () => {\n        assert.ok(editor.attributeIsActive(\"quote\"))\n\n        edit = () => editor.deactivateAttribute(\"quote\")\n        afterChangeEvent(edit, () => {\n          assert.notOk(editor.attributeIsActive(\"quote\"))\n\n          editor.setSelectedRange([ 0, 5 ])\n          edit = () => editor.activateAttribute(\"bold\")\n          afterChangeEvent(edit, () => {\n            assert.ok(editor.attributeIsActive(\"bold\"))\n\n            edit = () => editor.deactivateAttribute(\"bold\")\n            afterChangeEvent(edit, () => {\n              assert.notOk(editor.attributeIsActive(\"bold\"))\n              done()\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"disabled attributes aren't considered active\", (done) => {\n    const { editor } = getEditorElement()\n    editor.activateAttribute(\"heading1\")\n    assert.notOk(editor.attributeIsActive(\"code\"))\n    assert.notOk(editor.attributeIsActive(\"quote\"))\n    done()\n  })\n\n  test(\"element triggers trix-selection-change events when the location range changes\", (done) => {\n    const element = getEditorElement()\n    let eventCount = 0\n    element.addEventListener(\"trix-selection-change\", (event) => eventCount++)\n\n    typeCharacters(\"a\", () => {\n      assert.equal(eventCount, 1)\n      moveCursor(\"left\", () => {\n        assert.equal(eventCount, 2)\n        done()\n      })\n    })\n  })\n\n  test(\"only triggers trix-selection-change events on the active element\", (done) => {\n    const elementA = getEditorElement()\n    const elementB = document.createElement(\"trix-editor\")\n    elementA.parentNode.insertBefore(elementB, elementA.nextSibling)\n\n    elementB.addEventListener(\"trix-initialize\", () => {\n      elementA.editor.insertString(\"a\")\n      elementB.editor.insertString(\"b\")\n      rangy.getSelection().removeAllRanges()\n\n      let eventCountA = 0\n      let eventCountB = 0\n      elementA.addEventListener(\"trix-selection-change\", (event) => eventCountA++)\n      elementB.addEventListener(\"trix-selection-change\", (event) => eventCountB++)\n\n      elementA.editor.setSelectedRange(0)\n      assert.equal(eventCountA, 1)\n      assert.equal(eventCountB, 0)\n\n      elementB.editor.setSelectedRange(0)\n      assert.equal(eventCountA, 1)\n      assert.equal(eventCountB, 1)\n\n      elementA.editor.setSelectedRange(1)\n      assert.equal(eventCountA, 2)\n      assert.equal(eventCountB, 1)\n      done()\n    })\n  })\n\n  test(\"element triggers toolbar dialog events\", (done) => {\n    const element = getEditorElement()\n    const events = []\n\n    element.addEventListener(\"trix-toolbar-dialog-show\", (event) => events.push(event.type))\n\n    element.addEventListener(\"trix-toolbar-dialog-hide\", (event) => events.push(event.type))\n\n    clickToolbarButton({ action: \"link\" }, () => {\n      typeInToolbarDialog(\"http://example.com\", { attribute: \"href\" }, () => {\n        defer(() => {\n          assert.deepEqual(events, [ \"trix-toolbar-dialog-show\", \"trix-toolbar-dialog-hide\" ])\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"element triggers before-paste event with paste data\", (expectDocument) => {\n    const element = getEditorElement()\n    let eventCount = 0\n    let paste = null\n\n    element.addEventListener(\"trix-before-paste\", function (event) {\n      eventCount++\n      paste = event.paste\n    })\n\n    typeCharacters(\"\", () => {\n      pasteContent(\"text/html\", \"<strong>hello</strong>\", () => {\n        assert.equal(eventCount, 1)\n        assert.equal(paste.type, \"text/html\")\n        assert.equal(paste.html, \"<strong>hello</strong>\")\n        expectDocument(\"hello\\n\")\n      })\n    })\n  })\n\n  test(\"element triggers before-paste event with mutable paste data\", (expectDocument) => {\n    const element = getEditorElement()\n    let eventCount = 0\n    let paste = null\n\n    element.addEventListener(\"trix-before-paste\", function (event) {\n      eventCount++\n      paste = event.paste\n      paste.html = \"<strong>greetings</strong>\"\n    })\n\n    typeCharacters(\"\", () => {\n      pasteContent(\"text/html\", \"<strong>hello</strong>\", () => {\n        assert.equal(eventCount, 1)\n        assert.equal(paste.type, \"text/html\")\n        expectDocument(\"greetings\\n\")\n      })\n    })\n  })\n\n  test(\"element triggers paste event with position range\", (done) => {\n    const element = getEditorElement()\n    let eventCount = 0\n    let paste = null\n\n    element.addEventListener(\"trix-paste\", function (event) {\n      eventCount++\n      paste = event.paste\n    })\n\n    typeCharacters(\"\", () => {\n      pasteContent(\"text/html\", \"<strong>hello</strong>\", () => {\n        assert.equal(eventCount, 1)\n        assert.equal(paste.type, \"text/html\")\n        assert.ok(rangesAreEqual([ 0, 5 ], paste.range))\n        done()\n      })\n    })\n  })\n\n  test(\"element triggers attribute change events\", (done) => {\n    const element = getEditorElement()\n    let eventCount = 0\n    let attributes = null\n\n    element.addEventListener(\"trix-attributes-change\", function (event) {\n      eventCount++\n      attributes = event.attributes\n    })\n\n    typeCharacters(\"\", () => {\n      assert.equal(eventCount, 0)\n      clickToolbarButton({ attribute: \"bold\" }, () => {\n        assert.equal(eventCount, 1)\n        assert.deepEqual({ bold: true }, attributes)\n        done()\n      })\n    })\n  })\n\n  test(\"element triggers action change events\", (done) => {\n    const element = getEditorElement()\n    let eventCount = 0\n    let actions = null\n\n    element.addEventListener(\"trix-actions-change\", function (event) {\n      eventCount++\n      actions = event.actions\n    })\n\n    typeCharacters(\"\", () => {\n      assert.equal(eventCount, 0)\n      clickToolbarButton({ attribute: \"bullet\" }, () => {\n        assert.equal(eventCount, 1)\n        assert.equal(actions.decreaseNestingLevel, true)\n        assert.equal(actions.increaseNestingLevel, false)\n        done()\n      })\n    })\n  })\n\n  test(\"element triggers custom focus and blur events\", (done) => {\n    const element = getEditorElement()\n\n    let focusEventCount = 0\n    let blurEventCount = 0\n    element.addEventListener(\"trix-focus\", () => focusEventCount++)\n    element.addEventListener(\"trix-blur\", () => blurEventCount++)\n\n    triggerEvent(element, \"blur\")\n    defer(() => {\n      assert.equal(blurEventCount, 1)\n      assert.equal(focusEventCount, 0)\n\n      triggerEvent(element, \"focus\")\n      defer(() => {\n        assert.equal(blurEventCount, 1)\n        assert.equal(focusEventCount, 1)\n\n        insertImageAttachment()\n        after(20, () => {\n          clickElement(element.querySelector(\"figure\"), () => {\n            const textarea = element.querySelector(\"textarea\")\n            textarea.focus()\n            defer(() => {\n              assert.equal(document.activeElement, textarea)\n              assert.equal(blurEventCount, 1)\n              assert.equal(focusEventCount, 1)\n              done()\n            })\n          })\n        })\n      })\n    })\n  })\n\n  // Selenium doesn't seem to focus windows properly in some browsers (FF 47 on OS X)\n  // so skip this test when unfocused pending a better solution.\n  testIf(document.hasFocus(), \"element triggers custom focus event when autofocusing\", (done) => {\n    const element = document.createElement(\"trix-editor\")\n    element.setAttribute(\"autofocus\", \"\")\n\n    let focusEventCount = 0\n    element.addEventListener(\"trix-focus\", () => focusEventCount++)\n\n    const container = document.getElementById(\"trix-container\")\n    container.innerHTML = \"\"\n    container.appendChild(element)\n\n    element.addEventListener(\"trix-initialize\", () => {\n      assert.equal(focusEventCount, 1)\n      done()\n    })\n  })\n\n  test(\"element serializes HTML after attribute changes\", (done) => {\n    const element = getEditorElement()\n    let serializedHTML = element.value\n\n    typeCharacters(\"a\", () => {\n      assert.notEqual(serializedHTML, element.value)\n      serializedHTML = element.value\n\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        assert.notEqual(serializedHTML, element.value)\n        serializedHTML = element.value\n\n        clickToolbarButton({ attribute: \"quote\" }, () => {\n          assert.notEqual(serializedHTML, element.value)\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"element serializes HTML after attachment attribute changes\", (done) => {\n    const element = getEditorElement()\n    const attributes = { url: \"test_helpers/fixtures/logo.png\", contentType: \"image/png\" }\n\n    element.addEventListener(\"trix-attachment-add\", function (event) {\n      const { attachment } = event\n      requestAnimationFrame(() => {\n        let serializedHTML = element.value\n        attachment.setAttributes(attributes)\n        assert.notEqual(serializedHTML, element.value)\n\n        serializedHTML = element.value\n        assert.ok(serializedHTML.indexOf(TEST_IMAGE_URL) < 0, \"serialized HTML contains previous attachment attributes\")\n        assert.ok(\n          serializedHTML.indexOf(attributes.url) > 0,\n          \"serialized HTML doesn't contain current attachment attributes\"\n        )\n\n        attachment.remove()\n        requestAnimationFrame(() => done())\n      })\n    })\n\n    requestAnimationFrame(() => insertImageAttachment())\n  })\n\n  test(\"editor resets to its original value on form reset\", (expectDocument) => {\n    const element = getEditorElement()\n    const { form } = element.inputElement\n\n    typeCharacters(\"hello\", () => {\n      form.reset()\n      expectDocument(\"\\n\")\n    })\n  })\n\n  test(\"editor resets to last-set value on form reset\", (expectDocument) => {\n    const element = getEditorElement()\n    const { form } = element.inputElement\n\n    element.value = \"hi\"\n    typeCharacters(\"hello\", () => {\n      form.reset()\n      expectDocument(\"hi\\n\")\n    })\n  })\n\n  test(\"editor respects preventDefault on form reset\", (expectDocument) => {\n    const element = getEditorElement()\n    const { form } = element.inputElement\n    const preventDefault = (event) => event.preventDefault()\n\n    typeCharacters(\"hello\", () => {\n      form.addEventListener(\"reset\", preventDefault, false)\n      form.reset()\n      form.removeEventListener(\"reset\", preventDefault, false)\n      expectDocument(\"hello\\n\")\n    })\n  })\n})\n\ntestGroup(\"<label> support\", { template: \"editor_with_labels\" }, () => {\n  test(\"associates all label elements\", (done) => {\n    const labels = [ document.getElementById(\"label-1\"), document.getElementById(\"label-3\") ]\n    assert.deepEqual(getEditorElement().labels, labels)\n    done()\n  })\n\n  test(\"focuses when <label> clicked\", (done) => {\n    document.getElementById(\"label-1\").click()\n    assert.equal(getEditorElement(), document.activeElement)\n    done()\n  })\n\n  test(\"focuses when <label> descendant clicked\", (done) => {\n    document.getElementById(\"label-1\").querySelector(\"span\").click()\n    assert.equal(getEditorElement(), document.activeElement)\n    done()\n  })\n\n  test(\"does not focus when <label> controls another element\", (done) => {\n    const label = document.getElementById(\"label-2\")\n    assert.notEqual(getEditorElement(), label.control)\n    label.click()\n    assert.notEqual(getEditorElement(), document.activeElement)\n    done()\n  })\n})\n\ntestGroup(\"form property references its <form>\", { template: \"editors_with_forms\", container: \"div\" }, () => {\n  test(\"accesses its ancestor form\", (done) => {\n    const form = document.getElementById(\"ancestor-form\")\n    const editor = document.getElementById(\"editor-with-ancestor-form\")\n    assert.equal(editor.form, form)\n    done()\n  })\n\n  test(\"transitively accesses its related <input> element's <form>\", (done) => {\n    const form = document.getElementById(\"input-form\")\n    const editor = document.getElementById(\"editor-with-input-form\")\n    assert.equal(editor.form, form)\n    done()\n  })\n\n  test(\"returns null when there is no associated <form>\", (done) => {\n    const editor = document.getElementById(\"editor-with-no-form\")\n    assert.equal(editor.form, null)\n    done()\n  })\n})\n","import { TEST_IMAGE_URL, after, assert, test, testGroup } from \"test/test_helper\"\nimport { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\ntestGroup(\"HTML loading\", () => {\n  testGroup(\"inline elements\", { template: \"editor_with_styled_content\" }, () => {\n    const cases = {\n      \"BR before block element styled otherwise\": {\n        html: `a<br><figure class=\"attachment\"><img src=\"${TEST_IMAGE_URL}\"></figure>`,\n        expectedDocument: `a\\n${OBJECT_REPLACEMENT_CHARACTER}\\n`,\n      },\n\n      \"BR in text before block element styled otherwise\": {\n        html: `<div>a<br>b<figure class=\"attachment\"><img src=\"${TEST_IMAGE_URL}\"></figure></div>`,\n        expectedDocument: `a\\nb${OBJECT_REPLACEMENT_CHARACTER}\\n`,\n      },\n    }\n\n    for (const name in cases) {\n      const details = cases[name]\n      test(name, (expectDocument) => {\n        getEditor().loadHTML(details.html)\n        expectDocument(details.expectedDocument)\n      })\n    }\n  })\n\n  testGroup(\"bold elements\", { template: \"editor_with_bold_styles\" }, () => {\n    test(\"<strong> with font-weight: 500\", (expectDocument) => {\n      getEditor().loadHTML(\"<strong>a</strong>\")\n      assert.textAttributes([ 0, 1 ], { bold: true })\n      expectDocument(\"a\\n\")\n    })\n\n    test(\"<span> with font-weight: 600\", (expectDocument) => {\n      getEditor().loadHTML(\"<span>a</span>\")\n      assert.textAttributes([ 0, 1 ], { bold: true })\n      expectDocument(\"a\\n\")\n    })\n\n    test(\"<article> with font-weight: bold\", (expectDocument) => {\n      getEditor().loadHTML(\"<article>a</article>\")\n      assert.textAttributes([ 0, 1 ], { bold: true })\n      expectDocument(\"a\\n\")\n    })\n  })\n\n  testGroup(\"styled block elements\", { template: \"editor_with_block_styles\" }, () => {\n    test(\"<em> in <blockquote> with font-style: italic\", (expectDocument) => {\n      getEditor().loadHTML(\"<blockquote>a<em>b</em></blockquote>\")\n      assert.textAttributes([ 0, 1 ], {})\n      assert.textAttributes([ 1, 2 ], { italic: true })\n      assert.blockAttributes([ 0, 2 ], [ \"quote\" ])\n      expectDocument(\"ab\\n\")\n    })\n\n    test(\"<strong> in <li> with font-weight: bold\", (expectDocument) => {\n      getEditor().loadHTML(\"<ul><li>a<strong>b</strong></li></ul>\")\n      assert.textAttributes([ 0, 1 ], {})\n      assert.textAttributes([ 1, 2 ], { bold: true })\n      assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n      expectDocument(\"ab\\n\")\n    })\n\n    test(\"newline in <li> with font-weight: bold\", (expectDocument) => {\n      getEditor().loadHTML(\"<ul><li>a<br>b</li></ul>\")\n      assert.textAttributes([ 0, 2 ], {})\n      assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n      expectDocument(\"a\\nb\\n\")\n    })\n  })\n\n  testGroup(\"in a table\", { template: \"editor_in_table\" }, () => {\n    test(\"block elements\", (expectDocument) => {\n      getEditor().loadHTML(\"<h1>a</h1><blockquote>b</blockquote>\")\n      assert.blockAttributes([ 0, 2 ], [ \"heading1\" ])\n      assert.blockAttributes([ 2, 4 ], [ \"quote\" ])\n      expectDocument(\"a\\nb\\n\")\n    })\n  })\n\n  testGroup(\"images\", { template: \"editor_empty\" }, () => {\n    test(\"without dimensions\", (expectDocument) => {\n      getEditor().loadHTML(`<img src=\"${TEST_IMAGE_URL}\">`)\n      after(50, () => {\n        const attachment = getDocument().getAttachments()[0]\n        const image = getEditorElement().querySelector(\"img\")\n        assert.equal(attachment.getWidth(), 1)\n        assert.equal(attachment.getHeight(), 1)\n        assert.equal(image.getAttribute(\"width\"), \"1\")\n        assert.equal(image.getAttribute(\"height\"), \"1\")\n        expectDocument(`${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n      })\n    })\n\n    test(\"with dimensions\", (expectDocument) => {\n      getEditor().loadHTML(`<img src=\"${TEST_IMAGE_URL}\" width=\"10\" height=\"20\">`)\n      after(50, () => {\n        const attachment = getDocument().getAttachments()[0]\n        const image = getEditorElement().querySelector(\"img\")\n        assert.equal(attachment.getWidth(), 10)\n        assert.equal(attachment.getHeight(), 20)\n        assert.equal(image.getAttribute(\"width\"), \"10\")\n        assert.equal(image.getAttribute(\"height\"), \"20\")\n        expectDocument(`${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n      })\n    })\n  })\n\n  testGroup(\"text after closing tag\", { template: \"editor_empty\" }, () => {\n    test(\"parses text as separate block\", (expectDocument) => {\n      getEditor().loadHTML(\"<h1>a</h1>b\")\n      assert.blockAttributes([ 0, 2 ], [ \"heading1\" ])\n      assert.blockAttributes([ 2, 4 ], [])\n      expectDocument(\"a\\nb\\n\")\n    })\n  })\n})\n","import { assert, test, testGroup } from \"test/test_helper\"\n\ntestGroup(\"HTML Reparsing\", { template: \"editor_empty\" }, () => {\n  test(\"mutation resulting in identical blocks\", (expectDocument) => {\n    const element = getEditorElement()\n    element.editor.loadHTML(\"<ul><li>a</li><li>b</li></ul>\")\n    requestAnimationFrame(() => {\n      element.querySelector(\"li\").textContent = \"b\"\n      requestAnimationFrame(() => {\n        assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n        assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\" ])\n        assert.equal(element.value, \"<ul><li>b</li><li>b</li></ul>\")\n        expectDocument(\"b\\nb\\n\")\n      })\n    })\n  })\n\n  test(\"mutation resulting in identical pieces\", (expectDocument) => {\n    const element = getEditorElement()\n    element.editor.loadHTML(\"<div><strong>a</strong> <strong>b</strong></div>\")\n    requestAnimationFrame(() => {\n      element.querySelector(\"strong\").textContent = \"b\"\n      requestAnimationFrame(() => {\n        assert.textAttributes([ 0, 1 ], { bold: true })\n        assert.textAttributes([ 2, 3 ], { bold: true })\n        assert.equal(element.value, \"<div><strong>b</strong> <strong>b</strong></div>\")\n        expectDocument(\"b b\\n\")\n      })\n    })\n  })\n})\n","import config from \"trix/config\"\n\nimport { assert, testGroup, testIf, triggerEvent } from \"test/test_helper\"\n\nconst test = function() {\n  testIf(config.input.getLevel() === 0, ...arguments)\n}\n\ntestGroup(\"Level 0 input: HTML replacement\", () =>\n  testGroup(\"deleting with command+backspace\", { template: \"editor_empty\" }, () => {\n    test(\"from the end of a line\", function (expectDocument) {\n      getEditor().loadHTML(\"<div>a</div><blockquote>b</blockquote><div>c</div>\")\n      getSelectionManager().setLocationRange({ index: 1, offset: 1 })\n      pressCommandBackspace({ replaceText: \"b\" }, () => {\n        assert.locationRange({ index: 1, offset: 0 })\n        assert.blockAttributes([ 0, 2 ], [])\n        assert.blockAttributes([ 2, 3 ], [ \"quote\" ])\n        assert.blockAttributes([ 3, 5 ], [])\n        expectDocument(\"a\\n\\nc\\n\")\n      })\n    })\n\n    test(\"in the first block\", function (expectDocument) {\n      getEditor().loadHTML(\"<div>a</div><blockquote>b</blockquote>\")\n      getSelectionManager().setLocationRange({ index: 0, offset: 1 })\n      pressCommandBackspace({ replaceText: \"a\" }, () => {\n        assert.locationRange({ index: 0, offset: 0 })\n        assert.blockAttributes([ 0, 1 ], [])\n        assert.blockAttributes([ 1, 3 ], [ \"quote\" ])\n        expectDocument(\"\\nb\\n\")\n      })\n    })\n\n    test(\"from the middle of a line\", function (expectDocument) {\n      getEditor().loadHTML(\"<div>a</div><blockquote>bc</blockquote><div>d</div>\")\n      getSelectionManager().setLocationRange({ index: 1, offset: 1 })\n      pressCommandBackspace({ replaceText: \"b\" }, () => {\n        assert.locationRange({ index: 1, offset: 0 })\n        assert.blockAttributes([ 0, 2 ], [])\n        assert.blockAttributes([ 2, 4 ], [ \"quote\" ])\n        assert.blockAttributes([ 4, 6 ], [])\n        expectDocument(\"a\\nc\\nd\\n\")\n      })\n    })\n\n    test(\"from the middle of a line in a multi-line block\", function (expectDocument) {\n      getEditor().loadHTML(\"<div>a</div><blockquote>bc<br>d</blockquote><div>e</div>\")\n      getSelectionManager().setLocationRange({ index: 1, offset: 1 })\n      pressCommandBackspace({ replaceText: \"b\" }, () => {\n        assert.locationRange({ index: 1, offset: 0 })\n        assert.blockAttributes([ 0, 2 ], [])\n        assert.blockAttributes([ 2, 6 ], [ \"quote\" ])\n        expectDocument(\"a\\nc\\nd\\ne\\n\")\n      })\n    })\n\n    test(\"from the end of a list item\", function (expectDocument) {\n      getEditor().loadHTML(\"<ul><li>a</li><li>b</li></ul>\")\n      getSelectionManager().setLocationRange({ index: 1, offset: 1 })\n      pressCommandBackspace({ replaceText: \"b\" }, () => {\n        assert.locationRange({ index: 1, offset: 0 })\n        assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n        assert.blockAttributes([ 2, 4 ], [ \"bulletList\", \"bullet\" ])\n        expectDocument(\"a\\n\\n\")\n      })\n    })\n\n    test(\"a character that is its text node's only data\", function (expectDocument) {\n      getEditor().loadHTML(\"<div>a<br>b<br><strong>c</strong></div>\")\n      getSelectionManager().setLocationRange({ index: 0, offset: 3 })\n      pressCommandBackspace({ replaceText: \"b\" }, () => {\n        assert.locationRange({ index: 0, offset: 2 })\n        expectDocument(\"a\\n\\nc\\n\")\n      })\n    })\n\n    test(\"a formatted word\", function (expectDocument) {\n      getEditor().loadHTML(\"<div>a<strong>bc</strong></div>\")\n      getSelectionManager().setLocationRange({ index: 0, offset: 4 })\n      pressCommandBackspace({ replaceElementWithText: \"bc\" }, () => {\n        assert.locationRange({ index: 0, offset: 1 })\n        expectDocument(\"a\\n\")\n      })\n    })\n  })\n)\n\nconst pressCommandBackspace = function ({ replaceText, replaceElementWithText }, callback) {\n  let previousSibling\n  triggerEvent(document.activeElement, \"keydown\", { charCode: 0, keyCode: 8, which: 8, metaKey: true })\n  const range = rangy.getSelection().getRangeAt(0)\n\n  if (replaceElementWithText) {\n    const element = getElementWithText(replaceElementWithText)\n    previousSibling = element.previousSibling\n    element.parentNode.removeChild(element)\n    range.collapseAfter(previousSibling)\n  } else {\n    range.findText(replaceText, { direction: \"backward\" })\n    range.splitBoundaries()\n\n    const node = range.getNodes()[0]\n    previousSibling = node.previousSibling\n    const { nextSibling, parentNode } = node\n\n    if (previousSibling?.nodeType === Node.COMMENT_NODE) {\n      parentNode.removeChild(previousSibling)\n    }\n\n    node.data = \"\"\n    parentNode.removeChild(node)\n\n    if (!parentNode.hasChildNodes()) {\n      parentNode.appendChild(document.createElement(\"br\"))\n    }\n\n    range.collapseBefore(nextSibling ? nextSibling : parentNode.firstChild)\n  }\n\n  range.select()\n  requestAnimationFrame(callback)\n}\n\nconst getElementWithText = function (text) {\n  for (const element of Array.from(document.activeElement.querySelectorAll(\"*\"))) {\n    if (element.innerText === text) {\n      return element\n    }\n  }\n  return null\n}\n","import EditorController from \"trix/controllers/editor_controller\"\n\nimport { assert, defer, test, testGroup } from \"test/test_helper\"\n\ntestGroup(\"Installation process\", { template: \"editor_html\" }, () => {\n  test(\"element.editorController\", () => {\n    assert.ok(getEditorController() instanceof EditorController)\n  })\n\n  test(\"creates a contenteditable element\", () => assert.ok(getEditorElement()))\n\n  test(\"loads the initial document\", () => {\n    assert.equal(getEditorElement().textContent, \"Hello world\")\n  })\n\n  test(\"sets value property\", (done) =>\n    defer(() => {\n      assert.equal(getEditorElement().value, \"<div>Hello world</div>\")\n      done()\n    }))\n})\n\ntestGroup(\"Installation process without specified elements\", { template: \"editor_empty\" }, () =>\n  test(\"creates identified toolbar and input elements\", (done) => {\n    const editorElement = getEditorElement()\n\n    const toolbarId = editorElement.getAttribute(\"toolbar\")\n    assert.ok(/trix-toolbar-\\d+/.test(toolbarId), `toolbar id not assert.ok ${JSON.stringify(toolbarId)}`)\n    const toolbarElement = document.getElementById(toolbarId)\n    assert.ok(toolbarElement, \"toolbar element not assert.ok\")\n    assert.equal(editorElement.toolbarElement, toolbarElement)\n\n    const inputId = editorElement.getAttribute(\"input\")\n    assert.ok(/trix-input-\\d+/.test(inputId), `input id not assert.ok ${JSON.stringify(inputId)}`)\n    const inputElement = document.getElementById(inputId)\n    assert.ok(inputElement, \"input element not assert.ok\")\n    assert.equal(editorElement.inputElement, inputElement)\n\n    done()\n  })\n)\n\ntestGroup(\"Installation process with specified elements\", { template: \"editor_with_toolbar_and_input\" }, () => {\n  test(\"uses specified elements\", (done) => {\n    const editorElement = getEditorElement()\n    assert.equal(editorElement.toolbarElement, document.getElementById(\"my_toolbar\"))\n    assert.equal(editorElement.inputElement, document.getElementById(\"my_input\"))\n    assert.equal(editorElement.value, \"<div>Hello world</div>\")\n    done()\n  })\n\n  test(\"can be cloned\", (done) => {\n    const originalElement = document.getElementById(\"my_editor\")\n    const clonedElement = originalElement.cloneNode(true)\n\n    const { parentElement } = originalElement\n    parentElement.removeChild(originalElement)\n    parentElement.appendChild(clonedElement)\n\n    defer(() => {\n      const editorElement = getEditorElement()\n      assert.equal(editorElement.toolbarElement, document.getElementById(\"my_toolbar\"))\n      assert.equal(editorElement.inputElement, document.getElementById(\"my_input\"))\n      assert.equal(editorElement.value, \"<div>Hello world</div>\")\n      done()\n    })\n  })\n})\n","import config from \"trix/config\"\nimport { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nimport {\n  after,\n  assert,\n  clickToolbarButton,\n  insertNode,\n  insertString,\n  isToolbarButtonActive,\n  selectNode,\n  testGroup,\n  testIf,\n  triggerEvent,\n  triggerInputEvent,\n  typeCharacters,\n} from \"test/test_helper\"\n\nconst test = function() {\n  testIf(config.input.getLevel() === 2, ...arguments)\n}\n\nconst testOptions = {\n  template: \"editor_empty\",\n  setup() {\n    addEventListener(\"beforeinput\", recordInputEvent, true)\n    addEventListener(\"input\", recordInputEvent, true)\n  },\n  teardown() {\n    removeEventListener(\"beforeinput\", recordInputEvent, true)\n    removeEventListener(\"input\", recordInputEvent, true)\n  },\n}\n\nlet inputEvents = []\n\nconst recordInputEvent = function (event) {\n  // Not all browsers dispatch \"beforeinput\" event when calling execCommand() so\n  // we manually dispatch a synthetic one. If a second one arrives, ignore it.\n  if (event.type === \"beforeinput\" && inputEvents.length === 1 && inputEvents[0].type === \"beforeinput\") {\n    event.stopImmediatePropagation()\n  } else {\n    const { type, inputType, data } = event\n    inputEvents.push({ type, inputType, data })\n  }\n}\n\n// Borrowed from https://github.com/web-platform-tests/wpt/blob/master/input-events/input-events-exec-command.html\nconst performInputTypeUsingExecCommand = function (command, { inputType, data }, callback) {\n  inputEvents = []\n  requestAnimationFrame(() => {\n    triggerInputEvent(document.activeElement, \"beforeinput\", { inputType, data })\n    document.execCommand(command, false, data)\n    assert.equal(inputEvents.length, 2)\n    assert.equal(inputEvents[0].type, \"beforeinput\")\n    assert.equal(inputEvents[1].type, \"input\")\n    assert.equal(inputEvents[0].inputType, inputType)\n    assert.equal(inputEvents[0].data, data)\n    requestAnimationFrame(() => requestAnimationFrame(callback))\n  })\n}\n\ntestGroup(\"Level 2 Input\", testOptions, () => {\n  test(\"insertText\", (expectDocument) =>\n    performInputTypeUsingExecCommand(\"insertText\", { inputType: \"insertText\", data: \"abc\" }, () =>\n      expectDocument(\"abc\\n\")\n    ))\n\n  test(\"insertOrderedList\", (expectDocument) => {\n    insertString(\"a\\nb\")\n    performInputTypeUsingExecCommand(\"insertOrderedList\", { inputType: \"insertOrderedList\" }, () => {\n      assert.blockAttributes([ 0, 2 ], [])\n      assert.blockAttributes([ 2, 4 ], [ \"numberList\", \"number\" ])\n      assert.ok(isToolbarButtonActive({ attribute: \"number\" }))\n      expectDocument(\"a\\nb\\n\")\n    })\n  })\n\n  test(\"insertUnorderedList\", (expectDocument) => {\n    insertString(\"a\\nb\")\n    performInputTypeUsingExecCommand(\"insertUnorderedList\", { inputType: \"insertUnorderedList\" }, () => {\n      assert.blockAttributes([ 0, 2 ], [])\n      assert.blockAttributes([ 2, 4 ], [ \"bulletList\", \"bullet\" ])\n      assert.ok(isToolbarButtonActive({ attribute: \"bullet\" }))\n      expectDocument(\"a\\nb\\n\")\n    })\n  })\n\n  test(\"insertLineBreak\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      insertString(\"abc\")\n      performInputTypeUsingExecCommand(\"insertLineBreak\", { inputType: \"insertLineBreak\" }, () => {\n        performInputTypeUsingExecCommand(\"insertLineBreak\", { inputType: \"insertLineBreak\" }, () => {\n          assert.blockAttributes([ 0, 6 ], [ \"quote\" ])\n          expectDocument(\"abc\\n\\n\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"insertParagraph\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      insertString(\"abc\")\n      performInputTypeUsingExecCommand(\"insertParagraph\", { inputType: \"insertParagraph\" }, () => {\n        performInputTypeUsingExecCommand(\"insertParagraph\", { inputType: \"insertParagraph\" }, () => {\n          assert.blockAttributes([ 0, 4 ], [ \"quote\" ])\n          assert.blockAttributes([ 4, 5 ], [])\n          expectDocument(\"abc\\n\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"formatBold\", (expectDocument) => {\n    insertString(\"abc\")\n    getComposition().setSelectedRange([ 1, 2 ])\n    performInputTypeUsingExecCommand(\"bold\", { inputType: \"formatBold\" }, () => {\n      assert.textAttributes([ 0, 1 ], {})\n      assert.textAttributes([ 1, 2 ], { bold: true })\n      assert.textAttributes([ 2, 3 ], {})\n      expectDocument(\"abc\\n\")\n    })\n  })\n\n  test(\"formatItalic\", (expectDocument) => {\n    insertString(\"abc\")\n    getComposition().setSelectedRange([ 1, 2 ])\n    performInputTypeUsingExecCommand(\"italic\", { inputType: \"formatItalic\" }, () => {\n      assert.textAttributes([ 0, 1 ], {})\n      assert.textAttributes([ 1, 2 ], { italic: true })\n      assert.textAttributes([ 2, 3 ], {})\n      expectDocument(\"abc\\n\")\n    })\n  })\n\n  test(\"formatStrikeThrough\", (expectDocument) => {\n    insertString(\"abc\")\n    getComposition().setSelectedRange([ 1, 2 ])\n    performInputTypeUsingExecCommand(\"strikeThrough\", { inputType: \"formatStrikeThrough\" }, () => {\n      assert.textAttributes([ 0, 1 ], {})\n      assert.textAttributes([ 1, 2 ], { strike: true })\n      assert.textAttributes([ 2, 3 ], {})\n      expectDocument(\"abc\\n\")\n    })\n  })\n\n  // https://input-inspector.now.sh/profiles/hVXS1cHYFvc2EfdRyTWQ\n  test(\"correcting a misspelled word in Chrome\", (expectDocument) => {\n    insertString(\"onr\")\n    getComposition().setSelectedRange([ 0, 3 ])\n    requestAnimationFrame(() => {\n      const inputType = \"insertReplacementText\"\n      const dataTransfer = createDataTransfer({ \"text/plain\": \"one\" })\n      const event = createEvent(\"beforeinput\", { inputType, dataTransfer })\n      document.activeElement.dispatchEvent(event)\n      requestAnimationFrame(() => expectDocument(\"one\\n\"))\n    })\n  })\n\n  // https://input-inspector.now.sh/profiles/XsZVwKtFxakwnsNs0qnX\n  test(\"correcting a misspelled word in Safari\", (expectDocument) => {\n    insertString(\"onr\")\n    getComposition().setSelectedRange([ 0, 3 ])\n    requestAnimationFrame(() => {\n      const inputType = \"insertText\"\n      const dataTransfer = createDataTransfer({ \"text/plain\": \"one\", \"text/html\": \"one\" })\n      const event = createEvent(\"beforeinput\", { inputType, dataTransfer })\n      document.activeElement.dispatchEvent(event)\n      requestAnimationFrame(() => expectDocument(\"one\\n\"))\n    })\n  })\n\n  // https://input-inspector.now.sh/profiles/yZlsrfG93QMzp2oyr0BE\n  test(\"deleting the last character in a composed word on Android\", (expectDocument) => {\n    insertString(\"c\")\n    const element = getEditorElement()\n    const textNode = element.firstChild.lastChild\n    selectNode(textNode, () => {\n      triggerInputEvent(element, \"beforeinput\", { inputType: \"insertCompositionText\", data: \"\" })\n      triggerEvent(element, \"compositionend\", { data: \"\" })\n      requestAnimationFrame(() => expectDocument(\"\\n\"))\n    })\n  })\n\n  test(\"pasting a file\", (expectDocument) =>\n    createFile((file) => {\n      const clipboardData = createDataTransfer({ Files: [ file ] })\n      const dataTransfer = createDataTransfer({ Files: [ file ] })\n      paste({ clipboardData, dataTransfer }, () => {\n        const attachments = getDocument().getAttachments()\n        assert.equal(attachments.length, 1)\n        assert.equal(attachments[0].getFilename(), file.name)\n        expectDocument(`${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n      })\n    }))\n\n  // \"insertFromPaste InputEvent missing pasted files in dataTransfer\"\n  // - https://bugs.webkit.org/show_bug.cgi?id=194921\n  test(\"pasting a file in Safari\", (expectDocument) =>\n    createFile((file) => {\n      const clipboardData = createDataTransfer({ Files: [ file ] })\n      const dataTransfer = createDataTransfer({ \"text/html\": `<img src=\"blob:${location.origin}/531de8\">` })\n      paste({ clipboardData, dataTransfer }, () => {\n        const attachments = getDocument().getAttachments()\n        assert.equal(attachments.length, 1)\n        assert.equal(attachments[0].getFilename(), file.name)\n        expectDocument(`${OBJECT_REPLACEMENT_CHARACTER}\\n`)\n      })\n    }))\n\n  // \"insertFromPaste InputEvent missing text/uri-list in dataTransfer for pasted links\"\n  // - https://bugs.webkit.org/show_bug.cgi?id=196702\n  test(\"pasting a link in Safari\", (expectDocument) =>\n    createFile((file) => {\n      const url = \"https://bugs.webkit.org\"\n      const text = \"WebKit Bugzilla\"\n      const clipboardData = createDataTransfer({ URL: url, \"text/uri-list\": url, \"text/plain\": text })\n      const dataTransfer = createDataTransfer({ \"text/html\": `<a href=\"${url}\">${text}</a>`, \"text/plain\": text })\n      paste({ clipboardData, dataTransfer }, () => {\n        assert.textAttributes([ 0, url.length ], { href: url })\n        expectDocument(`${url}\\n`)\n      })\n    }))\n\n  // Pastes from MS Word include an image of the copied text 🙃\n  // https://input-inspector.now.sh/profiles/QWDITsV60dpEVl1SOZg8\n  test(\"pasting text from MS Word\", (expectDocument) =>\n    createFile((file) => {\n      const dataTransfer = createDataTransfer({\n        \"text/html\": \"<span class=\\\"MsoNormal\\\">abc</span>\",\n        \"text/plain\": \"abc\",\n        Files: [ file ],\n      })\n\n      paste({ dataTransfer }, () => {\n        const attachments = getDocument().getAttachments()\n        assert.equal(attachments.length, 0)\n        expectDocument(\"abc\\n\")\n      })\n    }))\n\n  // \"beforeinput\" event is not fired for Paste and Match Style operations\n  // - https://bugs.chromium.org/p/chromium/issues/detail?id=934448\n  test(\"Paste and Match Style in Chrome\", (expectDocument) => {\n    const done = () => expectDocument(\"a\\n\\nb\\n\\nc\\n\")\n    typeCharacters(\"a\\n\\n\", () => {\n      const clipboardData = createDataTransfer({ \"text/plain\": \"b\\n\\nc\" })\n      const pasteEvent = createEvent(\"paste\", { clipboardData })\n      if (document.activeElement.dispatchEvent(pasteEvent)) {\n        const node = document.createElement(\"div\")\n        node.innerHTML = \"<div>b</div><div><br></div><div>c</div>\"\n        insertNode(node, done)\n      } else {\n        requestAnimationFrame(done)\n      }\n    })\n  })\n})\n\nconst createFile = function (callback) {\n  const canvas = document.createElement(\"canvas\")\n  canvas.toBlob(function (file) {\n    file.name = \"image.png\"\n    callback(file)\n  })\n}\n\nconst createDataTransfer = function (data = {}) {\n  return {\n    types: Object.keys(data),\n    files: data.Files || [],\n    getData: (type) => data[type],\n  }\n}\n\nconst createEvent = function (type, properties = {}) {\n  const event = document.createEvent(\"Events\")\n  event.initEvent(type, true, true)\n  for (const key in properties) {\n    const value = properties[key]\n    Object.defineProperty(event, key, { value })\n  }\n  return event\n}\n\nconst paste = function (param = {}, callback) {\n  const { dataTransfer, clipboardData } = param\n  const pasteEvent = createEvent(\"paste\", { clipboardData: clipboardData || dataTransfer })\n  const inputEvent = createEvent(\"beforeinput\", { inputType: \"insertFromPaste\", dataTransfer })\n  if (document.activeElement.dispatchEvent(pasteEvent)) {\n    document.activeElement.dispatchEvent(inputEvent)\n  }\n  after(60, callback)\n}\n","import config from \"trix/config\"\n\nimport {\n  assert,\n  clickToolbarButton,\n  defer,\n  moveCursor,\n  pressKey,\n  test,\n  testGroup,\n  testIf,\n  triggerEvent,\n  typeCharacters,\n} from \"test/test_helper\"\n\ntestGroup(\"List formatting\", { template: \"editor_empty\" }, () => {\n  test(\"creating a new list item\", (done) => {\n    typeCharacters(\"a\", () => {\n      clickToolbarButton({ attribute: \"bullet\" }, () => {\n        typeCharacters(\"\\n\", () => {\n          assert.locationRange({ index: 1, offset: 0 })\n          assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n          assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\" ])\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"breaking out of a list\", (expectDocument) => {\n    typeCharacters(\"a\", () => {\n      clickToolbarButton({ attribute: \"bullet\" }, () => {\n        typeCharacters(\"\\n\\n\", () => {\n          assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n          assert.blockAttributes([ 2, 3 ], [])\n          expectDocument(\"a\\n\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"pressing return at the beginning of a non-empty list item\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\\nb\", () => {\n        moveCursor(\"left\", () => {\n          pressKey(\"return\", () => {\n            assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\" ])\n            assert.blockAttributes([ 3, 5 ], [ \"bulletList\", \"bullet\" ])\n            expectDocument(\"a\\n\\nb\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"pressing tab increases nesting level, tab+shift decreases nesting level\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\", () => {\n        pressKey(\"return\", () => {\n          pressKey(\"tab\", () => {\n            typeCharacters(\"b\", () => {\n              assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n              assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ])\n              defer(() => {\n                // press shift tab\n                triggerEvent(document.activeElement, \"keydown\", {\n                  key: \"Tab\",\n                  charCode: 0,\n                  keyCode: 9,\n                  which: 9,\n                  shiftKey: true,\n                })\n                assert.blockAttributes([ 0, 1 ], [ \"bulletList\", \"bullet\" ])\n                assert.blockAttributes([ 2, 3 ], [ \"bulletList\", \"bullet\" ])\n                expectDocument(\"a\\nb\\n\")\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  testIf(config.input.getLevel() === 0, \"pressing shift-return at the end of a list item\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\", () => {\n        const pressShiftReturn = triggerEvent(document.activeElement, \"keydown\", {\n          charCode: 0,\n          keyCode: 13,\n          which: 13,\n          shiftKey: true,\n        })\n        assert.notOk(pressShiftReturn) // Assert defaultPrevented\n        assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n        expectDocument(\"a\\n\\n\")\n      })\n    })\n  })\n\n  test(\"pressing delete at the beginning of a non-empty nested list item\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\\n\", () => {\n        clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n          typeCharacters(\"b\\n\", () => {\n            clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n              typeCharacters(\"c\", () => {\n                getSelectionManager().setLocationRange({ index: 1, offset: 0 })\n                getComposition().deleteInDirection(\"backward\")\n                getEditorController().render()\n                defer(() => {\n                  assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n                  assert.blockAttributes([ 3, 4 ], [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ])\n                  expectDocument(\"ab\\nc\\n\")\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"decreasing list item's level decreases its nested items level too\", (expectDocument) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"a\\n\", () => {\n        clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n          typeCharacters(\"b\\n\", () => {\n            clickToolbarButton({ action: \"increaseNestingLevel\" }, () => {\n              typeCharacters(\"c\", () => {\n                getSelectionManager().setLocationRange({ index: 1, offset: 1 })\n\n                for (let n = 0; n < 3; n++) {\n                  getComposition().deleteInDirection(\"backward\")\n                  getEditorController().render()\n                }\n\n                assert.blockAttributes([ 0, 2 ], [ \"bulletList\", \"bullet\" ])\n                assert.blockAttributes([ 2, 3 ], [])\n                assert.blockAttributes([ 3, 5 ], [ \"bulletList\", \"bullet\" ])\n                expectDocument(\"a\\n\\nc\\n\")\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n})\n","import config from \"trix/config\"\n\nimport {\n  TEST_IMAGE_URL,\n  assert,\n  clickToolbarButton,\n  defer,\n  insertNode,\n  isToolbarButtonActive,\n  testGroup,\n  testIf,\n  triggerEvent,\n  typeCharacters,\n} from \"test/test_helper\"\n\nconst test = function() {\n  testIf(config.input.getLevel() === 0, ...arguments)\n}\n\ntestGroup(\"Mutation input\", { template: \"editor_empty\" }, () => {\n  test(\"deleting a newline\", function (expectDocument) {\n    const element = getEditorElement()\n    element.editor.insertString(\"a\\n\\nb\")\n\n    triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 229, which: 229 })\n    const br = element.querySelectorAll(\"br\")[1]\n    br.parentNode.removeChild(br)\n    requestAnimationFrame(() => expectDocument(\"a\\nb\\n\"))\n  })\n\n  test(\"typing a space in formatted text at the end of a block\", function (expectDocument) {\n    const element = getEditorElement()\n\n    clickToolbarButton({ attribute: \"bold\" }, () => {\n      typeCharacters(\"a\", () => {\n        // Press space key\n        triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 32, which: 32 })\n        triggerEvent(element, \"keypress\", { charCode: 32, keyCode: 32, which: 32 })\n\n        const boldElement = element.querySelector(\"strong\")\n        boldElement.appendChild(document.createTextNode(\" \"))\n        boldElement.appendChild(document.createElement(\"br\"))\n\n        requestAnimationFrame(() => {\n          assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n          assert.textAttributes([ 0, 2 ], { bold: true })\n          expectDocument(\"a \\n\")\n        })\n      })\n    })\n  })\n\n  test(\"typing formatted text after a newline at the end of block\", function (expectDocument) {\n    const element = getEditorElement()\n    element.editor.insertHTML(\"<ul><li>a</li><li><br></li></ul>\")\n    element.editor.setSelectedRange(3)\n\n    clickToolbarButton({ attribute: \"bold\" }, () => {\n      // Press B key\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 66, which: 66 })\n      triggerEvent(element, \"keypress\", { charCode: 98, keyCode: 98, which: 98 })\n\n      const node = document.createTextNode(\"b\")\n      const extraBR = element.querySelectorAll(\"br\")[1]\n      extraBR.parentNode.insertBefore(node, extraBR)\n      extraBR.parentNode.removeChild(extraBR)\n\n      requestAnimationFrame(() => {\n        assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n        assert.textAttributes([ 0, 1 ], {})\n        assert.textAttributes([ 3, 4 ], { bold: true })\n        expectDocument(\"a\\n\\nb\\n\")\n      })\n    })\n  })\n\n  test(\"typing an emoji after a newline at the end of block\", function (expectDocument) {\n    const element = getEditorElement()\n\n    typeCharacters(\"\\n\", () => {\n      // Tap 👏🏻 on iOS\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 0, which: 0, key: \"👏🏻\" })\n      triggerEvent(element, \"keypress\", { charCode: 128079, keyCode: 128079, which: 128079, key: \"👏🏻\" })\n\n      const node = document.createTextNode(\"👏🏻\")\n      const extraBR = element.querySelectorAll(\"br\")[1]\n      extraBR.parentNode.insertBefore(node, extraBR)\n      extraBR.parentNode.removeChild(extraBR)\n\n      requestAnimationFrame(() => expectDocument(\"\\n👏🏻\\n\"))\n    })\n  })\n\n  test(\"backspacing an attachment at the beginning of an otherwise empty document\", function (expectDocument) {\n    const element = getEditorElement()\n    element.editor.loadHTML(`<img src=\"${TEST_IMAGE_URL}\" width=\"10\" height=\"10\">`)\n\n    requestAnimationFrame(() => {\n      element.editor.setSelectedRange([ 0, 1 ])\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 8, which: 8 })\n\n      element.firstElementChild.innerHTML = \"<br>\"\n\n      requestAnimationFrame(() => {\n        assert.locationRange({ index: 0, offset: 0 })\n        expectDocument(\"\\n\")\n      })\n    })\n  })\n\n  test(\"backspacing a block comment node\", function (expectDocument) {\n    const element = getEditorElement()\n    element.editor.loadHTML(\"<blockquote>a</blockquote><div>b</div>\")\n    defer(() => {\n      element.editor.setSelectedRange(2)\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 8, which: 8 })\n      const commentNode = element.lastChild.firstChild\n      commentNode.parentNode.removeChild(commentNode)\n      defer(() => {\n        assert.locationRange({ index: 0, offset: 1 })\n        expectDocument(\"ab\\n\")\n      })\n    })\n  })\n\n  test(\"typing formatted text with autocapitalization on\", function (expectDocument) {\n    const element = getEditorElement()\n\n    clickToolbarButton({ attribute: \"bold\" }, () => {\n      // Type \"b\", autocapitalize to \"B\"\n      triggerEvent(element, \"keydown\", { charCode: 0, keyCode: 66, which: 66 })\n      triggerEvent(element, \"keypress\", { charCode: 98, keyCode: 98, which: 98 })\n      triggerEvent(element, \"textInput\", { data: \"B\" })\n\n      insertNode(document.createTextNode(\"B\"), () => {\n        assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n        assert.textAttributes([ 0, 1 ], { bold: true })\n        expectDocument(\"B\\n\")\n      })\n    })\n  })\n})\n","import config from \"trix/config\"\nimport { OBJECT_REPLACEMENT_CHARACTER } from \"trix/constants\"\n\nimport {\n  TEST_IMAGE_URL,\n  after,\n  assert,\n  clickToolbarButton,\n  createFile,\n  defer,\n  expandSelection,\n  moveCursor,\n  pasteContent,\n  pressKey,\n  test,\n  testGroup,\n  testIf,\n  triggerEvent,\n  typeCharacters,\n} from \"test/test_helper\"\n\ntestGroup(\"Pasting\", { template: \"editor_empty\" }, () => {\n  test(\"paste plain text\", (expectDocument) =>\n    typeCharacters(\"abc\", () =>\n      moveCursor(\"left\", () => pasteContent(\"text/plain\", \"!\", () => expectDocument(\"ab!c\\n\")))\n    ))\n\n  test(\"paste simple html\", (expectDocument) => {\n    typeCharacters(\"abc\", () => {\n      moveCursor(\"left\", () => pasteContent(\"text/html\", \"&lt;\", () => expectDocument(\"ab<c\\n\")))\n    })\n  })\n\n  test(\"paste complex html\", (expectDocument) => {\n    typeCharacters(\"abc\", () => {\n      moveCursor(\"left\", () => {\n        pasteContent(\"text/html\", \"<div>Hello world<br></div><div>This is a test</div>\", () => {\n          expectDocument(\"abHello world\\nThis is a test\\nc\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"paste html in expanded selection\", (expectDocument) => {\n    typeCharacters(\"abc\", () => {\n      moveCursor(\"left\", () => {\n        expandSelection({ direction: \"left\", times: 2 }, () => {\n          pasteContent(\"text/html\", \"<strong>x</strong>\", () => {\n            assert.selectedRange(1)\n            expectDocument(\"xc\\n\")\n          })\n        })\n      })\n    })\n  })\n\n  test(\"paste plain text with CRLF \", (expectDocument) =>\n    pasteContent(\"text/plain\", \"a\\r\\nb\\r\\nc\", () => expectDocument(\"a\\nb\\nc\\n\")))\n\n  test(\"paste html with CRLF \", (expectDocument) => {\n    pasteContent(\"text/html\", \"<div>a<br></div>\\r\\n<div>b<br></div>\\r\\n<div>c<br></div>\", () => {\n      expectDocument(\"a\\nb\\nc\\n\")\n    })\n  })\n\n  test(\"paste unsafe html\", (done) => {\n    window.unsanitized = []\n    const pasteData = {\n      \"text/plain\": \"x\",\n      \"text/html\": `\\\n        <img onload=\"window.unsanitized.push('img.onload');\" src=\"${TEST_IMAGE_URL}\">\n        <img onerror=\"window.unsanitized.push('img.onerror');\" src=\"data:image/gif;base64,TOTALLYBOGUS\">\n        <script>\n          window.unsanitized.push('script tag');\n        </script>`,\n    }\n\n    pasteContent(pasteData, () => {\n      after(20, () => {\n        assert.deepEqual(window.unsanitized, [])\n        delete window.unsanitized\n        done()\n      })\n    })\n  })\n\n  test(\"prefers plain text when html lacks formatting\", function (expectDocument) {\n    const pasteData = {\n      \"text/html\": \"<meta charset='utf-8'>a\\nb\",\n      \"text/plain\": \"a\\nb\",\n    }\n\n    pasteContent(pasteData, () => expectDocument(\"a\\nb\\n\"))\n  })\n\n  test(\"prefers formatted html\", function (expectDocument) {\n    const pasteData = {\n      \"text/html\": \"<meta charset='utf-8'>a\\n<strong>b</strong>\",\n      \"text/plain\": \"a\\nb\",\n    }\n\n    pasteContent(pasteData, () => expectDocument(\"a b\\n\"))\n  })\n\n  test(\"paste URL\", (expectDocument) => {\n    typeCharacters(\"a\", () => {\n      pasteContent(\"URL\", \"http://example.com\", () => {\n        assert.textAttributes([ 1, 18 ], { href: \"http://example.com\" })\n        expectDocument(\"ahttp://example.com\\n\")\n      })\n    })\n  })\n\n  test(\"paste URL with name\", (expectDocument) => {\n    const pasteData = {\n      URL: \"http://example.com\",\n      \"public.url-name\": \"Example\",\n      \"text/plain\": \"http://example.com\",\n    }\n\n    pasteContent(pasteData, () => {\n      assert.textAttributes([ 0, 7 ], { href: \"http://example.com\" })\n      expectDocument(\"Example\\n\")\n    })\n  })\n\n  test(\"paste JavaScript URL\", function (expectDocument) {\n    const pasteData = { URL: \"javascript:alert('XSS')\" }\n    pasteContent(pasteData, () => {\n      assert.textAttributes([ 0, 23 ], {})\n      expectDocument(\"javascript:alert('XSS')\\n\")\n    })\n  })\n\n  test(\"paste URL with name containing extraneous whitespace\", function (expectDocument) {\n    const pasteData = {\n      URL: \"http://example.com\",\n      \"public.url-name\": \"   Example from \\n link  around\\n\\nnested \\nelements \",\n      \"text/plain\": \"http://example.com\",\n    }\n\n    pasteContent(pasteData, () => {\n      assert.textAttributes([ 0, 40 ], { href: \"http://example.com\" })\n      expectDocument(\"Example from link around nested elements\\n\")\n    })\n  })\n\n  test(\"paste complex html into formatted block\", (done) => {\n    typeCharacters(\"abc\", () => {\n      clickToolbarButton({ attribute: \"quote\" }, () => {\n        pasteContent(\"text/html\", \"<div>Hello world<br></div><pre>This is a test</pre>\", () => {\n          const document = getDocument()\n          assert.equal(document.getBlockCount(), 2)\n\n          let block = document.getBlockAtIndex(0)\n          assert.deepEqual(block.getAttributes(), [ \"quote\" ], assert.equal(block.toString(), \"abcHello world\\n\"))\n\n          block = document.getBlockAtIndex(1)\n          assert.deepEqual(block.getAttributes(), [ \"quote\", \"code\" ])\n          assert.equal(block.toString(), \"This is a test\\n\")\n\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"paste list into list\", (done) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"abc\\n\", () => {\n        pasteContent(\"text/html\", \"<ul><li>one</li><li>two</li></ul>\", () => {\n          const document = getDocument()\n          assert.equal(document.getBlockCount(), 3)\n\n          let block = document.getBlockAtIndex(0)\n          assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n          assert.equal(block.toString(), \"abc\\n\")\n\n          block = document.getBlockAtIndex(1)\n          assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n          assert.equal(block.toString(), \"one\\n\")\n\n          block = document.getBlockAtIndex(2)\n          assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n          assert.equal(block.toString(), \"two\\n\")\n\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"paste list into quote\", (done) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      typeCharacters(\"abc\", () => {\n        pasteContent(\"text/html\", \"<ul><li>one</li><li>two</li></ul>\", () => {\n          const document = getDocument()\n          assert.equal(document.getBlockCount(), 3)\n\n          let block = document.getBlockAtIndex(0)\n          assert.deepEqual(block.getAttributes(), [ \"quote\" ])\n          assert.equal(block.toString(), \"abc\\n\")\n\n          block = document.getBlockAtIndex(1)\n          assert.deepEqual(block.getAttributes(), [ \"quote\", \"bulletList\", \"bullet\" ])\n          assert.equal(block.toString(), \"one\\n\")\n\n          block = document.getBlockAtIndex(2)\n          assert.deepEqual(block.getAttributes(), [ \"quote\", \"bulletList\", \"bullet\" ])\n          assert.equal(block.toString(), \"two\\n\")\n\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"paste list into quoted list\", (done) => {\n    clickToolbarButton({ attribute: \"quote\" }, () => {\n      clickToolbarButton({ attribute: \"bullet\" }, () => {\n        typeCharacters(\"abc\\n\", () => {\n          pasteContent(\"text/html\", \"<ul><li>one</li><li>two</li></ul>\", () => {\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 3)\n\n            let block = document.getBlockAtIndex(0)\n            assert.deepEqual(block.getAttributes(), [ \"quote\", \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"abc\\n\")\n\n            block = document.getBlockAtIndex(1)\n            assert.deepEqual(block.getAttributes(), [ \"quote\", \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"one\\n\")\n\n            block = document.getBlockAtIndex(2)\n            assert.deepEqual(block.getAttributes(), [ \"quote\", \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"two\\n\")\n\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"paste nested list into empty list item\", (done) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"y\\nzz\", () => {\n        getSelectionManager().setLocationRange({ index: 0, offset: 1 })\n        defer(() => {\n          pressKey(\"backspace\", () => {\n            pasteContent(\"text/html\", \"<ul><li>a<ul><li>b</li></ul></li></ul>\", () => {})\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 3)\n\n            let block = document.getBlockAtIndex(0)\n            assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"a\\n\")\n\n            block = document.getBlockAtIndex(1)\n            assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"b\\n\")\n\n            block = document.getBlockAtIndex(2)\n            assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"zz\\n\")\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"paste nested list over list item contents\", (done) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"y\\nzz\", () => {\n        getSelectionManager().setLocationRange({ index: 0, offset: 1 })\n        defer(() => {\n          expandSelection(\"left\", () => {\n            pasteContent(\"text/html\", \"<ul><li>a<ul><li>b</li></ul></li></ul>\", () => {})\n            const document = getDocument()\n            assert.equal(document.getBlockCount(), 3)\n\n            let block = document.getBlockAtIndex(0)\n            assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"a\\n\")\n\n            block = document.getBlockAtIndex(1)\n            assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\", \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"b\\n\")\n\n            block = document.getBlockAtIndex(2)\n            assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n            assert.equal(block.toString(), \"zz\\n\")\n            done()\n          })\n        })\n      })\n    })\n  })\n\n  test(\"paste list into empty block before list\", (done) => {\n    clickToolbarButton({ attribute: \"bullet\" }, () => {\n      typeCharacters(\"c\", () => {\n        moveCursor(\"left\", () => {\n          pressKey(\"return\", () => {\n            getSelectionManager().setLocationRange({ index: 0, offset: 0 })\n            defer(() => {\n              pasteContent(\"text/html\", \"<ul><li>a</li><li>b</li></ul>\", () => {\n                const document = getDocument()\n                assert.equal(document.getBlockCount(), 3)\n\n                let block = document.getBlockAtIndex(0)\n                assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n                assert.equal(block.toString(), \"a\\n\")\n\n                block = document.getBlockAtIndex(1)\n                assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n                assert.equal(block.toString(), \"b\\n\")\n\n                block = document.getBlockAtIndex(2)\n                assert.deepEqual(block.getAttributes(), [ \"bulletList\", \"bullet\" ])\n                assert.equal(block.toString(), \"c\\n\")\n                done()\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"paste file\", (expectDocument) => {\n    typeCharacters(\"a\", () => {\n      pasteContent(\"Files\", createFile(), () => expectDocument(`a${OBJECT_REPLACEMENT_CHARACTER}\\n`))\n    })\n  })\n\n  testIf(config.input.getLevel() === 0, \"paste event with no clipboardData\", (expectDocument) => {\n    typeCharacters(\"a\", () => {\n      triggerEvent(document.activeElement, \"paste\")\n      document.activeElement.insertAdjacentHTML(\"beforeend\", \"<span>bc</span>\")\n      requestAnimationFrame(() => expectDocument(\"abc\\n\"))\n    })\n  })\n})\n","import config from \"trix/config\"\nimport { makeElement } from \"trix/core/helpers\"\nimport Text from \"trix/models/text\"\n\nimport {\n  assert,\n  clickElement,\n  clickToolbarButton,\n  clickToolbarDialogButton,\n  collapseSelection,\n  expandSelection,\n  fixtures,\n  insertString,\n  insertText,\n  isToolbarButtonActive,\n  isToolbarButtonDisabled,\n  isToolbarDialogActive,\n  moveCursor,\n  pressKey,\n  test,\n  testGroup,\n  testIf,\n  typeCharacters,\n  typeInToolbarDialog,\n  typeToolbarKeyCommand,\n} from \"test/test_helper\"\n\ntestGroup(\"Text formatting\", { template: \"editor_empty\" }, () => {\n  test(\"applying attributes to text\", (done) => {\n    typeCharacters(\"abc\", () => {\n      expandSelection(\"left\", () => {\n        clickToolbarButton({ attribute: \"bold\" }, () => {\n          assert.textAttributes([ 0, 2 ], {})\n          assert.textAttributes([ 2, 3 ], { bold: true })\n          assert.textAttributes([ 3, 4 ], { blockBreak: true })\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"applying a link to text\", (done) => {\n    typeCharacters(\"abc\", () => {\n      moveCursor(\"left\", () => {\n        expandSelection(\"left\", () => {\n          clickToolbarButton({ attribute: \"href\" }, () => {\n            assert.ok(isToolbarDialogActive({ attribute: \"href\" }))\n            typeInToolbarDialog(\"http://example.com\", { attribute: \"href\" }, () => {\n              assert.textAttributes([ 0, 1 ], {})\n              assert.textAttributes([ 1, 2 ], { href: \"http://example.com\" })\n              assert.textAttributes([ 2, 3 ], {})\n              done()\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"inserting a link\", (expectDocument) => {\n    typeCharacters(\"a\", () => {\n      clickToolbarButton({ attribute: \"href\" }, () => {\n        assert.ok(isToolbarDialogActive({ attribute: \"href\" }))\n        typeInToolbarDialog(\"http://example.com\", { attribute: \"href\" }, () => {\n          assert.textAttributes([ 0, 1 ], {})\n          assert.textAttributes([ 1, 19 ], { href: \"http://example.com\" })\n          expectDocument(\"ahttp://example.com\\n\")\n        })\n      })\n    })\n  })\n\n  test(\"editing a link\", (done) => {\n    insertString(\"a\")\n    const text = Text.textForStringWithAttributes(\"bc\", { href: \"http://example.com\" })\n    insertText(text)\n    insertString(\"d\")\n    moveCursor({ direction: \"left\", times: 2 }, () => {\n      clickToolbarButton({ attribute: \"href\" }, () => {\n        assert.ok(isToolbarDialogActive({ attribute: \"href\" }))\n        assert.locationRange({ index: 0, offset: 1 }, { index: 0, offset: 3 })\n        typeInToolbarDialog(\"http://example.org\", { attribute: \"href\" }, () => {\n          assert.textAttributes([ 0, 1 ], {})\n          assert.textAttributes([ 1, 3 ], { href: \"http://example.org\" })\n          assert.textAttributes([ 3, 4 ], {})\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"removing a link\", (done) => {\n    const text = Text.textForStringWithAttributes(\"ab\", { href: \"http://example.com\" })\n    insertText(text)\n    assert.textAttributes([ 0, 2 ], { href: \"http://example.com\" })\n    expandSelection({ direction: \"left\", times: 2 }, () => {\n      clickToolbarButton({ attribute: \"href\" }, () => {\n        clickToolbarDialogButton({ method: \"removeAttribute\" }, () => {\n          assert.textAttributes([ 0, 2 ], {})\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"selecting an attachment disables text formatting\", (done) => {\n    const text = fixtures[\"file attachment\"].document.getBlockAtIndex(0).getTextWithoutBlockBreak()\n    insertText(text)\n    typeCharacters(\"a\", () => {\n      assert.notOk(isToolbarButtonDisabled({ attribute: \"bold\" }))\n      expandSelection(\"left\", () => {\n        assert.notOk(isToolbarButtonDisabled({ attribute: \"bold\" }))\n        expandSelection(\"left\", () => {\n          assert.ok(isToolbarButtonDisabled({ attribute: \"bold\" }))\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"selecting an attachment deactivates toolbar dialog\", (done) => {\n    const text = fixtures[\"file attachment\"].document.getBlockAtIndex(0).getTextWithoutBlockBreak()\n    insertText(text)\n    clickToolbarButton({ attribute: \"href\" }, () => {\n      assert.ok(isToolbarDialogActive({ attribute: \"href\" }))\n      clickElement(getEditorElement().querySelector(\"figure\"), () => {\n        assert.notOk(isToolbarDialogActive({ attribute: \"href\" }))\n        assert.ok(isToolbarButtonDisabled({ attribute: \"href\" }))\n        done()\n      })\n    })\n  })\n\n  test(\"typing over a selected attachment does not apply disabled formatting attributes\", function (expectDocument) {\n    const text = fixtures[\"file attachment\"].document.getBlockAtIndex(0).getTextWithoutBlockBreak()\n    insertText(text)\n    expandSelection(\"left\", () => {\n      assert.ok(isToolbarButtonDisabled({ attribute: \"bold\" }))\n      typeCharacters(\"a\", () => {\n        assert.textAttributes([ 0, 1 ], {})\n        expectDocument(\"a\\n\")\n      })\n    })\n  })\n\n  test(\"applying a link to an attachment with a host-provided href\", (done) => {\n    const text = fixtures[\"file attachment\"].document.getBlockAtIndex(0).getTextWithoutBlockBreak()\n    insertText(text)\n    typeCharacters(\"a\", () => {\n      assert.notOk(isToolbarButtonDisabled({ attribute: \"href\" }))\n      expandSelection(\"left\", () => {\n        assert.notOk(isToolbarButtonDisabled({ attribute: \"href\" }))\n        expandSelection(\"left\", () => {\n          assert.ok(isToolbarButtonDisabled({ attribute: \"href\" }))\n          done()\n        })\n      })\n    })\n  })\n\n  test(\"typing after a link\", (done) => {\n    typeCharacters(\"ab\", () => {\n      expandSelection({ direction: \"left\", times: 2 }, () => {\n        clickToolbarButton({ attribute: \"href\" }, () => {\n          typeInToolbarDialog(\"http://example.com\", { attribute: \"href\" }, () => {\n            collapseSelection(\"right\", () => {\n              assert.locationRange({ index: 0, offset: 2 })\n              typeCharacters(\"c\", () => {\n                assert.textAttributes([ 0, 2 ], { href: \"http://example.com\" })\n                assert.textAttributes([ 2, 3 ], {})\n                moveCursor(\"left\", () => {\n                  assert.notOk(isToolbarButtonActive({ attribute: \"href\" }))\n                  moveCursor(\"left\", () => {\n                    assert.ok(isToolbarButtonActive({ attribute: \"href\" }))\n                    done()\n                  })\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"applying formatting and then typing\", (done) => {\n    typeCharacters(\"a\", () => {\n      clickToolbarButton({ attribute: \"bold\" }, () => {\n        typeCharacters(\"bcd\", () => {\n          clickToolbarButton({ attribute: \"bold\" }, () => {\n            typeCharacters(\"e\", () => {\n              assert.textAttributes([ 0, 1 ], {})\n              assert.textAttributes([ 1, 4 ], { bold: true })\n              assert.textAttributes([ 4, 5 ], {})\n              done()\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"applying formatting and then moving the cursor away\", (done) => {\n    typeCharacters(\"abc\", () => {\n      moveCursor(\"left\", () => {\n        assert.notOk(isToolbarButtonActive({ attribute: \"bold\" }))\n        clickToolbarButton({ attribute: \"bold\" }, () => {\n          assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n          moveCursor(\"right\", () => {\n            assert.notOk(isToolbarButtonActive({ attribute: \"bold\" }))\n            moveCursor(\"left\", () => {\n              assert.notOk(isToolbarButtonActive({ attribute: \"bold\" }))\n              assert.textAttributes([ 0, 3 ], {})\n              assert.textAttributes([ 3, 4 ], { blockBreak: true })\n              done()\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"applying formatting to an unfocused editor\", (done) => {\n    const input = makeElement(\"input\", { type: \"text\" })\n    document.body.appendChild(input)\n    input.focus()\n\n    clickToolbarButton({ attribute: \"bold\" }, () => {\n      typeCharacters(\"a\", () => {\n        assert.textAttributes([ 0, 1 ], { bold: true })\n        document.body.removeChild(input)\n        done()\n      })\n    })\n  })\n\n  test(\"editing formatted text\", (done) => {\n    clickToolbarButton({ attribute: \"bold\" }, () => {\n      typeCharacters(\"ab\", () => {\n        clickToolbarButton({ attribute: \"bold\" }, () => {\n          typeCharacters(\"c\", () => {\n            assert.notOk(isToolbarButtonActive({ attribute: \"bold\" }))\n            moveCursor(\"left\", () => {\n              assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n              moveCursor(\"left\", () => {\n                assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n                typeCharacters(\"Z\", () => {\n                  assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n                  assert.textAttributes([ 0, 3 ], { bold: true })\n                  assert.textAttributes([ 3, 4 ], {})\n                  assert.textAttributes([ 4, 5 ], { blockBreak: true })\n                  moveCursor(\"right\", () => {\n                    assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n                    moveCursor(\"right\", () => {\n                      assert.notOk(isToolbarButtonActive({ attribute: \"bold\" }))\n                      done()\n                    })\n                  })\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  testIf(config.input.getLevel() === 0, \"key command activates toolbar button\", (done) => {\n    typeToolbarKeyCommand({ attribute: \"bold\" }, () => {\n      assert.ok(isToolbarButtonActive({ attribute: \"bold\" }))\n      done()\n    })\n  })\n\n  test(\"backspacing newline after text\", (expectDocument) =>\n    typeCharacters(\"a\\n\", () => pressKey(\"backspace\", () => expectDocument(\"a\\n\"))))\n})\n","import {\n  assert,\n  clickToolbarButton,\n  expandSelection,\n  moveCursor,\n  test,\n  testGroup,\n  typeCharacters,\n} from \"test/test_helper\"\n\ntestGroup(\"Undo/Redo\", { template: \"editor_empty\" }, () => {\n  test(\"typing and undoing\", (done) => {\n    const first = getDocument().copy()\n    typeCharacters(\"abc\", () => {\n      assert.notOk(getDocument().isEqualTo(first))\n      clickToolbarButton({ action: \"undo\" }, () => {\n        assert.ok(getDocument().isEqualTo(first))\n        done()\n      })\n    })\n  })\n\n  test(\"typing, formatting, typing, and undoing\", (done) => {\n    const first = getDocument().copy()\n    typeCharacters(\"abc\", () => {\n      const second = getDocument().copy()\n      clickToolbarButton({ attribute: \"bold\" }, () => {\n        typeCharacters(\"def\", () => {\n          const third = getDocument().copy()\n          clickToolbarButton({ action: \"undo\" }, () => {\n            assert.ok(getDocument().isEqualTo(second))\n            clickToolbarButton({ action: \"undo\" }, () => {\n              assert.ok(getDocument().isEqualTo(first))\n              clickToolbarButton({ action: \"redo\" }, () => {\n                assert.ok(getDocument().isEqualTo(second))\n                clickToolbarButton({ action: \"redo\" }, () => {\n                  assert.ok(getDocument().isEqualTo(third))\n                  done()\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"formatting changes are batched by location range\", (done) => {\n    typeCharacters(\"abc\", () => {\n      const first = getDocument().copy()\n      expandSelection(\"left\", () => {\n        clickToolbarButton({ attribute: \"bold\" }, () => {\n          clickToolbarButton({ attribute: \"italic\" }, () => {\n            const second = getDocument().copy()\n            moveCursor(\"left\", () => {\n              expandSelection(\"left\", () => {\n                clickToolbarButton({ attribute: \"italic\" }, () => {\n                  const third = getDocument().copy()\n                  clickToolbarButton({ action: \"undo\" }, () => {\n                    assert.ok(getDocument().isEqualTo(second))\n                    clickToolbarButton({ action: \"undo\" }, () => {\n                      assert.ok(getDocument().isEqualTo(first))\n                      clickToolbarButton({ action: \"redo\" }, () => {\n                        assert.ok(getDocument().isEqualTo(second))\n                        clickToolbarButton({ action: \"redo\" }, () => {\n                          assert.ok(getDocument().isEqualTo(third))\n                          done()\n                        })\n                      })\n                    })\n                  })\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n\n  test(\"block formatting are undoable\", (done) => {\n    typeCharacters(\"abc\", () => {\n      const first = getDocument().copy()\n      clickToolbarButton({ attribute: \"heading1\" }, () => {\n        const second = getDocument().copy()\n        clickToolbarButton({ action: \"undo\" }, () => {\n          assert.ok(getDocument().isEqualTo(first))\n          clickToolbarButton({ action: \"redo\" }, () => {\n            assert.ok(getDocument().isEqualTo(second))\n            done()\n          })\n        })\n      })\n    })\n  })\n})\n","/* eslint-disable\n*/\nimport Trix from \"trix/trix\"\nimport config from \"trix/config\"\n\nimport \"trix/core/helpers/global\"\nimport \"test/test_helper\"\n\nimport \"test/unit\"\nimport \"test/system\"\n\nconfig.undoInterval = 0\n\nQUnit.config.hidepassed = true\nQUnit.config.testTimeout = 20000\n\ndocument.head.insertAdjacentHTML(\n  \"beforeend\",\n  `<style type=\"text/css\">\n    #trix-container { height: 150px; }\n    trix-toolbar { margin-bottom: 10px; }\n    trix-toolbar button { border: 1px solid #ccc; background: #fff; }\n    trix-toolbar button.active { background: #d3e6fd; }\n    trix-toolbar button:disabled { color: #ccc; }\n  </style>`\n)\n"],"names":["attachmentSelector","attachments","preview","presentation","caption","name","size","file","attributes","default","tagName","parse","quote","nestable","heading1","terminal","breakOnReturn","group","code","text","plaintext","bulletList","bullet","listAttribute","test","element","parentNode","numberList","number","attachmentGallery","exclusive","alignLeft","alignCenter","alignRight","toLowerCase","composesExistingText","navigator","userAgent","forcesObjectResizing","supportsInputEvents","InputEvent","property","prototype","attachment","attachmentCaption","attachmentCaptionEditor","attachmentMetadata","attachmentMetadataContainer","attachmentName","attachmentProgress","attachmentSize","attachmentToolbar","attachFiles","bold","bullets","byte","bytes","captionPlaceholder","indent","italic","link","numbers","outdent","redo","remove","strike","undo","unlink","url","urlPlaceholder","GB","KB","MB","PB","TB","sizes","lang","prefix","precision","formatter","base","exp","Math","floor","log","humanSize","pow","string","toFixed","withoutInsignificantZeros","replace","ZERO_WIDTH_SPACE","NON_BREAKING_SPACE","OBJECT_REPLACEMENT_CHARACTER","extend","properties","key","value","html","document","documentElement","match","matches","handleEvent","eventName","onElement","matchingSelector","withCallback","inPhase","preventDefault","times","selector","useCapture","handler","event","destroy","target","findClosestElementFromNode","call","removeEventListener","addEventListener","handleEventOnce","options","triggerEvent","bubbles","cancelable","createEvent","initEvent","dispatchEvent","elementMatchesSelector","nodeType","node","untilNode","Node","ELEMENT_NODE","closest","findInnerElement","firstElementChild","innerElementIsActive","activeElement","elementContainsNode","findNodeFromContainerAndOffset","container","offset","TEXT_NODE","firstChild","childNodes","item","findElementFromContainerAndOffset","findChildIndexOfNode","childIndex","previousSibling","removeNode","removeChild","walkTree","tree","onlyNodesOfType","usingFilter","expandEntityReferences","whatToShow","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","SHOW_COMMENT","SHOW_ALL","createTreeWalker","makeElement","tag","createElement","editable","contenteditable","setAttribute","style","data","dataset","className","split","forEach","classList","add","textContent","concat","childNode","appendChild","blockTagNames","undefined","getBlockTagNames","blockAttributes","push","nodeIsBlockContainer","nodeIsBlockStartComment","nodeProbablyIsBlockContainer","includes","nodeIsBlockStart","strict","nodeIsCommentNode","COMMENT_NODE","nodeIsCursorTarget","nodeIsTextNode","trixCursorTarget","nodeIsAttachmentElement","nodeIsEmptyTextNode","input","level2Enabled","getLevel","browser","pickFiles","callback","type","multiple","hidden","id","fileInputId","files","getElementById","body","click","inheritable","parser","window","getComputedStyle","fontWeight","fontStyle","href","groupTagName","getAttribute","frozen","backgroundColor","getDefaultHTML","undoInterval","config","css","fileSize","keyNames","textAttributes","toolbar","BasicObject","proxyMethod","expression","toMethod","toProperty","optional","parseProxyMethodExpression","subject","object","apply","arguments","proxyMethodExpressionPattern","Error","args","Function","RegExp","UTF16String","box","fromUCS2String","toString","ucs2String","ucs2decode","fromCodepoints","codepoints","ucs2encode","constructor","length","ucs2Length","offsetToUCS2Offset","slice","max","offsetFromUCS2Offset","ucs2Offset","charAt","isEqualTo","toJSON","getCacheKey","hasArrayFrom","Array","from","hasStringCodePointAt","_$codePointAt","_","codePointAt","hasStringFromCodePoint","String","fromCodePoint","map","char","output","counter","charCodeAt","extra","array","characters","result","fromCharCode","join","TrixObject","fromJSONString","jsonString","fromJSON","JSON","hasSameConstructorAs","inspect","parts","contents","contentsForInspection","toJSONString","stringify","toUTF16String","arraysAreEqual","a","b","index","arrayStartsWith","spliceArray","splice","summarizeArrayChange","oldArray","newArray","added","removed","existingValues","Set","currentValues","has","RTL_PATTERN","getDirection","dir","dirName","form","supportsDirName","FormData","error","supportsDirSelector","get","trim","allAttributeNames","blockAttributeNames","textAttributeNames","listAttributeNames","getAllAttributeNames","getTextAttributeNames","getBlockAttributeNames","getBlockConfig","attributeName","Object","keys","getTextConfig","getListAttributeNames","installDefaultCSSForTagName","defaultCSS","styleElement","insertStyleElementForTagName","nonce","getCSPNonce","head","insertBefore","getMetaElement","querySelector","testTransferData","dataTransferIsPlainText","dataTransfer","getData","DOMParser","parseFromString","dataTransferIsWritable","setData","keyEventIsKeyboardCommand","platform","metaKey","ctrlKey","defer","fn","setTimeout","copyObject","objectsAreEqual","normalizeRange","range","isArray","copyValue","rangeIsCollapsed","start","end","rangeValuesAreEqual","rangesAreEqual","leftRange","rightRange","leftStart","leftEnd","rightStart","rightEnd","left","right","SelectionChangeObserver","update","bind","run","selectionManagers","started","stop","registerSelectionManager","selectionManager","unregisterSelectionManager","filter","s","notifySelectionManagersOfSelectionChange","selectionDidChange","domRange","getDOMRange","domRangesAreEqual","reset","requestAnimationFrame","startContainer","startOffset","endContainer","endOffset","selectionChangeObserver","getDOMSelection","selection","getSelection","rangeCount","getRangeAt","domRangeIsPrivate","setDOMRange","removeAllRanges","addRange","nodeIsPrivate","getPrototypeOf","normalizeSpaces","normalizeNewlines","breakableWhitespacePattern","squishBreakableWhitespace","source","summarizeStringChange","oldString","newString","utf16StringDifferences","diffA","utf16StringDifference","utf16String","diffB","leftIndex","rightIndexA","rightIndexB","Hash","fromCommonAttributesOfObjects","objects","hash","getKeys","getKeysCommonToHash","values","copy","merge","unbox","toArray","isEmpty","toObject","keyToRemove","sortedKeys","sort","Operation","isPerforming","performing","hasPerformed","performed","hasSucceeded","succeeded","hasFailed","getPromise","promise","Promise","resolve","reject","perform","release","cancel","ImagePreloadOperation","image","Image","onload","width","naturalWidth","height","naturalHeight","onerror","src","Attachment","attachmentForFile","attributesForFile","setFile","filename","filesize","contentType","attachmentJSON","releaseFile","didChangeAttributes","attribute","hasAttribute","getAttributes","setAttributes","newAttributes","previewDelegate","attachmentDidChangeAttributes","delegate","isPreviewable","preloadURL","isPending","getURL","getHref","previewablePattern","getContentType","getType","hasContent","getFilename","getFilesize","getFormattedFilesize","getExtension","getContent","getWidth","getHeight","getFile","preloadFile","releasePreloadedFile","getUploadProgress","uploadProgress","setUploadProgress","uploadProgressDelegate","attachmentDidChangeUploadProgress","getPreviewURL","previewURL","preloadingURL","setPreviewURL","attachmentDidChangePreviewURL","preload","fileObjectURL","URL","createObjectURL","revokeObjectURL","operation","then","catch","ManagedAttachment","attachmentManager","requestRemovalOfAttachment","AttachmentManager","managedAttachments","manageAttachment","getAttachments","attachmentIsManaged","attachmentManagerDidRequestRemovalOfAttachment","unmanageAttachment","managedAttachment","Piece","registerType","types","pieceJSON","copyWithAttributes","getValue","copyWithAdditionalAttributes","copyWithoutAttribute","getAttributesHash","hasSameStringValueAsPiece","piece","hasSameAttributesAsPiece","isBlockBreak","isSerializable","canBeGrouped","canBeGroupedWith","getLength","canBeConsolidatedWith","AttachmentPiece","ensureAttachmentExclusivelyHasAttribute","removeProhibitedAttributes","permittedAttributes","getCaption","json","toConsole","StringPiece","consolidateWith","splitAtOffset","SplittableList","indexOf","eachObject","insertObjectAtIndex","insertSplittableListAtIndex","splittableList","insertSplittableListAtPosition","position","splitObjectAtPosition","editObjectAtIndex","replaceObjectAtIndex","removeObjectAtIndex","getObjectAtIndex","getSplittableListInRange","rightIndex","splitObjectsAtRange","selectSplittableList","removeObjectsInRange","transformObjectsInRange","transform","transformedObjects","rightOuterIndex","leftInnerIndex","startOfRange","endOfRange","getObjectAtPosition","findIndexAndOffsetAtPosition","splitIndex","splitOffset","leftObject","rightObject","consolidate","pendingObject","consolidateFromIndexToIndex","startIndex","endIndex","objectsInRange","consolidatedInRange","currentPosition","nextPosition","findPositionAtIndexAndOffset","currentIndex","getEndPosition","endPosition","objectArraysAreEqual","Text","textForAttachmentWithAttributes","textForStringWithAttributes","textJSON","pieces","notEmpty","pieceList","copyWithPieceList","copyUsingObjectMap","objectMap","getPieces","find","appendText","insertTextAtPosition","removeTextAtRange","replaceTextAtRange","moveTextFromRangeToPosition","getTextAtRange","addAttributeAtRange","addAttributesAtRange","removeAttributeAtRange","setAttributesAtRange","getAttributesAtPosition","getCommonAttributes","getCommonAttributesAtRange","getExpandedRangeForAttributeAtOffset","getStringAtRange","getStringAtPosition","startsWithString","endsWithString","getAttachmentPieces","getAttachmentAndPositionById","attachmentId","getAttachmentById","getRangeOfAttachment","attachmentAndPosition","updateAttributesForAttachment","eachPiece","getPieceAtPosition","toSerializableText","isRTL","Block","blockJSON","applyBlockBreakToText","block","copyWithText","copyWithoutText","copyWithoutAttributes","mappedText","addAttribute","expandAttribute","removeAttribute","removeLastValue","removeLastAttribute","getLastAttribute","getLastElement","getAttributeLevel","getAttributeAtLevel","level","hasAttributes","getLastNestableAttribute","getNestableAttributes","getNestingLevel","decreaseNestingLevel","increaseNestingLevel","lastIndexOf","getListItemAttributes","isListItem","isTerminalBlock","breaksOnReturn","findLineBreakInDirectionFromPosition","direction","newlineText","getTextWithoutBlockBreak","getBlockBreakPosition","textEndsInBlockBreak","depth","otherBlock","otherAttributes","otherAttribute","unmarkExistingInnerBlockBreaksInText","addBlockBreakToText","modified","innerPieces","lastPiece","unmarkBlockBreakPiece","blockBreakText","blockBreak","endText","ObjectMap","Document","documentJSON","blocks","fromString","blockList","getBlockAtIndex","consolidateBlocks","copyUsingObjectsFromDocument","sourceDocument","getObjects","getBlocks","mappedBlock","copyWithBaseBlockAttributes","replaceBlock","oldBlock","newBlock","insertDocumentAtRange","locationFromPosition","getBlockAtPosition","mergeDocumentAtRange","formattedDocument","startPosition","startLocation","baseBlockAttributes","getBaseBlockAttributes","trailingBlockAttributes","leadingBlockAttributes","blockCount","getBlockCount","firstBlock","firstText","insertTextAtRange","leftPosition","rightPosition","leftLocation","rightLocation","locationRangeFromRange","leftOffset","leftBlock","rightOffset","rightBlock","removeRightNewline","leftText","rightText","removingLeftBlock","useRightBlock","affectedBlockCount","getDocumentAtRange","movingRightward","eachBlockAtRange","textRange","eachBlock","getTextAtIndex","removeAttributeForAttachment","insertBlockBreakAtRange","applyBlockAttributeAtRange","expanded","expandRangeToLineBreaksAndSplitBlocks","blockConfig","removeLastListAttributeAtRange","exceptAttributeName","converted","convertLineBreaksToBlockBreaksInRange","removeBlockAttributesAtRange","removeLastTerminalAttributeAtRange","consolidateBlocksAtRange","lastAttributeName","endLocation","startBlock","positionFromLocation","endBlock","getTextAtPosition","getCharacterAtPosition","getEditCount","editCount","getCommonAttributesAtPosition","attributesForBlock","commonAttributes","attributesLeft","inheritableAttributes","getRangeOfCommonAttributeAtPosition","blockIndex","lastAttributeIndex","min","attachmentPieces","iterable","getLocationRangeOfAttachment","getAttachmentPieceForAttachment","findRangesForBlockAttribute","ranges","findRangesForTextAttribute","withValue","location","locationRangeFromPosition","rangeFromLocationRange","locationRange","getTexts","toSerializableDocument","DEFAULT_ALLOWED_ATTRIBUTES","DEFAULT_FORBIDDEN_PROTOCOLS","DEFAULT_FORBIDDEN_ELEMENTS","HTMLSanitizer","sanitize","sanitizer","allowedAttributes","forbiddenProtocols","forbiddenElements","createBodyElementForHTML","sanitizeElements","normalizeListElementNesting","getHTML","innerHTML","getBody","walker","nodesToRemove","nextNode","currentNode","elementIsRemovable","sanitizeElement","protocol","querySelectorAll","listElement","previousElement","previousElementSibling","elementIsForbidden","elementIsntSerializable","doc","implementation","createHTMLDocument","pieceForString","pieceForAttachment","blockForAttributes","parseTrixDataAttribute","getImageDimensions","dimensions","parseInt","HTMLParser","referenceElement","blockElements","processedElements","getDocument","createHiddenContainer","containerElement","nodeFilter","processNode","translateBlockElementMarginsToNewlines","removeHiddenContainer","cloneNode","display","nextSibling","isInsignificantTextNode","appendBlockForTextNode","processTextNode","appendBlockForElement","processElement","currentBlockElement","isBlockElement","appendStringWithAttributes","getBlockAttributes","currentBlock","appendBlockForAttributesWithElement","elementIsBlockElement","currentBlockContainsElement","parentBlockElement","findParentBlockElement","appendEmptyBlock","parentElement","elementCanDisplayPreformattedText","stringEndsWithWhitespace","leftTrimBreakableWhitespace","getTextAttributes","appendAttachmentWithAttributes","isExtraBR","appendPiece","appendStringToTextAtIndex","prependStringToTextAtIndex","unshift","configAttr","attributeInheritedFromBlock","blockElement","findBlockElementAncestors","styleProperty","attrConfig","reverse","ancestors","stringIsAllBreakableWhitespace","nodeEndsWithNonWhitespace","lastChild","defaultMargin","getMarginOfDefaultBlockElement","margin","getMarginOfBlockElementAtIndex","top","bottom","getBlockElementMargin","whiteSpace","marginTop","marginBottom","FILTER_REJECT","FILTER_ACCEPT","LineBreakInsertion","composition","selectedRange","getSelectedRange","previousCharacter","nextCharacter","shouldInsertBlockBreak","shouldBreakFormattedBlock","shouldDecreaseListLevel","shouldPrependListItem","shouldRemoveLastBlockAttribute","PLACEHOLDER","Composition","currentAttributes","revision","setDocument","refreshAttachments","compositionDidChangeDocument","getSnapshot","loadSnapshot","compositionWillLoadSnapshot","setSelection","compositionDidLoadSnapshot","insertText","updatePosition","notifyDelegateOfInsertionAtRange","insertBlock","insertDocument","insertString","getCurrentTextAttributes","insertBlockBreak","insertLineBreak","insertion","decreaseListLevel","removeLastBlockAttribute","breakFormattedBlock","insertHTML","replaceHTML","getLocationRange","insertFile","insertFiles","compositionShouldAcceptFile","insertAttachments","insertAttachment","attachmentText","shouldManageDeletingInDirection","shouldManageMovingCursorInDirection","deleteInDirection","deletingIntoPreviousBlock","selectionSpansBlocks","selectionIsCollapsed","canDecreaseBlockAttributeLevel","getBlock","decreaseBlockAttributeLevel","getExpandedRangeInDirection","getAttachmentAtRange","editAttachment","moveTextFromRange","removeAttachment","stopEditingAttachment","removeCurrentAttribute","insertPlaceholder","placeholderPosition","getPosition","selectPlaceholder","setSelectedRange","forgetPlaceholder","hasCurrentAttribute","toggleCurrentAttribute","setCurrentAttribute","canSetCurrentAttribute","canSetCurrentBlockAttribute","canSetCurrentTextAttribute","getSelectedDocument","setBlockAttribute","setTextAttribute","notifyDelegateOfCurrentAttributesChange","removeBlockAttribute","updateCurrentAttributes","removeTextAttribute","canDecreaseNestingLevel","canIncreaseNestingLevel","previousBlock","getPreviousBlock","attributeLevel","ignoreLock","getCurrentAttributes","freezeSelection","thawSelection","hasFrozenSelection","compositionDidRequestChangingSelectionToLocationRange","getSelectionManager","setLocationRange","targetLocationRange","withTargetLocationRange","withTargetRange","withTargetDOMRange","createLocationRangeFromDOMRange","translateUTF16PositionFromOffset","editingAttachment","moveCursorInDirection","canEditAttachment","expandSelectionInDirection","expandSelectionForEditing","expandSelectionAroundCommonAttribute","selectionContainsAttachments","getSelectedAttachments","selectionIsInCursorTarget","positionIsCursorTarget","locationIsCursorTarget","positionIsBlockBreak","compositionDidRemoveAttachment","compositionDidAddAttachment","compositionDidEditAttachment","compositionDidChangeAttachmentPreviewURL","compositionDidStartEditingAttachment","compositionDidStopEditingAttachment","newDocument","compositionDidChangeCurrentAttributes","compositionDidPerformInsertionAtRange","utf16string","utf16position","UndoManager","undoEntries","redoEntries","recordUndoEntry","description","context","consolidatable","previousEntry","entryHasDescriptionAndContext","undoEntry","createEntry","pop","redoEntry","snapshot","canUndo","canRedo","entry","attachmentGalleryFilter","Filter","BLOCK_ATTRIBUTE_NAME","TEXT_ATTRIBUTE_NAME","TEXT_ATTRIBUTE_VALUE","applyBlockAttribute","findRangesOfBlocks","findRangesOfPieces","moveSelectedRangeForward","DEFAULT_FILTERS","Editor","undoManager","filters","loadDocument","loadHTML","loadJSON","getClientRectAtPosition","getClientRectAtLocationRange","activateAttribute","attributeIsActive","canActivateAttribute","deactivateAttribute","LocationMapper","findLocationFromContainerAndOffset","foundBlock","attachmentElement","findAttachmentElementParentForNode","rejectAttachmentContents","nodeLength","findContainerAndOffsetFromLocation","nodeOffset","findNodeAndOffsetFromLocation","getSignificantNodesForIndex","nodes","acceptSignificantNodes","recordingNodes","rejectEmptyTextNodes","PointMapper","createDOMRangeFromPoint","x","y","caretPositionFromPoint","offsetNode","createRange","setStart","caretRangeFromPoint","createTextRange","originalDOMRange","moveToPoint","select","getClientRectsForDOMRange","getClientRects","SelectionManager","didMouseDown","locationMapper","pointMapper","lockCount","currentLocationRange","lockedLocationRange","createDOMRangeFromLocationRange","updateCurrentLocationRange","setLocationRangeFromPointRange","pointRange","getLocationAtPoint","lock","unlock","clearSelection","collapsed","selectionIsExpanded","domRangeWithinElement","pauseTemporarily","resumeHandlers","paused","resume","clearTimeout","resumeTimeout","locationRangeDidChange","rangeStart","rangeEnd","setEnd","point","Cocument","Trix","VERSION","version","assign","models","ObjectGroup","groupObjects","ungroupedObjects","asTree","getDepth","ElementStore","elements","getKey","trixStoreKey","ObjectView","childViews","rootView","getNodes","createNodes","invalidate","parentView","invalidateViewForObject","findViewForObject","findOrCreateCachedChildView","viewClass","view","getCachedViewForObject","recordChildView","createChildView","cacheViewForObject","ObjectGroupView","getAllChildViews","views","childView","findElement","findElementForObject","getViewCache","isViewCachingEnabled","viewCache","shouldCacheViews","enableViewCaching","disableViewCaching","cache","garbageCollectCachedViews","objectKeys","objectGroup","getChildViews","createContainerElement","AttachmentView","attachmentPiece","createContentNodes","innerElement","figure","getClassName","tabindex","createCaptionElement","progressElement","class","trixMutable","createCursorTarget","figcaption","captionConfig","getCaptionConfig","nameElement","createTextNode","sizeElement","names","extension","trixAttachment","trixContentType","trixId","trixAttributes","trixSerialize","htmlContainsTagName","findProgressElement","div","PreviewableAttachmentView","refresh","updateAttributesForImage","serializedAttributes","storeKey","PieceView","textConfig","createAttachmentNodes","createStringNodes","substring","preserveSpaces","styles","pendingElement","isLast","isFirst","followsWhitespace","TextView","lastIndex","endsWithWhitespace","previousPiece","BlockView","comment","createComment","textView","shouldAddExtraNewlineElement","DocumentView","render","sync","elementStore","shadowElement","isSynced","elementsHaveEqualHTML","fragment","createDocumentFragmentForSync","didSync","findStoredElements","createDocumentFragment","storedElement","replaceChild","otherElement","ignoreSpaces","unserializableElementSelector","unserializableAttributeNames","serializedAttributesAttribute","serializedAttributesSelector","blockCommentPattern","serializers","serializable","HTMLElement","el","deserializers","serializeToContentType","serializer","deserializeFromContentType","deserializer","mutableAttributeName","mutableSelector","childList","characterData","characterDataOldValue","subtree","MutationObserver","didMutate","observer","observe","disconnect","mutations","findSignificantMutations","elementDidMutate","getMutationSummary","mutation","mutationIsSignificant","nodeIsMutable","nodesModifiedByMutation","nodeIsSignificant","addedNodes","removedNodes","getTextMutationSummary","additions","deletions","getTextChangesFromCharacterData","textChanges","getTextChangesFromChildList","addition","summary","textAdded","deleted","textDeleted","getMutationsByType","textRemoved","singleBlockCommentRemoved","getTextForNodes","characterMutations","startMutation","endMutation","oldValue","summarized","Controller","FileVerificationOperation","reader","FileReader","abort","readAsArrayBuffer","InputController","mutationObserver","events","handlerFor","mutationSummary","editorWillSyncDocumentView","editorDidSyncDocumentView","requestRender","inputControllerDidRequestRender","requestReparse","inputControllerDidRequestReparse","operations","all","handleInput","inputControllerWillAttachFiles","responder","defaultPrevented","inputControllerWillHandleInput","inputControllerDidHandleInput","createLinkHTML","outerHTML","pastedFileCount","Level0InputController","resetInputSummary","setInputSummary","inputSummary","isComposing","inputControllerDidAllowUnhandledInput","mutationIsExpected","preferDocument","mutationAdditionMatchesSummary","mutationDeletionMatchesSummary","didDelete","unexpectedNewlineAddition","unexpectedNewlineDeletion","singleUnexpectedNewline","textChanged","composedEmptyString","compositionInput","getEndData","getCompositionInput","CompositionInput","isEnded","serializeSelectionToDataTransfer","canAcceptDataTransfer","Files","getPastedHTMLUsingHiddenElement","pageXOffset","pageYOffset","opacity","focus","keydown","didInput","keyName","keyCode","modifier","character","inputControllerDidReceiveKeyboardCommand","keypress","altKey","stringFromKeyEvent","inputControllerWillPerformTyping","textInput","toUpperCase","dragenter","dragstart","draggedRange","inputControllerDidStartDrag","dragover","draggingPoint","clientX","clientY","inputControllerDidReceiveDragOverPoint","dragend","inputControllerDidCancelDrag","drop","inputControllerWillMoveText","cut","clipboardData","inputControllerWillCutText","paste","clipboard","testClipboardData","pasteEventIsCrippledSafariHTMLPaste","inputControllerWillPaste","inputControllerDidPaste","items","getAsFile","extensionForFile","compositionstart","compositionupdate","compositionend","beforeinput","stopPropagation","backspace","delete","return","tab","control","d","h","o","shift","alt","meta","which","charCode","hasPasteboardFlavor","hasReadableDynamicData","mightBePasteAndMatchStyle","isExternalHTMLPaste","isExternalRichTextPaste","inputController","isSignificant","canApplyToDocument","Level2InputController","scheduledRender","composing","reparse","scheduleRender","cancelAnimationFrame","afterRender","toggleAttributeIfSupported","inputControllerWillPerformFormatting","activateAttributeIfSupported","getTargetDOMRange","minLength","targetRanges","getTargetRanges","staticRangeToRange","withEvent","command","keyboardCommandFromKeyEvent","shiftKey","pasteEventHasFilesOnly","pasteEventHasPlainTextOnly","inputTypes","inputType","dragging","pointFromEvent","dragEventHasFiles","ArrowLeft","ArrowRight","Backspace","Tab","deleteByComposition","deleteByCut","deleteByDrag","deleteByDragRange","deleteCompositionText","deleteContent","deleteContentBackward","deleteContentForward","deleteEntireSoftLine","deleteHardLineBackward","deleteHardLineForward","deleteSoftLineBackward","deleteSoftLineForward","deleteWordBackward","deleteWordForward","formatBackColor","formatBold","formatFontColor","formatFontName","formatIndent","formatItalic","formatJustifyCenter","formatJustifyFull","formatJustifyLeft","formatJustifyRight","formatOutdent","formatRemove","formatSetBlockTextDirection","formatSetInlineTextDirection","formatStrikeThrough","formatSubscript","formatSuperscript","formatUnderline","historyRedo","inputControllerWillPerformRedo","historyUndo","inputControllerWillPerformUndo","insertCompositionText","insertFromComposition","insertFromDrop","insertFromPaste","insertFromYank","insertLink","insertOrderedList","insertParagraph","insertReplacementText","insertTranspose","insertUnorderedList","staticRange","undoable","commands","do","undos","AttachmentEditorController","title","trixAction","didClickToolbar","didClickActionButton","textarea","placeholder","textareaClone","tabIndex","autoresize","scrollHeight","didInputCaption","didKeyDownCaption","didChangeCaption","didBlurCaption","editingFigcaption","editCaption","install","makeElementMutable","addToolbar","installCaptionEditor","uninstall","savePendingCaption","didUninstallAttachmentEditor","pendingCaption","attachmentEditorDidRequestUpdatingAttributesForAttachment","attachmentEditorDidRequestRemovingAttributeForAttachment","action","attachmentEditorDidRequestRemovalOfAttachment","attachmentEditorDidRequestDeselectingAttachment","CompositionController","didFocus","didBlur","didClickAttachment","documentView","focused","compositionControllerDidFocus","blurPromise","compositionControllerDidBlur","findAttachmentForElement","compositionControllerDidSelectAttachment","getSerializableElement","isEditingAttachment","canSyncDocumentView","compositionControllerWillSyncDocumentView","compositionControllerDidSyncDocumentView","compositionControllerDidRender","rerenderViewForObject","refreshViewCache","attachmentEditor","installAttachmentEditorForAttachment","uninstallAttachmentEditor","compositionControllerWillUpdateAttachment","compositionControllerDidRequestRemovalOfAttachment","compositionControllerDidRequestDeselectingAttachment","attributeButtonSelector","actionButtonSelector","toolbarButtonSelector","dialogSelector","activeDialogSelector","dialogButtonSelector","dialogInputSelector","getInputForDialog","getAttributeName","getActionName","getDialogName","ToolbarController","didClickAttributeButton","didClickDialogButton","didKeyDownDialogInput","actions","resetDialogInputs","toolbarDidClickButton","actionName","getDialog","toggleDialog","toolbarDidInvokeAction","toolbarDidToggleAttribute","refreshAttributeButtons","dialogElement","method","dialog","hideDialog","updateActions","refreshActionButtons","eachActionButton","disabled","updateAttributes","eachAttributeButton","dialogIsVisible","applyKeyboardCommand","keyString","button","buttonKeys","buttonKeyString","dialogName","showDialog","toolbarWillShowDialog","disabledInput","toolbarDidShowDialog","willValidate","checkValidity","toolbarDidUpdateAttribute","toolbarDidRemoveAttribute","toolbarDidHideDialog","snapshotsAreEqual","EditorController","editorElement","compositionController","toolbarController","toolbarElement","editor","notifyEditorElement","handlingInput","updateCurrentActions","pasting","pastedRange","attachmentLocationRange","loadingSnapshot","isFocused","requestedLocationRange","compositionRevisionWhenLocationRangeRequested","renderedCompositionRevision","runEditorFilters","isFocusedInvisibly","requestedRender","recordTypingUndoEntry","recordFormattingUndoEntry","locationRangeBeforeDrag","invokeAction","selectionFrozen","canInvokeAction","actionIsExternal","getCurrentActions","currentActions","updateInputElement","setInputElementValue","message","documentChangedSinceLastRender","notify","getUndoContext","getLocationContext","getTimeContext","Date","getTime","ownerDocument","TrixToolbarElement","connectedCallback","customElements","define","autofocus","makeEditable","configureContentEditable","disableObjectResizing","setDefaultParagraphSeparator","queryCommandSupported","execCommand","addAccessibilityRole","ensureAriaLabel","texts","labels","label","contains","cursorTargetStyles","TrixEditorElement","toolbarId","inputElement","inputId","nextElementSibling","editorController","defaultValue","registerResetListener","registerClickListener","disconnectedCallback","unregisterResetListener","unregisterClickListener","resetListener","resetBubbled","clickListener","clickBubbled","this","getEditorElement","getToolbarElement","getEditorController","getEditor","getComposition","assert","QUnit","expectedLocationRange","actualLocationRange","deepEqual","expectedRange","actualRange","textIndex","documentHTMLEqual","trixDocument","equal","TEST_IMAGE_URL","fixtureTemplates","editorDefaultAriaLabel","editorEmpty","editorHtml","editorInTable","editorWithBlockStyles","editorWithBoldStyles","editorWithImage","editorWithLabels","editorWithStyledContent","editorWithToolbarAndInput","editorsWithForms","createDocument","part","cursorTargetLeft","cursorTargetRight","blockComment","removeWhitespace","fixtures","serializedHTML","attrs","serializedFigure","stringText","textAttrs","progress","content","eachFixture","details","setFixtureHTML","insertAdjacentElement","ready","testGroup","setup","teardown","template","beforeEach","afterEach","module","hooks","doneAsync","async","done","expectedDocumentValue","testIf","condition","skip","TestCompositionDelegate","TestSelectionManager","preserveSelection","setLocationRangeFromPoint","after","delay","factory","root","amd","exports","rangy","OBJECT","FUNCTION","UNDEFINED","domRangeProperties","domRangeMethods","textRangeProperties","textRangeMethods","isHostMethod","p","t","isHostObject","isHostProperty","createMultiplePropertyTest","testFunc","props","i","areHostMethods","areHostObjects","areHostProperties","isTextRange","getElementsByTagName","arr","func","len","modules","isBrowser","util","api","initialized","supported","features","alertOnFail","alertOnWarn","preferTextRange","autoInitialize","rangyAutoInitialize","consoleLog","msg","console","alertOrLog","shouldAlert","alert","fail","reason","warn","hasOwnProperty","obj","deep","createOptions","optionsParam","defaults","arrayLike","e","addListener","eventType","listener","attachEvent","initListeners","getErrorDesc","ex","init","testRange","implementsDomRange","implementsTextRange","nodeName","errorMessage","moduleName","Module","deprecationNotice","deprecated","replacement","createAliasForDeprecatedMethod","owner","addInitListener","shimListeners","addShimListener","shim","win","createMissingNativeApi","dependencies","initializer","requiredModuleNames","requiredModule","createError","createModule","initFunc","newModule","stack","createCoreModule","RangePrototype","rangePrototype","SelectionPrototype","selectionPrototype","UNDEF","textNode","arrayContains","val","isHtmlNamespace","ns","namespaceURI","parent","getNodeIndex","getNodeLength","getCommonAncestor","node1","node2","n","isAncestorOf","ancestor","descendant","selfIsAncestor","isOrIsAncestorOf","getClosestAncestorIn","isCharacterDataNode","isTextOrCommentNode","insertAfter","precedingNode","splitDataNode","positionsToPreserve","newNode","deleteData","getWindow","defaultView","parentWindow","getIframeDocument","iframeEl","contentDocument","contentWindow","getIframeWindow","isWindow","getContentDocument","methodName","getRootContainer","comparePoints","nodeA","offsetA","nodeB","offsetB","nodeC","childA","childB","crashyTextNodes","isBrokenNode","inspectNode","idAttr","fragmentFromNodeChildren","child","getComputedStyleProperty","propName","currentStyle","createTestElement","contentEditable","bodyFirstChild","NodeIterator","_next","_current","hasNext","next","detach","createIterator","DomPosition","equals","pos","DOMException","codeName","INDEX_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","INVALID_NODE_TYPE_ERR","dom","isNonTextPartiallySelected","getRangeDocument","getRangeRoot","getBoundaryBeforeNode","getBoundaryAfterNode","insertNodeAtPosition","firstNodeInserted","rangesIntersect","rangeA","rangeB","touchingIsIntersecting","assertRangeValid","startComparison","endComparison","cloneSubtree","iterator","partiallySelected","frag","subIterator","isPartiallySelectedSubtree","getSubtreeIterator","iterateSubtree","rangeIterator","iteratorState","it","subRangeIterator","deleteSubtree","extractSubtree","getNodesInRange","nodeTypes","filterNodeTypes","regex","filterExists","RangeIterator","sc","ec","getName","clonePartiallySelectedTextNodes","so","eo","commonAncestorContainer","isSingleCharacterDataNode","_first","_last","current","subRange","cloneRange","collapse","Range","updateBoundaries","beforeAfterNodeTypes","rootContainerNodeTypes","readonlyNodeTypes","insertableNodeTypes","surroundNodeTypes","createAncestorFinder","getDocumentOrFragmentContainer","getReadonlyAncestor","getDocTypeNotationEntityAncestor","assertNoDocTypeNotationEntityAncestor","allowSelf","assertValidNodeType","invalidTypes","assertValidOffset","assertSameDocumentOrFragment","assertNodeNotReadOnly","assertNode","isValidOffset","isRangeValid","styleEl","htmlParsingConforms","createContextualFragment","fragmentStr","splitRangeBoundaries","startEndSame","setStartAndEnd","rangeToHtml","cloneContents","rangeProperties","s2s","s2e","e2e","e2s","n_b","n_a","n_b_a","n_i","compareBoundaryPoints","how","prefixA","prefixB","insertNode","setStartBefore","clone","canSurroundContents","boundariesInvalid","surroundContents","extractContents","hasChildNodes","selectNode","prop","textParts","compareNode","nodeIndex","comparePoint","toHtml","intersectsNode","isPointInRange","intersectsRange","intersectsOrTouchesRange","intersection","intersectionRange","union","unionRange","containsNode","allowPartial","containsNodeContents","containsRange","containsNodeText","nodeRange","textNodes","lastTextNode","collapseBefore","setEndBefore","collapseAfter","setStartAfter","getBookmark","containerNode","preSelectionRange","selectNodeContents","moveToBookmark","bookmark","charIndex","nodeStack","foundStart","nextCharIndex","rangesEqual","isValid","copyComparisonConstantsToObject","START_TO_START","START_TO_END","END_TO_END","END_TO_START","NODE_BEFORE","NODE_AFTER","NODE_BEFORE_AND_AFTER","NODE_INSIDE","copyComparisonConstants","createRangeContentRemover","remover","boundaryUpdater","boundary","returnValue","createPrototypeRange","createBeforeAfterNodeSetter","isBefore","isStart","setRangeStart","setRangeEnd","F","setBoundary","setEndAfter","deleteContents","splitBoundaries","splitBoundariesPreservingPositions","normalizeBoundaries","mergeForward","sibling","appendData","mergeBackward","insertData","normalizeStart","endNode","startNode","collapseToPoint","updateCollapsedAndCommonAncestor","r1","r2","DomRange","WrappedRange","WrappedTextRange","rangeProto","updateRangeProperties","nativeRange","updateNativeRange","startMoved","endMoved","nativeRangeDifferent","testTextNode","oppositeName","range2","createNativeRange","getTextRangeContainerElement","parentEl","duplicate","startEl","endEl","startEndContainer","textRangeIsCollapsed","compareEndPoints","getTextRangeBoundaryPosition","wholeRangeContainerElement","isCollapsed","startInfo","workingRange","canHaveHTML","boundaryPosition","nodeInfo","workingNode","comparison","workingComparisonType","previousNode","boundaryNode","childNodeCount","moveToElementText","setEndPoint","tempRange","rangeLength","moveStart","createBoundaryTextRange","boundaryParent","boundaryOffset","nodeIsDataNode","startBoundary","rangeContainerElement","rangeToTextRange","startRange","endRange","toTextRange","globalObj","f","createRangyRange","checkSelectionRanges","BOOLEAN","NUMBER","getNativeSelection","CONTROL","isDirectionBackward","WrappedSelection","getWinSelection","winParam","getDocSelection","winSelectionIsBackward","sel","backward","anchorNode","anchorOffset","focusNode","focusOffset","implementsWinGetSelection","implementsDocSelection","useDocumentSelection","isSelectionValid","nativeSel","testSelection","selectionHasAnchorAndFocus","selectionHasExtend","selectionHasRangeCount","selectionSupportsMultipleRanges","collapsedNonEditableSelectionsSupported","addRangeBackwardToNative","nativeSelection","getNativeRange","originalSelectionRangeCount","selectionHasMultipleRanges","originalSelectionRanges","originalSelectionBackward","testEl","chromeMatch","appVersion","implementsControlRange","testControlRange","createControlRange","updateAnchorAndFocusFromRange","anchorPrefix","focusPrefix","updateAnchorAndFocusFromNativeSelection","updateEmptySelection","_ranges","rangeContainsSingleElement","rangeNodes","getSingleElementFromRange","updateFromTextRange","wrappedRange","updateControlSelection","docSelection","controlRange","addRangeToControlSelection","rangeElement","newControlRange","getSelectionRangeAt","deleteProperties","detached","cachedRangySelections","actOnCachedSelection","cached","docSel","selProto","createControlSelection","addRangeBackward","previousRangeCount","clonedNativeRange","selectionIsBackward","setRanges","empty","refreshSelection","checkForChanges","oldRanges","oldAnchorNode","oldAnchorOffset","removeRangeManually","getAllRanges","removeRange","isBackward","isBackwards","rangeTexts","assertNodeInSameDocument","setSingleRange","collapseToStart","collapseToEnd","selectAllChildren","deleteFromDocument","eachRange","callMethodOnEachRange","params","results","createStartOrEndSetter","changeEachRange","rangeBookmarks","selRanges","rangeBookmark","saveRanges","restoreRanges","rangeHtmls","getNativeTextRange","rangeInspects","anchor","detachAll","Selection","docReady","loadHandler","readyState","require$$0","CHARACTER","WORD","spacesRegex","spacesMinusLineBreaksRegex","allWhiteSpaceRegex","nonLineBreakWhiteSpaceRegex","lineBreakRegex","defaultLanguage","trailingSpaceInBlockCollapses","trailingSpaceBeforeBrCollapses","trailingSpaceBeforeBlockCollapses","trailingSpaceBeforeLineBreakInPreLineCollapses","defaultTokenizer","chars","wordOptions","word","tokenRanges","createTokenRange","isWord","lastWordEnd","wordStart","wordEnd","wordRegex","exec","includeTrailingSpace","convertCharRangeToToken","tokenRange","tokenChars","token","tokenize","tokenizer","tokens","defaultCharacterOptions","includeBlockContentTrailingSpace","includeSpaceBeforeBr","includeSpaceBeforeBlock","includePreLineTrailingSpace","ignoreCharacters","normalizeIgnoredCharacters","ignoredCharacters","ignoredChars","ignoredCharsArray","char1","char2","defaultCaretCharacterOptions","defaultWordOptions","defaultFindOptions","caseSensitive","withinRange","wholeWordsOnly","wrap","characterOptions","defaultMoveOptions","defaultExpandOptions","trimStart","trimEnd","defaultWordIteratorOptions","createWordOptions","language","createNestedOptions","tableCssDisplayBlock","table","defaultDisplayValueForTag","colgroup","col","thead","tbody","tfoot","tr","td","th","getComputedDisplay","isHidden","getAncestorsAndSelf","isVisibilityHiddenTextNode","isBlockNode","getLastDescendantOrSelf","containsPositions","getAncestors","nextNodeDescendants","excludeChildren","previous","isWhitespaceNode","computedWhiteSpace","isCollapsedWhitespaceNode","isCollapsedNode","isIgnoredNode","Cache","store","set","cachedCount","uncachedCount","createCachingGetter","objProperty","NodeWrapper","session","positions","nodeProto","Position","EMPTY","NON_SPACE","UNCOLLAPSIBLE_SPACE","COLLAPSIBLE_SPACE","TRAILING_SPACE_BEFORE_BLOCK","TRAILING_SPACE_IN_BLOCK","TRAILING_SPACE_BEFORE_BR","PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK","TRAILING_LINE_BREAK_AFTER_BR","INCLUDED_TRAILING_LINE_BREAK_AFTER_BR","isWhitespace","isCollapsedWhitespace","isIgnored","getTextNodeInfo","spaceRegex","collapseSpaces","cssWhitespace","preLine","hasInnerText","posAfterEl","firstPosInEl","endPos","prepopulateChar","isDefinitelyNonEmpty","previousVisible","nextVisible","isRenderedBlock","brs","getTrailingSpace","getNodeWrapper","getLeadingSpace","nodeWrapper","inspectPosition","positionProto","characterType","isBr","prepopulatedChar","visibleChar","charType","finalizedChar","textChar","nodePassed","checkForTrailingSpace","checkForLeadingSpace","isCharInvariant","resolveLeadingAndTrailingSpaces","trailingSpace","isTrailingSpace","leadingSpace","isLeadingSpace","getPrecedingUncollapsedPosition","getCharacter","thisChar","returnChar","isIgnoredCharacter","cacheKey","cachedChar","collapsible","nextPos","previousPos","gotPreviousPos","getPreviousPos","nextUncollapsed","nextOffset","previousOffset","newPos","currentSession","Session","createWrapperCache","nodeProperty","wrappersByProperty","wrapper","uniqueIDSupported","initCaches","elementCache","elementsCache","uniqueID","elWrapper","textNodeCache","otherNodeCache","wrapperCache","getRangeBoundaryPosition","startSession","endSession","getSession","createCharacterIterator","startPos","finished","charPos","previousTextPos","returnPreviousTextPos","rewind","dispose","arrayIndexOf","createTokenizedTextProvider","forwardIterator","backwardIterator","consumeWord","forward","newChars","passedWordBoundary","insideWord","forwardChars","backwardChars","forwardTokensBuffer","backwardTokensBuffer","inspectBuffer","buffer","textPositions","nextEndToken","lastToken","previousStartToken","movePositionBy","unit","count","unitsMoved","currentPos","charIterator","absCount","abs","tokenizedTextProvider","createRangeCharacterIterator","itStart","itEnd","getRangeCharacters","isWholeWord","expand","findTextFromPosition","initialPos","searchTerm","isRegex","searchScopeRange","findOptions","currentChar","matchStartIndex","matchEndIndex","insideRegexMatch","handleMatch","valid","createEntryPointFunction","sessionRunning","createRangeBoundaryMover","moveOptions","boundaryIsStart","moveResult","createRangeTrimmer","trimCharCount","trimmed","moveEnd","move","startTrimmed","endTrimmed","expandOptions","moved","startTokenizedTextProvider","startToken","newStartPos","endToken","newEndPos","endTokenizedTextProvider","selectCharacters","toCharacterRange","rangeStartsBeforeNode","rangeBetween","findText","searchTermParam","wrappedAround","findResult","pasteHtml","createSelectionTrimmer","saveCharacterRanges","rangeInfos","characterRange","restoreCharacterRanges","saved","rangeInfo","innerText","createWordIterator","iteratorOptions","noMutation","createPosition","keyCodes","moveCursor","getCursorCoordinates","expandSelection","collapseSelection","selectAll","deleteSelection","px","py","rect","isIE","triggerInputEvent","pasteContent","createFile","typeCharacters","typeNextCharacter","pressKey","typeCharacterInElement","capitalize","simulateKeypress","startComposition","updateComposition","endComposition","clickElement","dragToCoordinates","coordinates","format","dragstartData","dropData","mouseDownOnElementAndMove","distance","getElementCoordinates","destination","dragSpeed","drag","insertCharacter","getBoundingClientRect","insertImageAttachment","createImageAttachment","replaceDocument","clickToolbarButton","getToolbarButton","typeToolbarKeyCommand","trixKey","clickToolbarDialogButton","isToolbarButtonActive","isToolbarButtonDisabled","typeInToolbarDialog","getToolbarDialog","isToolbarDialogActive","hidepassed","testTimeout","insertAdjacentHTML","previewableTypes","nonPreviewableTypes","createAttachment","ok","notOk","previewable","blockA","blockB","consolidatedBlock","createDocumentWithAttachment","aDoc","bDoc","parsedDocument","cases","expectedHTML","entries","getOrigin","pattern","finalHTML","unsanitized","foregroundColor","withTextAttributeConfig","color","originalConfig","hostname","port","identifier","assertions","assertion","path","findContainer","expectedLocation","actualLocation","mapper","describe","summaries","observerTest","change","getCaptionElement","withPreviewCaptionConfig","ORC","expectDocument","createImageAttachments","num","img","getFigure","closeButton","captionElement","clientHeight","testOptions","cancelingInCapturingPhase","cancelingAtTarget","eventPhase","Event","CAPTURING_PHASE","AT_TARGET","removeCharacters","initializeEventCount","eventCount","afterChangeEvent","edit","elementA","elementB","eventCountA","eventCountB","focusEventCount","blurEventCount","hasFocus","notEqual","expectedDocument","pressCommandBackspace","replaceText","replaceElementWithText","getElementWithText","originalElement","clonedElement","recordInputEvent","inputEvents","stopImmediatePropagation","performInputTypeUsingExecCommand","createDataTransfer","origin","pasteEvent","canvas","toBlob","defineProperty","param","inputEvent","pressShiftReturn","br","boldElement","extraBR","commentNode","pasteData","first","second","third"],"mappings":"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"}